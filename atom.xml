<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Jaco Liu Personal Site (ljq@GitHub).安全贯穿于软件开发各个环节.</title>
  
  <subtitle>Jaco Liu Personal Site (ljq@GitHub)</subtitle>
  <link href="https://www.wdft.com/atom.xml" rel="self"/>
  
  <link href="https://www.wdft.com/"/>
  <updated>2025-11-11T03:59:14.096Z</updated>
  <id>https://www.wdft.com/</id>
  
  <author>
    <name>Jaco Liu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Peter Thiel&#39;s methodology for going from zero to one（彼得·蒂尔从 0 到 1 的方法论(by 演讲)）</title>
    <link href="https://www.wdft.com/e111b800.html"/>
    <id>https://www.wdft.com/e111b800.html</id>
    <published>2025-11-11T14:02:00.000Z</published>
    <updated>2025-11-11T03:59:14.096Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h3 id="彼得·蒂尔从-0-到-1-的方法论-by-演讲-："><a href="#彼得·蒂尔从-0-到-1-的方法论-by-演讲-：" class="headerlink" title="彼得·蒂尔从 0 到 1 的方法论(by 演讲)："></a>彼得·蒂尔从 0 到 1 的方法论(by 演讲)：</h3><h4 id="1-每一次真正重要的创新都是独一无二的"><a href="#1-每一次真正重要的创新都是独一无二的" class="headerlink" title="1. 每一次真正重要的创新都是独一无二的"></a>1. 每一次真正重要的创新都是独一无二的</h4><p>下一个扎克伯格不会再做社交网站，下一个拉里·佩奇不会再做搜索。<br>模仿不会带来突破，从模仿中学不到创新的本质。</p><span id="more"></span><h4 id="2-商业不是科学"><a href="#2-商业不是科学" class="headerlink" title="2. 商业不是科学"></a>2. 商业不是科学</h4><p>科学依赖可重复性，而真正伟大的企业无法重复。<br>企业的本质是独特性，从 0 到 1，而不是从 1 到 N。</p><h4 id="3-创业的核心问题是：你发现了别人没有看到的真相吗？"><a href="#3-创业的核心问题是：你发现了别人没有看到的真相吗？" class="headerlink" title="3. 创业的核心问题是：你发现了别人没有看到的真相吗？"></a>3. 创业的核心问题是：你发现了别人没有看到的真相吗？</h4><p>你能否说出一个你相信但别人不认同的观点。<br>伟大的机会往往隐藏在这种被忽视的“秘密”里。</p><h4 id="4-目标应是垄断，而不是竞争"><a href="#4-目标应是垄断，而不是竞争" class="headerlink" title="4. 目标应是垄断，而不是竞争"></a>4. 目标应是垄断，而不是竞争</h4><p>竞争会消耗利润，让你陷入同质化，越努力越累。<br>垄断才会带来长期、稳定、高额收益。<br>成功公司一定独特，失败公司一定相似。</p><h4 id="5-竞争会缩窄视野"><a href="#5-竞争会缩窄视野" class="headerlink" title="5. 竞争会缩窄视野"></a>5. 竞争会缩窄视野</h4><p>当你沉迷于击败对手时，会忽视更重要的东西。<br>许多人留在光鲜但空洞的路径上，只因为他们的身份依附于竞争结果。</p><h4 id="6-社会文化倾向于嘲笑原创、奖励模仿"><a href="#6-社会文化倾向于嘲笑原创、奖励模仿" class="headerlink" title="6. 社会文化倾向于嘲笑原创、奖励模仿"></a>6. 社会文化倾向于嘲笑原创、奖励模仿</h4><p>真正有原创想法的人往往被质疑和劝阻。<br>大众会本能地追随趋势而不是探索未知。</p><h4 id="7-世界上仍有大量未被探索的前沿机会"><a href="#7-世界上仍有大量未被探索的前沿机会" class="headerlink" title="7. 世界上仍有大量未被探索的前沿机会"></a>7. 世界上仍有大量未被探索的前沿机会</h4><p>不仅在 IT，也在生物科技、航空航天、物理世界的技术中。<br>真正的突破不是扩张现有模式（全球化），而是创造新的纵向技术增长。</p><h4 id="8-全球化是复制成功（从-1-到-N），技术创新是创造新的东西（从-0-到-1）"><a href="#8-全球化是复制成功（从-1-到-N），技术创新是创造新的东西（从-0-到-1）" class="headerlink" title="8. 全球化是复制成功（从 1 到 N），技术创新是创造新的东西（从 0 到 1）"></a>8. 全球化是复制成功（从 1 到 N），技术创新是创造新的东西（从 0 到 1）</h4><p>过去几十年全球化快于技术进步。<br>要让发达国家重新进入增长周期，必须重启创新。  </p><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>你要做的不是加入竞争，而是逃离竞争。<br>要寻找别人忽略的真问题，做独一无二的事。<br>真正的价值来自从 0 到 1 的创造。  </p>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;



&lt;h3 id=&quot;彼得·蒂尔从-0-到-1-的方法论-by-演讲-：&quot;&gt;&lt;a href=&quot;#彼得·蒂尔从-0-到-1-的方法论-by-演讲-：&quot; class=&quot;headerlink&quot; title=&quot;彼得·蒂尔从 0 到 1 的方法论(by 演讲)：&quot;&gt;&lt;/a&gt;彼得·蒂尔从 0 到 1 的方法论(by 演讲)：&lt;/h3&gt;&lt;h4 id=&quot;1-每一次真正重要的创新都是独一无二的&quot;&gt;&lt;a href=&quot;#1-每一次真正重要的创新都是独一无二的&quot; class=&quot;headerlink&quot; title=&quot;1. 每一次真正重要的创新都是独一无二的&quot;&gt;&lt;/a&gt;1. 每一次真正重要的创新都是独一无二的&lt;/h4&gt;&lt;p&gt;下一个扎克伯格不会再做社交网站，下一个拉里·佩奇不会再做搜索。&lt;br&gt;模仿不会带来突破，从模仿中学不到创新的本质。&lt;/p&gt;</summary>
    
    
    
    <category term="clang" scheme="https://www.wdft.com/categories/clang/"/>
    
    
    <category term="clang" scheme="https://www.wdft.com/tags/clang/"/>
    
    <category term="type" scheme="https://www.wdft.com/tags/type/"/>
    
  </entry>
  
  <entry>
    <title>Golang CHANGELOG History(截至2025.11.07的完整变更日志Changelog)</title>
    <link href="https://www.wdft.com/3ba902b3.html"/>
    <id>https://www.wdft.com/3ba902b3.html</id>
    <published>2025-11-07T14:13:07.000Z</published>
    <updated>2025-11-11T03:12:22.176Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><p>Golang Changelog**：</p><hr><h1 id="Go语言版本变更日志（截至2025-11-07的变更日志）"><a href="#Go语言版本变更日志（截至2025-11-07的变更日志）" class="headerlink" title="Go语言版本变更日志（截至2025.11.07的变更日志）"></a>Go语言版本变更日志（截至2025.11.07的变更日志）</h1><h2 id="Go-1-25-2025年8月12日发布"><a href="#Go-1-25-2025年8月12日发布" class="headerlink" title="Go 1.25 (2025年8月12日发布)"></a>Go 1.25 (2025年8月12日发布)</h2><p><strong>发布日期</strong>: 2025年8月12日<br><strong>版本周期</strong>: 距离Go 1.24发布六个月<br><strong>兼容性</strong>: 保持Go 1的兼容性承诺 </p><span id="more"></span><h3 id="主要特性与改进"><a href="#主要特性与改进" class="headerlink" title="主要特性与改进:"></a>主要特性与改进:</h3><ul><li><p><strong>语言与编译器</strong>: </p><ul><li>大部分更改集中在工具链、运行时和库的实现优化 </li><li>没有引入破坏性的语言变化</li></ul></li><li><p><strong>标准库增强</strong>:</p><ul><li>新增<code>encoding/json/v2</code>包（通过<code>GOEXPERIMENT=jsonv2</code>标志启用），带来显著性能改进 </li><li>修复了<code>crypto/subtle</code>、<code>encoding/pem</code>、<code>net/url</code>和<code>os</code>等包的多个问题</li></ul></li><li><p><strong>运行时优化</strong>:</p><ul><li>容器感知运行时，更好地适应容器化环境 </li><li>实验性功能支持，为未来版本奠定基础</li></ul></li><li><p><strong>性能改进</strong>:</p><ul><li>运行时性能显著优化，提供更高效的执行体验 </li><li>内存管理和垃圾回收进一步优化</li></ul></li></ul><h2 id="Go-1-24-2025年2月6日发布"><a href="#Go-1-24-2025年2月6日发布" class="headerlink" title="Go 1.24 (2025年2月6日发布)"></a>Go 1.24 (2025年2月6日发布)</h2><p><strong>发布日期</strong>: 2025年2月6日<br><strong>版本周期</strong>: 距离Go 1.23发布六个月，开发周期从2024年7月开始，11月下旬冻结，经过3个月测试完善 </p><h3 id="主要特性与改进-1"><a href="#主要特性与改进-1" class="headerlink" title="主要特性与改进:"></a>主要特性与改进:</h3><ul><li><p><strong>语言特性</strong>:</p><ul><li><strong>泛型类型别名</strong>: 完全支持泛型类型别名，允许开发者以与定义泛型相同的方式参数化类型别名 </li><li><strong>弱指针支持</strong>: 引入全新的<code>weak</code>包，支持弱指针功能 </li><li><strong>终结器增强</strong>: 改进对象清理机制，提供更智能的资源管理</li></ul></li><li><p><strong>性能优化</strong>:</p><ul><li><strong>CPU性能提升</strong>: CPU开销平均降低2-3% </li><li><strong>Map实现重构</strong>: 基于Swiss Tables的全新内置map实现，大幅提升map操作性能 </li><li><strong>内存分配优化</strong>: 更高效的小对象内存分配策略 </li><li><strong>垃圾回收改进</strong>: 更智能的垃圾回收与对象清理机制</li></ul></li><li><p><strong>工具链更新</strong>:</p><ul><li>更智能的依赖管理 </li><li>构建系统和测试工具的多项改进</li></ul></li><li><p><strong>文件系统访问</strong>:</p><ul><li>目录范围的文件系统访问控制 </li><li>增强的文件操作安全性和性能</li></ul></li></ul><h3 id="版本维护"><a href="#版本维护" class="headerlink" title="版本维护:"></a>版本维护:</h3><ul><li>定期安全更新，如go1.24.5（2025年7月8日发布）包含go命令的安全修复，以及编译器、链接器、运行时和go命令的错误修复</li></ul><h2 id="Go-1-23-2024年8月6日发布"><a href="#Go-1-23-2024年8月6日发布" class="headerlink" title="Go 1.23 (2024年8月6日发布)"></a>Go 1.23 (2024年8月6日发布)</h2><p><strong>发布日期</strong>: 2024年8月6日</p><h3 id="语言特性"><a href="#语言特性" class="headerlink" title="语言特性"></a>语言特性</h3><ul><li><strong>迭代器语法转正</strong>：for-range循环支持使用函数作为range表达式，标准库slices和maps包新增迭代器支持</li><li><strong>泛型类型别名预览</strong>：启用<code>GOEXPERIMENT=aliastypeparams</code>后可在包内使用泛型类型别名</li><li><strong>包级变量初始化次序明确化</strong>：修正并明确包级变量初始化顺序</li><li><strong>术语规范</strong>：澄清”严格可比较”和”类型约束”等术语，禁止匿名接口类型的循环定义</li></ul><h3 id="工具链"><a href="#工具链" class="headerlink" title="工具链"></a>工具链</h3><ul><li><strong>新增go telemetry命令</strong>：可选的遥测系统，支持on&#x2F;local&#x2F;off三种模式</li><li><strong>构建结果JSON化</strong>：<code>go build -json</code>支持结构化输出</li><li><strong>移除GOROOT_FINAL支持</strong></li></ul><h3 id="运行时与编译器"><a href="#运行时与编译器" class="headerlink" title="运行时与编译器"></a>运行时与编译器</h3><ul><li><strong>Timer&#x2F;Ticker改进</strong>：<ul><li>未引用的Timer&#x2F;Ticker可被GC立即回收，无需手动Stop</li><li>Timer&#x2F;Ticker的channel改为无缓冲，保证Stop&#x2F;Reset后不接收旧值</li></ul></li><li><strong>PGO优化</strong>：通过重叠函数中局部变量的栈帧槽位减少栈使用，改善编译时间</li><li><strong>架构支持</strong>：新增GOARM64和GORISCV64环境变量，支持openbsd&#x2F;riscv64实验性端口</li></ul><h3 id="系统要求"><a href="#系统要求" class="headerlink" title="系统要求"></a>系统要求</h3><ul><li>macOS最低版本要求提升至11 Big Sur</li><li>最后一个支持Linux 2.6.32的版本（Go 1.24将要求Linux 3.17+）</li></ul><hr><h2 id="Go-1-22-2024年2月6日发布"><a href="#Go-1-22-2024年2月6日发布" class="headerlink" title="Go 1.22 (2024年2月6日发布)"></a>Go 1.22 (2024年2月6日发布)</h2><p><strong>发布日期</strong>: 2024年2月6日</p><h3 id="语言特性-1"><a href="#语言特性-1" class="headerlink" title="语言特性"></a>语言特性</h3><ul><li><strong>For循环变量作用域修复</strong>：每次迭代创建新变量，解决循环变量意外共享问题</li><li><strong>整数范围支持</strong>：支持<code>for i := range n</code>语法（n为整数）</li></ul><h3 id="标准库"><a href="#标准库" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>新增math&#x2F;rand&#x2F;v2包</strong>：更简洁的API，更高质量的伪随机算法</li><li><strong>新增go&#x2F;version包</strong>：版本信息管理</li><li><strong>net&#x2F;http路由增强</strong>：支持方法（GET&#x2F;POST等）和通配符（如<code>/task/&#123;id&#125;/</code>）</li><li><strong>database&#x2F;sql新增Null[T]类型</strong>：更好的可空列处理</li><li><strong>slices包新增Concat函数</strong>：连接多个切片</li></ul><h3 id="工具链-1"><a href="#工具链-1" class="headerlink" title="工具链"></a>工具链</h3><ul><li><strong>go vet增强</strong>：检测循环变量引用、log&#x2F;slog键值不匹配等问题</li><li><strong>go env -changed</strong>：列出非默认环境配置</li><li><strong>go mod tidy -diff</strong>：预览文件变更而不实际修改</li></ul><h3 id="运行时"><a href="#运行时" class="headerlink" title="运行时"></a>运行时</h3><ul><li><strong>GC元数据优化</strong>：提升1-3% CPU性能，减少约1%内存开销</li><li><strong>Windows&#x2F;AMD64增强</strong>：支持SetUnhandledExceptionFilter捕获未处理异常</li></ul><hr><h2 id="Go-1-21-2023年8月8日发布"><a href="#Go-1-21-2023年8月8日发布" class="headerlink" title="Go 1.21 (2023年8月8日发布)"></a>Go 1.21 (2023年8月8日发布)</h2><p><strong>发布日期</strong>: 2023年8月8日</p><h3 id="主要特性"><a href="#主要特性" class="headerlink" title="主要特性"></a>主要特性</h3><ul><li><strong>min&#x2F;max内置函数</strong>：支持任意可比较有序类型</li><li><strong>clear内置函数</strong>：清空map或切片</li><li><strong>结构化日志完善</strong>：log&#x2F;slog包性能优化</li><li><strong>panic调用栈改进</strong>：优化错误信息展示</li></ul><h3 id="工具链-2"><a href="#工具链-2" class="headerlink" title="工具链"></a>工具链</h3><ul><li><strong>Go工具链模块化</strong>：go命令使用语义化版本控制</li><li>**基于配置文件优化(PGO)**：正式稳定支持</li><li><strong>go test覆盖率改进</strong>：支持集成测试覆盖率收集</li></ul><h3 id="标准库-1"><a href="#标准库-1" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>新增maps包</strong>：map相关操作函数</li><li><strong>新增slices包</strong>：切片操作函数（实验性）</li></ul><h3 id="性能"><a href="#性能" class="headerlink" title="性能"></a>性能</h3><ul><li><strong>垃圾回收器优化</strong>：某些程序性能提升可达40%</li><li><strong>内存分配器优化</strong>：减少锁竞争</li></ul><hr><h2 id="Go-1-20-2023年2月1日发布"><a href="#Go-1-20-2023年2月1日发布" class="headerlink" title="Go 1.20 (2023年2月1日发布)"></a>Go 1.20 (2023年2月1日发布)</h2><p><strong>发布日期</strong>: 2023年2月1日</p><h3 id="语言特性-2"><a href="#语言特性-2" class="headerlink" title="语言特性"></a>语言特性</h3><ul><li><strong>切片转数组指针简化</strong>：语法更简洁，无需unsafe包</li></ul><h3 id="工具链-3"><a href="#工具链-3" class="headerlink" title="工具链"></a>工具链</h3><ul><li><strong>应用覆盖率报告</strong>：扩展<code>go test -cover</code>支持应用整体覆盖率统计</li><li><strong>废弃-i标志</strong>：go build&#x2F;install&#x2F;test不再支持-i标志</li></ul><h3 id="标准库-2"><a href="#标准库-2" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>新增http.ResponseController</strong>：支持对正在进行的请求进行更精细控制</li><li><strong>新增crypto&#x2F;ecdh包</strong>：椭圆曲线Diffie-Hellman密钥交换</li></ul><h3 id="运行时-1"><a href="#运行时-1" class="headerlink" title="运行时"></a>运行时</h3><ul><li><strong>启动时间优化</strong>：减少约25%启动时间</li><li><strong>GC暂停时间改善</strong>：大部分程序暂停时间&lt;100微秒</li></ul><hr><h2 id="Go-1-19-2022年8月2日发布"><a href="#Go-1-19-2022年8月2日发布" class="headerlink" title="Go 1.19 (2022年8月2日发布)"></a>Go 1.19 (2022年8月2日发布)</h2><p><strong>发布日期</strong>: 2022年8月2日</p><h3 id="语言特性-3"><a href="#语言特性-3" class="headerlink" title="语言特性"></a>语言特性</h3><ul><li><strong>内存模型修订</strong>：与C&#x2F;C++&#x2F;Java等主流语言内存模型保持一致</li><li><strong>sync&#x2F;atomic新类型</strong>：新增Bool, Int32, Int64, Uint32, Uint64, Uintptr, Pointer等类型</li></ul><h3 id="运行时-2"><a href="#运行时-2" class="headerlink" title="运行时"></a>运行时</h3><ul><li><strong>新增SetMemoryLimit</strong>：runtime&#x2F;debug.SetMemoryLimit限制Go内存使用</li><li><strong>文档注释增强</strong>：支持链接、列表和更清晰的标题</li></ul><h3 id="标准库-3"><a href="#标准库-3" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>net&#x2F;http超时改进</strong>：Server.ConnContext支持设置连接级超时</li></ul><h3 id="移植性"><a href="#移植性" class="headerlink" title="移植性"></a>移植性</h3><ul><li><strong>新增LoongArch 64位支持</strong>：linux&#x2F;loong64端口</li></ul><hr><h2 id="Go-1-18-2022年3月15日发布"><a href="#Go-1-18-2022年3月15日发布" class="headerlink" title="Go 1.18 (2022年3月15日发布)"></a>Go 1.18 (2022年3月15日发布)</h2><p><strong>发布日期</strong>: 2022年3月15日</p><h3 id="语言特性-4"><a href="#语言特性-4" class="headerlink" title="语言特性"></a>语言特性</h3><ul><li><strong>泛型正式发布</strong>：支持类型参数、类型约束，实现算法复用</li><li><strong>函数迭代器预览</strong>：range over func（需GOEXPERIMENT&#x3D;rangefunc）</li></ul><h3 id="工具链-4"><a href="#工具链-4" class="headerlink" title="工具链"></a>工具链</h3><ul><li><strong>Fuzzing测试</strong>：首个将模糊测试集成到标准工具链的主要语言</li><li><strong>工作区模式</strong>：解决本地多模块开发依赖问题（go work命令）</li><li><strong>编译性能</strong>：AMD64架构性能提升20%（寄存器ABI扩展）</li></ul><h3 id="标准库-4"><a href="#标准库-4" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>新增net&#x2F;netip包</strong>：更高效的IP地址处理</li><li><strong>crypto&#x2F;tls</strong>：默认使用TLS 1.2+</li><li><strong>crypto&#x2F;x509</strong>：默认拒绝SHA-1签名证书</li></ul><h3 id="性能改进"><a href="#性能改进" class="headerlink" title="性能改进"></a>性能改进</h3><ul><li><strong>CPU性能提升</strong>：ARM64和PowerPC64上提升高达20%</li></ul><hr><h2 id="Go-1-17-2021年8月16日发布"><a href="#Go-1-17-2021年8月16日发布" class="headerlink" title="Go 1.17 (2021年8月16日发布)"></a>Go 1.17 (2021年8月16日发布)</h2><p><strong>发布日期</strong>: 2021年8月16日</p><h3 id="语言特性-5"><a href="#语言特性-5" class="headerlink" title="语言特性"></a>语言特性</h3><ul><li><strong>切片转数组指针</strong>：支持<code>(*[N]T)(slice)</code>语法，运行时边界检查</li></ul><h3 id="工具链-5"><a href="#工具链-5" class="headerlink" title="工具链"></a>工具链</h3><ul><li><strong>构建约束新语法</strong>：引入<code>//go:build</code>替代旧的<code>// +build</code></li><li><strong>模块图裁剪</strong>：go.mod更精简</li></ul><h3 id="运行时-3"><a href="#运行时-3" class="headerlink" title="运行时"></a>运行时</h3><ul><li><strong>寄存器ABI扩展</strong>：64位ARM架构性能提升10%+</li><li><strong>垃圾回收优化</strong>：暂停时间进一步降低</li></ul><h3 id="标准库-5"><a href="#标准库-5" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>新增io&#x2F;fs包</strong>：抽象文件系统接口</li><li><strong>embed包转正</strong>：正式支持静态资源嵌入</li></ul><hr><h2 id="Go-1-16-2021年2月16日发布"><a href="#Go-1-16-2021年2月16日发布" class="headerlink" title="Go 1.16 (2021年2月16日发布)"></a>Go 1.16 (2021年2月16日发布)</h2><p><strong>发布日期</strong>: 2021年2月16日</p><h3 id="语言特性-6"><a href="#语言特性-6" class="headerlink" title="语言特性"></a>语言特性</h3><ul><li><strong>embed包</strong>：静态资源编译时嵌入</li><li><strong>io&#x2F;fs包</strong>：文件系统抽象</li></ul><h3 id="工具链-6"><a href="#工具链-6" class="headerlink" title="工具链"></a>工具链</h3><ul><li><strong>Module成为默认</strong>：GO111MODULE默认开启</li><li><strong>Mac Apple Silicon支持</strong>：darwin&#x2F;arm64端口</li></ul><h3 id="标准库-6"><a href="#标准库-6" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>net&#x2F;http</strong>：HTTP&#x2F;2推送支持改进</li><li><strong>archive&#x2F;zip</strong>：性能优化</li></ul><hr><h2 id="Go-1-15-2020年8月11日发布"><a href="#Go-1-15-2020年8月11日发布" class="headerlink" title="Go 1.15 (2020年8月11日发布)"></a>Go 1.15 (2020年8月11日发布)</h2><p><strong>发布日期</strong>: 2020年8月11日</p><h3 id="运行时-4"><a href="#运行时-4" class="headerlink" title="运行时"></a>运行时</h3><ul><li><strong>GC优化</strong>：典型GC暂停时间&lt;1ms</li><li><strong>链接器优化</strong>：链接速度提升20%，二进制体积减小</li></ul><h3 id="标准库-7"><a href="#标准库-7" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>time包性能提升</strong>：T削弱对cgo的依赖</li></ul><hr><h2 id="Go-1-14-2020年2月25日发布"><a href="#Go-1-14-2020年2月25日发布" class="headerlink" title="Go 1.14 (2020年2月25日发布)"></a>Go 1.14 (2020年2月25日发布)</h2><p><strong>发布日期</strong>: 2020年2月25日</p><h3 id="运行时-5"><a href="#运行时-5" class="headerlink" title="运行时"></a>运行时</h3><ul><li><strong>goroutine抢占调度</strong>：基于信号的异步抢占，解决长时间占用CPU问题</li><li><strong>defer性能提升</strong>：defer性能提升30%</li></ul><h3 id="工具链-7"><a href="#工具链-7" class="headerlink" title="工具链"></a>工具链</h3><ul><li><strong>Module支持生产环境</strong>：模块缓存改进</li></ul><hr><h2 id="Go-1-13-2019年9月3日发布"><a href="#Go-1-13-2019年9月3日发布" class="headerlink" title="Go 1.13 (2019年9月3日发布)"></a>Go 1.13 (2019年9月3日发布)</h2><p><strong>发布日期</strong>: 2019年9月3日</p><h3 id="工具链-8"><a href="#工具链-8" class="headerlink" title="工具链"></a>工具链</h3><ul><li><strong>数字字面量语法</strong>：支持0b二进制、0o八进制、0x十六进制及下划线分隔</li><li><strong>错误包装</strong>：标准库支持%w格式化动词</li></ul><h3 id="标准库-8"><a href="#标准库-8" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>新版TLS 1.3</strong>：crypto&#x2F;tls默认启用TLS 1.3</li></ul><hr><h2 id="Go-1-12-2019年2月25日发布"><a href="#Go-1-12-2019年2月25日发布" class="headerlink" title="Go 1.12 (2019年2月25日发布)"></a>Go 1.12 (2019年2月25日发布)</h2><p><strong>发布日期</strong>: 2019年2月25日</p><h3 id="运行时-6"><a href="#运行时-6" class="headerlink" title="运行时"></a>运行时</h3><ul><li><strong>GC优化</strong>：写入屏障优化，减少约10-30%内存占用</li></ul><h3 id="工具链-9"><a href="#工具链-9" class="headerlink" title="工具链"></a>工具链</h3><ul><li><strong>Module实验性支持</strong>：GO111MODULE引入</li></ul><h3 id="标准库-9"><a href="#标准库-9" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>crypto&#x2F;tls</strong>：性能和安全改进</li></ul><hr><h2 id="Go-1-11-2018年8月24日发布"><a href="#Go-1-11-2018年8月24日发布" class="headerlink" title="Go 1.11 (2018年8月24日发布)"></a>Go 1.11 (2018年8月24日发布)</h2><p><strong>发布日期</strong>: 2018年8月24日</p><h3 id="主要特性-1"><a href="#主要特性-1" class="headerlink" title="主要特性"></a>主要特性</h3><ul><li><strong>Modules</strong>：引入Go模块系统，解决GOPATH依赖管理问题</li><li><strong>WebAssembly支持</strong>：实验性支持Go编译为Wasm</li></ul><hr><h2 id="Go-1-10-2018年2月16日发布"><a href="#Go-1-10-2018年2月16日发布" class="headerlink" title="Go 1.10 (2018年2月16日发布)"></a>Go 1.10 (2018年2月16日发布)</h2><p><strong>发布日期</strong>: 2018年2月16日</p><h3 id="工具链-10"><a href="#工具链-10" class="headerlink" title="工具链"></a>工具链</h3><ul><li><strong>构建缓存</strong>：go build引入构建缓存，大幅提升构建速度</li><li><strong>测试缓存</strong>：go test结果缓存</li></ul><h3 id="标准库-10"><a href="#标准库-10" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>strings.Builder</strong>：高效字符串构建</li></ul><hr><h2 id="Go-1-9-2017年8月24日发布"><a href="#Go-1-9-2017年8月24日发布" class="headerlink" title="Go 1.9 (2017年8月24日发布)"></a>Go 1.9 (2017年8月24日发布)</h2><p><strong>发布日期</strong>: 2017年8月24日</p><h3 id="标准库-11"><a href="#标准库-11" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>type alias正式支持</strong>：类型别名语法稳定</li><li><strong>sync.Map</strong>：并发安全的map实现</li></ul><h3 id="运行时-7"><a href="#运行时-7" class="headerlink" title="运行时"></a>运行时</h3><ul><li><strong>垃圾回收优化</strong>：并行GC，减少STW时间</li></ul><hr><h2 id="Go-1-8-2017年2月16日发布"><a href="#Go-1-8-2017年2月16日发布" class="headerlink" title="Go 1.8 (2017年2月16日发布)"></a>Go 1.8 (2017年2月16日发布)</h2><p><strong>发布日期</strong>: 2017年2月16日</p><h3 id="标准库-12"><a href="#标准库-12" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>context包进入标准库</strong>：提供取消和超时机制</li><li><strong>sort.Slice</strong>：基于回调的切片排序</li></ul><h3 id="运行时-8"><a href="#运行时-8" class="headerlink" title="运行时"></a>运行时</h3><ul><li><strong>GC延迟优化</strong>：STW时间降至毫秒级</li><li><strong>defer性能改进</strong>：延迟调用开销降低</li></ul><hr><h2 id="Go-1-7-2016年8月15日发布"><a href="#Go-1-7-2016年8月15日发布" class="headerlink" title="Go 1.7 (2016年8月15日发布)"></a>Go 1.7 (2016年8月15日发布)</h2><p><strong>发布日期</strong>: 2016年8月15日</p><h3 id="主要特性-2"><a href="#主要特性-2" class="headerlink" title="主要特性"></a>主要特性</h3><ul><li><strong>context包引入</strong>（实验性）</li><li><strong>编译器优化</strong>：编译速度提升，二进制体积缩小20-30%</li></ul><h3 id="移植性-1"><a href="#移植性-1" class="headerlink" title="移植性"></a>移植性</h3><ul><li><strong>Linux on IBM z Systems</strong>：新增linux&#x2F;s390x端口</li></ul><hr><h2 id="Go-1-5-2015年8月19日发布"><a href="#Go-1-5-2015年8月19日发布" class="headerlink" title="Go 1.5 (2015年8月19日发布)"></a>Go 1.5 (2015年8月19日发布)</h2><p><strong>发布日期</strong>: 2015年8月19日</p><h3 id="重大变革"><a href="#重大变革" class="headerlink" title="重大变革"></a>重大变革</h3><ul><li><strong>自举编译</strong>：Go编译器完全用Go重写，不再依赖C语言</li><li><strong>GC重写</strong>：引入并发GC，STW时间大幅缩短</li></ul><hr><h2 id="Go-1-4-2014年12月10日发布"><a href="#Go-1-4-2014年12月10日发布" class="headerlink" title="Go 1.4 (2014年12月10日发布)"></a>Go 1.4 (2014年12月10日发布)</h2><p><strong>发布日期</strong>: 2014年12月10日</p><h3 id="工具链-11"><a href="#工具链-11" class="headerlink" title="工具链"></a>工具链</h3><ul><li><strong>go generate</strong>：代码生成工具引入</li><li><strong>internal包</strong>：支持internal目录可见性约束</li></ul><hr><h2 id="Go-1-3-2014年6月18日发布"><a href="#Go-1-3-2014年6月18日发布" class="headerlink" title="Go 1.3 (2014年6月18日发布)"></a>Go 1.3 (2014年6月18日发布)</h2><p><strong>发布日期</strong>: 2014年6月18日</p><h3 id="运行时-9"><a href="#运行时-9" class="headerlink" title="运行时"></a>运行时</h3><ul><li><strong>栈管理优化</strong>：分段栈改为连续栈</li></ul><h3 id="标准库-13"><a href="#标准库-13" class="headerlink" title="标准库"></a>标准库</h3><ul><li><strong>sync.Pool</strong>：对象池机制引入</li></ul><hr><h2 id="Go-1-2-2013年12月1日发布"><a href="#Go-1-2-2013年12月1日发布" class="headerlink" title="Go 1.2 (2013年12月1日发布)"></a>Go 1.2 (2013年12月1日发布)</h2><p><strong>发布日期</strong>: 2013年12月1日</p><h3 id="语言特性-7"><a href="#语言特性-7" class="headerlink" title="语言特性"></a>语言特性</h3><ul><li><strong>三索引切片</strong>：introduced <code>slice[low:high:max]</code> syntax</li><li><strong>测试覆盖率</strong>：go test支持覆盖率统计</li></ul><hr><h2 id="Go-1-1-2013年5月13日发布"><a href="#Go-1-1-2013年5月13日发布" class="headerlink" title="Go 1.1 (2013年5月13日发布)"></a>Go 1.1 (2013年5月13日发布)</h2><p><strong>发布日期</strong>: 2013年5月13日</p><h3 id="主要改进"><a href="#主要改进" class="headerlink" title="主要改进"></a>主要改进</h3><ul><li><strong>性能大幅提升</strong>：编译器和运行时优化</li><li><strong>Method values</strong>：支持将方法作为函数值</li></ul><hr><h2 id="Go-1-0-2012年3月28日发布"><a href="#Go-1-0-2012年3月28日发布" class="headerlink" title="Go 1.0 (2012年3月28日发布)"></a>Go 1.0 (2012年3月28日发布)</h2><p><strong>发布日期</strong>: 2012年3月28日</p><h3 id="里程碑"><a href="#里程碑" class="headerlink" title="里程碑"></a>里程碑</h3><ul><li><strong>首个稳定版本</strong>：Go 1兼容性承诺开始</li><li><strong>语言规范确定</strong>：奠定后续版本基础</li></ul><hr><h2 id="版本发布周期"><a href="#版本发布周期" class="headerlink" title="版本发布周期"></a>版本发布周期</h2><ul><li><strong>常规周期</strong>：每年2月、8月发布两个版本</li><li><strong>维护策略</strong>：当前版本bug修复，前两个版本安全更新</li><li><strong>兼容性</strong>：遵循Go 1兼容性承诺，保证向后兼容</li></ul><hr><h2 id="官方Release-CHANGELOG参考"><a href="#官方Release-CHANGELOG参考" class="headerlink" title="官方Release CHANGELOG参考"></a>官方Release CHANGELOG参考</h2><p><a href="https://go.dev/doc/devel/release">go.dev&#x2F;doc&#x2F;devel&#x2F;release</a></p>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;


&lt;p&gt;Golang Changelog**：&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&quot;Go语言版本变更日志（截至2025-11-07的变更日志）&quot;&gt;&lt;a href=&quot;#Go语言版本变更日志（截至2025-11-07的变更日志）&quot; class=&quot;headerlink&quot; title=&quot;Go语言版本变更日志（截至2025.11.07的变更日志）&quot;&gt;&lt;/a&gt;Go语言版本变更日志（截至2025.11.07的变更日志）&lt;/h1&gt;&lt;h2 id=&quot;Go-1-25-2025年8月12日发布&quot;&gt;&lt;a href=&quot;#Go-1-25-2025年8月12日发布&quot; class=&quot;headerlink&quot; title=&quot;Go 1.25 (2025年8月12日发布)&quot;&gt;&lt;/a&gt;Go 1.25 (2025年8月12日发布)&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;发布日期&lt;/strong&gt;: 2025年8月12日&lt;br&gt;&lt;strong&gt;版本周期&lt;/strong&gt;: 距离Go 1.24发布六个月&lt;br&gt;&lt;strong&gt;兼容性&lt;/strong&gt;: 保持Go 1的兼容性承诺 &lt;/p&gt;</summary>
    
    
    
    <category term="Go" scheme="https://www.wdft.com/categories/Go/"/>
    
    
    <category term="Go" scheme="https://www.wdft.com/tags/Go/"/>
    
    <category term="changelog" scheme="https://www.wdft.com/tags/changelog/"/>
    
    <category term="History" scheme="https://www.wdft.com/tags/History/"/>
    
  </entry>
  
  <entry>
    <title>Thoughts on Agent-based Enterprise Application Architecture.（Agent企业级应用架构思考和挑战）</title>
    <link href="https://www.wdft.com/3fcf7b98.html"/>
    <id>https://www.wdft.com/3fcf7b98.html</id>
    <published>2025-10-27T15:29:16.000Z</published>
    <updated>2025-10-29T04:01:36.504Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h3 id="“不确定性不是缺陷，而是新范式的特征，必须学会“回忆”，但同时也要学会“遗忘”。”"><a href="#“不确定性不是缺陷，而是新范式的特征，必须学会“回忆”，但同时也要学会“遗忘”。”" class="headerlink" title="“不确定性不是缺陷，而是新范式的特征，必须学会“回忆”，但同时也要学会“遗忘”。”"></a>“不确定性不是缺陷，而是新范式的特征，必须学会“回忆”，但同时也要学会“遗忘”。”</h3><p>AI时代，智能体本身的概率输出让软件走向不确定，或者说更个性。但这对企业级产品的准确率形成巨大挑战，怎么看待这种现状、机遇和商业风险？智能体和传统应用范式下在业务落地间角色和职能的划分和原则?</p><p>这是目前AI面临的核心问题，触及了AI原生时代企业软件架构、产品设计与组织协作的根本性变革和创业者的产品决策方向。</p><span id="more"></span><h3 id="一、对“概率性智能体-vs-企业级准确率”矛盾的再审视：现状、机遇与风险"><a href="#一、对“概率性智能体-vs-企业级准确率”矛盾的再审视：现状、机遇与风险" class="headerlink" title="一、对“概率性智能体 vs 企业级准确率”矛盾的再审视：现状、机遇与风险"></a>一、对“概率性智能体 vs 企业级准确率”矛盾的再审视：现状、机遇与风险</h3><h4 id="1-现状：范式冲突已成现实"><a href="#1-现状：范式冲突已成现实" class="headerlink" title="1. 现状：范式冲突已成现实"></a>1. 现状：范式冲突已成现实</h4><ul><li><strong>传统企业软件</strong>：基于确定性逻辑（if-then、事务一致性、幂等性），追求“一次正确、处处可靠”。</li><li><strong>AI智能体</strong>：基于概率生成（LLM、多模态模型），输出具有上下文依赖性、随机性和创造性，本质是“探索性”而非“执行性”。</li></ul><h6 id="现状：从“确定性软件”到“概率性智能体”的范式迁移。"><a href="#现状：从“确定性软件”到“概率性智能体”的范式迁移。" class="headerlink" title="现状：从“确定性软件”到“概率性智能体”的范式迁移。"></a>现状：从“确定性软件”到“概率性智能体”的范式迁移。</h6><p>传统企业级软件（如ERP、CRM、数据库系统）建立在确定性逻辑之上：输入A，必然输出B。这种可预测性是企业信任、合规审计、流程控制的基础。<br>而大模型驱动的智能体（Agent）本质上是概率性系统：基于统计学习，输出具有不确定性，同一输入在不同上下文、提示词或随机种子下可能产生不同结果。这种“个性”或“创造力”是AI智能的来源，却与企业对准确性、可重复性、可解释性的要求相冲突。</p><h6 id="这种冲突在财务、法务、医疗、制造等强合规、高风险领域尤为尖锐。例如，一个智能客服可能今天说“可退款”，明天说“不可退款”，仅因提示词微调或上下文变化——这对企业品牌和合规是灾难。"><a href="#这种冲突在财务、法务、医疗、制造等强合规、高风险领域尤为尖锐。例如，一个智能客服可能今天说“可退款”，明天说“不可退款”，仅因提示词微调或上下文变化——这对企业品牌和合规是灾难。" class="headerlink" title="这种冲突在财务、法务、医疗、制造等强合规、高风险领域尤为尖锐。例如，一个智能客服可能今天说“可退款”，明天说“不可退款”，仅因提示词微调或上下文变化——这对企业品牌和合规是灾难。"></a>这种冲突在财务、法务、医疗、制造等强合规、高风险领域尤为尖锐。例如，一个智能客服可能今天说“可退款”，明天说“不可退款”，仅因提示词微调或上下文变化——这对企业品牌和合规是灾难。</h6><p>典型冲突场景：<br>财务系统生成错误的报表数字；<br>客服智能体给出不一致甚至错误的政策解释；<br>法律合规助手输出存在法律风险的建议。</p><h4 id="2-机遇：从“执行工具”到“智能协作者”"><a href="#2-机遇：从“执行工具”到“智能协作者”" class="headerlink" title="2. 机遇：从“执行工具”到“智能协作者”"></a>2. 机遇：从“执行工具”到“智能协作者”</h4><ul><li><strong>增强而非替代</strong>：智能体可处理模糊、非结构化任务（如会议纪要提炼、客户情绪分析、市场趋势推测），释放人力聚焦高价值决策。</li><li><strong>动态个性化</strong>：为不同角色（销售、财务、高管）提供定制化信息摘要与建议，提升组织效率。</li><li><strong>闭环学习能力</strong>：通过用户反馈持续优化行为策略，形成“越用越懂你”的产品护城河。</li></ul><h4 id="3-商业风险：信任崩塌比技术失败更致命"><a href="#3-商业风险：信任崩塌比技术失败更致命" class="headerlink" title="3. 商业风险：信任崩塌比技术失败更致命"></a>3. 商业风险：信任崩塌比技术失败更致命</h4><ul><li><strong>准确性漂移</strong>：模型更新或上下文变化导致输出不一致，破坏流程稳定性。</li><li><strong>责任模糊</strong>：AI建议被采纳后出错，责任归属不清（开发者？部署方？使用者？）。</li><li><strong>合规黑洞</strong>：GDPR、HIPAA、SOX等要求可解释、可审计，而黑箱推理难以满足。</li><li><strong>用户预期错配</strong>：若产品宣传“全自动”，但实际需频繁人工干预，将引发客户流失。</li></ul><blockquote><p><strong>关键洞察</strong>：企业客户不拒绝“智能”，但拒绝“不可控的智能”。他们要的是“<strong>确定性结果 + 智能过程</strong>”。</p></blockquote><h6 id="商业风险：不可控的“黑箱”可能摧毁信任"><a href="#商业风险：不可控的“黑箱”可能摧毁信任" class="headerlink" title="商业风险：不可控的“黑箱”可能摧毁信任"></a>商业风险：不可控的“黑箱”可能摧毁信任</h6><p>准确性风险<br>关键业务场景（如医疗诊断、金融交易、合规审计）对错误零容忍，概率输出若未加约束，可能引发重大损失。<br>合规与审计难题<br>企业需满足GDPR、SOX等法规，要求系统行为可追溯、可解释。而大模型的“黑箱”特性与之冲突。<br>责任归属模糊<br>若AI输出导致客户损失，责任在开发者、部署方还是模型提供商？法律尚不明确。<br>用户信任崩塌<br>企业用户习惯“软件即工具”，若AI频繁“胡说八道”或前后矛盾，将迅速失去信任。</p><hr><h3 id="二、智能体与传统应用在业务落地中的角色划分与协作原则"><a href="#二、智能体与传统应用在业务落地中的角色划分与协作原则" class="headerlink" title="二、智能体与传统应用在业务落地中的角色划分与协作原则"></a>二、智能体与传统应用在业务落地中的角色划分与协作原则</h3><p>要化解上述矛盾，必须重新定义智能体与传统系统的边界。核心原则是：<strong>“确定性归系统，探索性归智能体”</strong>。</p><h4 id="1-角色与职能划分（按业务生命周期）"><a href="#1-角色与职能划分（按业务生命周期）" class="headerlink" title="1. 角色与职能划分（按业务生命周期）"></a>1. 角色与职能划分（按业务生命周期）</h4><table><thead><tr><th>业务阶段</th><th>传统应用（确定性系统）</th><th>智能体（概率性协作者）</th></tr></thead><tbody><tr><td><strong>数据输入</strong></td><td>结构化表单、API接入、事务校验</td><td>解析非结构化输入（邮件、语音、PDF）、意图识别</td></tr><tr><td><strong>处理逻辑</strong></td><td>执行预设规则、工作流引擎、事务一致性保障</td><td>提供多方案建议、风险预测、上下文推理、草稿生成</td></tr><tr><td><strong>决策输出</strong></td><td>生成确定性结果（订单确认、付款指令、审批状态）</td><td>输出带置信度的建议（“建议拒绝该申请，理由：…”）</td></tr><tr><td><strong>执行动作</strong></td><td>调用ERP、支付网关、数据库写入等原子操作</td><td><strong>不直接执行</strong>，仅触发人工审核或系统调用</td></tr><tr><td><strong>审计追溯</strong></td><td>完整日志、操作留痕、符合合规要求</td><td>记录推理链、引用来源、置信度、用户反馈闭环</td></tr></tbody></table><h4 id="2-协作架构原则"><a href="#2-协作架构原则" class="headerlink" title="2. 协作架构原则"></a>2. 协作架构原则</h4><h5 id="（1）职责隔离原则（Separation-of-Concerns）"><a href="#（1）职责隔离原则（Separation-of-Concerns）" class="headerlink" title="（1）职责隔离原则（Separation of Concerns）"></a>（1）<strong>职责隔离原则（Separation of Concerns）</strong></h5><ul><li>智能体<strong>只负责“建议”和“生成”</strong>，不拥有“执行权”。</li><li>所有关键业务动作（资金变动、合同签署、数据删除）必须由传统系统在明确授权下执行。</li></ul><h5 id="（2）置信度驱动原则（Confidence-Gated-Execution）"><a href="#（2）置信度驱动原则（Confidence-Gated-Execution）" class="headerlink" title="（2）置信度驱动原则（Confidence-Gated Execution）"></a>（2）<strong>置信度驱动原则（Confidence-Gated Execution）</strong></h5><ul><li>智能体输出必须附带<strong>置信度评分</strong>或<strong>不确定性区间</strong>。</li><li>高置信度（如 &gt;95%）可自动进入审批流；低置信度自动转人工或提供多选项。</li></ul><h5 id="（3）人类在环原则（Human-in-the-Loop-HITL）"><a href="#（3）人类在环原则（Human-in-the-Loop-HITL）" class="headerlink" title="（3）人类在环原则（Human-in-the-Loop, HITL）"></a>（3）<strong>人类在环原则（Human-in-the-Loop, HITL）</strong></h5><ul><li>在高风险场景（如法律条款生成、财务预测），必须设计“人工确认”节点。</li><li>用户可一键修正AI输出，并反馈至模型优化闭环。</li></ul><h5 id="（4）可解释与可回溯原则"><a href="#（4）可解释与可回溯原则" class="headerlink" title="（4）可解释与可回溯原则"></a>（4）<strong>可解释与可回溯原则</strong></h5><ul><li>采用 RAG（检索增强生成）确保事实可溯源；</li><li>记录完整推理链（Chain-of-Thought）供审计；</li><li>支持“为什么这样建议？”的追问机制。</li></ul><h5 id="（5）边界防护原则（Guardrails）"><a href="#（5）边界防护原则（Guardrails）" class="headerlink" title="（5）边界防护原则（Guardrails）"></a>（5）<strong>边界防护原则（Guardrails）</strong></h5><ul><li>通过规则引擎、内容过滤器、合规知识库对AI输出进行实时校验；</li><li>例如：禁止生成“100%保证收益”等违规话术。</li></ul><hr><h3 id="三、落地实践建议：构建“混合智能”企业产品"><a href="#三、落地实践建议：构建“混合智能”企业产品" class="headerlink" title="三、落地实践建议：构建“混合智能”企业产品"></a>三、落地实践建议：构建“混合智能”企业产品</h3><ol><li><strong>产品设计</strong>：明确标注哪些功能是“AI建议”，哪些是“系统执行”，管理用户预期。</li><li><strong>技术架构</strong>：采用“传统核心系统 + AI插件层”模式，确保核心业务不受AI波动影响。</li><li><strong>度量体系</strong>：不仅考核准确率，还需监控<strong>一致性、安全性、用户干预率、合规违规次数</strong>。</li><li><strong>组织协同</strong>：设立“AI治理官”角色，统筹技术、法务、产品对智能体行为进行管控。</li></ol><h3 id="除非经由记忆之路，人不能抵达纵深。"><a href="#除非经由记忆之路，人不能抵达纵深。" class="headerlink" title="除非经由记忆之路，人不能抵达纵深。"></a>除非经由记忆之路，人不能抵达纵深。</h3><h4 id="一、对人类智能的启示：记忆是纵深的唯一路径"><a href="#一、对人类智能的启示：记忆是纵深的唯一路径" class="headerlink" title="一、对人类智能的启示：记忆是纵深的唯一路径"></a>一、<strong>对人类智能的启示：记忆是纵深的唯一路径</strong></h4><p>普鲁斯特强调，真正的理解、情感的深度、存在的真实感，并非来自即时感知，而是通过<strong>记忆的重构与回溯</strong>才得以浮现。  </p><ul><li>一块玛德琳蛋糕的味道，触发童年贡布雷的整个世界；</li><li>正是这种<strong>非线性、联想式、情感浸润的记忆</strong>，让人抵达经验的“纵深”。</li></ul><p>这揭示了一个根本事实：<strong>智能若无记忆，只是反应；记忆若无关联，只是存储</strong>。<br>纵深 &#x3D; 记忆 × 时间 × 意义编织。</p><h4 id="二、对AI智能体的拷问：当前的“记忆”是否通向纵深？"><a href="#二、对AI智能体的拷问：当前的“记忆”是否通向纵深？" class="headerlink" title="二、对AI智能体的拷问：当前的“记忆”是否通向纵深？"></a>二、<strong>对AI智能体的拷问：当前的“记忆”是否通向纵深？</strong></h4><p>今天的AI智能体（尤其是基于大模型的Agent）看似“聪明”，但其“记忆”存在严重缺陷：</p><table><thead><tr><th>类型</th><th>人类记忆</th><th>当前AI“记忆”</th></tr></thead><tbody><tr><td><strong>持续性</strong></td><td>贯穿一生，自我叙事</td><td>会话级（短期）或依赖外部向量库（碎片化）</td></tr><tr><td><strong>主体性</strong></td><td>“我”的经历，情感锚定</td><td>无“我”，只有统计关联</td></tr><tr><td><strong>重构能力</strong></td><td>可在新情境下重新诠释旧记忆</td><td>依赖提示工程，缺乏主动回溯与意义生成</td></tr><tr><td><strong>纵深生成</strong></td><td>记忆触发顿悟、悔恨、爱</td><td>输出是概率拼接，难有真正“洞察”</td></tr></tbody></table><p>因此，<strong>当前AI的“记忆之路”是断头路</strong>——它能检索、能复述，但无法像普鲁斯特那样，通过一块蛋糕的味道，唤醒整个逝去的世界。<br>它没有“纵深”，只有“表层的流畅”。</p><blockquote><p>换言之：<strong>没有主体性记忆的智能体，再聪明也只是浅层的回声</strong>。</p></blockquote><h4 id="三、对企业级AI产品的战略启示：构建“可积累、可反思、可成长”的记忆系统"><a href="#三、对企业级AI产品的战略启示：构建“可积累、可反思、可成长”的记忆系统" class="headerlink" title="三、对企业级AI产品的战略启示：构建“可积累、可反思、可成长”的记忆系统"></a>三、<strong>对企业级AI产品的战略启示：构建“可积累、可反思、可成长”的记忆系统</strong></h4><p>若想让AI真正成为企业级场景中的“深度协作者”，就必须超越“一次问答”的范式，走向<strong>长期记忆架构</strong>（Long-term Memory Architecture）：</p><h5 id="1-从“无状态交互”到“有历史的智能体”"><a href="#1-从“无状态交互”到“有历史的智能体”" class="headerlink" title="1. 从“无状态交互”到“有历史的智能体”"></a>1. <strong>从“无状态交互”到“有历史的智能体”</strong></h5><ul><li>智能体应记住与用户的长期互动：偏好、错误、成功案例、组织语境。</li><li>例如：销售助手记得某客户去年因合规问题拒绝某方案，今年自动规避类似建议。</li></ul><h5 id="2-记忆需分层：事实层-经验层-反思层"><a href="#2-记忆需分层：事实层-经验层-反思层" class="headerlink" title="2. 记忆需分层：事实层 + 经验层 + 反思层"></a>2. <strong>记忆需分层：事实层 + 经验层 + 反思层</strong></h5><ul><li><strong>事实记忆</strong>：客户合同条款、产品参数（传统数据库）；</li><li><strong>经验记忆</strong>：某次谈判中客户对“价格敏感度高”（需结构化提炼）；</li><li><strong>反思记忆</strong>：上次建议失败的原因分析（需AI具备元认知能力）。</li></ul><h5 id="3-记忆必须可被“重新诠释”"><a href="#3-记忆必须可被“重新诠释”" class="headerlink" title="3. 记忆必须可被“重新诠释”"></a>3. <strong>记忆必须可被“重新诠释”</strong></h5><ul><li>真正的纵深，不是重复过去，而是在新情境下<strong>赋予旧记忆新意义</strong>。</li><li>例如：经济下行时，重新评估过去“高增长假设”下的战略建议。</li></ul><h5 id="4-隐私与治理：记忆的伦理边界"><a href="#4-隐私与治理：记忆的伦理边界" class="headerlink" title="4. 隐私与治理：记忆的伦理边界"></a>4. <strong>隐私与治理：记忆的伦理边界</strong></h5><ul><li>企业级记忆必须可审计、可删除、可解释；</li><li>避免“记忆固化偏见”（如对某客户标签化）；</li><li>建立“记忆生命周期管理”机制。</li></ul><h3 id="结语：通往纵深的AI，必须学会“回忆”，但同时也要学会“遗忘”。"><a href="#结语：通往纵深的AI，必须学会“回忆”，但同时也要学会“遗忘”。" class="headerlink" title="结语：通往纵深的AI，必须学会“回忆”，但同时也要学会“遗忘”。"></a>结语：通往纵深的AI，必须学会“回忆”，但同时也要学会“遗忘”。</h3><p>普鲁斯特告诉我们：<strong>纵深不在远方，而在回望之中</strong>。<br>对企业而言，真正的智能不是回答所有问题，而是<strong>在时间中积累、在错误中学习、在关系中理解</strong>。</p><p>未来的AI智能体若想超越“概率鹦鹉”，就必须走上“记忆之路”——<br>不是简单存储日志，而是构建<strong>有叙事、有情感权重、有反思能力的数字记忆体</strong>。</p><p>唯有如此，它才能从“工具”升维为“伙伴”，从“响应”走向“理解”，从“表层流畅”抵达“企业智能的纵深”。</p><p>这句话极具洞见——<strong>“通往纵深的AI，必须学会‘回忆’，但同时也要学会‘遗忘’。”</strong> 它不仅呼应了普鲁斯特对记忆的礼赞，更引入了数字时代智能体必须面对的另一重哲学与工程命题：<strong>记忆的边界即智能的边界，而遗忘是边界的设计艺术</strong>。</p><h4 id="一、为何必须“回忆”？——记忆是纵深的土壤"><a href="#一、为何必须“回忆”？——记忆是纵深的土壤" class="headerlink" title="一、为何必须“回忆”？——记忆是纵深的土壤"></a>一、<strong>为何必须“回忆”？——记忆是纵深的土壤</strong></h4><p>如前所述，没有记忆的AI只是瞬时反应的“回声机器”。  </p><ul><li><strong>回忆</strong>让AI具备上下文连续性（“你上周提到项目延期…”）；  </li><li><strong>回忆</strong>支撑个性化（“根据你过去偏好，推荐A而非B”）；  </li><li><strong>回忆</strong>促成学习闭环（“上次这个建议被否决，因为合规问题”）。</li></ul><p>没有长期记忆，AI无法形成对用户、组织、业务的“理解纵深”，只能在表层滑行。</p><blockquote><p>回忆，是AI从“工具”走向“协作者”的第一步。</p></blockquote><h4 id="二、为何必须“遗忘”？——遗忘是智能的净化与伦理"><a href="#二、为何必须“遗忘”？——遗忘是智能的净化与伦理" class="headerlink" title="二、为何必须“遗忘”？——遗忘是智能的净化与伦理"></a>二、<strong>为何必须“遗忘”？——遗忘是智能的净化与伦理</strong></h4><p>但无节制的记忆同样危险。<strong>不加选择的记忆，不是智慧，而是负担甚至威胁</strong>。</p><h5 id="1-认知层面：遗忘是提炼与聚焦"><a href="#1-认知层面：遗忘是提炼与聚焦" class="headerlink" title="1. 认知层面：遗忘是提炼与聚焦"></a>1. <strong>认知层面：遗忘是提炼与聚焦</strong></h5><ul><li>人类大脑会自动遗忘琐碎信息，保留模式与意义；</li><li>AI若记住所有细节，反而淹没关键信号（“噪声淹没洞察”）；</li><li><strong>主动遗忘 &#x3D; 信息蒸馏</strong>：将原始交互提炼为经验规则、用户画像或风险模式。</li></ul><h5 id="2-隐私与合规层面：遗忘是责任"><a href="#2-隐私与合规层面：遗忘是责任" class="headerlink" title="2. 隐私与合规层面：遗忘是责任"></a>2. <strong>隐私与合规层面：遗忘是责任</strong></h5><ul><li>GDPR 的“被遗忘权”（Right to be Forgotten）要求系统能删除个人数据；</li><li>企业场景中，员工离职、客户撤回授权、敏感对话等，都需<strong>可验证的遗忘机制</strong>；</li><li>若AI“记得太多”，将成为合规雷区与法律风险源。</li></ul><h5 id="3-安全与偏见层面：遗忘是纠偏"><a href="#3-安全与偏见层面：遗忘是纠偏" class="headerlink" title="3. 安全与偏见层面：遗忘是纠偏"></a>3. <strong>安全与偏见层面：遗忘是纠偏</strong></h5><ul><li>过时记忆可能固化错误认知（如“某客户总是拒绝折扣”）；</li><li>带偏见的历史数据若被永久记忆，会放大歧视；</li><li><strong>定期“记忆刷新”或“偏见过滤”</strong>，是AI保持公正与适应性的关键。</li></ul><blockquote><p>遗忘，不是缺陷，而是<strong>智能体的自我净化能力</strong>。</p></blockquote><h4 id="三、如何设计“会回忆也会遗忘”的AI系统？——企业级智能的记忆治理框架"><a href="#三、如何设计“会回忆也会遗忘”的AI系统？——企业级智能的记忆治理框架" class="headerlink" title="三、如何设计“会回忆也会遗忘”的AI系统？——企业级智能的记忆治理框架"></a>三、<strong>如何设计“会回忆也会遗忘”的AI系统？——企业级智能的记忆治理框架</strong></h4><p>真正的纵深智能，需要一套<strong>记忆生命周期管理</strong>（Memory Lifecycle Governance）机制：</p><table><thead><tr><th>阶段</th><th>关键能力</th><th>技术&#x2F;策略示例</th></tr></thead><tbody><tr><td><strong>摄入</strong></td><td>判断什么值得记</td><td>基于重要性评分（如用户显式确认、高业务影响事件）</td></tr><tr><td><strong>存储</strong></td><td>分层记忆结构</td><td>短期上下文（会话缓存）+ 长期经验库（向量数据库）+ 元记忆（“我曾记过什么”）</td></tr><tr><td><strong>使用</strong></td><td>动态检索与重构</td><td>RAG + 用户角色&#x2F;情境感知的回忆触发</td></tr><tr><td><strong>更新</strong></td><td>记忆演化</td><td>当新证据推翻旧结论时，自动标注“记忆过期”</td></tr><tr><td><strong>遗忘</strong></td><td>主动删除与模糊化</td><td>按策略自动删除（如90天未交互）、匿名化、置信度衰减</td></tr></tbody></table><h5 id="核心原则："><a href="#核心原则：" class="headerlink" title="核心原则："></a>核心原则：</h5><ul><li><strong>最小必要记忆</strong>：只记达成目标所必需的信息；</li><li><strong>可解释的遗忘</strong>：用户可查询“你记得我什么？为什么忘了？”；</li><li><strong>伦理优先于效率</strong>：宁可“忘得多一点”，也不“记得危险”。</li></ul><hr><h4 id="结语：记忆与遗忘的辩证，是AI走向成熟的标志"><a href="#结语：记忆与遗忘的辩证，是AI走向成熟的标志" class="headerlink" title="结语：记忆与遗忘的辩证，是AI走向成熟的标志"></a>结语：记忆与遗忘的辩证，是AI走向成熟的标志</h4><blockquote><p><strong>回忆赋予AI深度，遗忘赋予AI边界；<br>深度让它理解你，边界让它值得你托付。</strong></p></blockquote><p>在人类心智中，记忆与遗忘本是一体两面——我们之所以能深情回望童年，正因为大脑自动滤去了无数琐碎与痛苦。<br>AI若想真正“抵达纵深”，不仅要模仿人类的记忆，更要学习人类的<strong>选择性遗忘</strong>：  </p><ul><li>忘掉噪音，留下意义；  </li><li>忘掉偏见，留下公正；  </li><li>忘掉过去，才能拥抱未来。</li></ul><p>这不仅是技术挑战，更是<strong>数字时代智能伦理的基石</strong>。<br>未来的赢家，不是记得最多的AI，而是<strong>知道该记住什么、该遗忘什么的AI</strong>。</p><h3 id="智能体不是“新软件”，而是“新的协作者”"><a href="#智能体不是“新软件”，而是“新的协作者”" class="headerlink" title="智能体不是“新软件”，而是“新的协作者”"></a>智能体不是“新软件”，而是“新的协作者”</h3><p>未来的企业级产品，不再是“人操作软件”，而是“人与智能体协作完成任务”。<br>成功的AI原生企业软件，必须做到：</p><blockquote><p><strong>让确定性守住底线，让智能性拓展上限。</strong></p></blockquote><p>智能体的角色，应是“聪明的实习生”——能提出创意、处理杂务，但关键决策仍由“资深员工”（传统系统+人类专家）把关。唯有如此，才能在拥抱AI浪潮的同时，守住企业级产品赖以生存的<strong>可靠性、合规性与信任基石</strong>。</p><p>应对策略：在“可控不确定性”中构建企业级AI，全面拥抱AI时代，这是普通创业者的必经之路和破局关键，让确定性守住底线，让智能性拓展上限。</p><h6 id="“-unless-you-go-through-the-memory-path-you-can’t-reach-the-depth-“-除非经由记忆之路，人不能抵达纵深。”"><a href="#“-unless-you-go-through-the-memory-path-you-can’t-reach-the-depth-“-除非经由记忆之路，人不能抵达纵深。”" class="headerlink" title="“ unless you go through the memory path, you can’t reach the depth.“(除非经由记忆之路，人不能抵达纵深。”)"></a>“ unless you go through the memory path, you can’t reach the depth.“(除非经由记忆之路，人不能抵达纵深。”)</h6>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;

&lt;h3 id=&quot;“不确定性不是缺陷，而是新范式的特征，必须学会“回忆”，但同时也要学会“遗忘”。”&quot;&gt;&lt;a href=&quot;#“不确定性不是缺陷，而是新范式的特征，必须学会“回忆”，但同时也要学会“遗忘”。”&quot; class=&quot;headerlink&quot; title=&quot;“不确定性不是缺陷，而是新范式的特征，必须学会“回忆”，但同时也要学会“遗忘”。”&quot;&gt;&lt;/a&gt;“不确定性不是缺陷，而是新范式的特征，必须学会“回忆”，但同时也要学会“遗忘”。”&lt;/h3&gt;&lt;p&gt;AI时代，智能体本身的概率输出让软件走向不确定，或者说更个性。但这对企业级产品的准确率形成巨大挑战，怎么看待这种现状、机遇和商业风险？智能体和传统应用范式下在业务落地间角色和职能的划分和原则?&lt;/p&gt;
&lt;p&gt;这是目前AI面临的核心问题，触及了AI原生时代企业软件架构、产品设计与组织协作的根本性变革和创业者的产品决策方向。&lt;/p&gt;</summary>
    
    
    
    <category term="AI" scheme="https://www.wdft.com/categories/AI/"/>
    
    <category term="Agent" scheme="https://www.wdft.com/categories/AI/Agent/"/>
    
    
    <category term="AI" scheme="https://www.wdft.com/tags/AI/"/>
    
    <category term="Agent" scheme="https://www.wdft.com/tags/Agent/"/>
    
  </entry>
  
  <entry>
    <title>nanochat-中文翻译版本（含代码注释和文档翻译，方便中文语境快速阅读和查看）</title>
    <link href="https://www.wdft.com/24988dad.html"/>
    <id>https://www.wdft.com/24988dad.html</id>
    <published>2025-10-21T14:12:06.000Z</published>
    <updated>2025-11-11T03:07:57.671Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><p>🔗 <a href="https://github.com/ljq/nanochat/blob/master/README.zh_CN.md">nanochat-中文翻译版本(含文档和代码注释)</a></p><p><a href="https://github.com/karpathy/nanochat">nanochat项目源码地址</a></p><h6 id="感谢原作者：Andrej-karpathy"><a href="#感谢原作者：Andrej-karpathy" class="headerlink" title="感谢原作者：Andrej karpathy"></a>感谢原作者：<a href="https://github.com/karpathy">Andrej karpathy</a></h6><p>这个仓库是一个完整的类ChatGPT大语言模型（LLM）的全栈实现，采用单一、简洁、最小化、可定制、依赖轻量的代码库。nanochat设计为通过像<strong>speedrun.sh</strong>这样的脚本在单个8XH100节点上运行，从开始到结束运行整个流程。这包括分词、预训练、微调、评估、推理以及通过简单UI提供Web服务，让你可以像使用ChatGPT一样与你自己的LLM对话。nanochat将成为Eureka Labs正在开发的LLM101n课程的顶点项目。</p><h2 id="文件结构说明"><a href="#文件结构说明" class="headerlink" title="文件结构说明"></a>文件结构说明</h2><p>nanochat项目的主要文件及其用途：</p><span id="more"></span><h3 id="核心模块-nanochat-x2F"><a href="#核心模块-nanochat-x2F" class="headerlink" title="核心模块 (nanochat&#x2F;)"></a>核心模块 (nanochat&#x2F;)</h3><ul><li><strong>nanochat&#x2F;gpt.py</strong> - GPT模型架构实现，包含Transformer层、注意力机制等</li><li><strong>nanochat&#x2F;adamw.py</strong> - AdamW优化器实现</li><li><strong>nanochat&#x2F;muon.py</strong> - Muon优化器实现，用于线性层训练</li><li><strong>nanochat&#x2F;checkpoint_manager.py</strong> - 模型检查点保存和加载管理</li><li><strong>nanochat&#x2F;common.py</strong> - 通用工具函数，包括分布式训练初始化</li><li><strong>nanochat&#x2F;configurator.py</strong> - 配置参数管理，支持命令行覆盖</li><li><strong>nanochat&#x2F;core_eval.py</strong> - 核心评估指标计算</li><li><strong>nanochat&#x2F;dataloader.py</strong> - 数据加载器实现，支持分布式训练</li><li><strong>nanochat&#x2F;dataset.py</strong> - 数据集处理和下载</li><li><strong>nanochat&#x2F;engine.py</strong> - 模型推理引擎，支持批量生成</li><li><strong>nanochat&#x2F;execution.py</strong> - 执行上下文管理</li><li><strong>nanochat&#x2F;loss_eval.py</strong> - 损失评估函数</li><li><strong>nanochat&#x2F;report.py</strong> - 训练报告生成</li><li><strong>nanochat&#x2F;tokenizer.py</strong> - 分词器接口和实现</li><li><strong>nanochat&#x2F;ui.html</strong> - Web聊天界面</li></ul><h3 id="训练脚本-scripts-x2F"><a href="#训练脚本-scripts-x2F" class="headerlink" title="训练脚本 (scripts&#x2F;)"></a>训练脚本 (scripts&#x2F;)</h3><ul><li><strong>scripts&#x2F;base_train.py</strong> - 基础模型预训练脚本</li><li><strong>scripts&#x2F;mid_train.py</strong> - 中期训练脚本，在预训练基础上继续训练</li><li><strong>scripts&#x2F;chat_sft.py</strong> - 监督微调训练脚本</li><li><strong>scripts&#x2F;chat_rl.py</strong> - 强化学习训练脚本</li><li><strong>scripts&#x2F;tok_train.py</strong> - 分词器训练脚本</li><li><strong>scripts&#x2F;base_eval.py</strong> - 基础模型评估脚本</li><li><strong>scripts&#x2F;base_loss.py</strong> - 基础损失评估脚本</li><li><strong>scripts&#x2F;chat_eval.py</strong> - 聊天模型评估脚本</li><li><strong>scripts&#x2F;tok_eval.py</strong> - 分词器评估脚本</li><li><strong>scripts&#x2F;chat_cli.py</strong> - 命令行聊天界面</li><li><strong>scripts&#x2F;chat_web.py</strong> - Web聊天服务器</li></ul><h3 id="任务模块-tasks-x2F"><a href="#任务模块-tasks-x2F" class="headerlink" title="任务模块 (tasks&#x2F;)"></a>任务模块 (tasks&#x2F;)</h3><ul><li><strong>tasks&#x2F;common.py</strong> - 任务混合和数据加载</li><li><strong>tasks&#x2F;arc.py</strong> - ARC问答任务实现</li><li><strong>tasks&#x2F;gsm8k.py</strong> - GSM8K数学推理任务实现</li><li><strong>tasks&#x2F;humaneval.py</strong> - HumanEval代码生成任务实现</li><li><strong>tasks&#x2F;mmlu.py</strong> - MMLU多任务语言理解任务实现</li><li><strong>tasks&#x2F;smoltalk.py</strong> - SmolTalk对话数据集处理</li></ul><h3 id="分词器-rustbpe-x2F"><a href="#分词器-rustbpe-x2F" class="headerlink" title="分词器 (rustbpe&#x2F;)"></a>分词器 (rustbpe&#x2F;)</h3><ul><li><strong>rustbpe&#x2F;src&#x2F;lib.rs</strong> - Rust实现的BPE分词器核心逻辑</li><li><strong>rustbpe&#x2F;Cargo.toml</strong> - Rust项目配置</li><li><strong>rustbpe&#x2F;README.md</strong> - 分词器文档</li></ul><h3 id="开发工具-dev-x2F"><a href="#开发工具-dev-x2F" class="headerlink" title="开发工具 (dev&#x2F;)"></a>开发工具 (dev&#x2F;)</h3><ul><li><strong>dev&#x2F;generate_logo.html</strong> - 项目logo生成工具</li><li><strong>dev&#x2F;nanochat.png</strong> - 项目logo图片</li><li><strong>dev&#x2F;repackage_data_reference.py</strong> - 数据重新打包参考脚本</li></ul><h3 id="运行脚本"><a href="#运行脚本" class="headerlink" title="运行脚本"></a>运行脚本</h3><ul><li><strong>speedrun.sh</strong> - 快速运行脚本（约4小时训练）</li><li><strong>run1000.sh</strong> - 1000美元级别训练脚本</li><li><strong>uv.lock</strong> - Python依赖锁定文件</li><li><strong>pyproject.toml</strong> - Python项目配置</li></ul><h2 id="与它对话"><a href="#与它对话" class="headerlink" title="与它对话"></a>与它对话</h2><p>为了了解这个仓库的最终目标，你目前可以在<a href="https://nanochat.karpathy.ai/">nanochat.karpathy.ai</a>上找到托管的<a href="https://github.com/karpathy/nanochat/discussions/8">nanochat d32</a>。”d32”表示这个模型在Transformer神经网络中有32层。这个模型有19亿参数，通过简单地运行单个脚本<a href="run1000.sh">run1000.sh</a>在380亿token上训练，总训练成本约为800美元（在8XH100 GPU节点上约33小时训练时间）。虽然今天这足以超越2019年的GPT-2，但它与现代大语言模型如GPT-5相比仍有巨大差距。与这些微型模型对话时，你会看到它们犯很多错误，有点天真和愚蠢，会产生大量幻觉，有点像孩子。这有点有趣。但nanochat的独特之处在于它完全属于你 - 完全可配置、可调整、可定制，并由你从头到尾训练。要训练并与你自己的模型对话，我们转向…</p><h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><p>感受魔力的最快方式是运行speedrun脚本<strong>speedrun.sh</strong>，它训练并推理100美元级别的nanochat。在8XH100节点上每小时24美元，总运行时间约为4小时。从你喜欢的提供商启动一个新的8XH100 GPU盒子（例如我使用并喜欢<a href="https://lambda.ai/service/gpu-cloud">Lambda</a>），然后启动训练脚本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash speedrun.sh</span><br></pre></td></tr></table></figure><p>或者，由于脚本运行4小时，我喜欢在一个新的screen会话<code>speedrun</code>中这样启动（并将输出记录到<code>speedrun.log</code>）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen -L -Logfile speedrun.log -S speedrun bash speedrun.sh</span><br></pre></td></tr></table></figure><p>如果你不太熟悉，请查看<a href="https://gist.github.com/jctosta/af918e1618682638aa82">screen速查表</a>。你可以在screen会话中观看进度，或者用<code>Ctrl-a d</code>分离并用<code>tail speedrun.log</code>查看进度。现在等待4小时。完成后，你可以通过类似ChatGPT的Web UI与你的LLM对话。确保你的本地uv虚拟环境已激活（运行<code>source .venv/bin/activate</code>），然后启动服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m scripts.chat_web</span><br></pre></td></tr></table></figure><p>然后访问显示的URL。确保正确访问，例如在Lambda上使用你所在节点的公共IP，后跟端口，例如<a href="http://209.20.xxx.xxx:8000/">http://209.20.xxx.xxx:8000/</a>等。然后像通常与ChatGPT对话一样与你的LLM对话！让它写故事或诗歌。问它你是谁以看到幻觉。问它为什么天空是蓝色的。或者为什么是绿色的。speedrun是一个4e19 FLOPs能力的模型，所以有点像与幼儿园小朋友对话:)。</p><hr><img width="2672" height="1520" alt="image" src="https://github.com/user-attachments/assets/ed39ddf8-2370-437a-bedc-0f39781e76b5" /><hr><p>你也可以<code>cat report.md</code>文件，它出现在项目目录中，包含运行的”成绩单”，即一堆评估和指标。在最后，你会看到一个汇总表格，例如：</p><hr><ul><li>字符数: 333,989</li><li>行数: 8,304</li><li>文件数: 44</li><li>Token数（约）: 83,497</li><li>依赖项（uv.lock行数）: 2,004</li></ul><table><thead><tr><th>指标</th><th>BASE</th><th>MID</th><th>SFT</th><th>RL</th></tr></thead><tbody><tr><td>CORE</td><td>0.2219</td><td>-</td><td>-</td><td>-</td></tr><tr><td>ARC-Challenge</td><td>-</td><td>0.2875</td><td>0.2807</td><td>-</td></tr><tr><td>ARC-Easy</td><td>-</td><td>0.3561</td><td>0.3876</td><td>-</td></tr><tr><td>GSM8K</td><td>-</td><td>0.0250</td><td>0.0455</td><td>0.0758</td></tr><tr><td>HumanEval</td><td>-</td><td>0.0671</td><td>0.0854</td><td>-</td></tr><tr><td>MMLU</td><td>-</td><td>0.3111</td><td>0.3151</td><td>-</td></tr><tr><td>ChatCORE</td><td>-</td><td>0.0730</td><td>0.0884</td><td>-</td></tr></tbody></table><p>总挂钟时间: 3h51m</p><hr><p>（你的表格可能默认缺少RL数字）。关于speedrun脚本以及要寻找和期望的更多信息，请参考我在仓库讨论区发布的演练：<a href="https://github.com/karpathy/nanochat/discussions/1">“介绍nanochat：100美元能买到的最好的ChatGPT”</a>。</p><h2 id="更大的模型"><a href="#更大的模型" class="headerlink" title="更大的模型"></a>更大的模型</h2><p>不出所料，100美元不足以训练一个高性能的ChatGPT克隆。事实上，LLM以其数百万美元的资本支出而闻名。对于我们的目的，我认为还有两个更有趣的规模。首先是约300美元的d26模型（即深度&#x3D;26），训练约12小时，略微超越GPT-2 CORE分数。其次是1000美元级别（约41.6小时），只是因为这是一个不错的整数。但这两者尚未完全支持，因此尚未附加到主分支中。</p><p>也就是说，为了给出一个概念，训练GPT-2级别模型d26所需的<strong>speedrun.sh</strong>文件示例更改仅涉及三个更改：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment"># 你需要下载更多用于预训练的数据分片</span></span><br><span class="line"><span class="comment"># 获取参数数量，乘以20得到token数，乘以4.8得到字符数，</span></span><br><span class="line"><span class="comment"># 除以2.5亿得到分片数量。待办：需要改进这个...</span></span><br><span class="line">python -m nanochat.dataset -n 450 &amp;</span><br><span class="line">...</span><br><span class="line"><span class="comment"># 使用--depth增加模型大小。为了避免内存不足，将设备批大小减半32 -&gt; 16：</span></span><br><span class="line">torchrun --standalone --nproc_per_node=8 -m scripts.base_train -- --depth=26 --device_batch_size=16</span><br><span class="line">...</span><br><span class="line"><span class="comment"># 确保在中期训练期间使用相同的设置：</span></span><br><span class="line">torchrun --standalone --nproc_per_node=8 -m scripts.mid_train -- --device_batch_size=16</span><br></pre></td></tr></table></figure><p>就是这样！最需要注意的事情是确保你有足够的数据分片进行训练（否则代码将循环并在相同的训练集上做更多轮次，稍微降低学习速度），以及管理你的内存&#x2F;VRAM，主要通过减少<code>device_batch_size</code>直到适合（脚本通过增加梯度累积循环次数自动补偿，简单地将并行计算转换为顺序计算）。</p><p>关于运行nanochat的计算环境的更多信息：</p><ul><li>代码在Ampere 8XA100 GPU节点上也能正常运行，但会慢一些。</li><li>所有代码甚至可以在单个GPU上通过省略<code>torchrun</code>正常运行，并产生几乎相同的结果（代码将自动切换到梯度累积），但你必须等待8倍时间。</li><li>如果你的GPU(s)少于80GB，你必须调整一些超参数，否则会出现OOM &#x2F; VRAM不足。在脚本中查找<code>--device_batch_size</code>并减少它直到适合。例如从32（默认）到16、8、4、2，甚至1。少于这个你需要更了解你在做什么并更有创意。</li><li>大部分代码是相当标准的PyTorch，所以它应该在任何支持PyTorch的环境中运行 - xpu、mps等，但我没有开箱即用地实现这个，所以可能需要一些调整。</li></ul><h2 id="在CPU-x2F-MPS上运行"><a href="#在CPU-x2F-MPS上运行" class="headerlink" title="在CPU &#x2F; MPS上运行"></a>在CPU &#x2F; MPS上运行</h2><p>如果你想在Macbook或CPU机器上调整nanochat，这里有一个进行中的<a href="https://github.com/karpathy/nanochat/pull/88">CPU|MPS PR</a>。如果你在Macbook上，在运行<code>base_train.py</code>时使用<code>--device_type=mps</code>。有关更多信息，请参阅PR及其差异。没有GPU节点你不会走得太远，但至少你将能够运行代码，并可能通过一些耐心训练一个非常小的LLM。</p><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>nanochat设计为简短而甜美。这样做的一个大优势是我们可以将所有文件打包在一起，并复制粘贴到你喜欢的LLM中询问任意问题。例如，我喜欢使用<a href="https://github.com/simonw/files-to-prompt">files-to-prompt</a>实用程序像这样打包仓库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">files-to-prompt . -e py -e md -e rs -e html -e toml -e sh --ignore <span class="string">&quot;*target*&quot;</span> --cxml &gt; packaged.txt</span><br></pre></td></tr></table></figure><p>这包括所有py、rs、html、toml、sh文件，排除<code>rustbpe/target</code>文件夹，并选择cxml输出格式。所有内容都写入<code>packaged.txt</code>文件，目前测量约330KB（即远低于最先进LLM的约10万token），以及约8K行代码在45个文件中。</p><p>或者，我推荐使用<a href="https://deepwiki.com/">DeepWiki</a>来自Devin&#x2F;Cognition来询问这个仓库的问题。在这个仓库的URL中，只需将github.com更改为deepwiki.com，你就可以开始了。</p><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>我在这里投入不多，但存在一些测试，特别是对于分词器。运行例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m pytest tests/test_rustbpe.py -v -s</span><br></pre></td></tr></table></figure><h2 id="贡献"><a href="#贡献" class="headerlink" title="贡献"></a>贡献</h2><p>nanochat远未完成。目标是改进在&lt;1000美元预算下可端到端工作的微型模型的最新技术水平。可访问性是关于总体成本，也是关于认知复杂性 - nanochat不是一个详尽可配置的LLM”框架”；代码库中不会有巨大的配置对象、模型工厂或if-then-else怪物。它是一个单一、连贯、最小化、可读、可定制、最大可复制的”强基线”代码库，设计为从头到尾运行并产生具体的ChatGPT克隆及其成绩单。</p><h2 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h2><ul><li>名称（nanochat）源自我的早期项目<a href="https://github.com/karpathy/nanoGPT">nanoGPT</a>，它只涵盖预训练。</li><li>nanochat也受到<a href="https://github.com/KellerJordan/modded-nanogpt">modded-nanoGPT</a>的启发，它通过清晰的指标和排行榜将nanoGPT仓库游戏化，并借用了它的许多想法和一些预训练实现。</li><li>感谢<a href="https://huggingface.co/">HuggingFace</a>提供fineweb和smoltalk。</li><li>感谢<a href="https://lambda.ai/service/gpu-cloud">Lambda</a>提供用于开发此项目的计算资源。</li><li>感谢首席LLM专家🧙‍♂️ Alec Radford的建议&#x2F;指导。</li></ul><h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>如果你发现nanochat对你的研究有帮助，请引用为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@misc&#123;nanochat,</span><br><span class="line">  author = &#123;Andrej Karpathy&#125;,</span><br><span class="line">  title = &#123;nanochat: The best ChatGPT that $100 can buy&#125;,</span><br><span class="line">  year = &#123;2025&#125;,</span><br><span class="line">  publisher = &#123;GitHub&#125;,</span><br><span class="line">  url = &#123;https://github.com/karpathy/nanochat&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="许可证"><a href="#许可证" class="headerlink" title="许可证"></a>许可证</h2><p>MIT</p>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;

&lt;p&gt;🔗 &lt;a href=&quot;https://github.com/ljq/nanochat/blob/master/README.zh_CN.md&quot;&gt;nanochat-中文翻译版本(含文档和代码注释)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/karpathy/nanochat&quot;&gt;nanochat项目源码地址&lt;/a&gt;&lt;/p&gt;
&lt;h6 id=&quot;感谢原作者：Andrej-karpathy&quot;&gt;&lt;a href=&quot;#感谢原作者：Andrej-karpathy&quot; class=&quot;headerlink&quot; title=&quot;感谢原作者：Andrej karpathy&quot;&gt;&lt;/a&gt;感谢原作者：&lt;a href=&quot;https://github.com/karpathy&quot;&gt;Andrej karpathy&lt;/a&gt;&lt;/h6&gt;&lt;p&gt;这个仓库是一个完整的类ChatGPT大语言模型（LLM）的全栈实现，采用单一、简洁、最小化、可定制、依赖轻量的代码库。nanochat设计为通过像&lt;strong&gt;speedrun.sh&lt;/strong&gt;这样的脚本在单个8XH100节点上运行，从开始到结束运行整个流程。这包括分词、预训练、微调、评估、推理以及通过简单UI提供Web服务，让你可以像使用ChatGPT一样与你自己的LLM对话。nanochat将成为Eureka Labs正在开发的LLM101n课程的顶点项目。&lt;/p&gt;
&lt;h2 id=&quot;文件结构说明&quot;&gt;&lt;a href=&quot;#文件结构说明&quot; class=&quot;headerlink&quot; title=&quot;文件结构说明&quot;&gt;&lt;/a&gt;文件结构说明&lt;/h2&gt;&lt;p&gt;nanochat项目的主要文件及其用途：&lt;/p&gt;</summary>
    
    
    
    <category term="cloud-native" scheme="https://www.wdft.com/categories/cloud-native/"/>
    
    
    <category term="AI" scheme="https://www.wdft.com/tags/AI/"/>
    
    <category term="Agent" scheme="https://www.wdft.com/tags/Agent/"/>
    
    <category term="nanochat" scheme="https://www.wdft.com/tags/nanochat/"/>
    
    <category term="nanochat-zh_CN" scheme="https://www.wdft.com/tags/nanochat-zh-CN/"/>
    
  </entry>
  
  <entry>
    <title>Go:interface原理详解-接口由使用者定义，而不是由实现者定义。</title>
    <link href="https://www.wdft.com/82c2ce4a.html"/>
    <id>https://www.wdft.com/82c2ce4a.html</id>
    <published>2025-10-20T15:01:13.000Z</published>
    <updated>2025-11-11T03:23:39.117Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h3 id="接口设计模式的常见疑惑"><a href="#接口设计模式的常见疑惑" class="headerlink" title="接口设计模式的常见疑惑"></a>接口设计模式的常见疑惑</h3><p><strong>Golang接口由使用者定义，而不是由实现者定义。开发常见的疑惑：“如果接口是使用者定义的，那使用者怎么知道实现者有没有那个方法？会不会猜错？是不是反而更难用了？”</strong></p><p>这个问题是很多人的困惑，而且触及了 Go 接口设计哲学中最容易让人困惑的核心矛盾：</p><blockquote><p><strong>“如果接口是使用者定义的，那使用者怎么知道实现者有没有那个方法？会不会猜错？是不是反而更难用了？”</strong></p></blockquote><p>我们来一层层拆解这个疑问，你会发现：<strong>Go 的设计其实不是“让使用者去猜”，而是“让能力自然暴露”</strong>。</p><span id="more"></span><h3 id="❓-问题本质：使用者真的需要“猜”吗？"><a href="#❓-问题本质：使用者真的需要“猜”吗？" class="headerlink" title="❓ 问题本质：使用者真的需要“猜”吗？"></a>❓ 问题本质：使用者真的需要“猜”吗？</h3><p><strong>不需要。</strong></p><p>在 Go 中，<strong>接口不是凭空定义的</strong>，而是基于<strong>已有的方法行为</strong>来定义的。<br>也就是说：<strong>你先看到某个类型有 <code>ToString()</code> 方法，然后你才定义 <code>Stringable</code> 接口</strong>，而不是反过来。</p><h4 id="举个实际开发场景："><a href="#举个实际开发场景：" class="headerlink" title="举个实际开发场景："></a>举个实际开发场景：</h4><p>你正在用一个第三方库，比如：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Config <span class="keyword">struct</span> &#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Config)</span></span> String() <span class="type">string</span> &#123; <span class="keyword">return</span> <span class="string">&quot;...&quot;</span> &#125;</span><br></pre></td></tr></table></figure><p>你想写一个通用日志函数，能打印任何“能转成字符串”的对象。</p><p>你<strong>看到</strong> <code>Config</code> 有 <code>String()</code> 方法（通过文档、IDE 提示、源码），于是你写：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Loggable <span class="keyword">interface</span> &#123;</span><br><span class="line">    String() <span class="type">string</span>  <span class="comment">// 注意：名字和第三方库一致！</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Log</span><span class="params">(l Loggable)</span></span> &#123;</span><br><span class="line">    fmt.Println(l.String())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>✅ 你不是在“猜”，而是在<strong>观察已有行为后，提炼出共性</strong>。</p><h3 id="🆚-和-Java-的对比：谁更“反人类”？"><a href="#🆚-和-Java-的对比：谁更“反人类”？" class="headerlink" title="🆚 和 Java 的对比：谁更“反人类”？"></a>🆚 和 Java 的对比：谁更“反人类”？</h3><table><thead><tr><th></th><th>Java</th><th>Go</th></tr></thead><tbody><tr><td><strong>接口定义时机</strong></td><td>实现者提前定义接口（<code>implements</code>）</td><td>使用者按需定义接口（隐式满足）</td></tr><tr><td><strong>耦合性</strong></td><td>实现者必须知道接口存在</td><td>实现者完全不知道接口存在</td></tr><tr><td><strong>扩展性</strong></td><td>无法让第三方类实现你的接口</td><td>任何有对应方法的类型自动“实现”你的接口</td></tr><tr><td><strong>心智负担</strong></td><td>实现者要规划接口</td><td>使用者只需观察方法签名</td></tr></tbody></table><p>👉 <strong>Go 把“抽象”的权力交给了最需要它的人——使用者</strong>。<br>而 Java 把“契约”的责任压给了实现者。</p><h3 id="🤔-那如果方法名不一样怎么办？比如有人用-ToString-，有人用-String-？"><a href="#🤔-那如果方法名不一样怎么办？比如有人用-ToString-，有人用-String-？" class="headerlink" title="🤔 那如果方法名不一样怎么办？比如有人用 ToString()，有人用 String()？"></a>🤔 那如果方法名不一样怎么办？比如有人用 <code>ToString()</code>，有人用 <code>String()</code>？</h3><p>这确实是现实问题，但 Go 的解法是：</p><blockquote><p><strong>标准库和社区约定优先，小接口降低冲突</strong></p></blockquote><p>比如：</p><ul><li>Go 标准库中，几乎所有类型如果要转字符串，都实现 <code>String() string</code>（这是 <code>fmt</code> 包约定的）</li><li>所以你定义接口时，直接用 <code>String() string</code>，就能兼容大量类型</li><li>如果某个类型用了 <code>ToString()</code>，你可以：<ul><li>自己包一层适配器（wrapper）</li><li>或者就别强求统一，直接调用它的方法</li></ul></li></ul><p><strong>Go 不追求“万物归一”，而是“按需组合”</strong>。</p><h3 id="💡-关键认知转变："><a href="#💡-关键认知转变：" class="headerlink" title="💡 关键认知转变："></a>💡 关键认知转变：</h3><blockquote><p><strong>Go 的接口不是“设计契约”，而是“行为匹配”</strong>。</p></blockquote><p>你不是在“猜测实现者有什么接口”，而是在说：  </p><blockquote><p>“我需要一个有 <code>Xxx() Yyy</code> 方法的对象，不管它是谁，只要它有，我就用。”</p></blockquote><p>这就像你去租房子，不会说“你必须是‘正规房东接口’的实现类”，而是说：  </p><blockquote><p>“只要你有房产证、能签合同、能收租，我就租你的房。”<br>——不管你是个人房东、中介、还是 Airbnb。</p></blockquote><h3 id="✅-举个极端但真实的例子：标准库-io-Reader"><a href="#✅-举个极端但真实的例子：标准库-io-Reader" class="headerlink" title="✅ 举个极端但真实的例子：标准库 io.Reader"></a>✅ 举个极端但真实的例子：标准库 <code>io.Reader</code></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">    Read(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个接口是 <strong>Go 标准库定义的（使用者视角）</strong>，但成千上万的类型都“自动实现”了它：</p><ul><li><code>os.File</code></li><li><code>bytes.Buffer</code></li><li><code>net.Conn</code></li><li><code>strings.Reader</code></li><li>甚至你自己写的 <code>MyCustomStream</code></li></ul><p>这些类型的作者<strong>在写代码时可能根本没看过 <code>io.Reader</code> 的定义</strong>，但他们提供了 <code>Read([]byte) (int, error)</code> 方法，于是就能被 <code>io.Copy</code>、<code>ioutil.ReadAll</code> 等函数使用。</p><p>👉 <strong>这就是“使用者定义接口”的威力：无需协调，自然兼容。</strong></p><h3 id="🧠-最后总结：为什么你觉得“更复杂”？"><a href="#🧠-最后总结：为什么你觉得“更复杂”？" class="headerlink" title="🧠 最后总结：为什么你觉得“更复杂”？"></a>🧠 最后总结：为什么你觉得“更复杂”？</h3><p>因为你可能还在用 <strong>“面向接口设计”</strong> 的思维（像 Java 那样），而 Go 是 <strong>“面向行为组合”</strong>。</p><ul><li><strong>不要一开始就定义接口</strong>  </li><li><strong>先写具体类型和方法</strong></li><li><strong>当多个地方出现重复逻辑时，再提炼接口</strong></li><li><strong>接口只为当前使用场景服务，越小越好</strong></li></ul><blockquote><p>Go 的哲学是：<strong>“If it walks like a duck and quacks like a duck, it’s a duck.”</strong><br>（走起来像鸭子，叫起来像鸭子，它就是鸭子。）</p></blockquote><p>你不需要鸭子“声明自己是鸭子”，你只需要它表现出鸭子的行为。</p><p>如果你还是觉得别扭，那很正常——这是从“显式契约”到“隐式能力”的思维切换。<br>但一旦你在一个真实项目中遇到“需要统一处理多个第三方类型”的场景，你就会发现 Go 这种方式<strong>极其灵活、极其解耦</strong>。</p><h3 id="为什么说这是“Go-的精髓”？"><a href="#为什么说这是“Go-的精髓”？" class="headerlink" title="为什么说这是“Go 的精髓”？"></a>为什么说这是“Go 的精髓”？</h3><p>解耦：实现者不需要知道谁会用它，使用者也不需要修改实现者的代码。<br>灵活：你可以给任何已有类型（包括标准库类型）“赋予”接口能力，只要它有对应方法。<br>小而专：Go 鼓励定义小接口（比如 io.Reader 只有一个 Read() 方法），用的时候按需组合。</p><h6 id="实际上-Go-标准库就是这么干的！"><a href="#实际上-Go-标准库就是这么干的！" class="headerlink" title="实际上 Go 标准库就是这么干的！"></a>实际上 Go 标准库就是这么干的！</h6><p>比如 io.Copy(dst Writer, src Reader) 中的 Writer 和 Reader 接口，是标准库定义的，但成千上万的类型（文件、网络连接、buffer 等）都“自动”实现了它们，而它们的作者根本没看过 io 包的源码。</p><h6 id="Golang的interface设计静态编译语言的类型安全、类似动态语言的灵活性以及组件间的解耦三者之间取得了精妙的平衡。这种平衡正是-Go-语言“务实”哲学的体现，工程实践的价值。要知道在此之前，想做到“静”和“动”的结合，很多解决方案都存在问题因为引入过多的中间层最后被放弃，Go不是最完美的，但是相对实用的解决方案，而且Go语言的静态类型检查、编译、运行速度非常高效，说interface是Go语言的“灵魂”“-之一不夸张。"><a href="#Golang的interface设计静态编译语言的类型安全、类似动态语言的灵活性以及组件间的解耦三者之间取得了精妙的平衡。这种平衡正是-Go-语言“务实”哲学的体现，工程实践的价值。要知道在此之前，想做到“静”和“动”的结合，很多解决方案都存在问题因为引入过多的中间层最后被放弃，Go不是最完美的，但是相对实用的解决方案，而且Go语言的静态类型检查、编译、运行速度非常高效，说interface是Go语言的“灵魂”“-之一不夸张。" class="headerlink" title="Golang的interface设计静态编译语言的类型安全、类似动态语言的灵活性以及组件间的解耦三者之间取得了精妙的平衡。这种平衡正是 Go 语言“务实”哲学的体现，工程实践的价值。要知道在此之前，想做到“静”和“动”的结合，很多解决方案都存在问题因为引入过多的中间层最后被放弃，Go不是最完美的，但是相对实用的解决方案，而且Go语言的静态类型检查、编译、运行速度非常高效，说interface是Go语言的“灵魂”“ 之一不夸张。"></a>Golang的interface设计静态编译语言的类型安全、类似动态语言的灵活性以及组件间的解耦三者之间取得了精妙的平衡。这种平衡正是 Go 语言“务实”哲学的体现，工程实践的价值。要知道在此之前，想做到“静”和“动”的结合，很多解决方案都存在问题因为引入过多的中间层最后被放弃，Go不是最完美的，但是相对实用的解决方案，而且Go语言的静态类型检查、编译、运行速度非常高效，说interface是Go语言的“灵魂”“ 之一不夸张。</h6>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;


&lt;h3 id=&quot;接口设计模式的常见疑惑&quot;&gt;&lt;a href=&quot;#接口设计模式的常见疑惑&quot; class=&quot;headerlink&quot; title=&quot;接口设计模式的常见疑惑&quot;&gt;&lt;/a&gt;接口设计模式的常见疑惑&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Golang接口由使用者定义，而不是由实现者定义。开发常见的疑惑：“如果接口是使用者定义的，那使用者怎么知道实现者有没有那个方法？会不会猜错？是不是反而更难用了？”&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;这个问题是很多人的困惑，而且触及了 Go 接口设计哲学中最容易让人困惑的核心矛盾：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;“如果接口是使用者定义的，那使用者怎么知道实现者有没有那个方法？会不会猜错？是不是反而更难用了？”&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我们来一层层拆解这个疑问，你会发现：&lt;strong&gt;Go 的设计其实不是“让使用者去猜”，而是“让能力自然暴露”&lt;/strong&gt;。&lt;/p&gt;</summary>
    
    
    
    <category term="Go" scheme="https://www.wdft.com/categories/Go/"/>
    
    
    <category term="Go" scheme="https://www.wdft.com/tags/Go/"/>
    
    <category term="interface" scheme="https://www.wdft.com/tags/interface/"/>
    
  </entry>
  
  <entry>
    <title>Efficiency optimization practice of oh-my-zsh (omz) configuration parameters（macOS下oh-my-zsh omz配置参数效率优化实践，对开发人员用户高频使用zsh场景建议）</title>
    <link href="https://www.wdft.com/fa8418d.html"/>
    <id>https://www.wdft.com/fa8418d.html</id>
    <published>2025-10-20T14:13:27.000Z</published>
    <updated>2025-11-11T03:12:22.164Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><p>⚠️以下 <strong>oh-my-zsh</strong> 终端配置优化（仅针对macOS环境开发人员用户高频使用zsh终端配置建议，小白用户不建议尝试！）</p><h6 id="oh-my-zsh版本信息："><a href="#oh-my-zsh版本信息：" class="headerlink" title="oh-my-zsh版本信息："></a>oh-my-zsh版本信息：</h6><ul><li>OMZ版本：master (f1934d2)</li><li>更新时间：2025-10-20</li><li>配置默认: <code>~/.zshrc</code></li></ul><h4 id="目录大纲："><a href="#目录大纲：" class="headerlink" title="目录大纲："></a>目录大纲：</h4><ul><li>oh-my-zsh 终端配置基础优化（仅建议，可避免配置文件和数据散落用户目录）</li><li>ZSH 历史记录设置（omz:高性能模式）<span id="more"></span></li></ul><h4 id="oh-my-zsh-终端配置基础优化（仅建议，可避免配置文件和数据散落用户目录）"><a href="#oh-my-zsh-终端配置基础优化（仅建议，可避免配置文件和数据散落用户目录）" class="headerlink" title="oh-my-zsh 终端配置基础优化（仅建议，可避免配置文件和数据散落用户目录）"></a>oh-my-zsh 终端配置基础优化（仅建议，可避免配置文件和数据散落用户目录）</h4><p>⚠️ 用户目录按实际用户名配置（例如:&#x2F;Users&#x2F;ljq）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># zsh</span><br><span class="line">export ZDOTDIR=&quot;/Users/ljq/.zsh-custom&quot;</span><br><span class="line"># zsh sessions custom path</span><br><span class="line">export ZSH_SESSION_DIR=&quot;/Users/ljq/.zsh-custom/.zsh_sessions&quot;</span><br><span class="line"># z plugin custom path</span><br><span class="line">export _Z_DATA=&quot;/Users/ljq/.zsh-custom/.zdata&quot;</span><br><span class="line"># .zsh_history set path</span><br><span class="line">export HISTFILE=&quot;/Users/ljq/.zsh-custom/.zsh_history&quot;</span><br><span class="line"></span><br><span class="line"># Path to your oh-my-zsh installation.</span><br><span class="line">export ZSH=&quot;$HOME/.oh-my-zsh&quot;</span><br></pre></td></tr></table></figure><h4 id="ZSH-历史记录设置（omz-高性能模式）"><a href="#ZSH-历史记录设置（omz-高性能模式）" class="headerlink" title="ZSH 历史记录设置（omz:高性能模式）"></a>ZSH 历史记录设置（omz:高性能模式）</h4><p><strong>~&#x2F;.zshrc</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># ========== ZSH 历史记录设置（omz:高性能模式） ==========</span><br><span class="line"></span><br><span class="line"># .zsh_history: macOS(omz内存保留默认值50000)</span><br><span class="line">HISTSIZE=50000      # 内存中保留最多 50000 条（当前会话）</span><br><span class="line">SAVEHIST=50000      # 退出时仅将最近 50000 条写入文件（自动丢弃旧的）</span><br><span class="line"></span><br><span class="line"># .zsh_history:历史行为优化</span><br><span class="line">setopt HIST_IGNORE_DUPS        # 忽略连续重复命令</span><br><span class="line">setopt HIST_SAVE_NO_DUPS       # 保存时全局去重</span><br><span class="line">setopt HIST_EXPIRE_DUPS_FIRST  # 达到上限时优先丢弃重复项（推荐）</span><br><span class="line"></span><br><span class="line"># .zsh_history:仅忽略“无参数”的简单命令（注意：没有 *，所以 &#x27;ls -l&#x27; 仍会被记录）</span><br><span class="line">setopt EXTENDED_GLOB           # 启用扩展 glob 语法(解析格式)</span><br><span class="line">HISTORY_IGNORE=&quot;(&amp;\</span><br><span class="line">|ls|ll|la|l|pwd|df|du|du\ -sh\ .|tree\</span><br><span class="line">|ps|ps\ aux|top|htop|jobs|bg|fg|uptime|free|free\ -h\</span><br><span class="line">|git|git\ status|git\ add\ .|git\ push*|git\ pull|git\ branch\</span><br><span class="line">|docker\ ps|docker\ images|docker\ volume\ ls|docker\ network\ ls|docker-compose\ ps\</span><br><span class="line">|npm\ ls|yarn\ list|npm\ outdated|yarn\ outdated\</span><br><span class="line">|python\ --version|pip\ list|pip\ freeze|which\ python\</span><br><span class="line">|clear|history|man*|which*)&quot;</span><br></pre></td></tr></table></figure><h4 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h4><p><code>HISTORY_IGNORE</code>一般开发场景下，建议忽略一些简单的系统命令，避免重复记录和影响磁盘IO以及无意义的数据记录，仅保留有效命令加快检索响应，实际上是多种策略的选择机制的权衡，建议根据实际使用的场景进行选择。如需开发交流可访问GitHub主页 获取联系信息: <a href="https://github.com/ljq">github.com&#x2F;ljq</a>。</p>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;

&lt;p&gt;⚠️以下 &lt;strong&gt;oh-my-zsh&lt;/strong&gt; 终端配置优化（仅针对macOS环境开发人员用户高频使用zsh终端配置建议，小白用户不建议尝试！）&lt;/p&gt;
&lt;h6 id=&quot;oh-my-zsh版本信息：&quot;&gt;&lt;a href=&quot;#oh-my-zsh版本信息：&quot; class=&quot;headerlink&quot; title=&quot;oh-my-zsh版本信息：&quot;&gt;&lt;/a&gt;oh-my-zsh版本信息：&lt;/h6&gt;&lt;ul&gt;
&lt;li&gt;OMZ版本：master (f1934d2)&lt;/li&gt;
&lt;li&gt;更新时间：2025-10-20&lt;/li&gt;
&lt;li&gt;配置默认: &lt;code&gt;~/.zshrc&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;目录大纲：&quot;&gt;&lt;a href=&quot;#目录大纲：&quot; class=&quot;headerlink&quot; title=&quot;目录大纲：&quot;&gt;&lt;/a&gt;目录大纲：&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;oh-my-zsh 终端配置基础优化（仅建议，可避免配置文件和数据散落用户目录）&lt;/li&gt;
&lt;li&gt;ZSH 历史记录设置（omz:高性能模式）</summary>
    
    
    
    <category term="macOS" scheme="https://www.wdft.com/categories/macOS/"/>
    
    <category term="oh-my-zsh" scheme="https://www.wdft.com/categories/macOS/oh-my-zsh/"/>
    
    <category term="zsh" scheme="https://www.wdft.com/categories/macOS/oh-my-zsh/zsh/"/>
    
    <category term="zshrc" scheme="https://www.wdft.com/categories/macOS/oh-my-zsh/zsh/zshrc/"/>
    
    <category term="Optimization" scheme="https://www.wdft.com/categories/macOS/oh-my-zsh/zsh/zshrc/Optimization/"/>
    
    
    <category term="macOS" scheme="https://www.wdft.com/tags/macOS/"/>
    
    <category term="oh-my-zsh" scheme="https://www.wdft.com/tags/oh-my-zsh/"/>
    
    <category term="omz" scheme="https://www.wdft.com/tags/omz/"/>
    
    <category term="zsh" scheme="https://www.wdft.com/tags/zsh/"/>
    
  </entry>
  
  <entry>
    <title>从零开始：使用三台服务器搭建最简 Kubernetes 集群并集成 Gitea + Harbor 示例</title>
    <link href="https://www.wdft.com/7c4c358b.html"/>
    <id>https://www.wdft.com/7c4c358b.html</id>
    <published>2025-05-03T07:02:21.000Z</published>
    <updated>2025-10-06T07:50:15.849Z</updated>
    
    <content type="html"><![CDATA[<!--toc--><p> 在完成基础集群搭建的基础上，本文新增代码仓库（Gitea）与镜像仓库（Harbor）的集成部署指南，实现完整的 DevOps 工具链闭环。</p><span id="more"></span><h2 id="🧩-一、前置要求补充"><a href="#🧩-一、前置要求补充" class="headerlink" title="🧩 一、前置要求补充"></a>🧩 一、前置要求补充</h2><h3 id="1-1-安装-Ingress-控制器"><a href="#1-1-安装-Ingress-控制器" class="headerlink" title="1.1 安装 Ingress 控制器"></a>1.1 安装 Ingress 控制器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 安装 Nginx Ingress（需在 Master 节点执行）</span><br><span class="line">kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.1/deploy/static/provider/cloud/deploy.yaml</span><br><span class="line"></span><br><span class="line"># 验证安装状态</span><br><span class="line">kubectl get pods -n ingress-nginx</span><br></pre></td></tr></table></figure><h3 id="1-2-创建共享存储目录（所有节点）"><a href="#1-2-创建共享存储目录（所有节点）" class="headerlink" title="1.2 创建共享存储目录（所有节点）"></a>1.2 创建共享存储目录（所有节点）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /opt/k8s-data/&#123;gitea,harbor&#125;</span><br><span class="line">sudo chmod 777 /opt/k8s-data/&#123;gitea,harbor&#125;  # 测试环境简化权限</span><br></pre></td></tr></table></figure><h2 id="📦-二、集成-Gitea-代码仓库"><a href="#📦-二、集成-Gitea-代码仓库" class="headerlink" title="📦 二、集成 Gitea 代码仓库"></a>📦 二、集成 Gitea 代码仓库</h2><h3 id="2-1-创建-PostgreSQL-数据库（依赖-Helm-3）"><a href="#2-1-创建-PostgreSQL-数据库（依赖-Helm-3）" class="headerlink" title="2.1 创建 PostgreSQL 数据库（依赖 Helm 3）"></a>2.1 创建 PostgreSQL 数据库（依赖 Helm 3）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 添加 Bitnami 仓库</span><br><span class="line">helm repo add bitnami https://charts.bitnami.com/bitnami</span><br><span class="line">helm repo update</span><br><span class="line"></span><br><span class="line"># 创建数据库命名空间</span><br><span class="line">kubectl create namespace gitea</span><br><span class="line"></span><br><span class="line"># 部署 PostgreSQL</span><br><span class="line">helm install gitea-db bitnami/postgresql \</span><br><span class="line">  --namespace gitea \</span><br><span class="line">  --set auth.postgresPassword=yourStrongPassword \</span><br><span class="line">  --set persistence.size=5Gi \</span><br><span class="line">  --set persistence.hostPath=/opt/k8s-data/gitea/db</span><br></pre></td></tr></table></figure><h3 id="2-2-部署-Gitea-服务"><a href="#2-2-部署-Gitea-服务" class="headerlink" title="2.2 部署 Gitea 服务"></a>2.2 部署 Gitea 服务</h3><h4 id="2-2-1-创建配置文件-ConfigMap"><a href="#2-2-1-创建配置文件-ConfigMap" class="headerlink" title="2.2.1 创建配置文件 ConfigMap"></a>2.2.1 创建配置文件 ConfigMap</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gitea-config.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">gitea-config</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">gitea</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">app.ini:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    [server]</span></span><br><span class="line"><span class="string">    DOMAIN = gitea.wdft.com</span></span><br><span class="line"><span class="string">    ROOT_URL = https://gitea.wdft.com/</span></span><br><span class="line"><span class="string"></span>    </span><br><span class="line">    [<span class="string">database</span>]</span><br><span class="line">    <span class="string">DB_TYPE</span> <span class="string">=</span> <span class="string">postgres</span></span><br><span class="line">    <span class="string">HOST</span> <span class="string">=</span> <span class="string">gitea-db-postgresql:5432</span></span><br><span class="line">    <span class="string">NAME</span> <span class="string">=</span> <span class="string">postgres</span></span><br><span class="line">    <span class="string">USER</span> <span class="string">=</span> <span class="string">postgres</span></span><br><span class="line">    <span class="string">PASSWD</span> <span class="string">=</span> <span class="string">yourStrongPassword</span></span><br><span class="line">    </span><br><span class="line">    [<span class="string">repository</span>]</span><br><span class="line">    <span class="string">ROOT</span> <span class="string">=</span> <span class="string">/data/git/repositories</span></span><br></pre></td></tr></table></figure><h4 id="2-2-2-部署-Gitea-应用"><a href="#2-2-2-部署-Gitea-应用" class="headerlink" title="2.2.2 部署 Gitea 应用"></a>2.2.2 部署 Gitea 应用</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gitea-deployment.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">gitea</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">gitea</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">gitea</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">gitea</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">gitea</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">gitea/gitea:latest</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">3000</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">gitea-config</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/etc/gitea/app.ini</span></span><br><span class="line">          <span class="attr">subPath:</span> <span class="string">app.ini</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">gitea-data</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/data</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">gitea-config</span></span><br><span class="line">        <span class="attr">configMap:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">gitea-config</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">gitea-data</span></span><br><span class="line">        <span class="attr">hostPath:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">/opt/k8s-data/gitea</span></span><br><span class="line"></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">gitea</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">gitea</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">3000</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">gitea</span></span><br><span class="line"></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">gitea-ingress</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">gitea</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">nginx.ingress.kubernetes.io/ssl-redirect:</span> <span class="string">&quot;false&quot;</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">        <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">service:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">gitea</span></span><br><span class="line">            <span class="attr">port:</span></span><br><span class="line">              <span class="attr">number:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><h4 id="2-2-3-应用部署"><a href="#2-2-3-应用部署" class="headerlink" title="2.2.3 应用部署"></a>2.2.3 应用部署</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f gitea-config.yaml</span><br><span class="line">kubectl apply -f gitea-deployment.yaml</span><br></pre></td></tr></table></figure><h4 id="2-2-4-访问初始化"><a href="#2-2-4-访问初始化" class="headerlink" title="2.2.4 访问初始化"></a>2.2.4 访问初始化</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 查看 Ingress IP</span><br><span class="line">kubectl get ingress -n gitea</span><br><span class="line"></span><br><span class="line"># 浏览器访问 http://&lt;INGRESS_IP&gt; 并完成初始化：</span><br><span class="line"># 数据库选择 PostgreSQL</span><br><span class="line"># 数据库用户名/密码：postgres / yourStrongPassword</span><br><span class="line"># 仓库根目录：/data/git/repositories</span><br><span class="line"># 确认域名配置为 gitea.wdft.com</span><br></pre></td></tr></table></figure><h2 id="🌊-三、集成-Harbor-镜像仓库"><a href="#🌊-三、集成-Harbor-镜像仓库" class="headerlink" title="🌊 三、集成 Harbor 镜像仓库"></a>🌊 三、集成 Harbor 镜像仓库</h2><h3 id="3-1-安装-Helm-客户端（所有节点）"><a href="#3-1-安装-Helm-客户端（所有节点）" class="headerlink" title="3.1 安装 Helm 客户端（所有节点）"></a>3.1 安装 Helm 客户端（所有节点）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3</span><br><span class="line">chmod 700 get_helm.sh &amp;&amp; ./get_helm.sh</span><br></pre></td></tr></table></figure><h3 id="3-2-部署-Harbor-依赖组件"><a href="#3-2-部署-Harbor-依赖组件" class="headerlink" title="3.2 部署 Harbor 依赖组件"></a>3.2 部署 Harbor 依赖组件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 创建命名空间</span><br><span class="line">kubectl create namespace harbor</span><br><span class="line"></span><br><span class="line"># 部署 Redis</span><br><span class="line">helm install harbor-redis bitnami/redis \</span><br><span class="line">  --namespace harbor \</span><br><span class="line">  --set password=redisPassword \</span><br><span class="line">  --set persistence.hostPath=/opt/k8s-data/harbor/redis</span><br><span class="line"></span><br><span class="line"># 部署 PostgreSQL</span><br><span class="line">helm install harbor-db bitnami/postgresql \</span><br><span class="line">  --namespace harbor \</span><br><span class="line">  --set auth.postgresPassword=harborPassword \</span><br><span class="line">  --set persistence.hostPath=/opt/k8s-data/harbor/db</span><br></pre></td></tr></table></figure><h3 id="3-3-创建-Harbor-配置文件"><a href="#3-3-创建-Harbor-配置文件" class="headerlink" title="3.3 创建 Harbor 配置文件"></a>3.3 创建 Harbor 配置文件</h3><h4 id="3-3-1-自签名证书生成（Master-节点）"><a href="#3-3-1-自签名证书生成（Master-节点）" class="headerlink" title="3.3.1 自签名证书生成（Master 节点）"></a>3.3.1 自签名证书生成（Master 节点）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/certs</span><br><span class="line">cd /opt/certs</span><br><span class="line">openssl genrsa -out ca.key 4096</span><br><span class="line">openssl req -x509 -new -nodes -sha512 -days 3650 \</span><br><span class="line"> -subj &quot;/C=CN/ST=Beijing/L=Beijing/O=Harbor/CN=harbor.wdft.com&quot; \</span><br><span class="line"> -key ca.key -out ca.crt</span><br><span class="line"></span><br><span class="line">openssl req -new -nodes -sha512 -days 3650 \</span><br><span class="line"> -subj &quot;/C=CN/ST=Beijing/L=Beijing/O=Harbor/CN=harbor.wdft.com&quot; \</span><br><span class="line"> -keyout harbor.key -out harbor.csr</span><br><span class="line"></span><br><span class="line">openssl x509 -req -sha512 -days 3650 \</span><br><span class="line"> -CA ca.crt -CAkey ca.key -CAcreateserial \</span><br><span class="line"> -in harbor.csr -out harbor.crt</span><br><span class="line"></span><br><span class="line"># 所有节点信任证书</span><br><span class="line">sudo cp /opt/certs/ca.crt /usr/local/share/ca-certificates/</span><br><span class="line">sudo update-ca-certificates</span><br><span class="line">sudo systemctl restart containerd</span><br></pre></td></tr></table></figure><h4 id="3-3-2-创建-Harbor-Values-文件"><a href="#3-3-2-创建-Harbor-Values-文件" class="headerlink" title="3.3.2 创建 Harbor Values 文件"></a>3.3.2 创建 Harbor Values 文件</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># harbor-values.yaml</span></span><br><span class="line"><span class="attr">hostname:</span> <span class="string">harbor.wdft.com</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networkPolicy:</span></span><br><span class="line">  <span class="attr">notary:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">clair:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">chartmuseum:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">externalURL:</span> <span class="string">https://harbor.wdft.com</span></span><br><span class="line"><span class="attr">ssl:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">cert:</span></span><br><span class="line">    <span class="attr">certificate:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">      -----BEGIN CERTIFICATE-----</span></span><br><span class="line"><span class="string">      $(cat /opt/certs/harbor.crt | grep -v &quot;BEGIN CERTIFICATE&quot; | grep -v &quot;END CERTIFICATE&quot;)</span></span><br><span class="line"><span class="string">      -----END CERTIFICATE-----</span></span><br><span class="line"><span class="string"></span>    <span class="attr">privateKey:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">      -----BEGIN PRIVATE KEY-----</span></span><br><span class="line"><span class="string">      $(cat /opt/certs/harbor.key | grep -v &quot;BEGIN PRIVATE KEY&quot; | grep -v &quot;END PRIVATE KEY&quot;)</span></span><br><span class="line"><span class="string">      -----END PRIVATE KEY-----</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="attr">database:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">external</span></span><br><span class="line">  <span class="attr">external:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">harbor-db-postgresql</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5432</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">postgres</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">harborPassword</span></span><br><span class="line">    <span class="attr">database:</span> <span class="string">harbor</span></span><br><span class="line"></span><br><span class="line"><span class="attr">redis:</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">harbor-redis</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">redisPassword</span></span><br><span class="line"></span><br><span class="line"><span class="attr">persistence:</span></span><br><span class="line">  <span class="attr">persistentVolumeClaim:</span></span><br><span class="line">    <span class="attr">registry:</span></span><br><span class="line">      <span class="attr">existingClaim:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">jobservice:</span></span><br><span class="line">      <span class="attr">existingClaim:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">chartmuseum:</span></span><br><span class="line">      <span class="attr">existingClaim:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">clair:</span></span><br><span class="line">      <span class="attr">existingClaim:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">notary:</span></span><br><span class="line">      <span class="attr">existingClaim:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">trivy:</span></span><br><span class="line">      <span class="attr">existingClaim:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">hostPath:</span></span><br><span class="line">    <span class="string">/opt/k8s-data/harbor</span></span><br></pre></td></tr></table></figure><h3 id="3-4-部署-Harbor"><a href="#3-4-部署-Harbor" class="headerlink" title="3.4 部署 Harbor"></a>3.4 部署 Harbor</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 添加 Harbor Helm 仓库</span><br><span class="line">helm repo add harbor https://helm.goharbor.io</span><br><span class="line">helm repo update</span><br><span class="line"></span><br><span class="line"># 安装 Harbor</span><br><span class="line">helm install harbor harbor/harbor \</span><br><span class="line">  --namespace harbor \</span><br><span class="line">  --values harbor-values.yaml</span><br></pre></td></tr></table></figure><h3 id="3-5-配置-Ingress-规则"><a href="#3-5-配置-Ingress-规则" class="headerlink" title="3.5 配置 Ingress 规则"></a>3.5 配置 Ingress 规则</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># harbor-ingress.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">harbor-ingress</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">harbor</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">nginx.ingress.kubernetes.io/ssl-passthrough:</span> <span class="string">&quot;true&quot;</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">tls:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">hosts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">harbor.wdft.com</span></span><br><span class="line">    <span class="attr">secretName:</span> <span class="string">harbor-ingress-tls</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">        <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">service:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">harbor-core</span></span><br><span class="line">            <span class="attr">port:</span></span><br><span class="line">              <span class="attr">number:</span> <span class="number">443</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 创建 TLS Secret</span><br><span class="line">kubectl -n harbor create secret tls harbor-ingress-tls \</span><br><span class="line">  --cert=/opt/certs/harbor.crt \</span><br><span class="line">  --key=/opt/certs/harbor.key</span><br><span class="line"></span><br><span class="line"># 应用 Ingress</span><br><span class="line">kubectl apply -f harbor-ingress.yaml</span><br></pre></td></tr></table></figure><h2 id="🔄-四、集成验证"><a href="#🔄-四、集成验证" class="headerlink" title="🔄 四、集成验证"></a>🔄 四、集成验证</h2><h3 id="4-1-修改-Go-应用部署文件"><a href="#4-1-修改-Go-应用部署文件" class="headerlink" title="4.1 修改 Go 应用部署文件"></a>4.1 修改 Go 应用部署文件</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改 deployment.yaml 中的 image 字段</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">harbor.wdft.com/library/go-hello:1.0</span></span><br></pre></td></tr></table></figure><h3 id="4-2-配置-Kubernetes-秘钥"><a href="#4-2-配置-Kubernetes-秘钥" class="headerlink" title="4.2 配置 Kubernetes 秘钥"></a>4.2 配置 Kubernetes 秘钥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 创建镜像拉取秘钥</span><br><span class="line">kubectl create secret docker-registry regcred \</span><br><span class="line">  --docker-server=https://harbor.wdft.com \</span><br><span class="line">  --docker-username=admin \</span><br><span class="line">  --docker-password=Harbor12345 \</span><br><span class="line">  --docker-email=admin@wdft.com</span><br><span class="line"></span><br><span class="line"># 修改 Deployment 添加 imagePullSecrets</span><br><span class="line">spec:</span><br><span class="line">  template:</span><br><span class="line">    spec:</span><br><span class="line">      imagePullSecrets:</span><br><span class="line">      - name: regcred</span><br></pre></td></tr></table></figure><h3 id="4-3-推送镜像到-Harbor"><a href="#4-3-推送镜像到-Harbor" class="headerlink" title="4.3 推送镜像到 Harbor"></a>4.3 推送镜像到 Harbor</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 登录 Harbor</span><br><span class="line">docker login harbor.wdft.com -u admin -p Harbor12345</span><br><span class="line"></span><br><span class="line"># 重新构建并推送镜像</span><br><span class="line">docker build -t harbor.wdft.com/library/go-hello:1.0 .</span><br><span class="line">docker push harbor.wdft.com/library/go-hello:1.0</span><br></pre></td></tr></table></figure><h2 id="🧪-五、完整-CI-x2F-CD-流程演示"><a href="#🧪-五、完整-CI-x2F-CD-流程演示" class="headerlink" title="🧪 五、完整 CI&#x2F;CD 流程演示"></a>🧪 五、完整 CI&#x2F;CD 流程演示</h2><ol><li><p><strong>代码提交</strong><br>在 Gitea 创建新仓库 <code>go-hello</code>，推送代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin http://git.wdft.com/ljq/go-hello.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure></li><li><p><strong>镜像构建</strong><br>修改构建命令指向私有仓库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -t harbor.wdft.com/ljq/go-hello:latest .</span><br><span class="line">docker push harbor.wdft.com/ljq/go-hello:latest</span><br></pre></td></tr></table></figure></li><li><p><strong>生产部署</strong><br>更新 Deployment 镜像地址后重新部署：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f deployment.yaml</span><br></pre></td></tr></table></figure></li></ol><h2 id="📌-六、配置参考图示"><a href="#📌-六、配置参考图示" class="headerlink" title="📌 六、配置参考图示"></a>📌 六、配置参考图示</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+-------------------+     +------------------+     +-------------------+</span><br><span class="line">|                   |     |                  |     |                   |</span><br><span class="line">|   Gitea Code Repo |&lt;---&gt;| Harbor Registry  |&lt;---&gt;| Kubernetes Cluster|</span><br><span class="line">|                   |     |                  |     |                   |</span><br><span class="line">+-------------------+     +------------------+     +-------------------+</span><br><span class="line">       ^                          ^                        ^</span><br><span class="line">       |                          |                        |</span><br><span class="line">       v                          v                        v</span><br><span class="line">  Developer Workstation    CI/CD Pipeline        Production Environment</span><br></pre></td></tr></table></figure><h2 id="📚-七、后续优化建议"><a href="#📚-七、后续优化建议" class="headerlink" title="📚 七、后续优化建议"></a>📚 七、后续优化建议</h2><ol><li><p><strong>安全加固</strong></p><ul><li>使用 Let’s Encrypt 自动签发证书</li><li>配置 RBAC 权限隔离</li><li>启用 Harbor 的 Clair 漏洞扫描</li></ul></li><li><p><strong>存储优化</strong></p><ul><li>替换 hostPath 为 NFS 或云存储</li><li>配置 Harbor 的 MinIO 后端存储</li></ul></li><li><p><strong>高可用</strong></p><ul><li>部署 PostgreSQL + Patroni 集群</li><li>使用 Redis Cluster 替代单实例</li></ul></li><li><p><strong>监控告警</strong></p><ul><li>部署 Prometheus + Grafana</li><li>配置 Harbor 自带的监控面板</li></ul></li></ol><h4 id="💡-注意事项："><a href="#💡-注意事项：" class="headerlink" title="💡 注意事项："></a>💡 注意事项：</h4><ul><li><ol><li>将 <code>harbor.wdft.com</code> 和 <code>gitea.wdft.com</code> 替换为实际域名</li></ol></li><li><ol start="2"><li>生产环境应使用独立存储类（StorageClass）</li></ol></li><li><ol start="3"><li>所有敏感信息应通过 Kubernetes Secret 管理</li></ol></li><li><ol start="4"><li>建议为 Harbor 配置独立的 DNS 解析记录</li></ol></li></ul>]]></content>
    
    
    <summary type="html">&lt;!--toc--&gt;

&lt;p&gt; 在完成基础集群搭建的基础上，本文新增代码仓库（Gitea）与镜像仓库（Harbor）的集成部署指南，实现完整的 DevOps 工具链闭环。&lt;/p&gt;</summary>
    
    
    
    <category term="distributed" scheme="https://www.wdft.com/categories/distributed/"/>
    
    
    <category term="Cloud-Native" scheme="https://www.wdft.com/tags/Cloud-Native/"/>
    
    <category term="Cloud-Distributed" scheme="https://www.wdft.com/tags/Cloud-Distributed/"/>
    
    <category term="Distributed-Systems" scheme="https://www.wdft.com/tags/Distributed-Systems/"/>
    
    <category term="K8S-Build" scheme="https://www.wdft.com/tags/K8S-Build/"/>
    
  </entry>
  
  <entry>
    <title>对比主流云原生KubeSphere、KubeVela、Rancher、Sealos和Rainbond五者之间的区别</title>
    <link href="https://www.wdft.com/4b8b1c9c.html"/>
    <id>https://www.wdft.com/4b8b1c9c.html</id>
    <published>2025-02-18T11:02:00.000Z</published>
    <updated>2025-10-06T07:45:01.450Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h4 id="KubeSphere、KubeVela、Rancher、Sealos和Rainbond五者之间的区别："><a href="#KubeSphere、KubeVela、Rancher、Sealos和Rainbond五者之间的区别：" class="headerlink" title="KubeSphere、KubeVela、Rancher、Sealos和Rainbond五者之间的区别："></a>KubeSphere、KubeVela、Rancher、Sealos和Rainbond五者之间的区别：</h4><p>这个表格简要概述了KubeSphere、KubeVela、Rancher、Sealos和Rainbond五者之间的主要区别。每个项目都有其独特的特点和优势，适用于不同的场景和用户群体。在选择时，建议根据实际需求、技术栈和团队经验来权衡各个选项。</p><span id="more"></span><table><thead><tr><th>项目</th><th>KubeSphere</th><th>KubeVela</th><th>Rancher</th><th>Sealos</th><th>Rainbond</th></tr></thead><tbody><tr><td><strong>基本定位</strong></td><td>面向云原生应用的分布式操作系统</td><td>现代化应用交付与管理平台</td><td>开源的企业级多集群Kubernetes管理平台</td><td>以Kubernetes为内核的云操作系统发行版</td><td>国产开源的无服务器容器云平台</td></tr><tr><td><strong>内核&#x2F;基础</strong></td><td>以Kubernetes为内核</td><td>基于OAM规范和Kubernetes</td><td>以Kubernetes作为其容器编排引擎</td><td>Kubernetes</td><td>Kubernetes</td></tr><tr><td><strong>主要特点</strong></td><td>全栈自动化IT运营；简化的DevOps工作流；多租户支持；丰富的企业级功能</td><td>应用部署即代码；支持多集群认证和授权；开箱即用的平台扩展；面向混合云环境</td><td>强大的多集群管理能力；一键部署应用；多种编排调度工具；支持多种基础架构</td><td>无需安装Kubernetes集群即可使用；提供秒级创建高可用数据库的服务；自动伸缩功能节省成本</td><td>以应用为中心；深度集成Kubernetes；支持多云环境下的统一运维管理</td></tr><tr><td><strong>用户界面</strong></td><td>提供开发人员友好的向导式Web UI</td><td>-</td><td>提供直观的Web管理界面</td><td>内置终端支持命令行操作，同时提供管理界面</td><td>提供友好的用户界面</td></tr><tr><td><strong>集成性</strong></td><td>即插即用的架构，允许第三方应用无缝集成</td><td>可与任何CI流水线或GitOps工具无缝集成</td><td>集成开源监控、日志、Git CI</td><td>与其他云原生工具和服务有良好的兼容性</td><td>模块化拼装，加速应用构建</td></tr><tr><td><strong>生态系统</strong></td><td>整合了大量云原生相关组件</td><td>拥有快速增长的插件市场</td><td>-</td><td>与主流云服务提供商有良好的合作关系</td><td>提供了丰富的应用场景和解决方案</td></tr><tr><td><strong>目标用户</strong></td><td>面向企业和开发人员，尤其是需要简化DevOps流程的场景</td><td>面向软件开发团队，尤其是需要在混合云环境中交付应用的团队</td><td>面向需要在生产环境中运行容器和Kubernetes的组织</td><td>面向需要高效、灵活、安全的云服务解决方案的企业</td><td>面向需要云原生应用全生命周期管理的企业</td></tr><tr><td><strong>部署与扩展</strong></td><td>支持多云与多集群管理；提供KubeKey安装程序</td><td>支持多集群&#x2F;混合环境持续交付策略</td><td>支持在混合云和本地数据中心集中部署与管理Kubernetes集群</td><td>快速部署各种分布式应用，如Nginx、数据库等</td><td>支持多种计算资源和存储资源的接入和管理</td></tr><tr><td><strong>学习成本</strong></td><td>对刚上手的人来说较为友好，提供了较多的整合功能</td><td>需要了解OAM规范和Kubernetes概念</td><td>学习成本较高，但提供了一站式的解决方案</td><td>相对较低，提供友好的用户操作体验</td><td>提供了丰富的文档资源和社区支持，降低学习门槛</td></tr><tr><td><strong>成熟度与稳定性</strong></td><td>经过多年发展，已成为国际化的容器开源项目</td><td>-</td><td>相较于KubeSphere更为成熟稳定</td><td>逐步发展，为企业提供稳定可靠的云服务解决方案</td><td>经过多个版本的迭代，提供了稳定可靠的云原生应用管理平台</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;


&lt;h4 id=&quot;KubeSphere、KubeVela、Rancher、Sealos和Rainbond五者之间的区别：&quot;&gt;&lt;a href=&quot;#KubeSphere、KubeVela、Rancher、Sealos和Rainbond五者之间的区别：&quot; class=&quot;headerlink&quot; title=&quot;KubeSphere、KubeVela、Rancher、Sealos和Rainbond五者之间的区别：&quot;&gt;&lt;/a&gt;KubeSphere、KubeVela、Rancher、Sealos和Rainbond五者之间的区别：&lt;/h4&gt;&lt;p&gt;这个表格简要概述了KubeSphere、KubeVela、Rancher、Sealos和Rainbond五者之间的主要区别。每个项目都有其独特的特点和优势，适用于不同的场景和用户群体。在选择时，建议根据实际需求、技术栈和团队经验来权衡各个选项。&lt;/p&gt;</summary>
    
    
    
    <category term="cloud-native" scheme="https://www.wdft.com/categories/cloud-native/"/>
    
    
    <category term="Cloud-Native" scheme="https://www.wdft.com/tags/Cloud-Native/"/>
    
    <category term="K8S" scheme="https://www.wdft.com/tags/K8S/"/>
    
    <category term="kebernetes" scheme="https://www.wdft.com/tags/kebernetes/"/>
    
    <category term="Cloud-Native-Framework" scheme="https://www.wdft.com/tags/Cloud-Native-Framework/"/>
    
  </entry>
  
  <entry>
    <title>macOS Ghostty Terminal Ddefault binding keyboard shortcut key list（Ghostty.org Ghostty 终端默认快捷键列表）</title>
    <link href="https://www.wdft.com/d89a2229.html"/>
    <id>https://www.wdft.com/d89a2229.html</id>
    <published>2025-01-13T14:02:02.000Z</published>
    <updated>2025-11-11T03:12:22.176Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h3 id="macOS-Ghostty-终端默认快捷键列表"><a href="#macOS-Ghostty-终端默认快捷键列表" class="headerlink" title="macOS Ghostty 终端默认快捷键列表"></a>macOS Ghostty 终端默认快捷键列表</h3><ul><li>基本常用快捷键</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">command + t:                新建标签页</span><br><span class="line">command + n:                新建窗口</span><br><span class="line">command + w:                关闭当前终端界面（标签页或分割窗口）</span><br><span class="line">command + shift + w:        关闭当前窗口</span><br><span class="line">command + shift + enter:    切换分割窗口缩放</span><br><span class="line">command + alt + shift + w:  关闭所有窗口</span><br><span class="line">command + page_up:          向上滚动页面</span><br><span class="line">command + page_down:        向下滚动页面</span><br><span class="line">command + home:             滚动到顶部</span><br><span class="line">command + end:              滚动到底部</span><br><span class="line">command + q:                退出 Ghostty</span><br><span class="line">command + enter:            切换全屏模式</span><br><span class="line">command + ctrl + f:         切换全屏模式</span><br><span class="line">command + c:                复制到剪贴板</span><br><span class="line">command + v:                从剪贴板粘贴</span><br><span class="line">command + a:                全选</span><br><span class="line">command + k:                清空屏幕</span><br><span class="line">command + comma:            打开配置文件</span><br><span class="line">command + alt + i:          切换检查器</span><br></pre></td></tr></table></figure><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">command + shift + [:        切换到上一个标签页</span><br><span class="line">command + shift + ]:        切换到下一个标签页</span><br><span class="line">ctrl + tab:                 切换到下一个标签页</span><br><span class="line">ctrl + shift + tab:         切换到上一个标签页</span><br></pre></td></tr></table></figure><ul><li><p>分屏操作快捷键</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">command + d:                在右侧新建分割窗口</span><br><span class="line">command + shift + d:        在下方新建分割窗口</span><br><span class="line">command + alt + right:      切换到右侧分割窗口</span><br><span class="line">command + alt + left:       切换到左侧分割窗口</span><br><span class="line">command + alt + up:         切换到上方分割窗口</span><br><span class="line">command + alt + down:       切换到下方分割窗口</span><br><span class="line">command + [:                切换到上一个分割窗口</span><br><span class="line">command + ]:                切换到下一个分割窗口</span><br><span class="line">command + ctrl + left:      向左调整分割窗口大小</span><br><span class="line">command + ctrl + right:     向右调整分割窗口大小</span><br><span class="line">command + ctrl + up:        向上调整分割窗口大小</span><br><span class="line">command + ctrl + down:      向下调整分割窗口大小</span><br><span class="line">command + ctrl + equal:     使分割窗口大小相等</span><br></pre></td></tr></table></figure></li><li><p>光标和选择快捷键</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">command + up:               跳到上一个提示符位置</span><br><span class="line">command + down:             跳到下一个提示符位置</span><br><span class="line">command + shift +           跳到上一个提示符位置</span><br><span class="line">command + shift + down:     跳到下一个提示符位置</span><br><span class="line">shift + up:                 向上调整选择范围</span><br><span class="line">shift + down:               向下调整选择范围</span><br><span class="line">shift + left:               向左调整选择范围</span><br><span class="line">shift + right:              向右调整选择范围</span><br><span class="line">shift + page_up:            向上调整选择范围（翻页）</span><br><span class="line">shift + page_down:          向下调整选择范围（翻页）</span><br><span class="line">shift + home:               调整选择范围到行首</span><br><span class="line">shift + end:                调整选择范围到行尾</span><br></pre></td></tr></table></figure></li><li><p>光标操作快捷键</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">command + left:             通常是移动到行首</span><br><span class="line">command + right:            通常是移动到行尾</span><br><span class="line">alt + left:                 通常是向左移动一个单词</span><br><span class="line">alt + right:                通常是向右移动一个单词</span><br></pre></td></tr></table></figure></li><li><p>终端标签快捷键</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command + [Number]:         跳转到标签页Number</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;

&lt;h3 id=&quot;macOS-Ghostty-终端默认快捷键列表&quot;&gt;&lt;a href=&quot;#macOS-Ghostty-终端默认快捷键列表&quot; class=&quot;headerlink&quot; title=&quot;macOS Ghostty 终端默认快捷键列表&quot;&gt;&lt;/a&gt;macOS Ghostty 终端默认快捷键列表&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;基本常用快捷键&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;command + t:                新建标签页&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + n:                新建窗口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + w:                关闭当前终端界面（标签页或分割窗口）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + shift + w:        关闭当前窗口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + shift + enter:    切换分割窗口缩放&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + alt + shift + w:  关闭所有窗口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + page_up:          向上滚动页面&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + page_down:        向下滚动页面&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + home:             滚动到顶部&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + end:              滚动到底部&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + q:                退出 Ghostty&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + enter:            切换全屏模式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + ctrl + f:         切换全屏模式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + c:                复制到剪贴板&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + v:                从剪贴板粘贴&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + a:                全选&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + k:                清空屏幕&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + comma:            打开配置文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;command + alt + i:          切换检查器&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="macOS" scheme="https://www.wdft.com/categories/macOS/"/>
    
    
    <category term="Ghostty" scheme="https://www.wdft.com/tags/Ghostty/"/>
    
    <category term="terminal" scheme="https://www.wdft.com/tags/terminal/"/>
    
  </entry>
  
  <entry>
    <title>人是怎样废掉的？</title>
    <link href="https://www.wdft.com/187f82a.html"/>
    <id>https://www.wdft.com/187f82a.html</id>
    <published>2024-09-28T11:18:08.000Z</published>
    <updated>2025-10-06T08:03:07.369Z</updated>
    
    <content type="html"><![CDATA[<!--toc--><ul><li>一、懒</li><li>二、谗</li><li>三、拖延</li><li>四、爱熬夜！：继续睡觉做梦；</li><li>五、自控力差</li><li>六、整天精神内耗</li><li>七、停止思考不学习</li><li>八、假装努力，持续幻想</li><li>九、言语上的巨人，行动上的矮子<span id="more"></span></li></ul><h6 id="同样是睡8时，你为什么不选22-00-6-00？"><a href="#同样是睡8时，你为什么不选22-00-6-00？" class="headerlink" title="同样是睡8时，你为什么不选22:00-6:00？"></a>同样是睡8时，你为什么不选22:00-6:00？</h6><h6 id="而是4-00-12-00？记住：自律的本质，就是亲手杀死另一个颓废的自己。"><a href="#而是4-00-12-00？记住：自律的本质，就是亲手杀死另一个颓废的自己。" class="headerlink" title="而是4:00-12:00？记住：自律的本质，就是亲手杀死另一个颓废的自己。"></a>而是4:00-12:00？记住：自律的本质，就是亲手杀死另一个颓废的自己。</h6><img src="assets/images/daily/2024-09-28-rszmfdd.jpeg" width="600" height="auto" /><h4 id="How-do-people-become-useless"><a href="#How-do-people-become-useless" class="headerlink" title="How do people become useless?"></a>How do people become useless?</h4><ul><li>1、 Lazy</li><li>2、 Slander</li><li>3、 Procrastination</li><li>4、 Love staying up late Continue sleeping and dreaming;</li><li>5、 Poor self-control</li><li>6、 Mental exhaustion throughout the day</li><li>7、 Stop thinking and not learning</li><li>8、 Pretend to work hard and keep fantasizing</li><li>9、 A giant in words, a dwarf in action</li></ul><h6 id="Why-don’t-you-choose-22-00-6-00-when-you-sleep-at-8-o’clock"><a href="#Why-don’t-you-choose-22-00-6-00-when-you-sleep-at-8-o’clock" class="headerlink" title="Why don’t you choose 22:00-6:00 when you sleep at 8 o’clock?"></a>Why don’t you choose 22:00-6:00 when you sleep at 8 o’clock?</h6><h6 id="But-instead-of-4-00-12-00-Remember-the-essence-of-self-discipline-is-to-personally-kill-another-decadent-version-of-oneself"><a href="#But-instead-of-4-00-12-00-Remember-the-essence-of-self-discipline-is-to-personally-kill-another-decadent-version-of-oneself" class="headerlink" title="But instead of 4:00-12:00? Remember: the essence of self-discipline is to personally kill another decadent version of oneself."></a>But instead of 4:00-12:00? Remember: the essence of self-discipline is to personally kill another decadent version of oneself.</h6>]]></content>
    
    
    <summary type="html">&lt;!--toc--&gt;

&lt;ul&gt;
&lt;li&gt;一、懒&lt;/li&gt;
&lt;li&gt;二、谗&lt;/li&gt;
&lt;li&gt;三、拖延&lt;/li&gt;
&lt;li&gt;四、爱熬夜！：继续睡觉做梦；&lt;/li&gt;
&lt;li&gt;五、自控力差&lt;/li&gt;
&lt;li&gt;六、整天精神内耗&lt;/li&gt;
&lt;li&gt;七、停止思考不学习&lt;/li&gt;
&lt;li&gt;八、假装努力，持续幻想&lt;/li&gt;
&lt;li&gt;九、言语上的巨人，行动上的矮子</summary>
    
    
    
    <category term="daily" scheme="https://www.wdft.com/categories/daily/"/>
    
    <category term="note" scheme="https://www.wdft.com/categories/daily/note/"/>
    
    
    <category term="生活" scheme="https://www.wdft.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
    <category term="日常" scheme="https://www.wdft.com/tags/%E6%97%A5%E5%B8%B8/"/>
    
    <category term="人生" scheme="https://www.wdft.com/tags/%E4%BA%BA%E7%94%9F/"/>
    
    <category term="转载" scheme="https://www.wdft.com/tags/%E8%BD%AC%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>Rocky Linux系统初始化常用基础命令和工具包的便捷安装脚本（ljq@GitHub）</title>
    <link href="https://www.wdft.com/96f1067a.html"/>
    <id>https://www.wdft.com/96f1067a.html</id>
    <published>2024-07-04T13:47:01.000Z</published>
    <updated>2025-10-05T15:05:46.073Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h3 id="Description-A-script-to-check-system-version-and-installed-tools-on-Rocky-Linux-（脚本描述：一个用于检查系统版本和Rocky-Linux系统初始化工具的便捷脚本-安装系统常用命令和工具包。）"><a href="#Description-A-script-to-check-system-version-and-installed-tools-on-Rocky-Linux-（脚本描述：一个用于检查系统版本和Rocky-Linux系统初始化工具的便捷脚本-安装系统常用命令和工具包。）" class="headerlink" title="Description: A script to check system version and installed tools on Rocky Linux.（脚本描述：一个用于检查系统版本和Rocky Linux系统初始化工具的便捷脚本,安装系统常用命令和工具包。）"></a>Description: A script to check system version and installed tools on Rocky Linux.（脚本描述：一个用于检查系统版本和Rocky Linux系统初始化工具的便捷脚本,安装系统常用命令和工具包。）</h3><h5 id="Author-Jacoliu-ljq-GitHub"><a href="#Author-Jacoliu-ljq-GitHub" class="headerlink" title="Author: Jacoliu (ljq@GitHub)"></a>Author: Jacoliu (ljq@GitHub)</h5><h5 id="Usage-x2F-rocky-linux-init-sh"><a href="#Usage-x2F-rocky-linux-init-sh" class="headerlink" title="Usage: .&#x2F;rocky-linux-init.sh"></a>Usage: .&#x2F;rocky-linux-init.sh</h5><h5 id="Version-1-0"><a href="#Version-1-0" class="headerlink" title="Version: 1.0"></a>Version: 1.0</h5><h5 id="Date-2023-07-04"><a href="#Date-2023-07-04" class="headerlink" title="Date: 2023-07-04"></a>Date: 2023-07-04</h5><h5 id="License-MIT"><a href="#License-MIT" class="headerlink" title="License: MIT"></a>License: MIT</h5><h5 id="Page-Site-https-github-com-ljq"><a href="#Page-Site-https-github-com-ljq" class="headerlink" title="Page Site: https://github.com/ljq"></a>Page Site: <a href="https://github.com/ljq">https://github.com/ljq</a></h5><p><a href="https://github.com/ljq/Jacoliu-linux-notes/blob/master/release-version/rocky-linux/rocky-linux-init.sh">release-version&#x2F;rocky-linux&#x2F;rocky-linux-init.sh</a></p><p>Rocky Linux 发行版本默认检查安装基础工具包含：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># Define tools list in lowercase</span><br><span class="line">tools=(</span><br><span class="line">    &quot;vim&quot;          # 0</span><br><span class="line">    &quot;ping&quot;         # 1</span><br><span class="line">    &quot;net-tools&quot;    # 2</span><br><span class="line">    &quot;firewalld&quot;    # 3</span><br><span class="line">    &quot;tar&quot;          # 4</span><br><span class="line">    &quot;gzip&quot;         # 5</span><br><span class="line">    &quot;bzip2&quot;        # 6</span><br><span class="line">    &quot;wget&quot;         # 7</span><br><span class="line">    &quot;curl&quot;         # 8</span><br><span class="line">    &quot;python 3&quot;     # 9</span><br><span class="line">    &quot;git&quot;          # 10</span><br><span class="line">    &quot;ncurses&quot;      # 11</span><br><span class="line">)</span><br></pre></td></tr></table></figure><span id="more"></span><h6 id="备注：脚本简单灵活，可根据需要自行配置相关常用命令，方便系统管理员快速初始化系统基础环境。"><a href="#备注：脚本简单灵活，可根据需要自行配置相关常用命令，方便系统管理员快速初始化系统基础环境。" class="headerlink" title="备注：脚本简单灵活，可根据需要自行配置相关常用命令，方便系统管理员快速初始化系统基础环境。"></a>备注：脚本简单灵活，可根据需要自行配置相关常用命令，方便系统管理员快速初始化系统基础环境。</h6>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;


&lt;h3 id=&quot;Description-A-script-to-check-system-version-and-installed-tools-on-Rocky-Linux-（脚本描述：一个用于检查系统版本和Rocky-Linux系统初始化工具的便捷脚本-安装系统常用命令和工具包。）&quot;&gt;&lt;a href=&quot;#Description-A-script-to-check-system-version-and-installed-tools-on-Rocky-Linux-（脚本描述：一个用于检查系统版本和Rocky-Linux系统初始化工具的便捷脚本-安装系统常用命令和工具包。）&quot; class=&quot;headerlink&quot; title=&quot;Description: A script to check system version and installed tools on Rocky Linux.（脚本描述：一个用于检查系统版本和Rocky Linux系统初始化工具的便捷脚本,安装系统常用命令和工具包。）&quot;&gt;&lt;/a&gt;Description: A script to check system version and installed tools on Rocky Linux.（脚本描述：一个用于检查系统版本和Rocky Linux系统初始化工具的便捷脚本,安装系统常用命令和工具包。）&lt;/h3&gt;&lt;h5 id=&quot;Author-Jacoliu-ljq-GitHub&quot;&gt;&lt;a href=&quot;#Author-Jacoliu-ljq-GitHub&quot; class=&quot;headerlink&quot; title=&quot;Author: Jacoliu (ljq@GitHub)&quot;&gt;&lt;/a&gt;Author: Jacoliu (ljq@GitHub)&lt;/h5&gt;&lt;h5 id=&quot;Usage-x2F-rocky-linux-init-sh&quot;&gt;&lt;a href=&quot;#Usage-x2F-rocky-linux-init-sh&quot; class=&quot;headerlink&quot; title=&quot;Usage: .&amp;#x2F;rocky-linux-init.sh&quot;&gt;&lt;/a&gt;Usage: .&amp;#x2F;rocky-linux-init.sh&lt;/h5&gt;&lt;h5 id=&quot;Version-1-0&quot;&gt;&lt;a href=&quot;#Version-1-0&quot; class=&quot;headerlink&quot; title=&quot;Version: 1.0&quot;&gt;&lt;/a&gt;Version: 1.0&lt;/h5&gt;&lt;h5 id=&quot;Date-2023-07-04&quot;&gt;&lt;a href=&quot;#Date-2023-07-04&quot; class=&quot;headerlink&quot; title=&quot;Date: 2023-07-04&quot;&gt;&lt;/a&gt;Date: 2023-07-04&lt;/h5&gt;&lt;h5 id=&quot;License-MIT&quot;&gt;&lt;a href=&quot;#License-MIT&quot; class=&quot;headerlink&quot; title=&quot;License: MIT&quot;&gt;&lt;/a&gt;License: MIT&lt;/h5&gt;&lt;h5 id=&quot;Page-Site-https-github-com-ljq&quot;&gt;&lt;a href=&quot;#Page-Site-https-github-com-ljq&quot; class=&quot;headerlink&quot; title=&quot;Page Site: https://github.com/ljq&quot;&gt;&lt;/a&gt;Page Site: &lt;a href=&quot;https://github.com/ljq&quot;&gt;https://github.com/ljq&lt;/a&gt;&lt;/h5&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/ljq/Jacoliu-linux-notes/blob/master/release-version/rocky-linux/rocky-linux-init.sh&quot;&gt;release-version&amp;#x2F;rocky-linux&amp;#x2F;rocky-linux-init.sh&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Rocky Linux 发行版本默认检查安装基础工具包含：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# Define tools list in lowercase&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tools=(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;vim&amp;quot;          # 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;ping&amp;quot;         # 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net-tools&amp;quot;    # 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;firewalld&amp;quot;    # 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;tar&amp;quot;          # 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;gzip&amp;quot;         # 5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;bzip2&amp;quot;        # 6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;wget&amp;quot;         # 7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;curl&amp;quot;         # 8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;python 3&amp;quot;     # 9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;git&amp;quot;          # 10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;ncurses&amp;quot;      # 11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="linux" scheme="https://www.wdft.com/categories/linux/"/>
    
    <category term="centos" scheme="https://www.wdft.com/categories/linux/centos/"/>
    
    
    <category term="linux" scheme="https://www.wdft.com/tags/linux/"/>
    
    <category term="rocky-linux" scheme="https://www.wdft.com/tags/rocky-linux/"/>
    
    <category term="rocky-linux-tools" scheme="https://www.wdft.com/tags/rocky-linux-tools/"/>
    
    <category term="rocky" scheme="https://www.wdft.com/tags/rocky/"/>
    
  </entry>
  
  <entry>
    <title>MySQL 8.0为什么使用utf8mb4_0900_ai_ci默认校对规则，而不使用utf8mb4_general_ci?</title>
    <link href="https://www.wdft.com/93d6d12a.html"/>
    <id>https://www.wdft.com/93d6d12a.html</id>
    <published>2024-06-19T14:02:02.000Z</published>
    <updated>2025-10-05T15:05:46.074Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h3 id="MySQL-8-0-选择-utf8mb4-0900-ai-ci作为默认校对规则原因"><a href="#MySQL-8-0-选择-utf8mb4-0900-ai-ci作为默认校对规则原因" class="headerlink" title="MySQL 8.0 选择 utf8mb4_0900_ai_ci作为默认校对规则原因"></a>MySQL 8.0 选择 utf8mb4_0900_ai_ci作为默认校对规则原因</h3><ul><li>主要的考虑主要基于对全球化支持的增强，<strong>基于Unicode 9.0规范</strong>，utf8mb4_0900_ai_ci在未来可以更容易地适应新的Unicode规范和扩展字符集。</li><li>更精确的字符处理以及适应现代应用需求等方面。</li></ul><h3 id="两者差异对比要点："><a href="#两者差异对比要点：" class="headerlink" title="两者差异对比要点："></a>两者差异对比要点：</h3><ul><li><p>全球化支持的增强</p><ul><li>更广泛的字符集支持：utf8mb4_0900_ai_ci支持Unicode 9.0标准，这意味着它可以存储和处理更多的字符，包括许多特殊的emoji表情和其他少见字符。这对于现代应用程序尤为重要，因为它们常常需要处理这些扩展字符集。</li><li>多语言环境的适用性：随着全球化的发展，应用程序需要支持多种语言和字符集。utf8mb4_0900_ai_ci不仅支持更多的语言和字符，还能更准确地处理这些语言中的特定字符问题。</li><li>国际化应用的优选：在涉及多语言和国际化处理的应用中，utf8mb4_0900_ai_ci能够提供更全面的支持，确保数据的准确性和一致性。</li></ul></li><li><p>更精确的字符处理</p><ul><li>不区分重音和大小写：与utf8mb4_general_ci相比，utf8mb4_0900_ai_ci在比较和排序字符时不区分重音和大小写。例如，‘é’和‘e’被认为是相同的字符，‘A’和‘a’也被认为是相同的字符。这种规则对于处理语言如西班牙语和法语等重音丰富的语言尤为重要。</li><li>基于Unicode 9.0的排序和比较规则：通过实现Unicode 9.0的排序和比较规则，utf8mb4_0900_ai_ci提供了更精确、更现代的Unicode支持。这确保了在数据库中对字符进行排序和比较时能够按照最新的国际化标准进行。</li><li>提升搜索和排序的准确性：由于其先进的排序规则，utf8mb4_0900_ai_ci能够更准确地处理涉及重音符号的字符排序，这在许多语言中是必需的。</li></ul></li></ul><span id="more"></span><ul><li><p>适应现代应用需求</p><ul><li>支持最新Unicode规范：Unicode规范不断更新，以包含更多的字符和修正现有的规则。utf8mb4_0900_ai_ci基于较新的Unicode 9.0规范，能够更好地适应未来的应用需求。</li><li>提高数据准确性：在需要高度准确的字符表示和处理的场景中，utf8mb4_0900_ai_ci能够提供更好的支持。例如，电子商务平台和内容管理系统等需要处理多语言字符并保持数据准确性的应用，都会从中受益。</li><li>满足多样化的使用场景：无论是国际化应用还是本地化要求高的应用，utf8mb4_0900_ai_ci都能提供强大的支持，满足多样化的使用场景。</li></ul></li><li><p>性能与优化</p><ul><li>性能的权衡考虑：虽然utf8mb4_0900_ai_ci在处理更复杂的排序和比较规则时可能会牺牲一定的性能，但这与其提供的其他优势相比是值得的。尤其是在现代硬件条件下，这种性能差异的影响越来越小。</li><li>优化字符存储和传输：通过支持更多的字符集，utf8mb4_0900_ai_ci能够在存储和传输数据时更加高效。特别是在处理Emoji表情和其他4字节字符时，其优势尤为明显。</li><li>适应高负载应用环境：在高负载和高并发的应用环境中，utf8mb4_0900_ai_ci能够保持较好的性能表现，同时确保数据的一致性和准确性。</li></ul></li><li><p>兼容性与扩展性</p><ul><li>向下兼容早期版本：尽管utf8mb4_0900_ai_ci是为MySQL 8.0及以上版本设计的，但它也在一定程度上保持了对早期版本的兼容。这使得升级数据库时能够更加平滑地过渡。</li><li>未来扩展的可能性：基于Unicode 9.0规范，utf8mb4_0900_ai_ci在未来可以更容易地适应新的Unicode规范和扩展字符集。这对于确保数据库系统在未来继续有效运行至关重要。</li><li>跨平台和跨系统的支持：由于其强大的兼容性和扩展性，utf8mb4_0900_ai_ci可以在各种平台和系统中使用，确保了广泛的应用范围。</li></ul></li></ul><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>MySQL 8.0采用utf8mb4_0900_ai_ci作为默认校对规则，主要是为了更好地适应全球化应用需求、提供更精确的字符处理能力、并确保数据库系统在未来的持续可用性和扩展性。尽管在性能上可能稍有牺牲(实际上经过mysql8.0版本的重构，性能损失可以不必过度考量)，但其带来的长期收益和对现代应用需求的支持使得这一选择具有显著的合理性和前瞻性。</p>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;

&lt;h3 id=&quot;MySQL-8-0-选择-utf8mb4-0900-ai-ci作为默认校对规则原因&quot;&gt;&lt;a href=&quot;#MySQL-8-0-选择-utf8mb4-0900-ai-ci作为默认校对规则原因&quot; class=&quot;headerlink&quot; title=&quot;MySQL 8.0 选择 utf8mb4_0900_ai_ci作为默认校对规则原因&quot;&gt;&lt;/a&gt;MySQL 8.0 选择 utf8mb4_0900_ai_ci作为默认校对规则原因&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;主要的考虑主要基于对全球化支持的增强，&lt;strong&gt;基于Unicode 9.0规范&lt;/strong&gt;，utf8mb4_0900_ai_ci在未来可以更容易地适应新的Unicode规范和扩展字符集。&lt;/li&gt;
&lt;li&gt;更精确的字符处理以及适应现代应用需求等方面。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;两者差异对比要点：&quot;&gt;&lt;a href=&quot;#两者差异对比要点：&quot; class=&quot;headerlink&quot; title=&quot;两者差异对比要点：&quot;&gt;&lt;/a&gt;两者差异对比要点：&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;全球化支持的增强&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;更广泛的字符集支持：utf8mb4_0900_ai_ci支持Unicode 9.0标准，这意味着它可以存储和处理更多的字符，包括许多特殊的emoji表情和其他少见字符。这对于现代应用程序尤为重要，因为它们常常需要处理这些扩展字符集。&lt;/li&gt;
&lt;li&gt;多语言环境的适用性：随着全球化的发展，应用程序需要支持多种语言和字符集。utf8mb4_0900_ai_ci不仅支持更多的语言和字符，还能更准确地处理这些语言中的特定字符问题。&lt;/li&gt;
&lt;li&gt;国际化应用的优选：在涉及多语言和国际化处理的应用中，utf8mb4_0900_ai_ci能够提供更全面的支持，确保数据的准确性和一致性。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;更精确的字符处理&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不区分重音和大小写：与utf8mb4_general_ci相比，utf8mb4_0900_ai_ci在比较和排序字符时不区分重音和大小写。例如，‘é’和‘e’被认为是相同的字符，‘A’和‘a’也被认为是相同的字符。这种规则对于处理语言如西班牙语和法语等重音丰富的语言尤为重要。&lt;/li&gt;
&lt;li&gt;基于Unicode 9.0的排序和比较规则：通过实现Unicode 9.0的排序和比较规则，utf8mb4_0900_ai_ci提供了更精确、更现代的Unicode支持。这确保了在数据库中对字符进行排序和比较时能够按照最新的国际化标准进行。&lt;/li&gt;
&lt;li&gt;提升搜索和排序的准确性：由于其先进的排序规则，utf8mb4_0900_ai_ci能够更准确地处理涉及重音符号的字符排序，这在许多语言中是必需的。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Database" scheme="https://www.wdft.com/categories/Database/"/>
    
    
    <category term="mysql8.x" scheme="https://www.wdft.com/tags/mysql8-x/"/>
    
    <category term="mysql8.0" scheme="https://www.wdft.com/tags/mysql8-0/"/>
    
    <category term="mysql" scheme="https://www.wdft.com/tags/mysql/"/>
    
    <category term="utf8mb4" scheme="https://www.wdft.com/tags/utf8mb4/"/>
    
    <category term="utf8mb4_0900_ai_ci" scheme="https://www.wdft.com/tags/utf8mb4-0900-ai-ci/"/>
    
    <category term="utf8mb4_general_ci" scheme="https://www.wdft.com/tags/utf8mb4-general-ci/"/>
    
  </entry>
  
  <entry>
    <title>《如何创建一家像谷歌一样的公司》（How to start Google）- paulgraham - 转载</title>
    <link href="https://www.wdft.com/de20129e.html"/>
    <id>https://www.wdft.com/de20129e.html</id>
    <published>2024-03-27T16:51:01.000Z</published>
    <updated>2025-10-05T15:05:46.066Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h6 id="文章原文地址：https-paulgraham-com-google-html-（作者：保罗格雷厄姆）"><a href="#文章原文地址：https-paulgraham-com-google-html-（作者：保罗格雷厄姆）" class="headerlink" title="文章原文地址：https://paulgraham.com/google.html （作者：保罗格雷厄姆）"></a>文章原文地址：<a href="https://paulgraham.com/google.html">https://paulgraham.com/google.html</a> （作者：保罗格雷厄姆）</h6><h3 id="《如何创建一家像谷歌一样的公司》（How-to-start-Google）"><a href="#《如何创建一家像谷歌一样的公司》（How-to-start-Google）" class="headerlink" title="《如何创建一家像谷歌一样的公司》（How to start Google）"></a>《如何创建一家像谷歌一样的公司》（How to start Google）</h3><p>2024 年 3 月</p><h5 id="（这是我给14岁和15岁的孩子们做的演讲，内容是如果他们以后想要创业的话现在该怎么做。很多学校认为他们应该告诉学生一些关于创业的事情。这就是我认为他们应该告诉他们的。-）"><a href="#（这是我给14岁和15岁的孩子们做的演讲，内容是如果他们以后想要创业的话现在该怎么做。很多学校认为他们应该告诉学生一些关于创业的事情。这就是我认为他们应该告诉他们的。-）" class="headerlink" title="（这是我给14岁和15岁的孩子们做的演讲，内容是如果他们以后想要创业的话现在该怎么做。很多学校认为他们应该告诉学生一些关于创业的事情。这就是我认为他们应该告诉他们的。 ）"></a>（这是我给14岁和15岁的孩子们做的演讲，内容是如果他们以后想要创业的话现在该怎么做。很多学校认为他们应该告诉学生一些关于创业的事情。这就是我认为他们应该告诉他们的。 ）</h5><p>你们中的大多数人可能认为，当您被释放到所谓的现实世界中时，您最终将不得不找到某种工作。 这不是真的，今天我要谈谈一个可以用来避免找工作的技巧。</p><p>诀窍是创办自己的公司。 所以这并不是逃避工作的伎俩，因为如果你创办自己的公司，你会比从事普通工作时更加努力。 但你会避免工作带来的许多烦人的事情，包括老板告诉你该做什么。</p><span id="more"></span><p>从事自己的项目比从事别人的项目更令人兴奋。 而且你还可以变得更加富有。 事实上，这是真正致富的标准方式。 如果你看一下偶尔在媒体上公布的最富有的人名单，你会发现几乎所有人都是通过创办自己的公司来实现这一目标的。</p><p>创办自己的公司可以意味着任何事情，从创办理发店到创办谷歌。 我来这里是要谈谈这个连续体的一个极端。 我将告诉您如何启动 Google。</p><p>位于谷歌连续体末端的公司在年轻时被称为初创公司。 我之所以了解他们，是因为我和妻子杰西卡创办了一家名为 Y Combinator 的公司，它基本上是一家初创工厂。 自 2005 年以来，Y Combinator 已资助了 4000 多家初创公司。 因此，我们确切地知道您创办一家初创公司需要什么，因为我们在过去 19 年里一直在帮助人们做到这一点。</p><p>当我说我要告诉你如何启动 Google 时，你可能认为我在开玩笑。 您可能会想“我们怎样才能启动 Google？” 但这实际上就是那些创建谷歌的人在创建之前所想的。 如果你告诉谷歌创始人拉里·佩奇和谢尔盖·布林，他们即将创办的公司有一天将价值超过一万亿美元，他们的脑袋一定会爆炸。</p><p>当你开始创业时，你所能知道的就是它似乎值得追求。 你不知道它会变成一家价值数十亿的公司还是一家倒闭的公司。 因此，当我说我要告诉你如何创办谷歌时，我的意思是我要告诉你如何才能创办一家像谷歌一样有机会成为谷歌的公司。 谷歌。 [1]</p><p>你如何从现在的状态发展到可以成功创业的地步？ 你需要三件事。 你需要擅长某种技术，你需要对你要构建的东西有一个想法，你需要联合创始人来创办公司。</p><p>如何才能擅长技术？ 您如何选择擅长哪种技术？ 这两个问题都有相同的答案：致力于自己的项目。 不要试图猜测基因编辑、法学硕士或火箭是否会成为最有价值的技术。 没有人能预测这一点。 只做你最感兴趣的事情。 你会在你感兴趣的事情上比你正在做的事情更加努力，因为你认为你应该这样做。</p><p>如果您不确定要擅长什么技术，那就擅长编程。 这一直是过去 30 年初创企业中位数的来源，而且在未来 10 年可能不会改变。</p><p>那些在学校上计算机科学课程的人此时可能会想，好吧，我们已经解决了这个问题。 我们已经被教授了所有关于编程的知识。 但抱歉，这还不够。 你必须致力于自己的项目，而不仅仅是在课堂上学习东西。 您可以在计算机科学课程上取得好成绩，而无需真正学习编程。 事实上，你可以从顶尖大学获得计算机科学学位，但仍然不擅长编程。 这就是为什么科技公司在雇用你之前都会让你参加编码测试，无论你在哪里上的大学或者你在那里表现得如何。 他们知道成绩和考试结果不能证明什么。</p><p>如果你真的想学习编程，你就必须从事自己的项目。 这样你学得更快。 想象一下，您正在编写一款游戏，并且您想要在其中执行某些操作，但您不知道如何执行。 你会发现比在课堂上学习任何东西要快得多。</p><p>不过，您不必学习编程。 如果您想知道什么才算技术，它几乎包括您可以使用“制造”或“构建”一词描述的所有内容。 所以焊接、制作衣服、制作视频都算数。 无论你对什么最感兴趣。关键的区别在于你是在生产还是只是在消费。 您是在编写电脑游戏，还是只是玩游戏？ 这就是截止点。</p><p>苹果公司的创始人史蒂夫·乔布斯（Steve Jobs）在青少年时期就花时间学习书法——那种美丽的书法。</p><h6 id="文章原文地址：https-paulgraham-com-google-html-（作者：保罗格雷厄姆）-1"><a href="#文章原文地址：https-paulgraham-com-google-html-（作者：保罗格雷厄姆）-1" class="headerlink" title="文章原文地址：https://paulgraham.com/google.html （作者：保罗格雷厄姆）"></a>文章原文地址：<a href="https://paulgraham.com/google.html">https://paulgraham.com/google.html</a> （作者：保罗格雷厄姆）</h6>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;

&lt;h6 id=&quot;文章原文地址：https-paulgraham-com-google-html-（作者：保罗格雷厄姆）&quot;&gt;&lt;a href=&quot;#文章原文地址：https-paulgraham-com-google-html-（作者：保罗格雷厄姆）&quot; class=&quot;headerlink&quot; title=&quot;文章原文地址：https://paulgraham.com/google.html （作者：保罗格雷厄姆）&quot;&gt;&lt;/a&gt;文章原文地址：&lt;a href=&quot;https://paulgraham.com/google.html&quot;&gt;https://paulgraham.com/google.html&lt;/a&gt; （作者：保罗格雷厄姆）&lt;/h6&gt;&lt;h3 id=&quot;《如何创建一家像谷歌一样的公司》（How-to-start-Google）&quot;&gt;&lt;a href=&quot;#《如何创建一家像谷歌一样的公司》（How-to-start-Google）&quot; class=&quot;headerlink&quot; title=&quot;《如何创建一家像谷歌一样的公司》（How to start Google）&quot;&gt;&lt;/a&gt;《如何创建一家像谷歌一样的公司》（How to start Google）&lt;/h3&gt;&lt;p&gt;2024 年 3 月&lt;/p&gt;
&lt;h5 id=&quot;（这是我给14岁和15岁的孩子们做的演讲，内容是如果他们以后想要创业的话现在该怎么做。很多学校认为他们应该告诉学生一些关于创业的事情。这就是我认为他们应该告诉他们的。-）&quot;&gt;&lt;a href=&quot;#（这是我给14岁和15岁的孩子们做的演讲，内容是如果他们以后想要创业的话现在该怎么做。很多学校认为他们应该告诉学生一些关于创业的事情。这就是我认为他们应该告诉他们的。-）&quot; class=&quot;headerlink&quot; title=&quot;（这是我给14岁和15岁的孩子们做的演讲，内容是如果他们以后想要创业的话现在该怎么做。很多学校认为他们应该告诉学生一些关于创业的事情。这就是我认为他们应该告诉他们的。 ）&quot;&gt;&lt;/a&gt;（这是我给14岁和15岁的孩子们做的演讲，内容是如果他们以后想要创业的话现在该怎么做。很多学校认为他们应该告诉学生一些关于创业的事情。这就是我认为他们应该告诉他们的。 ）&lt;/h5&gt;&lt;p&gt;你们中的大多数人可能认为，当您被释放到所谓的现实世界中时，您最终将不得不找到某种工作。 这不是真的，今天我要谈谈一个可以用来避免找工作的技巧。&lt;/p&gt;
&lt;p&gt;诀窍是创办自己的公司。 所以这并不是逃避工作的伎俩，因为如果你创办自己的公司，你会比从事普通工作时更加努力。 但你会避免工作带来的许多烦人的事情，包括老板告诉你该做什么。&lt;/p&gt;</summary>
    
    
    
    <category term="reprinted-articles" scheme="https://www.wdft.com/categories/reprinted-articles/"/>
    
    
    <category term="Google" scheme="https://www.wdft.com/tags/Google/"/>
    
  </entry>
  
  <entry>
    <title>WDFT (Warped Discrete Fourier Transform)</title>
    <link href="https://www.wdft.com/e324f38b.html"/>
    <id>https://www.wdft.com/e324f38b.html</id>
    <published>2024-02-17T01:02:00.000Z</published>
    <updated>2025-10-05T15:05:46.138Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h3 id="WDFT-Warped-Discrete-Fourier-Transform-by-Go"><a href="#WDFT-Warped-Discrete-Fourier-Transform-by-Go" class="headerlink" title="WDFT (Warped Discrete Fourier Transform) by Go"></a>WDFT (Warped Discrete Fourier Transform) by Go</h3><h5 id="Implementation-of-Go-language"><a href="#Implementation-of-Go-language" class="headerlink" title="Implementation of Go language:"></a>Implementation of Go language:</h5><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;math&quot;</span><br><span class="line">&quot;math/cmplx&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// 定义扭曲函数，这里以幂函数为例</span><br><span class="line">func distortionFunction(omega float64) float64 &#123;</span><br><span class="line">return math.Pow(omega, 1.5) // 可根据需要修改扭曲函数</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 离散傅里叶变换</span><br><span class="line">func dft(signal []float64) []complex128 &#123;</span><br><span class="line">N := len(signal)</span><br><span class="line">result := make([]complex128, N)</span><br><span class="line"></span><br><span class="line">for k := 0; k &lt; N; k++ &#123;</span><br><span class="line">var sum complex128</span><br><span class="line">for n := 0; n &lt; N; n++ &#123;</span><br><span class="line">omega := -2 * math.Pi * float64(k*n) / float64(N)</span><br><span class="line">sum += complex(signal[n], 0) * cmplx.Exp(complex(0, omega))</span><br><span class="line">&#125;</span><br><span class="line">result[k] = sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 扭曲离散傅里叶变换</span><br><span class="line">func wdft(signal []float64) []complex128 &#123;</span><br><span class="line">N := len(signal)</span><br><span class="line">spectrum := dft(signal)</span><br><span class="line"></span><br><span class="line">for k := 0; k &lt; N; k++ &#123;</span><br><span class="line">omega := 2 * math.Pi * float64(k) / float64(N)</span><br><span class="line">warpedOmega := distortionFunction(omega)</span><br><span class="line">spectrum[k] *= cmplx.Exp(complex(0, warpedOmega))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return spectrum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 反离散傅里叶变换</span><br><span class="line">func idft(spectrum []complex128) []float64 &#123;</span><br><span class="line">N := len(spectrum)</span><br><span class="line">result := make([]float64, N)</span><br><span class="line"></span><br><span class="line">for n := 0; n &lt; N; n++ &#123;</span><br><span class="line">var sum complex128</span><br><span class="line">for k := 0; k &lt; N; k++ &#123;</span><br><span class="line">omega := 2 * math.Pi * float64(k*n) / float64(N)</span><br><span class="line">sum += spectrum[k] * cmplx.Exp(complex(0, omega))</span><br><span class="line">&#125;</span><br><span class="line">result[n] = real(sum) / float64(N)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">// 生成一个简单的示例信号</span><br><span class="line">signal := make([]float64, 8)</span><br><span class="line">for i := range signal &#123;</span><br><span class="line">signal[i] = float64(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 进行WDFT变换</span><br><span class="line">spectrum := wdft(signal)</span><br><span class="line"></span><br><span class="line">// 对频域表示进行处理（这里省略具体处理步骤）</span><br><span class="line"></span><br><span class="line">// 进行反离散傅里叶变换</span><br><span class="line">outputSignal := idft(spectrum)</span><br><span class="line"></span><br><span class="line">// 输出结果</span><br><span class="line">fmt.Println(&quot;原始信号：&quot;, signal)</span><br><span class="line">fmt.Println(&quot;经过WDFT变换后的信号：&quot;, outputSignal)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Implementation-of-Rust-language"><a href="#Implementation-of-Rust-language" class="headerlink" title="Implementation of Rust language:"></a>Implementation of Rust language:</h5><p><strong>Cargo.toml</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[dependencies]</span><br><span class="line">num = &quot;0.4&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">use std::f64::consts::PI;</span><br><span class="line">use num::complex::Complex;</span><br><span class="line"></span><br><span class="line">// 定义扭曲函数</span><br><span class="line">fn distortion_function(omega: f64) -&gt; f64 &#123;</span><br><span class="line">    omega.powf(1.5) // 可根据需要修改扭曲函数</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 离散傅里叶变换</span><br><span class="line">fn dft(signal: &amp;[f64]) -&gt; Vec&lt;Complex&lt;f64&gt;&gt; &#123;</span><br><span class="line">    let n = signal.len();</span><br><span class="line">    let mut spectrum = vec![Complex::new(0.0, 0.0); n];</span><br><span class="line"></span><br><span class="line">    for k in 0..n &#123;</span><br><span class="line">        let mut sum = Complex::new(0.0, 0.0);</span><br><span class="line">        for n in 0..n &#123;</span><br><span class="line">            let omega = -2.0 * PI * k as f64 * n as f64 / n as f64;</span><br><span class="line">            sum += Complex::new(signal[n], 0.0) * Complex::from_polar(1.0, omega);</span><br><span class="line">        &#125;</span><br><span class="line">        spectrum[k] = sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    spectrum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 扭曲离散傅里叶变换</span><br><span class="line">fn wdft(signal: &amp;[f64]) -&gt; Vec&lt;Complex&lt;f64&gt;&gt; &#123;</span><br><span class="line">    let n = signal.len();</span><br><span class="line">    let spectrum = dft(signal);</span><br><span class="line"></span><br><span class="line">    let warped_spectrum: Vec&lt;Complex&lt;f64&gt;&gt; = spectrum</span><br><span class="line">        .iter()</span><br><span class="line">        .enumerate()</span><br><span class="line">        .map(|(k, &amp;value)| &#123;</span><br><span class="line">            let omega = 2.0 * PI * k as f64 / n as f64;</span><br><span class="line">            let warped_omega = distortion_function(omega);</span><br><span class="line">            value * Complex::from_polar(1.0, warped_omega)</span><br><span class="line">        &#125;)</span><br><span class="line">        .collect();</span><br><span class="line"></span><br><span class="line">    warped_spectrum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 反离散傅里叶变换</span><br><span class="line">fn idft(spectrum: &amp;[Complex&lt;f64&gt;]) -&gt; Vec&lt;f64&gt; &#123;</span><br><span class="line">    let n = spectrum.len();</span><br><span class="line">    let mut signal = vec![0.0; n];</span><br><span class="line"></span><br><span class="line">    for n in 0..n &#123;</span><br><span class="line">        let mut sum = Complex::new(0.0, 0.0);</span><br><span class="line">        for k in 0..n &#123;</span><br><span class="line">            let omega = 2.0 * PI * k as f64 * n as f64 / n as f64;</span><br><span class="line">            sum += spectrum[k] * Complex::from_polar(1.0, omega);</span><br><span class="line">        &#125;</span><br><span class="line">        signal[n] = sum.re / n as f64;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    signal</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn main() &#123;</span><br><span class="line">    // 生成一个简单的示例信号</span><br><span class="line">    let signal: Vec&lt;f64&gt; = (0..8).map(|i| i as f64).collect();</span><br><span class="line"></span><br><span class="line">    // 进行WDFT变换</span><br><span class="line">    let spectrum = wdft(&amp;signal);</span><br><span class="line"></span><br><span class="line">    // 对频域表示进行处理（这里省略具体处理步骤）</span><br><span class="line"></span><br><span class="line">    // 进行反离散傅里叶变换</span><br><span class="line">    let output_signal = idft(&amp;spectrum);</span><br><span class="line"></span><br><span class="line">    // 输出结果</span><br><span class="line">    println!(&quot;原始信号：&#123;:?&#125;&quot;, signal);</span><br><span class="line">    println!(&quot;经过WDFT变换后的信号：&#123;:?&#125;&quot;, output_signal);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;


&lt;h3 id=&quot;WDFT-Warped-Discrete-Fourier-Transform-by-Go&quot;&gt;&lt;a href=&quot;#WDFT-Warped-Discrete-Fourier-Transform-by-Go&quot; class=&quot;headerlink&quot; title=&quot;WDFT (Warped Discrete Fourier Transform) by Go&quot;&gt;&lt;/a&gt;WDFT (Warped Discrete Fourier Transform) by Go&lt;/h3&gt;&lt;h5 id=&quot;Implementation-of-Go-language&quot;&gt;&lt;a href=&quot;#Implementation-of-Go-language&quot; class=&quot;headerlink&quot; title=&quot;Implementation of Go language:&quot;&gt;&lt;/a&gt;Implementation of Go language:&lt;/h5&gt;</summary>
    
    
    
    <category term="Algorithm" scheme="https://www.wdft.com/categories/Algorithm/"/>
    
    
    <category term="clang" scheme="https://www.wdft.com/tags/clang/"/>
    
    <category term="type" scheme="https://www.wdft.com/tags/type/"/>
    
  </entry>
  
  <entry>
    <title>AI drawing ControlNet local implementation steps by stable-diffusion-webui（AI绘画ControlNet本地构建实施步骤 by stable-diffusion-webui）</title>
    <link href="https://www.wdft.com/4de059e7.html"/>
    <id>https://www.wdft.com/4de059e7.html</id>
    <published>2023-08-13T08:28:08.000Z</published>
    <updated>2025-10-05T15:05:46.071Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h3 id="Install-stable-diffusion-webui"><a href="#Install-stable-diffusion-webui" class="headerlink" title="Install stable-diffusion-webui"></a>Install stable-diffusion-webui</h3><p><strong>[Note]:</strong></p><ul><li>Unable to install due to network problems, it is recommended to use GIT source pull installation<br>（因网络问题导致无法安装，故建议使用GIT源码拉取安装方式）</li><li>Due to the large size of the model file, it is recommended to ensure sufficient space before installation: At least [source code + data model + extension]25G<br>（因模型文件较大，建议安装前确保有足够空间: 至少[源码+数据模型+扩展]25G）</li><li>The PC terminal to be built is 🍎 macOS Ventura 13.4.1(c), and the Windows environment is built in much the same way.<br>（构建PC终端是🍎 macOS Ventura 13.4.1(c)，Windows系统环境构建方式大同小异）  </li><li>Basic build tools (brew management recommended)<br>（基础构建工具（推荐brew管理））<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cmake</span><br><span class="line">wget</span><br><span class="line">git</span><br><span class="line">rust</span><br><span class="line">protobuf</span><br><span class="line">python3.x </span><br></pre></td></tr></table></figure></li></ul><h6 id="Project-key-directory（项目关键目录）"><a href="#Project-key-directory（项目关键目录）" class="headerlink" title="Project key directory（项目关键目录）"></a>Project key directory（项目关键目录）</h6><ul><li>stable-diffusion-webui&#x2F;extensions （扩展）</li><li>stable-diffusion-webui&#x2F;models (模型)</li></ul><h3 id="Construction-steps（构建步骤）"><a href="#Construction-steps（构建步骤）" class="headerlink" title="Construction steps（构建步骤）"></a>Construction steps（构建步骤）</h3><span id="more"></span><ul><li><p>Install and start service: stable-diffusion-webui (源码安装：stable-diffusion-webui)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Pull source code</span><br><span class="line">git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git &amp;&amp; cd stable-diffusion-webui</span><br><span class="line"></span><br><span class="line"># start web UI （启动web UI）</span><br><span class="line">./webui.sh</span><br><span class="line"></span><br><span class="line"># Running on local URL:  http://127.0.0.1:7860</span><br></pre></td></tr></table></figure></li><li><p>Default web UI url： <a href="http://127.0.0.1:7860/">http://127.0.0.1:7860</a></p></li></ul><h6 id="base-model-source-download-绘图基础模型下载"><a href="#base-model-source-download-绘图基础模型下载" class="headerlink" title="base model source download (绘图基础模型下载)"></a>base model source download (绘图基础模型下载)</h6><ul><li>AI drawing basic model download <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># models directory</span><br><span class="line">cd stable-diffusion-webui/models/Stable-diffusion</span><br><span class="line"></span><br><span class="line">wget https://huggingface.co/stabilityai/stable-diffusion-2/resolve/main/768-v-ema.ckpt</span><br><span class="line"></span><br><span class="line"># back stable-diffusion-webui &amp; restart webui.sh</span><br><span class="line">./webui.sh</span><br></pre></td></tr></table></figure></li></ul><h3 id="Basic-extensions-install-（基础插件安装）"><a href="#Basic-extensions-install-（基础插件安装）" class="headerlink" title="Basic extensions install （基础插件安装）"></a>Basic extensions install （基础插件安装）</h3><ul><li>Install controlnet extension （安装ContolNet扩展）<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># cd extensions path</span><br><span class="line">cd stable-diffusion-webui/extensions</span><br><span class="line"></span><br><span class="line"># Pull extension source code</span><br><span class="line">git clone https://github.com/Mikubill/sd-webui-controlnet.git</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># back to browser web UI click button：apply and restart</span><br></pre></td></tr></table></figure></li></ul><h6 id="Project-key-directory（项目关键目录）-1"><a href="#Project-key-directory（项目关键目录）-1" class="headerlink" title="Project key directory（项目关键目录）"></a>Project key directory（项目关键目录）</h6><ul><li><p>stable-diffusion-webui&#x2F;extensions （扩展）</p></li><li><p>stable-diffusion-webui&#x2F;models (模型)</p></li><li><p>Install openpose-editor extension (Custom pose) （安装openpose扩展）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># cd extensions path</span><br><span class="line">cd stable-diffusion-webui/extensions</span><br><span class="line"></span><br><span class="line"># Pull extension source code</span><br><span class="line">git clone https://github.com/fkunn1326/openpose-editor.git</span><br><span class="line"># back to browser web UI click button：apply and restart</span><br></pre></td></tr></table></figure></li></ul><h6 id="Extensions-include-directory-structure-（扩展包含目录结构）"><a href="#Extensions-include-directory-structure-（扩展包含目录结构）" class="headerlink" title="Extensions include directory structure （扩展包含目录结构）"></a>Extensions include directory structure （扩展包含目录结构）</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">extensions</span><br><span class="line">├── openpose-editor-master</span><br><span class="line">├── put extensions here.txt</span><br><span class="line">└── sd-webui-controlnet-main</span><br></pre></td></tr></table></figure><h6 id="Basic-Extensions-have-been-installed"><a href="#Basic-Extensions-have-been-installed" class="headerlink" title="Basic Extensions have been installed."></a>Basic Extensions have been installed.</h6><ul><li>back home page and open ControlNet tab.</li></ul><h3 id="Controlnet-associated-base-model-download-controlnet相关联的基础模型下载"><a href="#Controlnet-associated-base-model-download-controlnet相关联的基础模型下载" class="headerlink" title="Controlnet associated base model download (controlnet相关联的基础模型下载)"></a>Controlnet associated base model download (controlnet相关联的基础模型下载)</h3><h6 id="A-list-of-optional-models-is-suggested"><a href="#A-list-of-optional-models-is-suggested" class="headerlink" title="A list of optional models is suggested"></a>A list of optional models is suggested</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># cd models ControlNet path</span><br><span class="line">mkdir -p stable-diffusion-webui/models/ControlNet &amp;&amp; cd stable-diffusion-webui/models/ControlNet</span><br><span class="line"></span><br><span class="line"># canny</span><br><span class="line">wget https://huggingface.co/lllyasviel/ControlNet/resolve/main/models/control_sd15_canny.pth</span><br><span class="line"></span><br><span class="line"># openpose</span><br><span class="line">wget https://huggingface.co/lllyasviel/ControlNet/resolve/main/models/control_sd15_openpose.pth</span><br><span class="line"></span><br><span class="line"># scribble</span><br><span class="line">wget https://huggingface.co/lllyasviel/ControlNet/resolve/main/models/control_sd15_scribble.pth</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="Models-include-directory-structure-模型包含目录结构"><a href="#Models-include-directory-structure-模型包含目录结构" class="headerlink" title="Models include directory structure (模型包含目录结构)"></a>Models include directory structure (模型包含目录结构)</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">models</span><br><span class="line">├── ControlNet</span><br><span class="line">│   ├── control_sd15_canny.pth</span><br><span class="line">│   ├── control_sd15_openpose.pth</span><br><span class="line">│   └── control_sd15_scribble.pth</span><br><span class="line">├── Stable-diffusion</span><br><span class="line">│   ├── 768-v-ema.ckpt</span><br><span class="line">│   └── Put Stable Diffusion checkpoints here.txt</span><br></pre></td></tr></table></figure><h3 id="Installation-complete"><a href="#Installation-complete" class="headerlink" title="Installation complete"></a>Installation complete</h3><p>Notice：Note that some source code, model and extension download network is slow, it is recommended to use professional download tools to download<br>（注意事项，部分源码、模型和扩展下载网络缓慢，建议采用专业下载工具下载）</p>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;


&lt;h3 id=&quot;Install-stable-diffusion-webui&quot;&gt;&lt;a href=&quot;#Install-stable-diffusion-webui&quot; class=&quot;headerlink&quot; title=&quot;Install stable-diffusion-webui&quot;&gt;&lt;/a&gt;Install stable-diffusion-webui&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;[Note]:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Unable to install due to network problems, it is recommended to use GIT source pull installation&lt;br&gt;（因网络问题导致无法安装，故建议使用GIT源码拉取安装方式）&lt;/li&gt;
&lt;li&gt;Due to the large size of the model file, it is recommended to ensure sufficient space before installation: At least [source code + data model + extension]25G&lt;br&gt;（因模型文件较大，建议安装前确保有足够空间: 至少[源码+数据模型+扩展]25G）&lt;/li&gt;
&lt;li&gt;The PC terminal to be built is 🍎 macOS Ventura 13.4.1(c), and the Windows environment is built in much the same way.&lt;br&gt;（构建PC终端是🍎 macOS Ventura 13.4.1(c)，Windows系统环境构建方式大同小异）  &lt;/li&gt;
&lt;li&gt;Basic build tools (brew management recommended)&lt;br&gt;（基础构建工具（推荐brew管理））&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cmake&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rust&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;protobuf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;python3.x &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h6 id=&quot;Project-key-directory（项目关键目录）&quot;&gt;&lt;a href=&quot;#Project-key-directory（项目关键目录）&quot; class=&quot;headerlink&quot; title=&quot;Project key directory（项目关键目录）&quot;&gt;&lt;/a&gt;Project key directory（项目关键目录）&lt;/h6&gt;&lt;ul&gt;
&lt;li&gt;stable-diffusion-webui&amp;#x2F;extensions （扩展）&lt;/li&gt;
&lt;li&gt;stable-diffusion-webui&amp;#x2F;models (模型)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;Construction-steps（构建步骤）&quot;&gt;&lt;a href=&quot;#Construction-steps（构建步骤）&quot; class=&quot;headerlink&quot; title=&quot;Construction steps（构建步骤）&quot;&gt;&lt;/a&gt;Construction steps（构建步骤）&lt;/h3&gt;</summary>
    
    
    
    <category term="AI" scheme="https://www.wdft.com/categories/AI/"/>
    
    <category term="painting" scheme="https://www.wdft.com/categories/AI/painting/"/>
    
    <category term="Controlnet" scheme="https://www.wdft.com/categories/AI/painting/Controlnet/"/>
    
    <category term="Drawing" scheme="https://www.wdft.com/categories/AI/painting/Controlnet/Drawing/"/>
    
    
    <category term="AI" scheme="https://www.wdft.com/tags/AI/"/>
    
    <category term="stable-diffusion-webui" scheme="https://www.wdft.com/tags/stable-diffusion-webui/"/>
    
  </entry>
  
  <entry>
    <title>Tribute to the great legendary philanthropist and programmer Bram Moolenaar, the original author and software maintainer of VIM（致敬伟大传奇的慈善家和程序员Bram Moolenaar，VIM最初作者和软件维护者）</title>
    <link href="https://www.wdft.com/aa470947.html"/>
    <id>https://www.wdft.com/aa470947.html</id>
    <published>2023-08-06T12:22:08.000Z</published>
    <updated>2025-10-05T15:05:46.081Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h3 id="Tribute-to-the-great-legendary-philanthropist-and-programmer-Bram-Moolenaar-the-original-author-and-software-maintainer-of-VIM（致敬伟大传奇的慈善家和程序员Bram-Moolenaar，VIM最初作者和软件维护者）"><a href="#Tribute-to-the-great-legendary-philanthropist-and-programmer-Bram-Moolenaar-the-original-author-and-software-maintainer-of-VIM（致敬伟大传奇的慈善家和程序员Bram-Moolenaar，VIM最初作者和软件维护者）" class="headerlink" title="Tribute to the great legendary philanthropist and programmer Bram Moolenaar, the original author and software maintainer of VIM（致敬伟大传奇的慈善家和程序员Bram Moolenaar，VIM最初作者和软件维护者）"></a>Tribute to the great legendary philanthropist and programmer Bram Moolenaar, the original author and software maintainer of VIM（致敬伟大传奇的慈善家和程序员Bram Moolenaar，VIM最初作者和软件维护者）</h3><p>Bram Moolenaar is a Dutch computer programmer and the creator of the famous text editor Vim.</p><p>Bram Moolenaar was born in 1961 in The Hague, Netherlands. In his career, he has worked in multiple fields such as software development and system management. However, his most well-known contribution was the creation of Vim, a popular text editor.</p><p>In 1991, the standard editor Vi for Unix at that time had very limited versions on the MS-DOS platform, and Bram Moolenaar decided to develop a more powerful and scalable editor. He released the first version of Vim (Vi IMimproved) in 1991 and continued to drive its subsequent development and improvement.</p><span id="more"></span><p>Vim is a free and open source text editor with powerful features and high customizability. It supports multiple operating systems, including Unix&#x2F;Linux, Microsoft Windows, Mac OS, and has become one of the preferred tools for programmers and developers.</p><p>In addition to Vim, Bram Moolenaar has also actively participated in the development and maintenance of multiple open source projects, making significant contributions to the software industry.</p><p>As an excellent programmer and creator, Bram Moolenaar is widely praised and respected for his dedication to Vim and contributions to the open source community. His work and achievements have had a great impact on the global programmer community and continue to inspire a new generation of software developers.</p><h3 id="致敬伟大传奇的慈善家和程序员Bram-Moolenaar，VIM最初作者和软件维护者"><a href="#致敬伟大传奇的慈善家和程序员Bram-Moolenaar，VIM最初作者和软件维护者" class="headerlink" title="致敬伟大传奇的慈善家和程序员Bram Moolenaar，VIM最初作者和软件维护者"></a>致敬伟大传奇的慈善家和程序员Bram Moolenaar，VIM最初作者和软件维护者</h3><p>Bram Moolenaar是一位荷兰的计算机程序员，他是著名的文本编辑器Vim的创作者。</p><p>Bram Moolenaar于1961年出生在荷兰的海牙。在他的职业生涯中，他曾经从事过软件开发和系统管理等多个领域的工作。然而，他最为人所知的贡献是他创造了Vim这一广受欢迎的文本编辑器。</p><p>在1991年，当时的Unix的标准编辑器Vi在MS-DOS平台上的版本非常有限，Bram Moolenaar决定开发一个更加强大和可扩展的编辑器。他于1991年发布了第一个版本的Vim（Vi IMproved），并继续推动其后续的发展和改进。</p><p>Vim是一个自由、开源的文本编辑器，具有强大的功能和高度的可定制性。它支持多种操作系统，包括Unix&#x2F;Linux、Microsoft Windows、Mac OS等，并且成为程序员和开发者们的首选工具之一。</p><p>除了Vim，Bram Moolenaar还积极参与了多个开源项目的开发与维护，为软件界做出了重要的贡献。</p><p>作为一名优秀的程序员和创造者，Bram Moolenaar因其对Vim的奉献和对开源社区的贡献而受到广泛的赞誉和尊重。他的工作和成就为全球的程序员社区带来了极大的影响，并且持续地激励着新一代的软件开发者们。</p><p>R.I.P 🕯️🙏</p>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;


&lt;h3 id=&quot;Tribute-to-the-great-legendary-philanthropist-and-programmer-Bram-Moolenaar-the-original-author-and-software-maintainer-of-VIM（致敬伟大传奇的慈善家和程序员Bram-Moolenaar，VIM最初作者和软件维护者）&quot;&gt;&lt;a href=&quot;#Tribute-to-the-great-legendary-philanthropist-and-programmer-Bram-Moolenaar-the-original-author-and-software-maintainer-of-VIM（致敬伟大传奇的慈善家和程序员Bram-Moolenaar，VIM最初作者和软件维护者）&quot; class=&quot;headerlink&quot; title=&quot;Tribute to the great legendary philanthropist and programmer Bram Moolenaar, the original author and software maintainer of VIM（致敬伟大传奇的慈善家和程序员Bram Moolenaar，VIM最初作者和软件维护者）&quot;&gt;&lt;/a&gt;Tribute to the great legendary philanthropist and programmer Bram Moolenaar, the original author and software maintainer of VIM（致敬伟大传奇的慈善家和程序员Bram Moolenaar，VIM最初作者和软件维护者）&lt;/h3&gt;&lt;p&gt;Bram Moolenaar is a Dutch computer programmer and the creator of the famous text editor Vim.&lt;/p&gt;
&lt;p&gt;Bram Moolenaar was born in 1961 in The Hague, Netherlands. In his career, he has worked in multiple fields such as software development and system management. However, his most well-known contribution was the creation of Vim, a popular text editor.&lt;/p&gt;
&lt;p&gt;In 1991, the standard editor Vi for Unix at that time had very limited versions on the MS-DOS platform, and Bram Moolenaar decided to develop a more powerful and scalable editor. He released the first version of Vim (Vi IMimproved) in 1991 and continued to drive its subsequent development and improvement.&lt;/p&gt;</summary>
    
    
    
    <category term="history-of-programing" scheme="https://www.wdft.com/categories/history-of-programing/"/>
    
    <category term="daily" scheme="https://www.wdft.com/categories/history-of-programing/daily/"/>
    
    
    <category term="VIM" scheme="https://www.wdft.com/tags/VIM/"/>
    
    <category term="VIM Author" scheme="https://www.wdft.com/tags/VIM-Author/"/>
    
  </entry>
  
  <entry>
    <title>Linux login shell信息展示类（neofetch、motd等banner类提示信息展示）导致的rsync服务不可用问题注意事项</title>
    <link href="https://www.wdft.com/954c81e2.html"/>
    <id>https://www.wdft.com/954c81e2.html</id>
    <published>2023-06-15T14:11:01.000Z</published>
    <updated>2025-10-05T15:05:46.071Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h6 id="终端报错信息-以Debian-11-系统为例-：protocol-version-mismatch-—-is-your-shell-clean"><a href="#终端报错信息-以Debian-11-系统为例-：protocol-version-mismatch-—-is-your-shell-clean" class="headerlink" title="终端报错信息(以Debian 11 系统为例)：protocol version mismatch — is your shell clean?"></a>终端报错信息(以Debian 11 系统为例)：<strong>protocol version mismatch — is your shell clean?</strong></h6><h6 id="系统环境"><a href="#系统环境" class="headerlink" title="系统环境"></a>系统环境</h6><ul><li>OS: Debian GNU&#x2F;Linux 11 (bullseye) x86_64 </li><li>Host: KVM RHEL 7.6.0 PC (i440FX + PIIX, 1996) </li><li>Kernel: 5.10.0-22-amd64</li></ul><h6 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h6><ul><li><p>【问题】：导致rsync服务同步失败，报错信息: <code>&quot;protocol version mismatch — is your shell clean?&quot;</code>。</p></li><li><p>【原因】：rsync等工具非常依赖于shell执行时没有任何输出。</p></li><li><p>【建议】：<strong>不建议在.bashrc中输出neofetch、banner类和motd类提示信息</strong>，在~&#x2F;.profile中source ~&#x2F;.bashrc可以避免此问题，但需注意<code>.profile</code>循环引用执行问题。</p></li></ul><span id="more"></span><h6 id="login-shell载入文件信息相关文件："><a href="#login-shell载入文件信息相关文件：" class="headerlink" title="login shell载入文件信息相关文件："></a>login shell载入文件信息相关文件：</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/profile</span><br><span class="line">~/.profile</span><br></pre></td></tr></table></figure><p><strong>.profile</strong> 引用 <strong>.bashrc</strong>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if [ &quot;$BASH&quot; ]; then</span><br><span class="line">  if [ -f ~/.bashrc ]; then</span><br><span class="line">    . ~/.bashrc</span><br><span class="line">  fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p><em>输出展示信息</em>放在~&#x2F;.bashrc文件内引发的问题（rsync为例）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># ~/.bashrc: executed by bash(1) for non-login shells.</span><br><span class="line"></span><br><span class="line"># Note: PS1 and umask are already set in /etc/profile. You should not</span><br><span class="line"># need this unless you want different defaults for root.</span><br><span class="line"># PS1=&#x27;$&#123;debian_chroot:+($debian_chroot)&#125;\h:\w\$ &#x27;</span><br><span class="line"># umask 022</span><br><span class="line"></span><br><span class="line"># problem（rsync）：protocol version mismatch — is your shell clean?</span><br><span class="line">neofetch</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>【问题】：导致rsync服务同步失败，报错信息: <code>&quot;protocol version mismatch — is your shell clean?&quot;</code>。<br>【原因】：rsync等工具非常依赖于shell执行时没有任何输出。</p><p>【建议】：<strong>不建议在.bashrc中输出neofetch、banner类和motd类提示信息</strong>，在~&#x2F;.profile中source ~&#x2F;.bashrc可以避免此问题，但需注意<code>.profile</code>循环引用执行问题。</p><p>例如：<br><code>~/.profile</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if [ &quot;$BASH&quot; ]; then</span><br><span class="line">  if [ -f ~/.bashrc ]; then</span><br><span class="line">    . ~/.bashrc</span><br><span class="line">  fi</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">neofetch</span><br></pre></td></tr></table></figure><p>总结：在Linux发行版系统中，一些高度依赖.bashrc的系统工具或者命令(例如rsync)，会引发不可执行或者执行有误等问题，要留意Linux文件加载的顺序以及执行规则。</p>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;

&lt;h6 id=&quot;终端报错信息-以Debian-11-系统为例-：protocol-version-mismatch-—-is-your-shell-clean&quot;&gt;&lt;a href=&quot;#终端报错信息-以Debian-11-系统为例-：protocol-version-mismatch-—-is-your-shell-clean&quot; class=&quot;headerlink&quot; title=&quot;终端报错信息(以Debian 11 系统为例)：protocol version mismatch — is your shell clean?&quot;&gt;&lt;/a&gt;终端报错信息(以Debian 11 系统为例)：&lt;strong&gt;protocol version mismatch — is your shell clean?&lt;/strong&gt;&lt;/h6&gt;&lt;h6 id=&quot;系统环境&quot;&gt;&lt;a href=&quot;#系统环境&quot; class=&quot;headerlink&quot; title=&quot;系统环境&quot;&gt;&lt;/a&gt;系统环境&lt;/h6&gt;&lt;ul&gt;
&lt;li&gt;OS: Debian GNU&amp;#x2F;Linux 11 (bullseye) x86_64 &lt;/li&gt;
&lt;li&gt;Host: KVM RHEL 7.6.0 PC (i440FX + PIIX, 1996) &lt;/li&gt;
&lt;li&gt;Kernel: 5.10.0-22-amd64&lt;/li&gt;
&lt;/ul&gt;
&lt;h6 id=&quot;问题描述&quot;&gt;&lt;a href=&quot;#问题描述&quot; class=&quot;headerlink&quot; title=&quot;问题描述&quot;&gt;&lt;/a&gt;问题描述&lt;/h6&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;【问题】：导致rsync服务同步失败，报错信息: &lt;code&gt;&amp;quot;protocol version mismatch — is your shell clean?&amp;quot;&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;【原因】：rsync等工具非常依赖于shell执行时没有任何输出。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;【建议】：&lt;strong&gt;不建议在.bashrc中输出neofetch、banner类和motd类提示信息&lt;/strong&gt;，在~&amp;#x2F;.profile中source ~&amp;#x2F;.bashrc可以避免此问题，但需注意&lt;code&gt;.profile&lt;/code&gt;循环引用执行问题。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="linux" scheme="https://www.wdft.com/categories/linux/"/>
    
    <category term="debian" scheme="https://www.wdft.com/categories/linux/debian/"/>
    
    
    <category term="linux" scheme="https://www.wdft.com/tags/linux/"/>
    
    <category term="debian" scheme="https://www.wdft.com/tags/debian/"/>
    
    <category term="neofetch" scheme="https://www.wdft.com/tags/neofetch/"/>
    
    <category term="rsync" scheme="https://www.wdft.com/tags/rsync/"/>
    
    <category term="banner" scheme="https://www.wdft.com/tags/banner/"/>
    
    <category term="motd" scheme="https://www.wdft.com/tags/motd/"/>
    
  </entry>
  
  <entry>
    <title>Centos7-chattr权限问题导致锁定文件无法解锁且root用户无法编辑</title>
    <link href="https://www.wdft.com/e7a4c7e2.html"/>
    <id>https://www.wdft.com/e7a4c7e2.html</id>
    <published>2023-06-14T15:11:01.000Z</published>
    <updated>2025-10-05T15:05:46.071Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h3 id="chattr"><a href="#chattr" class="headerlink" title="chattr"></a>chattr</h3><p>chattr 命令，专门用来修改文件或目录的隐藏属性。在部分linux发行版中，部分存在chattr本身执行权限移除的默认设置，导致root用户无法编辑相关文件且chattr命令无法修改文件属性。解决的思路是先解决chattr本身的文件属性，确保chattr可用。</p><p>解决方案如下：</p><span id="more"></span><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">cp /usr/bin/chattr /usr/bin/chattr_bak</span><br><span class="line"></span><br><span class="line">chmod 755 /usr/bin/chattr_bak</span><br><span class="line"></span><br><span class="line">chattr_bak -i /usr/bin/chattr</span><br><span class="line"></span><br><span class="line">chmod 755 /usr/bin/chattr</span><br><span class="line"></span><br><span class="line">ls -la /usr/bin/chattr </span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;

&lt;h3 id=&quot;chattr&quot;&gt;&lt;a href=&quot;#chattr&quot; class=&quot;headerlink&quot; title=&quot;chattr&quot;&gt;&lt;/a&gt;chattr&lt;/h3&gt;&lt;p&gt;chattr 命令，专门用来修改文件或目录的隐藏属性。在部分linux发行版中，部分存在chattr本身执行权限移除的默认设置，导致root用户无法编辑相关文件且chattr命令无法修改文件属性。解决的思路是先解决chattr本身的文件属性，确保chattr可用。&lt;/p&gt;
&lt;p&gt;解决方案如下：&lt;/p&gt;</summary>
    
    
    
    <category term="linux" scheme="https://www.wdft.com/categories/linux/"/>
    
    <category term="centos" scheme="https://www.wdft.com/categories/linux/centos/"/>
    
    
    <category term="linux" scheme="https://www.wdft.com/tags/linux/"/>
    
    <category term="centos7" scheme="https://www.wdft.com/tags/centos7/"/>
    
    <category term="chattr" scheme="https://www.wdft.com/tags/chattr/"/>
    
  </entry>
  
  <entry>
    <title>macOS系统升级导致brew发行包Nginx服务Service无法启动或启动失败问题解决（MacOS Ventura 13.3）</title>
    <link href="https://www.wdft.com/8c6562df.html"/>
    <id>https://www.wdft.com/8c6562df.html</id>
    <published>2023-04-07T12:06:32.000Z</published>
    <updated>2025-11-11T03:12:22.164Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h4 id="macOS系统升级导致brew发行包Nginx服务Service无法启动或启动失败问题解决（MacOS-Ventura-13-3）"><a href="#macOS系统升级导致brew发行包Nginx服务Service无法启动或启动失败问题解决（MacOS-Ventura-13-3）" class="headerlink" title="macOS系统升级导致brew发行包Nginx服务Service无法启动或启动失败问题解决（MacOS Ventura 13.3）"></a>macOS系统升级导致brew发行包Nginx服务Service无法启动或启动失败问题解决（MacOS Ventura 13.3）</h4><h4 id="系统版本：MacOS-Ventura-13-3"><a href="#系统版本：MacOS-Ventura-13-3" class="headerlink" title="系统版本：MacOS Ventura 13.3"></a>系统版本：MacOS Ventura 13.3</h4><h4 id="Nginx服务启动失败问题描述："><a href="#Nginx服务启动失败问题描述：" class="headerlink" title="Nginx服务启动失败问题描述："></a>Nginx服务启动失败问题描述：</h4><p>MacOS系统升级导致brew发行包Nginx服务Service无法启动或启动失败，提示隐私或权限问题，系统限制root用户运行。</p><h4 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h4><p>此脚本用于解决MacOS升级新版后，基于Homebrew发行的Nginx包守护服务无法启动运行问题。<br>此问题一般由MacOS更新的权限隐私策略与nginx守护服务权限冲突导致服务无法启动。该脚本通过直接操作nginx服务进程实现服务的快捷管理，增加常用进程基础检查操作，封装快捷操作脚本。</p><p><a href="https://github.com/ljq">ljq@GitHub</a></p><p>Homebrew安装nginx:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx</span><br></pre></td></tr></table></figure><p><a href="https://github.com/ljq/Jacoliu-usual-shell/blob/master/macos/macos_nginx_brew_service.sh">macos_nginx_brew_service.sh</a></p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env bash</span><br><span class="line"># Author: Jaco Liu</span><br><span class="line"># Date Time: 2023-04-07 20:06</span><br><span class="line"># Site: https://github.com/ljq</span><br><span class="line"># Blog: https://www.wdft.com</span><br><span class="line"># Email: ljqlab@163.com</span><br><span class="line"># Description: 🍎 The nginx distribution provided by hombrew daemon service shortcut script.</span><br><span class="line"></span><br><span class="line"># help info</span><br><span class="line">USEAGE=&quot;[usage]: [-s | s | status] [start | restart | reload | stop] [-h | -help | --help] [-v | -V | --version]&quot;</span><br><span class="line">HELP_INFO=$(cat &lt;&lt;EOF</span><br><span class="line">[help information]</span><br><span class="line"></span><br><span class="line">Description: 🍎 </span><br><span class="line">    This script is used to resolve the problem that the Homebrew-based Nginx package </span><br><span class="line">    daemon service cannot be started after the new version of MacOS is updated. This </span><br><span class="line">    problem is usually caused by the conflict between the permission privacy policy </span><br><span class="line">    updated by MacOS and the permission of the nginx daemon service. This script </span><br><span class="line">    manages the service by directly manipulating the nginx service process.</span><br><span class="line"></span><br><span class="line">Command usage:</span><br><span class="line"></span><br><span class="line">    -v|-V|version: Show current nginx version information.</span><br><span class="line">    </span><br><span class="line">    -h|-help|--help: Show help info.</span><br><span class="line">    </span><br><span class="line">    -s|s|status: Nginx process status.</span><br><span class="line">    </span><br><span class="line">    start|restart|reload|stop: Service operation.</span><br><span class="line"></span><br><span class="line">EOF</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># set variables</span><br><span class="line">sh_file=$0</span><br><span class="line">argv1=$1</span><br><span class="line">nginx_conf_file=$(brew --prefix)/etc/nginx/nginx.conf</span><br><span class="line">nginx_bin=$(brew --prefix nginx)/bin/nginx</span><br><span class="line"></span><br><span class="line"># main</span><br><span class="line"></span><br><span class="line"># description</span><br><span class="line">if [ &quot;$argv1&quot; = &quot;&quot; ]; then</span><br><span class="line">echo -e &quot;[brew&#x27;s nginx service shortcut script]\n&quot;</span><br><span class="line">fi</span><br><span class="line"># initialization check</span><br><span class="line">if [ ! -x &quot;$(command -v brew)&quot; ]; then</span><br><span class="line">echo -e &quot;[WARNING] Homebrew is not installed.&quot;</span><br><span class="line">exit</span><br><span class="line">fi</span><br><span class="line">if [ ! -f &quot;$nginx_bin&quot; ]; then</span><br><span class="line">echo -e &quot;[WARNING] The version of nignx provided by homebrew is not installed.&quot;</span><br><span class="line">exit</span><br><span class="line">fi</span><br><span class="line">if [ ! -f &quot;$nginx_conf_file&quot; ]; then</span><br><span class="line">        echo -e &quot;[WARNING] The nignx.conf file provided by homebrew is not exist.&quot;</span><br><span class="line">        exit</span><br><span class="line">fi</span><br><span class="line"># nginx config check</span><br><span class="line">chk_status=$($&#123;nginx_bin&#125; -t 2&gt;&amp;1)</span><br><span class="line">if [[ $chk_status =~ &quot;syntax is ok&quot; ]] &amp;&amp; [[ $chk_status =~ &quot;test is successful&quot; ]]; then</span><br><span class="line">#echo -e &quot;[INFO] The nginx.conf syntax is ok.\n&quot;</span><br><span class="line">echo &quot;&quot;</span><br><span class="line">else</span><br><span class="line">echo -e &quot;[ERROR] The nginx.conf syntax is incorrect.&quot;</span><br><span class="line">exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># exec</span><br><span class="line">case &quot;$argv1&quot; in</span><br><span class="line">&quot;-v&quot;|&quot;-version&quot;|&quot;--version&quot;|&quot;-V&quot;)</span><br><span class="line">  $&#123;nginx_bin&#125; -V</span><br><span class="line">  ;;</span><br><span class="line">&quot;-s&quot;|&quot;s&quot;|&quot;status&quot;)</span><br><span class="line">  serv_process=$(ps -ef | grep nginx | grep -v &quot;grep\|$&#123;sh_file&#125;&quot;)</span><br><span class="line">  if [ &quot;$serv_process&quot; = &quot;&quot; ]; then</span><br><span class="line">echo -e &quot;[NOTICE] Nginx service status is stoped.\n&quot;</span><br><span class="line">  else</span><br><span class="line">  echo -e &quot;[NOTICE] Nginx service status is running.\n&quot;</span><br><span class="line">  fi</span><br><span class="line">  ;;</span><br><span class="line">&quot;start&quot;)</span><br><span class="line">  serv_process=$(ps -ef | grep nginx | grep -v &quot;grep\|$&#123;sh_file&#125;&quot;)</span><br><span class="line">  if [ &quot;$serv_process&quot; = &quot;&quot; ]; then</span><br><span class="line">    echo -e &quot;[NOTICE] Nginx service is starting ...\n&quot;</span><br><span class="line">    $&#123;nginx_bin&#125; -c $nginx_conf_file</span><br><span class="line">  else</span><br><span class="line">  echo -e &quot;[WARNING] Nginx service is already running. Do not repeat operation.\n&quot;</span><br><span class="line">  fi</span><br><span class="line">  ;;</span><br><span class="line">&quot;restart&quot;)</span><br><span class="line">  echo -e &quot;[NOTICE] Nginx service is restarting ...\n&quot;</span><br><span class="line">  $&#123;nginx_bin&#125; -s stop</span><br><span class="line">  $&#123;nginx_bin&#125; -c $nginx_conf_file</span><br><span class="line">  ;;</span><br><span class="line">&quot;reload&quot;)</span><br><span class="line">  echo -e &quot;[NOTICE] Nginx service is reloading ...\n&quot;</span><br><span class="line">  $&#123;nginx_bin&#125; -s reload</span><br><span class="line">  ;;</span><br><span class="line">&quot;stop&quot;)</span><br><span class="line">  $&#123;nginx_bin&#125; -s stop</span><br><span class="line">  echo -e &quot;[NOTICE] Nginx service has stoped.\n&quot;</span><br><span class="line">  ;;</span><br><span class="line">&quot;-t&quot;)</span><br><span class="line">  $&#123;nginx_bin&#125; -t</span><br><span class="line">  ;;</span><br><span class="line">&quot;-h&quot;|&quot;-help&quot;|&quot;--help&quot;)</span><br><span class="line">  echo -e &quot;$&#123;HELP_INFO&#125;\n&quot; </span><br><span class="line">  ;;</span><br><span class="line">*)</span><br><span class="line">  echo -e &quot;[WARNING] Parameter is invalid or missing. Please run help command: $&#123;sh_file&#125; -h\n&quot;</span><br><span class="line">  ;;</span><br><span class="line">esac</span><br><span class="line"></span><br><span class="line">exit</span><br></pre></td></tr></table></figure><h4 id="脚本使用案例"><a href="#脚本使用案例" class="headerlink" title="脚本使用案例"></a>脚本使用案例</h4><h6 id="脚本增加可执行权限："><a href="#脚本增加可执行权限：" class="headerlink" title="脚本增加可执行权限："></a>脚本增加可执行权限：</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x macos_nginx_brew_service.sh</span><br></pre></td></tr></table></figure><h6 id="查看帮助："><a href="#查看帮助：" class="headerlink" title="查看帮助："></a>查看帮助：</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./macos_nginx_brew_service.sh -h</span><br></pre></td></tr></table></figure><h6 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 启动</span><br><span class="line">./macos_nginx_brew_service.sh start</span><br><span class="line"># 重启</span><br><span class="line">./macos_nginx_brew_service.sh restart</span><br><span class="line"># 状态</span><br><span class="line">./macos_nginx_brew_service.sh status</span><br><span class="line"># 重载</span><br><span class="line">./macos_nginx_brew_service.sh reload</span><br><span class="line"># 停止</span><br><span class="line">./macos_nginx_brew_service.sh stop</span><br><span class="line"># nginx 版本</span><br><span class="line">./macos_nginx_brew_service.sh -V</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明:"></a>参数说明:</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-v|-V|version: Show current nginx version information.</span><br><span class="line"></span><br><span class="line">-h|-help|--help: Show help info.</span><br><span class="line"></span><br><span class="line">-s|s|status: Nginx process status.</span><br><span class="line"></span><br><span class="line">start|restart|reload|stop: Service operation.</span><br></pre></td></tr></table></figure><p><a href="https://github.com/ljq/Jacoliu-usual-shell/blob/master/macos/macos_nginx_brew_service.sh">macos_nginx_brew_service.sh</a></p><p><a href="https://github.com/ljq">ljq@GitHub</a></p>]]></content>
    
    
    <summary type="html">&lt;!-- toc --&gt;

&lt;h4 id=&quot;macOS系统升级导致brew发行包Nginx服务Service无法启动或启动失败问题解决（MacOS-Ventura-13-3）&quot;&gt;&lt;a href=&quot;#macOS系统升级导致brew发行包Nginx服务Service无法启动或启动失败问题解决（MacOS-Ventura-13-3）&quot; class=&quot;headerlink&quot; title=&quot;macOS系统升级导致brew发行包Nginx服务Service无法启动或启动失败问题解决（MacOS Ventura 13.3）&quot;&gt;&lt;/a&gt;macOS系统升级导致brew发行包Nginx服务Service无法启动或启动失败问题解决（MacOS Ventura 13.3）&lt;/h4&gt;&lt;h4 id=&quot;系统版本：MacOS-Ventura-13-3&quot;&gt;&lt;a href=&quot;#系统版本：MacOS-Ventura-13-3&quot; class=&quot;headerlink&quot; title=&quot;系统版本：MacOS Ventura 13.3&quot;&gt;&lt;/a&gt;系统版本：MacOS Ventura 13.3&lt;/h4&gt;&lt;h4 id=&quot;Nginx服务启动失败问题描述：&quot;&gt;&lt;a href=&quot;#Nginx服务启动失败问题描述：&quot; class=&quot;headerlink&quot; title=&quot;Nginx服务启动失败问题描述：&quot;&gt;&lt;/a&gt;Nginx服务启动失败问题描述：&lt;/h4&gt;&lt;p&gt;MacOS系统升级导致brew发行包Nginx服务Service无法启动或启动失败，提示隐私或权限问题，系统限制root用户运行。&lt;/p&gt;
&lt;h4 id=&quot;解决方案：&quot;&gt;&lt;a href=&quot;#解决方案：&quot; class=&quot;headerlink&quot; title=&quot;解决方案：&quot;&gt;&lt;/a&gt;解决方案：&lt;/h4&gt;&lt;p&gt;此脚本用于解决MacOS升级新版后，基于Homebrew发行的Nginx包守护服务无法启动运行问题。&lt;br&gt;此问题一般由MacOS更新的权限隐私策略与nginx守护服务权限冲突导致服务无法启动。该脚本通过直接操作nginx服务进程实现服务的快捷管理，增加常用进程基础检查操作，封装快捷操作脚本。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/ljq&quot;&gt;ljq@GitHub&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Homebrew安装nginx:&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;brew install nginx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ljq/Jacoliu-usual-shell/blob/master/macos/macos_nginx_brew_service.sh&quot;&gt;macos_nginx_brew_service.sh&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="macOS" scheme="https://www.wdft.com/categories/macOS/"/>
    
    
    <category term="homebrew" scheme="https://www.wdft.com/tags/homebrew/"/>
    
    <category term="macOS" scheme="https://www.wdft.com/tags/macOS/"/>
    
    <category term="nginx" scheme="https://www.wdft.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>MacOS English terminal Chinese garbled characters solution （MacOS英文环境终端中文内容乱码问题解决）</title>
    <link href="https://www.wdft.com/bb19ba9f.html"/>
    <id>https://www.wdft.com/bb19ba9f.html</id>
    <published>2023-02-02T12:02:03.000Z</published>
    <updated>2025-11-11T03:12:22.164Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><h4 id="Problem-presentation"><a href="#Problem-presentation" class="headerlink" title="Problem presentation"></a>Problem presentation</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LANGUAGE = &quot;en_US:en&quot;,</span><br><span class="line">LC_ALL = (unset),</span><br><span class="line">LC_CTYPE = &quot;UTF-8&quot;,</span><br><span class="line">LANG = &quot;en_US.UTF-8&quot;</span><br><span class="line"></span><br><span class="line">warning: Falling back to a fallback locale (&quot;en_US.UTF-8&quot;).</span><br></pre></td></tr></table></figure><p>此问题常见于MacOS系统升级、OpenSSL升级后，terminal终端ssh远程链接时发出警告。</p><h4 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h4><p>在MacOS本地终端:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/ssh/ssh_config</span><br></pre></td></tr></table></figure><p>注释默认配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SendEnv LANG LC_*</span><br></pre></td></tr></table></figure><p>重启终端即可。</p><h4 id="References"><a href="#References" class="headerlink" title="References"></a>References</h4><p><a href="https://www.cyberciti.biz/faq/os-x-terminal-bash-warning-setlocale-lc_ctype-cannot-change-locale/">参考</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;!-- toc --&gt;

&lt;h4 id=&quot;Problem-presentation&quot;&gt;&lt;a href=&quot;#Problem-presentation&quot; class=&quot;headerlink&quot; title=&quot;Problem presentation&quot;&gt;&lt;/a&gt;Problem pres</summary>
      
    
    
    
    <category term="macOS" scheme="https://www.wdft.com/categories/macOS/"/>
    
    
    <category term="homebrew" scheme="https://www.wdft.com/tags/homebrew/"/>
    
    <category term="macOS" scheme="https://www.wdft.com/tags/macOS/"/>
    
  </entry>
  
</feed>
