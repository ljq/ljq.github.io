{"pages":[{"title":"","text":"740b15a2b2c879749fd692289c40d881","link":"/baidu_verify_code-JvY8hn2f9j.html"},{"title":"","text":"{\"name\":\"wdft.com\",\"short_name\":\"wdft.com\",\"theme_color\":\"#2196f3\",\"background_color\":\"#2196f3\",\"display\":\"fullscreen\",\"orientation\":\"portrait\",\"Scope\":\"/\",\"start_url\":\"/\",\"icons\":[{\"src\":\"/img/icon-72x72.png\",\"sizes\":\"72x72\",\"type\":\"image/png\"}],\"splash_pages\":null}","link":"/manifest.json"},{"title":"404","text":"","link":"/404.html"},{"title":"Music PlayList ğŸµ","text":"A collection of frequently-listened music playlist.ğŸµ Music Genre ClassificationPersonal NetEase Music ğŸµ Light Music No. Awesome 1 All light Awesome 2 Solo RaÃºl Di Blasio ğŸµ Songs Music No. Awesome 1 All songs Awesome","link":"/musics/index.html"},{"title":"About å®‰å…¨è´¯ç©¿äºè½¯ä»¶å¼€å‘å„ä¸ªç¯èŠ‚ - 404 é¡µé¢","text":"Security accompanies every aspect of software development.å®‰å…¨è´¯ç©¿äºè½¯ä»¶å¼€å‘å„ä¸ªç¯èŠ‚ã€‚GitHub Stats About MeHi! Iâ€™m Jaco Liu (Jianqiu Liu). ğŸ‘‹ In me the tigerğŸ¯ sniffs the roseğŸŒ¹. Jaco Liu GitHub profile trophy: WeChat QRcode Personal WeChat Subscriptions","link":"/about/index.html"},{"title":"Music Light Playlist","text":"A collection of frequently-listened music playlist.ğŸµ Exodus - Maksim Mrvica Crossroads - 7AND5 Snowy Lullaby (Original Mix) - K.S. Project Meadows of Heaven (Instrumental Version) - Nightwish Fly my wish - Edelis Do Not Go Away (Original Mix) - Martian Solo (Alone) - RaÃºl Di Blasio Wild Child - Enya","link":"/musics/light.html"},{"title":"Music Song Playlist","text":"A collection of frequently-listened music playlist.ğŸµ åœ¨è·¯ä¸Š - åˆ˜æ¬¢ æµ·é˜”å¤©ç©º - Beyond æ°´æ‰‹ - éƒ‘æ™ºåŒ– å¹³å‡¡ä¹‹è·¯ (Live) æœ´æ ‘ å‡¡äººæ­Œ - æå®—ç›› æˆ‘æœ‰æˆ‘è·¯å‘ - æˆé¾™ Andy - é˜¿æœ ç¹æ˜Ÿä¹‹å¤œ - æœ±æ¡¦ EconStories 1.Fight of the Century - EconStories 2.Fear the Boom and Bust - EconStories EconStories","link":"/musics/song.html"},{"title":"","text":"","link":"/projects/index.html"},{"title":"Gallerys Random List","text":"","link":"/galleries/index.html"},{"title":"æ¯æ®µè·¯(Bydj-jammy) by å•æ–¹","text":"A collection of frequently-listened video playlist. æ¯æ®µè·¯(Bydj-jammy) by å•æ–¹æ¯æ®µè·¯ï¼ˆBydj-jammy)ï¼‰","link":"/videos/bydj-jammy-lvfang.html"},{"title":"[Fight of the Century] Keynes vs. Hayek Economics Stories.","text":"A collection of frequently-listened video playlist. Fight of the Century: Keynes vs. Hayek - Economics Rap Battle Round One(ã€ä¸–çºªä¹‹æˆ˜ã€‘å‡¯æ©æ–¯VSå“ˆè€¶å…‹ ç»æµå­¦è¯´å”±ç¬¬1æˆ˜) Fight of the Century: Keynes vs. Hayek - Economics Rap Battle Round Two(ã€ä¸–çºªä¹‹æˆ˜ã€‘å‡¯æ©æ–¯VSå“ˆè€¶å…‹ ç»æµå­¦è¯´å”±ç¬¬2æˆ˜)","link":"/videos/econstories.html"},{"title":"How the Machine Works By Ray Dalio","text":"A collection of frequently-listened video playlist. How the Machine Works By Ray Dalioï¼ˆç»æµè¿™å°æœºå™¨æ˜¯æ€æ ·è¿è¡Œçš„ ä½œè€…Â·ï¼šç‘Â·è¾¾åˆ©å¥¥ï¼‰ åŸç‰ˆï¼šhttp://www.economicprinciples.org","link":"/videos/howtheeconmachine.html"},{"title":"Video PlayList","text":"A collection of frequently-listened video playlist.(Reproduced reference) No. Name 1 å‘¨æ°ä¼¦â€”â€”å‡ºé“ä»¥æ¥æ‰€æœ‰å•æ›²MVå¤§ç›˜ç‚¹ å«HDå•æ›²ã€åˆé›†ã€‘ 2 Fight of the Century: Keynes vs. Hayek - Economics Rap Battle Round One ã€ä¸–çºªä¹‹æˆ˜ã€‘å‡¯æ©æ–¯VSå“ˆè€¶å…‹ ç»æµå­¦è¯´å”± 3 How the Machine Works By Ray Dalio ç»æµè¿™å°æœºå™¨æ˜¯æ€æ ·è¿è¡Œçš„ ä½œè€…Â·ï¼šç‘Â·è¾¾åˆ©å¥¥ 4 æ¯æ®µè·¯ Bydj jammy â€“ å•æ–¹","link":"/videos/index.html"},{"title":"Jay Chou Music","text":"A collection of frequently-listened video playlist. ã€é»‘èƒ¶ã€‘å‘¨æ°ä¼¦ - é»‘æš—ä¸‰éƒ¨æ›²ä»¥çˆ¶ä¹‹å æ­¢æˆ˜ä¹‹æ®‡ å¤œçš„ç¬¬ä¸ƒç«  ã€é»‘èƒ¶ã€‘å‘¨æ°ä¼¦ä¸ƒé‡Œé¦™ å¤œæ›² æ™´å¤© å‘¨æ°ä¼¦â€”â€”å‡ºé“ä»¥æ¥æ‰€æœ‰å•æ›²MVå¤§ç›˜ç‚¹ å«HDå•æ›²ã€åˆé›†ã€‘","link":"/videos/jaychou.html"},{"title":"Solo (RaÃºl Di Blasio)","text":"Solo (RaÃºl Di Blasio)Authorï¼šRaÃºl Di BlasioPublish Dateï¼š1997-05-20Publish Companyï¼š RCA InternationalA personal favorite album.ğŸ¹ IntroLatin pianist Raul Di Blasio was born in 1949 in the small town of Zapala, Argentina, the son of a small farmer. He began his musical education at the age of six. He was first exposed to Latin music such as Tango and Bossa Nova, but was also heavily influenced by European classical composers such as Beethoven and Rachmaninov. As a teenager, however, Di Blasio became obsessed with the Beatles and quickly formed his own rock band, Los Diabolicos. The band achieved some success in its home country and did not break up until 1973. He then returned to classical music and toured South America in the mid-1970s. In 1978 Di Blasio went into musical hibernation for five years at a hotel in the Chilean city of Fonsi. At the end of this period of his life, he concentrated all his talent on making music. His debut single was released by EMI in 1983. It was a huge success and was hailed by the media as â€œthe peopleâ€™s pianistâ€. In 1987, he moved to Miami, USA. Three years later, he released erica on BMG, which sold more than one million copies in 1994. In order to hold a solo concert in 1997, Di Blasio toured the Far East. Solo (RaÃºl Di Blasio)","link":"/musics/light/Solo-Ra%C3%BAl-Di-Blasio.html"}],"posts":[{"title":"Thoughts on Agent-based Enterprise Application Architecture.ï¼ˆAgentä¼ä¸šçº§åº”ç”¨æ¶æ„æ€è€ƒå’ŒæŒ‘æˆ˜ï¼‰","text":"â€œä¸ç¡®å®šæ€§ä¸æ˜¯ç¼ºé™·ï¼Œè€Œæ˜¯æ–°èŒƒå¼çš„ç‰¹å¾ï¼Œå¿…é¡»å­¦ä¼šâ€œå›å¿†â€ï¼Œä½†åŒæ—¶ä¹Ÿè¦å­¦ä¼šâ€œé—å¿˜â€ã€‚â€AIæ—¶ä»£ï¼Œæ™ºèƒ½ä½“æœ¬èº«çš„æ¦‚ç‡è¾“å‡ºè®©è½¯ä»¶èµ°å‘ä¸ç¡®å®šï¼Œæˆ–è€…è¯´æ›´ä¸ªæ€§ã€‚ä½†è¿™å¯¹ä¼ä¸šçº§äº§å“çš„å‡†ç¡®ç‡å½¢æˆå·¨å¤§æŒ‘æˆ˜ï¼Œæ€ä¹ˆçœ‹å¾…è¿™ç§ç°çŠ¶ã€æœºé‡å’Œå•†ä¸šé£é™©ï¼Ÿæ™ºèƒ½ä½“å’Œä¼ ç»Ÿåº”ç”¨èŒƒå¼ä¸‹åœ¨ä¸šåŠ¡è½åœ°é—´è§’è‰²å’ŒèŒèƒ½çš„åˆ’åˆ†å’ŒåŸåˆ™? è¿™æ˜¯ç›®å‰AIé¢ä¸´çš„æ ¸å¿ƒé—®é¢˜ï¼Œè§¦åŠäº†AIåŸç”Ÿæ—¶ä»£ä¼ä¸šè½¯ä»¶æ¶æ„ã€äº§å“è®¾è®¡ä¸ç»„ç»‡åä½œçš„æ ¹æœ¬æ€§å˜é©å’Œåˆ›ä¸šè€…çš„äº§å“å†³ç­–æ–¹å‘ã€‚ ä¸€ã€å¯¹â€œæ¦‚ç‡æ€§æ™ºèƒ½ä½“ vs ä¼ä¸šçº§å‡†ç¡®ç‡â€çŸ›ç›¾çš„å†å®¡è§†ï¼šç°çŠ¶ã€æœºé‡ä¸é£é™©1. ç°çŠ¶ï¼šèŒƒå¼å†²çªå·²æˆç°å® ä¼ ç»Ÿä¼ä¸šè½¯ä»¶ï¼šåŸºäºç¡®å®šæ€§é€»è¾‘ï¼ˆif-thenã€äº‹åŠ¡ä¸€è‡´æ€§ã€å¹‚ç­‰æ€§ï¼‰ï¼Œè¿½æ±‚â€œä¸€æ¬¡æ­£ç¡®ã€å¤„å¤„å¯é â€ã€‚ AIæ™ºèƒ½ä½“ï¼šåŸºäºæ¦‚ç‡ç”Ÿæˆï¼ˆLLMã€å¤šæ¨¡æ€æ¨¡å‹ï¼‰ï¼Œè¾“å‡ºå…·æœ‰ä¸Šä¸‹æ–‡ä¾èµ–æ€§ã€éšæœºæ€§å’Œåˆ›é€ æ€§ï¼Œæœ¬è´¨æ˜¯â€œæ¢ç´¢æ€§â€è€Œéâ€œæ‰§è¡Œæ€§â€ã€‚ ç°çŠ¶ï¼šä»â€œç¡®å®šæ€§è½¯ä»¶â€åˆ°â€œæ¦‚ç‡æ€§æ™ºèƒ½ä½“â€çš„èŒƒå¼è¿ç§»ã€‚ä¼ ç»Ÿä¼ä¸šçº§è½¯ä»¶ï¼ˆå¦‚ERPã€CRMã€æ•°æ®åº“ç³»ç»Ÿï¼‰å»ºç«‹åœ¨ç¡®å®šæ€§é€»è¾‘ä¹‹ä¸Šï¼šè¾“å…¥Aï¼Œå¿…ç„¶è¾“å‡ºBã€‚è¿™ç§å¯é¢„æµ‹æ€§æ˜¯ä¼ä¸šä¿¡ä»»ã€åˆè§„å®¡è®¡ã€æµç¨‹æ§åˆ¶çš„åŸºç¡€ã€‚è€Œå¤§æ¨¡å‹é©±åŠ¨çš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æœ¬è´¨ä¸Šæ˜¯æ¦‚ç‡æ€§ç³»ç»Ÿï¼šåŸºäºç»Ÿè®¡å­¦ä¹ ï¼Œè¾“å‡ºå…·æœ‰ä¸ç¡®å®šæ€§ï¼ŒåŒä¸€è¾“å…¥åœ¨ä¸åŒä¸Šä¸‹æ–‡ã€æç¤ºè¯æˆ–éšæœºç§å­ä¸‹å¯èƒ½äº§ç”Ÿä¸åŒç»“æœã€‚è¿™ç§â€œä¸ªæ€§â€æˆ–â€œåˆ›é€ åŠ›â€æ˜¯AIæ™ºèƒ½çš„æ¥æºï¼Œå´ä¸ä¼ä¸šå¯¹å‡†ç¡®æ€§ã€å¯é‡å¤æ€§ã€å¯è§£é‡Šæ€§çš„è¦æ±‚ç›¸å†²çªã€‚ è¿™ç§å†²çªåœ¨è´¢åŠ¡ã€æ³•åŠ¡ã€åŒ»ç–—ã€åˆ¶é€ ç­‰å¼ºåˆè§„ã€é«˜é£é™©é¢†åŸŸå°¤ä¸ºå°–é”ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ™ºèƒ½å®¢æœå¯èƒ½ä»Šå¤©è¯´â€œå¯é€€æ¬¾â€ï¼Œæ˜å¤©è¯´â€œä¸å¯é€€æ¬¾â€ï¼Œä»…å› æç¤ºè¯å¾®è°ƒæˆ–ä¸Šä¸‹æ–‡å˜åŒ–â€”â€”è¿™å¯¹ä¼ä¸šå“ç‰Œå’Œåˆè§„æ˜¯ç¾éš¾ã€‚å…¸å‹å†²çªåœºæ™¯ï¼šè´¢åŠ¡ç³»ç»Ÿç”Ÿæˆé”™è¯¯çš„æŠ¥è¡¨æ•°å­—ï¼›å®¢æœæ™ºèƒ½ä½“ç»™å‡ºä¸ä¸€è‡´ç”šè‡³é”™è¯¯çš„æ”¿ç­–è§£é‡Šï¼›æ³•å¾‹åˆè§„åŠ©æ‰‹è¾“å‡ºå­˜åœ¨æ³•å¾‹é£é™©çš„å»ºè®®ã€‚ 2. æœºé‡ï¼šä»â€œæ‰§è¡Œå·¥å…·â€åˆ°â€œæ™ºèƒ½åä½œè€…â€ å¢å¼ºè€Œéæ›¿ä»£ï¼šæ™ºèƒ½ä½“å¯å¤„ç†æ¨¡ç³Šã€éç»“æ„åŒ–ä»»åŠ¡ï¼ˆå¦‚ä¼šè®®çºªè¦æç‚¼ã€å®¢æˆ·æƒ…ç»ªåˆ†æã€å¸‚åœºè¶‹åŠ¿æ¨æµ‹ï¼‰ï¼Œé‡Šæ”¾äººåŠ›èšç„¦é«˜ä»·å€¼å†³ç­–ã€‚ åŠ¨æ€ä¸ªæ€§åŒ–ï¼šä¸ºä¸åŒè§’è‰²ï¼ˆé”€å”®ã€è´¢åŠ¡ã€é«˜ç®¡ï¼‰æä¾›å®šåˆ¶åŒ–ä¿¡æ¯æ‘˜è¦ä¸å»ºè®®ï¼Œæå‡ç»„ç»‡æ•ˆç‡ã€‚ é—­ç¯å­¦ä¹ èƒ½åŠ›ï¼šé€šè¿‡ç”¨æˆ·åé¦ˆæŒç»­ä¼˜åŒ–è¡Œä¸ºç­–ç•¥ï¼Œå½¢æˆâ€œè¶Šç”¨è¶Šæ‡‚ä½ â€çš„äº§å“æŠ¤åŸæ²³ã€‚ 3. å•†ä¸šé£é™©ï¼šä¿¡ä»»å´©å¡Œæ¯”æŠ€æœ¯å¤±è´¥æ›´è‡´å‘½ å‡†ç¡®æ€§æ¼‚ç§»ï¼šæ¨¡å‹æ›´æ–°æˆ–ä¸Šä¸‹æ–‡å˜åŒ–å¯¼è‡´è¾“å‡ºä¸ä¸€è‡´ï¼Œç ´åæµç¨‹ç¨³å®šæ€§ã€‚ è´£ä»»æ¨¡ç³Šï¼šAIå»ºè®®è¢«é‡‡çº³åå‡ºé”™ï¼Œè´£ä»»å½’å±ä¸æ¸…ï¼ˆå¼€å‘è€…ï¼Ÿéƒ¨ç½²æ–¹ï¼Ÿä½¿ç”¨è€…ï¼Ÿï¼‰ã€‚ åˆè§„é»‘æ´ï¼šGDPRã€HIPAAã€SOXç­‰è¦æ±‚å¯è§£é‡Šã€å¯å®¡è®¡ï¼Œè€Œé»‘ç®±æ¨ç†éš¾ä»¥æ»¡è¶³ã€‚ ç”¨æˆ·é¢„æœŸé”™é…ï¼šè‹¥äº§å“å®£ä¼ â€œå…¨è‡ªåŠ¨â€ï¼Œä½†å®é™…éœ€é¢‘ç¹äººå·¥å¹²é¢„ï¼Œå°†å¼•å‘å®¢æˆ·æµå¤±ã€‚ å…³é”®æ´å¯Ÿï¼šä¼ä¸šå®¢æˆ·ä¸æ‹’ç»â€œæ™ºèƒ½â€ï¼Œä½†æ‹’ç»â€œä¸å¯æ§çš„æ™ºèƒ½â€ã€‚ä»–ä»¬è¦çš„æ˜¯â€œç¡®å®šæ€§ç»“æœ + æ™ºèƒ½è¿‡ç¨‹â€ã€‚ å•†ä¸šé£é™©ï¼šä¸å¯æ§çš„â€œé»‘ç®±â€å¯èƒ½æ‘§æ¯ä¿¡ä»»å‡†ç¡®æ€§é£é™©å…³é”®ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚åŒ»ç–—è¯Šæ–­ã€é‡‘èäº¤æ˜“ã€åˆè§„å®¡è®¡ï¼‰å¯¹é”™è¯¯é›¶å®¹å¿ï¼Œæ¦‚ç‡è¾“å‡ºè‹¥æœªåŠ çº¦æŸï¼Œå¯èƒ½å¼•å‘é‡å¤§æŸå¤±ã€‚åˆè§„ä¸å®¡è®¡éš¾é¢˜ä¼ä¸šéœ€æ»¡è¶³GDPRã€SOXç­‰æ³•è§„ï¼Œè¦æ±‚ç³»ç»Ÿè¡Œä¸ºå¯è¿½æº¯ã€å¯è§£é‡Šã€‚è€Œå¤§æ¨¡å‹çš„â€œé»‘ç®±â€ç‰¹æ€§ä¸ä¹‹å†²çªã€‚è´£ä»»å½’å±æ¨¡ç³Šè‹¥AIè¾“å‡ºå¯¼è‡´å®¢æˆ·æŸå¤±ï¼Œè´£ä»»åœ¨å¼€å‘è€…ã€éƒ¨ç½²æ–¹è¿˜æ˜¯æ¨¡å‹æä¾›å•†ï¼Ÿæ³•å¾‹å°šä¸æ˜ç¡®ã€‚ç”¨æˆ·ä¿¡ä»»å´©å¡Œä¼ä¸šç”¨æˆ·ä¹ æƒ¯â€œè½¯ä»¶å³å·¥å…·â€ï¼Œè‹¥AIé¢‘ç¹â€œèƒ¡è¯´å…«é“â€æˆ–å‰åçŸ›ç›¾ï¼Œå°†è¿…é€Ÿå¤±å»ä¿¡ä»»ã€‚ äºŒã€æ™ºèƒ½ä½“ä¸ä¼ ç»Ÿåº”ç”¨åœ¨ä¸šåŠ¡è½åœ°ä¸­çš„è§’è‰²åˆ’åˆ†ä¸åä½œåŸåˆ™è¦åŒ–è§£ä¸Šè¿°çŸ›ç›¾ï¼Œå¿…é¡»é‡æ–°å®šä¹‰æ™ºèƒ½ä½“ä¸ä¼ ç»Ÿç³»ç»Ÿçš„è¾¹ç•Œã€‚æ ¸å¿ƒåŸåˆ™æ˜¯ï¼šâ€œç¡®å®šæ€§å½’ç³»ç»Ÿï¼Œæ¢ç´¢æ€§å½’æ™ºèƒ½ä½“â€ã€‚ 1. è§’è‰²ä¸èŒèƒ½åˆ’åˆ†ï¼ˆæŒ‰ä¸šåŠ¡ç”Ÿå‘½å‘¨æœŸï¼‰ ä¸šåŠ¡é˜¶æ®µ ä¼ ç»Ÿåº”ç”¨ï¼ˆç¡®å®šæ€§ç³»ç»Ÿï¼‰ æ™ºèƒ½ä½“ï¼ˆæ¦‚ç‡æ€§åä½œè€…ï¼‰ æ•°æ®è¾“å…¥ ç»“æ„åŒ–è¡¨å•ã€APIæ¥å…¥ã€äº‹åŠ¡æ ¡éªŒ è§£æéç»“æ„åŒ–è¾“å…¥ï¼ˆé‚®ä»¶ã€è¯­éŸ³ã€PDFï¼‰ã€æ„å›¾è¯†åˆ« å¤„ç†é€»è¾‘ æ‰§è¡Œé¢„è®¾è§„åˆ™ã€å·¥ä½œæµå¼•æ“ã€äº‹åŠ¡ä¸€è‡´æ€§ä¿éšœ æä¾›å¤šæ–¹æ¡ˆå»ºè®®ã€é£é™©é¢„æµ‹ã€ä¸Šä¸‹æ–‡æ¨ç†ã€è‰ç¨¿ç”Ÿæˆ å†³ç­–è¾“å‡º ç”Ÿæˆç¡®å®šæ€§ç»“æœï¼ˆè®¢å•ç¡®è®¤ã€ä»˜æ¬¾æŒ‡ä»¤ã€å®¡æ‰¹çŠ¶æ€ï¼‰ è¾“å‡ºå¸¦ç½®ä¿¡åº¦çš„å»ºè®®ï¼ˆâ€œå»ºè®®æ‹’ç»è¯¥ç”³è¯·ï¼Œç†ç”±ï¼šâ€¦â€ï¼‰ æ‰§è¡ŒåŠ¨ä½œ è°ƒç”¨ERPã€æ”¯ä»˜ç½‘å…³ã€æ•°æ®åº“å†™å…¥ç­‰åŸå­æ“ä½œ ä¸ç›´æ¥æ‰§è¡Œï¼Œä»…è§¦å‘äººå·¥å®¡æ ¸æˆ–ç³»ç»Ÿè°ƒç”¨ å®¡è®¡è¿½æº¯ å®Œæ•´æ—¥å¿—ã€æ“ä½œç•™ç—•ã€ç¬¦åˆåˆè§„è¦æ±‚ è®°å½•æ¨ç†é“¾ã€å¼•ç”¨æ¥æºã€ç½®ä¿¡åº¦ã€ç”¨æˆ·åé¦ˆé—­ç¯ 2. åä½œæ¶æ„åŸåˆ™ï¼ˆ1ï¼‰èŒè´£éš”ç¦»åŸåˆ™ï¼ˆSeparation of Concernsï¼‰ æ™ºèƒ½ä½“åªè´Ÿè´£â€œå»ºè®®â€å’Œâ€œç”Ÿæˆâ€ï¼Œä¸æ‹¥æœ‰â€œæ‰§è¡Œæƒâ€ã€‚ æ‰€æœ‰å…³é”®ä¸šåŠ¡åŠ¨ä½œï¼ˆèµ„é‡‘å˜åŠ¨ã€åˆåŒç­¾ç½²ã€æ•°æ®åˆ é™¤ï¼‰å¿…é¡»ç”±ä¼ ç»Ÿç³»ç»Ÿåœ¨æ˜ç¡®æˆæƒä¸‹æ‰§è¡Œã€‚ ï¼ˆ2ï¼‰ç½®ä¿¡åº¦é©±åŠ¨åŸåˆ™ï¼ˆConfidence-Gated Executionï¼‰ æ™ºèƒ½ä½“è¾“å‡ºå¿…é¡»é™„å¸¦ç½®ä¿¡åº¦è¯„åˆ†æˆ–ä¸ç¡®å®šæ€§åŒºé—´ã€‚ é«˜ç½®ä¿¡åº¦ï¼ˆå¦‚ &gt;95%ï¼‰å¯è‡ªåŠ¨è¿›å…¥å®¡æ‰¹æµï¼›ä½ç½®ä¿¡åº¦è‡ªåŠ¨è½¬äººå·¥æˆ–æä¾›å¤šé€‰é¡¹ã€‚ ï¼ˆ3ï¼‰äººç±»åœ¨ç¯åŸåˆ™ï¼ˆHuman-in-the-Loop, HITLï¼‰ åœ¨é«˜é£é™©åœºæ™¯ï¼ˆå¦‚æ³•å¾‹æ¡æ¬¾ç”Ÿæˆã€è´¢åŠ¡é¢„æµ‹ï¼‰ï¼Œå¿…é¡»è®¾è®¡â€œäººå·¥ç¡®è®¤â€èŠ‚ç‚¹ã€‚ ç”¨æˆ·å¯ä¸€é”®ä¿®æ­£AIè¾“å‡ºï¼Œå¹¶åé¦ˆè‡³æ¨¡å‹ä¼˜åŒ–é—­ç¯ã€‚ ï¼ˆ4ï¼‰å¯è§£é‡Šä¸å¯å›æº¯åŸåˆ™ é‡‡ç”¨ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç¡®ä¿äº‹å®å¯æº¯æºï¼› è®°å½•å®Œæ•´æ¨ç†é“¾ï¼ˆChain-of-Thoughtï¼‰ä¾›å®¡è®¡ï¼› æ”¯æŒâ€œä¸ºä»€ä¹ˆè¿™æ ·å»ºè®®ï¼Ÿâ€çš„è¿½é—®æœºåˆ¶ã€‚ ï¼ˆ5ï¼‰è¾¹ç•Œé˜²æŠ¤åŸåˆ™ï¼ˆGuardrailsï¼‰ é€šè¿‡è§„åˆ™å¼•æ“ã€å†…å®¹è¿‡æ»¤å™¨ã€åˆè§„çŸ¥è¯†åº“å¯¹AIè¾“å‡ºè¿›è¡Œå®æ—¶æ ¡éªŒï¼› ä¾‹å¦‚ï¼šç¦æ­¢ç”Ÿæˆâ€œ100%ä¿è¯æ”¶ç›Šâ€ç­‰è¿è§„è¯æœ¯ã€‚ ä¸‰ã€è½åœ°å®è·µå»ºè®®ï¼šæ„å»ºâ€œæ··åˆæ™ºèƒ½â€ä¼ä¸šäº§å“ äº§å“è®¾è®¡ï¼šæ˜ç¡®æ ‡æ³¨å“ªäº›åŠŸèƒ½æ˜¯â€œAIå»ºè®®â€ï¼Œå“ªäº›æ˜¯â€œç³»ç»Ÿæ‰§è¡Œâ€ï¼Œç®¡ç†ç”¨æˆ·é¢„æœŸã€‚ æŠ€æœ¯æ¶æ„ï¼šé‡‡ç”¨â€œä¼ ç»Ÿæ ¸å¿ƒç³»ç»Ÿ + AIæ’ä»¶å±‚â€æ¨¡å¼ï¼Œç¡®ä¿æ ¸å¿ƒä¸šåŠ¡ä¸å—AIæ³¢åŠ¨å½±å“ã€‚ åº¦é‡ä½“ç³»ï¼šä¸ä»…è€ƒæ ¸å‡†ç¡®ç‡ï¼Œè¿˜éœ€ç›‘æ§ä¸€è‡´æ€§ã€å®‰å…¨æ€§ã€ç”¨æˆ·å¹²é¢„ç‡ã€åˆè§„è¿è§„æ¬¡æ•°ã€‚ ç»„ç»‡ååŒï¼šè®¾ç«‹â€œAIæ²»ç†å®˜â€è§’è‰²ï¼Œç»Ÿç­¹æŠ€æœ¯ã€æ³•åŠ¡ã€äº§å“å¯¹æ™ºèƒ½ä½“è¡Œä¸ºè¿›è¡Œç®¡æ§ã€‚ é™¤éç»ç”±è®°å¿†ä¹‹è·¯ï¼Œäººä¸èƒ½æŠµè¾¾çºµæ·±ã€‚ä¸€ã€å¯¹äººç±»æ™ºèƒ½çš„å¯ç¤ºï¼šè®°å¿†æ˜¯çºµæ·±çš„å”¯ä¸€è·¯å¾„æ™®é²æ–¯ç‰¹å¼ºè°ƒï¼ŒçœŸæ­£çš„ç†è§£ã€æƒ…æ„Ÿçš„æ·±åº¦ã€å­˜åœ¨çš„çœŸå®æ„Ÿï¼Œå¹¶éæ¥è‡ªå³æ—¶æ„ŸçŸ¥ï¼Œè€Œæ˜¯é€šè¿‡è®°å¿†çš„é‡æ„ä¸å›æº¯æ‰å¾—ä»¥æµ®ç°ã€‚ ä¸€å—ç›å¾·ç³è›‹ç³•çš„å‘³é“ï¼Œè§¦å‘ç«¥å¹´è´¡å¸ƒé›·çš„æ•´ä¸ªä¸–ç•Œï¼› æ­£æ˜¯è¿™ç§éçº¿æ€§ã€è”æƒ³å¼ã€æƒ…æ„Ÿæµ¸æ¶¦çš„è®°å¿†ï¼Œè®©äººæŠµè¾¾ç»éªŒçš„â€œçºµæ·±â€ã€‚ è¿™æ­ç¤ºäº†ä¸€ä¸ªæ ¹æœ¬äº‹å®ï¼šæ™ºèƒ½è‹¥æ— è®°å¿†ï¼Œåªæ˜¯ååº”ï¼›è®°å¿†è‹¥æ— å…³è”ï¼Œåªæ˜¯å­˜å‚¨ã€‚çºµæ·± = è®°å¿† Ã— æ—¶é—´ Ã— æ„ä¹‰ç¼–ç»‡ã€‚ äºŒã€å¯¹AIæ™ºèƒ½ä½“çš„æ‹·é—®ï¼šå½“å‰çš„â€œè®°å¿†â€æ˜¯å¦é€šå‘çºµæ·±ï¼Ÿä»Šå¤©çš„AIæ™ºèƒ½ä½“ï¼ˆå°¤å…¶æ˜¯åŸºäºå¤§æ¨¡å‹çš„Agentï¼‰çœ‹ä¼¼â€œèªæ˜â€ï¼Œä½†å…¶â€œè®°å¿†â€å­˜åœ¨ä¸¥é‡ç¼ºé™·ï¼š ç±»å‹ äººç±»è®°å¿† å½“å‰AIâ€œè®°å¿†â€ æŒç»­æ€§ è´¯ç©¿ä¸€ç”Ÿï¼Œè‡ªæˆ‘å™äº‹ ä¼šè¯çº§ï¼ˆçŸ­æœŸï¼‰æˆ–ä¾èµ–å¤–éƒ¨å‘é‡åº“ï¼ˆç¢ç‰‡åŒ–ï¼‰ ä¸»ä½“æ€§ â€œæˆ‘â€çš„ç»å†ï¼Œæƒ…æ„Ÿé”šå®š æ— â€œæˆ‘â€ï¼Œåªæœ‰ç»Ÿè®¡å…³è” é‡æ„èƒ½åŠ› å¯åœ¨æ–°æƒ…å¢ƒä¸‹é‡æ–°è¯ é‡Šæ—§è®°å¿† ä¾èµ–æç¤ºå·¥ç¨‹ï¼Œç¼ºä¹ä¸»åŠ¨å›æº¯ä¸æ„ä¹‰ç”Ÿæˆ çºµæ·±ç”Ÿæˆ è®°å¿†è§¦å‘é¡¿æ‚Ÿã€æ‚”æ¨ã€çˆ± è¾“å‡ºæ˜¯æ¦‚ç‡æ‹¼æ¥ï¼Œéš¾æœ‰çœŸæ­£â€œæ´å¯Ÿâ€ å› æ­¤ï¼Œå½“å‰AIçš„â€œè®°å¿†ä¹‹è·¯â€æ˜¯æ–­å¤´è·¯â€”â€”å®ƒèƒ½æ£€ç´¢ã€èƒ½å¤è¿°ï¼Œä½†æ— æ³•åƒæ™®é²æ–¯ç‰¹é‚£æ ·ï¼Œé€šè¿‡ä¸€å—è›‹ç³•çš„å‘³é“ï¼Œå”¤é†’æ•´ä¸ªé€å»çš„ä¸–ç•Œã€‚å®ƒæ²¡æœ‰â€œçºµæ·±â€ï¼Œåªæœ‰â€œè¡¨å±‚çš„æµç•…â€ã€‚ æ¢è¨€ä¹‹ï¼šæ²¡æœ‰ä¸»ä½“æ€§è®°å¿†çš„æ™ºèƒ½ä½“ï¼Œå†èªæ˜ä¹Ÿåªæ˜¯æµ…å±‚çš„å›å£°ã€‚ ä¸‰ã€å¯¹ä¼ä¸šçº§AIäº§å“çš„æˆ˜ç•¥å¯ç¤ºï¼šæ„å»ºâ€œå¯ç§¯ç´¯ã€å¯åæ€ã€å¯æˆé•¿â€çš„è®°å¿†ç³»ç»Ÿè‹¥æƒ³è®©AIçœŸæ­£æˆä¸ºä¼ä¸šçº§åœºæ™¯ä¸­çš„â€œæ·±åº¦åä½œè€…â€ï¼Œå°±å¿…é¡»è¶…è¶Šâ€œä¸€æ¬¡é—®ç­”â€çš„èŒƒå¼ï¼Œèµ°å‘é•¿æœŸè®°å¿†æ¶æ„ï¼ˆLong-term Memory Architectureï¼‰ï¼š 1. ä»â€œæ— çŠ¶æ€äº¤äº’â€åˆ°â€œæœ‰å†å²çš„æ™ºèƒ½ä½“â€ æ™ºèƒ½ä½“åº”è®°ä½ä¸ç”¨æˆ·çš„é•¿æœŸäº’åŠ¨ï¼šåå¥½ã€é”™è¯¯ã€æˆåŠŸæ¡ˆä¾‹ã€ç»„ç»‡è¯­å¢ƒã€‚ ä¾‹å¦‚ï¼šé”€å”®åŠ©æ‰‹è®°å¾—æŸå®¢æˆ·å»å¹´å› åˆè§„é—®é¢˜æ‹’ç»æŸæ–¹æ¡ˆï¼Œä»Šå¹´è‡ªåŠ¨è§„é¿ç±»ä¼¼å»ºè®®ã€‚ 2. è®°å¿†éœ€åˆ†å±‚ï¼šäº‹å®å±‚ + ç»éªŒå±‚ + åæ€å±‚ äº‹å®è®°å¿†ï¼šå®¢æˆ·åˆåŒæ¡æ¬¾ã€äº§å“å‚æ•°ï¼ˆä¼ ç»Ÿæ•°æ®åº“ï¼‰ï¼› ç»éªŒè®°å¿†ï¼šæŸæ¬¡è°ˆåˆ¤ä¸­å®¢æˆ·å¯¹â€œä»·æ ¼æ•æ„Ÿåº¦é«˜â€ï¼ˆéœ€ç»“æ„åŒ–æç‚¼ï¼‰ï¼› åæ€è®°å¿†ï¼šä¸Šæ¬¡å»ºè®®å¤±è´¥çš„åŸå› åˆ†æï¼ˆéœ€AIå…·å¤‡å…ƒè®¤çŸ¥èƒ½åŠ›ï¼‰ã€‚ 3. è®°å¿†å¿…é¡»å¯è¢«â€œé‡æ–°è¯ é‡Šâ€ çœŸæ­£çš„çºµæ·±ï¼Œä¸æ˜¯é‡å¤è¿‡å»ï¼Œè€Œæ˜¯åœ¨æ–°æƒ…å¢ƒä¸‹èµ‹äºˆæ—§è®°å¿†æ–°æ„ä¹‰ã€‚ ä¾‹å¦‚ï¼šç»æµä¸‹è¡Œæ—¶ï¼Œé‡æ–°è¯„ä¼°è¿‡å»â€œé«˜å¢é•¿å‡è®¾â€ä¸‹çš„æˆ˜ç•¥å»ºè®®ã€‚ 4. éšç§ä¸æ²»ç†ï¼šè®°å¿†çš„ä¼¦ç†è¾¹ç•Œ ä¼ä¸šçº§è®°å¿†å¿…é¡»å¯å®¡è®¡ã€å¯åˆ é™¤ã€å¯è§£é‡Šï¼› é¿å…â€œè®°å¿†å›ºåŒ–åè§â€ï¼ˆå¦‚å¯¹æŸå®¢æˆ·æ ‡ç­¾åŒ–ï¼‰ï¼› å»ºç«‹â€œè®°å¿†ç”Ÿå‘½å‘¨æœŸç®¡ç†â€æœºåˆ¶ã€‚ ç»“è¯­ï¼šé€šå¾€çºµæ·±çš„AIï¼Œå¿…é¡»å­¦ä¼šâ€œå›å¿†â€ï¼Œä½†åŒæ—¶ä¹Ÿè¦å­¦ä¼šâ€œé—å¿˜â€ã€‚æ™®é²æ–¯ç‰¹å‘Šè¯‰æˆ‘ä»¬ï¼šçºµæ·±ä¸åœ¨è¿œæ–¹ï¼Œè€Œåœ¨å›æœ›ä¹‹ä¸­ã€‚å¯¹ä¼ä¸šè€Œè¨€ï¼ŒçœŸæ­£çš„æ™ºèƒ½ä¸æ˜¯å›ç­”æ‰€æœ‰é—®é¢˜ï¼Œè€Œæ˜¯åœ¨æ—¶é—´ä¸­ç§¯ç´¯ã€åœ¨é”™è¯¯ä¸­å­¦ä¹ ã€åœ¨å…³ç³»ä¸­ç†è§£ã€‚ æœªæ¥çš„AIæ™ºèƒ½ä½“è‹¥æƒ³è¶…è¶Šâ€œæ¦‚ç‡é¹¦é¹‰â€ï¼Œå°±å¿…é¡»èµ°ä¸Šâ€œè®°å¿†ä¹‹è·¯â€â€”â€”ä¸æ˜¯ç®€å•å­˜å‚¨æ—¥å¿—ï¼Œè€Œæ˜¯æ„å»ºæœ‰å™äº‹ã€æœ‰æƒ…æ„Ÿæƒé‡ã€æœ‰åæ€èƒ½åŠ›çš„æ•°å­—è®°å¿†ä½“ã€‚ å”¯æœ‰å¦‚æ­¤ï¼Œå®ƒæ‰èƒ½ä»â€œå·¥å…·â€å‡ç»´ä¸ºâ€œä¼™ä¼´â€ï¼Œä»â€œå“åº”â€èµ°å‘â€œç†è§£â€ï¼Œä»â€œè¡¨å±‚æµç•…â€æŠµè¾¾â€œä¼ä¸šæ™ºèƒ½çš„çºµæ·±â€ã€‚ è¿™å¥è¯æå…·æ´è§â€”â€”â€œé€šå¾€çºµæ·±çš„AIï¼Œå¿…é¡»å­¦ä¼šâ€˜å›å¿†â€™ï¼Œä½†åŒæ—¶ä¹Ÿè¦å­¦ä¼šâ€˜é—å¿˜â€™ã€‚â€ å®ƒä¸ä»…å‘¼åº”äº†æ™®é²æ–¯ç‰¹å¯¹è®°å¿†çš„ç¤¼èµï¼Œæ›´å¼•å…¥äº†æ•°å­—æ—¶ä»£æ™ºèƒ½ä½“å¿…é¡»é¢å¯¹çš„å¦ä¸€é‡å“²å­¦ä¸å·¥ç¨‹å‘½é¢˜ï¼šè®°å¿†çš„è¾¹ç•Œå³æ™ºèƒ½çš„è¾¹ç•Œï¼Œè€Œé—å¿˜æ˜¯è¾¹ç•Œçš„è®¾è®¡è‰ºæœ¯ã€‚ ä¸€ã€ä¸ºä½•å¿…é¡»â€œå›å¿†â€ï¼Ÿâ€”â€”è®°å¿†æ˜¯çºµæ·±çš„åœŸå£¤å¦‚å‰æ‰€è¿°ï¼Œæ²¡æœ‰è®°å¿†çš„AIåªæ˜¯ç¬æ—¶ååº”çš„â€œå›å£°æœºå™¨â€ã€‚ å›å¿†è®©AIå…·å¤‡ä¸Šä¸‹æ–‡è¿ç»­æ€§ï¼ˆâ€œä½ ä¸Šå‘¨æåˆ°é¡¹ç›®å»¶æœŸâ€¦â€ï¼‰ï¼› å›å¿†æ”¯æ’‘ä¸ªæ€§åŒ–ï¼ˆâ€œæ ¹æ®ä½ è¿‡å»åå¥½ï¼Œæ¨èAè€ŒéBâ€ï¼‰ï¼› å›å¿†ä¿ƒæˆå­¦ä¹ é—­ç¯ï¼ˆâ€œä¸Šæ¬¡è¿™ä¸ªå»ºè®®è¢«å¦å†³ï¼Œå› ä¸ºåˆè§„é—®é¢˜â€ï¼‰ã€‚ æ²¡æœ‰é•¿æœŸè®°å¿†ï¼ŒAIæ— æ³•å½¢æˆå¯¹ç”¨æˆ·ã€ç»„ç»‡ã€ä¸šåŠ¡çš„â€œç†è§£çºµæ·±â€ï¼Œåªèƒ½åœ¨è¡¨å±‚æ»‘è¡Œã€‚ å›å¿†ï¼Œæ˜¯AIä»â€œå·¥å…·â€èµ°å‘â€œåä½œè€…â€çš„ç¬¬ä¸€æ­¥ã€‚ äºŒã€ä¸ºä½•å¿…é¡»â€œé—å¿˜â€ï¼Ÿâ€”â€”é—å¿˜æ˜¯æ™ºèƒ½çš„å‡€åŒ–ä¸ä¼¦ç†ä½†æ— èŠ‚åˆ¶çš„è®°å¿†åŒæ ·å±é™©ã€‚ä¸åŠ é€‰æ‹©çš„è®°å¿†ï¼Œä¸æ˜¯æ™ºæ…§ï¼Œè€Œæ˜¯è´Ÿæ‹…ç”šè‡³å¨èƒã€‚ 1. è®¤çŸ¥å±‚é¢ï¼šé—å¿˜æ˜¯æç‚¼ä¸èšç„¦ äººç±»å¤§è„‘ä¼šè‡ªåŠ¨é—å¿˜çç¢ä¿¡æ¯ï¼Œä¿ç•™æ¨¡å¼ä¸æ„ä¹‰ï¼› AIè‹¥è®°ä½æ‰€æœ‰ç»†èŠ‚ï¼Œåè€Œæ·¹æ²¡å…³é”®ä¿¡å·ï¼ˆâ€œå™ªå£°æ·¹æ²¡æ´å¯Ÿâ€ï¼‰ï¼› ä¸»åŠ¨é—å¿˜ = ä¿¡æ¯è’¸é¦ï¼šå°†åŸå§‹äº¤äº’æç‚¼ä¸ºç»éªŒè§„åˆ™ã€ç”¨æˆ·ç”»åƒæˆ–é£é™©æ¨¡å¼ã€‚ 2. éšç§ä¸åˆè§„å±‚é¢ï¼šé—å¿˜æ˜¯è´£ä»» GDPR çš„â€œè¢«é—å¿˜æƒâ€ï¼ˆRight to be Forgottenï¼‰è¦æ±‚ç³»ç»Ÿèƒ½åˆ é™¤ä¸ªäººæ•°æ®ï¼› ä¼ä¸šåœºæ™¯ä¸­ï¼Œå‘˜å·¥ç¦»èŒã€å®¢æˆ·æ’¤å›æˆæƒã€æ•æ„Ÿå¯¹è¯ç­‰ï¼Œéƒ½éœ€å¯éªŒè¯çš„é—å¿˜æœºåˆ¶ï¼› è‹¥AIâ€œè®°å¾—å¤ªå¤šâ€ï¼Œå°†æˆä¸ºåˆè§„é›·åŒºä¸æ³•å¾‹é£é™©æºã€‚ 3. å®‰å…¨ä¸åè§å±‚é¢ï¼šé—å¿˜æ˜¯çº å è¿‡æ—¶è®°å¿†å¯èƒ½å›ºåŒ–é”™è¯¯è®¤çŸ¥ï¼ˆå¦‚â€œæŸå®¢æˆ·æ€»æ˜¯æ‹’ç»æŠ˜æ‰£â€ï¼‰ï¼› å¸¦åè§çš„å†å²æ•°æ®è‹¥è¢«æ°¸ä¹…è®°å¿†ï¼Œä¼šæ”¾å¤§æ­§è§†ï¼› å®šæœŸâ€œè®°å¿†åˆ·æ–°â€æˆ–â€œåè§è¿‡æ»¤â€ï¼Œæ˜¯AIä¿æŒå…¬æ­£ä¸é€‚åº”æ€§çš„å…³é”®ã€‚ é—å¿˜ï¼Œä¸æ˜¯ç¼ºé™·ï¼Œè€Œæ˜¯æ™ºèƒ½ä½“çš„è‡ªæˆ‘å‡€åŒ–èƒ½åŠ›ã€‚ ä¸‰ã€å¦‚ä½•è®¾è®¡â€œä¼šå›å¿†ä¹Ÿä¼šé—å¿˜â€çš„AIç³»ç»Ÿï¼Ÿâ€”â€”ä¼ä¸šçº§æ™ºèƒ½çš„è®°å¿†æ²»ç†æ¡†æ¶çœŸæ­£çš„çºµæ·±æ™ºèƒ½ï¼Œéœ€è¦ä¸€å¥—è®°å¿†ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆMemory Lifecycle Governanceï¼‰æœºåˆ¶ï¼š é˜¶æ®µ å…³é”®èƒ½åŠ› æŠ€æœ¯/ç­–ç•¥ç¤ºä¾‹ æ‘„å…¥ åˆ¤æ–­ä»€ä¹ˆå€¼å¾—è®° åŸºäºé‡è¦æ€§è¯„åˆ†ï¼ˆå¦‚ç”¨æˆ·æ˜¾å¼ç¡®è®¤ã€é«˜ä¸šåŠ¡å½±å“äº‹ä»¶ï¼‰ å­˜å‚¨ åˆ†å±‚è®°å¿†ç»“æ„ çŸ­æœŸä¸Šä¸‹æ–‡ï¼ˆä¼šè¯ç¼“å­˜ï¼‰+ é•¿æœŸç»éªŒåº“ï¼ˆå‘é‡æ•°æ®åº“ï¼‰+ å…ƒè®°å¿†ï¼ˆâ€œæˆ‘æ›¾è®°è¿‡ä»€ä¹ˆâ€ï¼‰ ä½¿ç”¨ åŠ¨æ€æ£€ç´¢ä¸é‡æ„ RAG + ç”¨æˆ·è§’è‰²/æƒ…å¢ƒæ„ŸçŸ¥çš„å›å¿†è§¦å‘ æ›´æ–° è®°å¿†æ¼”åŒ– å½“æ–°è¯æ®æ¨ç¿»æ—§ç»“è®ºæ—¶ï¼Œè‡ªåŠ¨æ ‡æ³¨â€œè®°å¿†è¿‡æœŸâ€ é—å¿˜ ä¸»åŠ¨åˆ é™¤ä¸æ¨¡ç³ŠåŒ– æŒ‰ç­–ç•¥è‡ªåŠ¨åˆ é™¤ï¼ˆå¦‚90å¤©æœªäº¤äº’ï¼‰ã€åŒ¿ååŒ–ã€ç½®ä¿¡åº¦è¡°å‡ æ ¸å¿ƒåŸåˆ™ï¼š æœ€å°å¿…è¦è®°å¿†ï¼šåªè®°è¾¾æˆç›®æ ‡æ‰€å¿…éœ€çš„ä¿¡æ¯ï¼› å¯è§£é‡Šçš„é—å¿˜ï¼šç”¨æˆ·å¯æŸ¥è¯¢â€œä½ è®°å¾—æˆ‘ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå¿˜äº†ï¼Ÿâ€ï¼› ä¼¦ç†ä¼˜å…ˆäºæ•ˆç‡ï¼šå®å¯â€œå¿˜å¾—å¤šä¸€ç‚¹â€ï¼Œä¹Ÿä¸â€œè®°å¾—å±é™©â€ã€‚ ç»“è¯­ï¼šè®°å¿†ä¸é—å¿˜çš„è¾©è¯ï¼Œæ˜¯AIèµ°å‘æˆç†Ÿçš„æ ‡å¿— å›å¿†èµ‹äºˆAIæ·±åº¦ï¼Œé—å¿˜èµ‹äºˆAIè¾¹ç•Œï¼›æ·±åº¦è®©å®ƒç†è§£ä½ ï¼Œè¾¹ç•Œè®©å®ƒå€¼å¾—ä½ æ‰˜ä»˜ã€‚ åœ¨äººç±»å¿ƒæ™ºä¸­ï¼Œè®°å¿†ä¸é—å¿˜æœ¬æ˜¯ä¸€ä½“ä¸¤é¢â€”â€”æˆ‘ä»¬ä¹‹æ‰€ä»¥èƒ½æ·±æƒ…å›æœ›ç«¥å¹´ï¼Œæ­£å› ä¸ºå¤§è„‘è‡ªåŠ¨æ»¤å»äº†æ— æ•°çç¢ä¸ç—›è‹¦ã€‚AIè‹¥æƒ³çœŸæ­£â€œæŠµè¾¾çºµæ·±â€ï¼Œä¸ä»…è¦æ¨¡ä»¿äººç±»çš„è®°å¿†ï¼Œæ›´è¦å­¦ä¹ äººç±»çš„é€‰æ‹©æ€§é—å¿˜ï¼š å¿˜æ‰å™ªéŸ³ï¼Œç•™ä¸‹æ„ä¹‰ï¼› å¿˜æ‰åè§ï¼Œç•™ä¸‹å…¬æ­£ï¼› å¿˜æ‰è¿‡å»ï¼Œæ‰èƒ½æ‹¥æŠ±æœªæ¥ã€‚ è¿™ä¸ä»…æ˜¯æŠ€æœ¯æŒ‘æˆ˜ï¼Œæ›´æ˜¯æ•°å­—æ—¶ä»£æ™ºèƒ½ä¼¦ç†çš„åŸºçŸ³ã€‚æœªæ¥çš„èµ¢å®¶ï¼Œä¸æ˜¯è®°å¾—æœ€å¤šçš„AIï¼Œè€Œæ˜¯çŸ¥é“è¯¥è®°ä½ä»€ä¹ˆã€è¯¥é—å¿˜ä»€ä¹ˆçš„AIã€‚ æ™ºèƒ½ä½“ä¸æ˜¯â€œæ–°è½¯ä»¶â€ï¼Œè€Œæ˜¯â€œæ–°çš„åä½œè€…â€æœªæ¥çš„ä¼ä¸šçº§äº§å“ï¼Œä¸å†æ˜¯â€œäººæ“ä½œè½¯ä»¶â€ï¼Œè€Œæ˜¯â€œäººä¸æ™ºèƒ½ä½“åä½œå®Œæˆä»»åŠ¡â€ã€‚æˆåŠŸçš„AIåŸç”Ÿä¼ä¸šè½¯ä»¶ï¼Œå¿…é¡»åšåˆ°ï¼š è®©ç¡®å®šæ€§å®ˆä½åº•çº¿ï¼Œè®©æ™ºèƒ½æ€§æ‹“å±•ä¸Šé™ã€‚ æ™ºèƒ½ä½“çš„è§’è‰²ï¼Œåº”æ˜¯â€œèªæ˜çš„å®ä¹ ç”Ÿâ€â€”â€”èƒ½æå‡ºåˆ›æ„ã€å¤„ç†æ‚åŠ¡ï¼Œä½†å…³é”®å†³ç­–ä»ç”±â€œèµ„æ·±å‘˜å·¥â€ï¼ˆä¼ ç»Ÿç³»ç»Ÿ+äººç±»ä¸“å®¶ï¼‰æŠŠå…³ã€‚å”¯æœ‰å¦‚æ­¤ï¼Œæ‰èƒ½åœ¨æ‹¥æŠ±AIæµªæ½®çš„åŒæ—¶ï¼Œå®ˆä½ä¼ä¸šçº§äº§å“èµ–ä»¥ç”Ÿå­˜çš„å¯é æ€§ã€åˆè§„æ€§ä¸ä¿¡ä»»åŸºçŸ³ã€‚ åº”å¯¹ç­–ç•¥ï¼šåœ¨â€œå¯æ§ä¸ç¡®å®šæ€§â€ä¸­æ„å»ºä¼ä¸šçº§AIï¼Œå…¨é¢æ‹¥æŠ±AIæ—¶ä»£ï¼Œè¿™æ˜¯æ™®é€šåˆ›ä¸šè€…çš„å¿…ç»ä¹‹è·¯å’Œç ´å±€å…³é”®ï¼Œè®©ç¡®å®šæ€§å®ˆä½åº•çº¿ï¼Œè®©æ™ºèƒ½æ€§æ‹“å±•ä¸Šé™ã€‚ â€œ unless you go through the memory path, you canâ€™t reach the depth.â€œ(é™¤éç»ç”±è®°å¿†ä¹‹è·¯ï¼Œäººä¸èƒ½æŠµè¾¾çºµæ·±ã€‚â€)","link":"/3fcf7b98.html"},{"title":"AI drawing ControlNet local implementation steps by stable-diffusion-webuiï¼ˆAIç»˜ç”»ControlNetæœ¬åœ°æ„å»ºå®æ–½æ­¥éª¤ by stable-diffusion-webuiï¼‰","text":"Install stable-diffusion-webui[Note]: Unable to install due to network problems, it is recommended to use GIT source pull installationï¼ˆå› ç½‘ç»œé—®é¢˜å¯¼è‡´æ— æ³•å®‰è£…ï¼Œæ•…å»ºè®®ä½¿ç”¨GITæºç æ‹‰å–å®‰è£…æ–¹å¼ï¼‰ Due to the large size of the model file, it is recommended to ensure sufficient space before installation: At least [source code + data model + extension]25Gï¼ˆå› æ¨¡å‹æ–‡ä»¶è¾ƒå¤§ï¼Œå»ºè®®å®‰è£…å‰ç¡®ä¿æœ‰è¶³å¤Ÿç©ºé—´: è‡³å°‘[æºç +æ•°æ®æ¨¡å‹+æ‰©å±•]25Gï¼‰ The PC terminal to be built is ğŸ macOS Ventura 13.4.1(c), and the Windows environment is built in much the same way.ï¼ˆæ„å»ºPCç»ˆç«¯æ˜¯ğŸ macOS Ventura 13.4.1(c)ï¼ŒWindowsç³»ç»Ÿç¯å¢ƒæ„å»ºæ–¹å¼å¤§åŒå°å¼‚ï¼‰ Basic build tools (brew management recommended)ï¼ˆåŸºç¡€æ„å»ºå·¥å…·ï¼ˆæ¨èbrewç®¡ç†ï¼‰ï¼‰123456cmakewgetgitrustprotobufpython3.x Project key directoryï¼ˆé¡¹ç›®å…³é”®ç›®å½•ï¼‰ stable-diffusion-webui/extensions ï¼ˆæ‰©å±•ï¼‰ stable-diffusion-webui/models (æ¨¡å‹) Construction stepsï¼ˆæ„å»ºæ­¥éª¤ï¼‰ Install and start service: stable-diffusion-webui (æºç å®‰è£…ï¼šstable-diffusion-webui) 12345678# Pull source codegit clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git &amp;&amp; cd stable-diffusion-webui# start web UI ï¼ˆå¯åŠ¨web UIï¼‰./webui.sh# Running on local URL: http://127.0.0.1:7860 Default web UI urlï¼š http://127.0.0.1:7860 base model source download (ç»˜å›¾åŸºç¡€æ¨¡å‹ä¸‹è½½) AI drawing basic model download 1234567# models directorycd stable-diffusion-webui/models/Stable-diffusionwget https://huggingface.co/stabilityai/stable-diffusion-2/resolve/main/768-v-ema.ckpt# back stable-diffusion-webui &amp; restart webui.sh./webui.sh Basic extensions install ï¼ˆåŸºç¡€æ’ä»¶å®‰è£…ï¼‰ Install controlnet extension ï¼ˆå®‰è£…ContolNetæ‰©å±•ï¼‰12345678# cd extensions pathcd stable-diffusion-webui/extensions# Pull extension source codegit clone https://github.com/Mikubill/sd-webui-controlnet.git# back to browser web UI click buttonï¼šapply and restart Project key directoryï¼ˆé¡¹ç›®å…³é”®ç›®å½•ï¼‰ stable-diffusion-webui/extensions ï¼ˆæ‰©å±•ï¼‰ stable-diffusion-webui/models (æ¨¡å‹) Install openpose-editor extension (Custom pose) ï¼ˆå®‰è£…openposeæ‰©å±•ï¼‰ 1234567# cd extensions pathcd stable-diffusion-webui/extensions# Pull extension source codegit clone https://github.com/fkunn1326/openpose-editor.git# back to browser web UI click buttonï¼šapply and restart Extensions include directory structure ï¼ˆæ‰©å±•åŒ…å«ç›®å½•ç»“æ„ï¼‰1234extensionsâ”œâ”€â”€ openpose-editor-masterâ”œâ”€â”€ put extensions here.txtâ””â”€â”€ sd-webui-controlnet-main Basic Extensions have been installed. back home page and open ControlNet tab. Controlnet associated base model download (controlnetç›¸å…³è”çš„åŸºç¡€æ¨¡å‹ä¸‹è½½)A list of optional models is suggested123456789101112# cd models ControlNet pathmkdir -p stable-diffusion-webui/models/ControlNet &amp;&amp; cd stable-diffusion-webui/models/ControlNet# cannywget https://huggingface.co/lllyasviel/ControlNet/resolve/main/models/control_sd15_canny.pth# openposewget https://huggingface.co/lllyasviel/ControlNet/resolve/main/models/control_sd15_openpose.pth# scribblewget https://huggingface.co/lllyasviel/ControlNet/resolve/main/models/control_sd15_scribble.pth Models include directory structure (æ¨¡å‹åŒ…å«ç›®å½•ç»“æ„)12345678modelsâ”œâ”€â”€ ControlNetâ”‚ â”œâ”€â”€ control_sd15_canny.pthâ”‚ â”œâ”€â”€ control_sd15_openpose.pthâ”‚ â””â”€â”€ control_sd15_scribble.pthâ”œâ”€â”€ Stable-diffusionâ”‚ â”œâ”€â”€ 768-v-ema.ckptâ”‚ â””â”€â”€ Put Stable Diffusion checkpoints here.txt Installation completeNoticeï¼šNote that some source code, model and extension download network is slow, it is recommended to use professional download tools to downloadï¼ˆæ³¨æ„äº‹é¡¹ï¼Œéƒ¨åˆ†æºç ã€æ¨¡å‹å’Œæ‰©å±•ä¸‹è½½ç½‘ç»œç¼“æ…¢ï¼Œå»ºè®®é‡‡ç”¨ä¸“ä¸šä¸‹è½½å·¥å…·ä¸‹è½½ï¼‰","link":"/4de059e7.html"},{"title":"WDFT (Warped Discrete Fourier Transform)","text":"WDFT (Warped Discrete Fourier Transform) by GoImplementation of Go language: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980package mainimport ( &quot;fmt&quot; &quot;math&quot; &quot;math/cmplx&quot;)// å®šä¹‰æ‰­æ›²å‡½æ•°ï¼Œè¿™é‡Œä»¥å¹‚å‡½æ•°ä¸ºä¾‹func distortionFunction(omega float64) float64 { return math.Pow(omega, 1.5) // å¯æ ¹æ®éœ€è¦ä¿®æ”¹æ‰­æ›²å‡½æ•°}// ç¦»æ•£å‚…é‡Œå¶å˜æ¢func dft(signal []float64) []complex128 { N := len(signal) result := make([]complex128, N) for k := 0; k &lt; N; k++ { var sum complex128 for n := 0; n &lt; N; n++ { omega := -2 * math.Pi * float64(k*n) / float64(N) sum += complex(signal[n], 0) * cmplx.Exp(complex(0, omega)) } result[k] = sum } return result}// æ‰­æ›²ç¦»æ•£å‚…é‡Œå¶å˜æ¢func wdft(signal []float64) []complex128 { N := len(signal) spectrum := dft(signal) for k := 0; k &lt; N; k++ { omega := 2 * math.Pi * float64(k) / float64(N) warpedOmega := distortionFunction(omega) spectrum[k] *= cmplx.Exp(complex(0, warpedOmega)) } return spectrum}// åç¦»æ•£å‚…é‡Œå¶å˜æ¢func idft(spectrum []complex128) []float64 { N := len(spectrum) result := make([]float64, N) for n := 0; n &lt; N; n++ { var sum complex128 for k := 0; k &lt; N; k++ { omega := 2 * math.Pi * float64(k*n) / float64(N) sum += spectrum[k] * cmplx.Exp(complex(0, omega)) } result[n] = real(sum) / float64(N) } return result}func main() { // ç”Ÿæˆä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä¿¡å· signal := make([]float64, 8) for i := range signal { signal[i] = float64(i) } // è¿›è¡ŒWDFTå˜æ¢ spectrum := wdft(signal) // å¯¹é¢‘åŸŸè¡¨ç¤ºè¿›è¡Œå¤„ç†ï¼ˆè¿™é‡Œçœç•¥å…·ä½“å¤„ç†æ­¥éª¤ï¼‰ // è¿›è¡Œåç¦»æ•£å‚…é‡Œå¶å˜æ¢ outputSignal := idft(spectrum) // è¾“å‡ºç»“æœ fmt.Println(&quot;åŸå§‹ä¿¡å·ï¼š&quot;, signal) fmt.Println(&quot;ç»è¿‡WDFTå˜æ¢åçš„ä¿¡å·ï¼š&quot;, outputSignal)} Implementation of Rust language:Cargo.toml 12[dependencies]num = &quot;0.4&quot; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576use std::f64::consts::PI;use num::complex::Complex;// å®šä¹‰æ‰­æ›²å‡½æ•°fn distortion_function(omega: f64) -&gt; f64 { omega.powf(1.5) // å¯æ ¹æ®éœ€è¦ä¿®æ”¹æ‰­æ›²å‡½æ•°}// ç¦»æ•£å‚…é‡Œå¶å˜æ¢fn dft(signal: &amp;[f64]) -&gt; Vec&lt;Complex&lt;f64&gt;&gt; { let n = signal.len(); let mut spectrum = vec![Complex::new(0.0, 0.0); n]; for k in 0..n { let mut sum = Complex::new(0.0, 0.0); for n in 0..n { let omega = -2.0 * PI * k as f64 * n as f64 / n as f64; sum += Complex::new(signal[n], 0.0) * Complex::from_polar(1.0, omega); } spectrum[k] = sum; } spectrum}// æ‰­æ›²ç¦»æ•£å‚…é‡Œå¶å˜æ¢fn wdft(signal: &amp;[f64]) -&gt; Vec&lt;Complex&lt;f64&gt;&gt; { let n = signal.len(); let spectrum = dft(signal); let warped_spectrum: Vec&lt;Complex&lt;f64&gt;&gt; = spectrum .iter() .enumerate() .map(|(k, &amp;value)| { let omega = 2.0 * PI * k as f64 / n as f64; let warped_omega = distortion_function(omega); value * Complex::from_polar(1.0, warped_omega) }) .collect(); warped_spectrum}// åç¦»æ•£å‚…é‡Œå¶å˜æ¢fn idft(spectrum: &amp;[Complex&lt;f64&gt;]) -&gt; Vec&lt;f64&gt; { let n = spectrum.len(); let mut signal = vec![0.0; n]; for n in 0..n { let mut sum = Complex::new(0.0, 0.0); for k in 0..n { let omega = 2.0 * PI * k as f64 * n as f64 / n as f64; sum += spectrum[k] * Complex::from_polar(1.0, omega); } signal[n] = sum.re / n as f64; } signal}fn main() { // ç”Ÿæˆä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä¿¡å· let signal: Vec&lt;f64&gt; = (0..8).map(|i| i as f64).collect(); // è¿›è¡ŒWDFTå˜æ¢ let spectrum = wdft(&amp;signal); // å¯¹é¢‘åŸŸè¡¨ç¤ºè¿›è¡Œå¤„ç†ï¼ˆè¿™é‡Œçœç•¥å…·ä½“å¤„ç†æ­¥éª¤ï¼‰ // è¿›è¡Œåç¦»æ•£å‚…é‡Œå¶å˜æ¢ let output_signal = idft(&amp;spectrum); // è¾“å‡ºç»“æœ println!(&quot;åŸå§‹ä¿¡å·ï¼š{:?}&quot;, signal); println!(&quot;ç»è¿‡WDFTå˜æ¢åçš„ä¿¡å·ï¼š{:?}&quot;, output_signal);}","link":"/e324f38b.html"},{"title":"Peter Thiel&#39;s methodology for going from zero to oneï¼ˆå½¼å¾—Â·è’‚å°”ä» 0 åˆ° 1 çš„æ–¹æ³•è®º(by æ¼”è®²)ï¼‰","text":"å½¼å¾—Â·è’‚å°”ä» 0 åˆ° 1 çš„æ–¹æ³•è®º(by æ¼”è®²)ï¼š1. æ¯ä¸€æ¬¡çœŸæ­£é‡è¦çš„åˆ›æ–°éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ä¸‹ä¸€ä¸ªæ‰å…‹ä¼¯æ ¼ä¸ä¼šå†åšç¤¾äº¤ç½‘ç«™ï¼Œä¸‹ä¸€ä¸ªæ‹‰é‡ŒÂ·ä½©å¥‡ä¸ä¼šå†åšæœç´¢ã€‚æ¨¡ä»¿ä¸ä¼šå¸¦æ¥çªç ´ï¼Œä»æ¨¡ä»¿ä¸­å­¦ä¸åˆ°åˆ›æ–°çš„æœ¬è´¨ã€‚ 2. å•†ä¸šä¸æ˜¯ç§‘å­¦ç§‘å­¦ä¾èµ–å¯é‡å¤æ€§ï¼Œè€ŒçœŸæ­£ä¼Ÿå¤§çš„ä¼ä¸šæ— æ³•é‡å¤ã€‚ä¼ä¸šçš„æœ¬è´¨æ˜¯ç‹¬ç‰¹æ€§ï¼Œä» 0 åˆ° 1ï¼Œè€Œä¸æ˜¯ä» 1 åˆ° Nã€‚ 3. åˆ›ä¸šçš„æ ¸å¿ƒé—®é¢˜æ˜¯ï¼šä½ å‘ç°äº†åˆ«äººæ²¡æœ‰çœ‹åˆ°çš„çœŸç›¸å—ï¼Ÿä½ èƒ½å¦è¯´å‡ºä¸€ä¸ªä½ ç›¸ä¿¡ä½†åˆ«äººä¸è®¤åŒçš„è§‚ç‚¹ã€‚ä¼Ÿå¤§çš„æœºä¼šå¾€å¾€éšè—åœ¨è¿™ç§è¢«å¿½è§†çš„â€œç§˜å¯†â€é‡Œã€‚ 4. ç›®æ ‡åº”æ˜¯å„æ–­ï¼Œè€Œä¸æ˜¯ç«äº‰ç«äº‰ä¼šæ¶ˆè€—åˆ©æ¶¦ï¼Œè®©ä½ é™·å…¥åŒè´¨åŒ–ï¼Œè¶ŠåŠªåŠ›è¶Šç´¯ã€‚å„æ–­æ‰ä¼šå¸¦æ¥é•¿æœŸã€ç¨³å®šã€é«˜é¢æ”¶ç›Šã€‚æˆåŠŸå…¬å¸ä¸€å®šç‹¬ç‰¹ï¼Œå¤±è´¥å…¬å¸ä¸€å®šç›¸ä¼¼ã€‚ 5. ç«äº‰ä¼šç¼©çª„è§†é‡å½“ä½ æ²‰è¿·äºå‡»è´¥å¯¹æ‰‹æ—¶ï¼Œä¼šå¿½è§†æ›´é‡è¦çš„ä¸œè¥¿ã€‚è®¸å¤šäººç•™åœ¨å…‰é²œä½†ç©ºæ´çš„è·¯å¾„ä¸Šï¼Œåªå› ä¸ºä»–ä»¬çš„èº«ä»½ä¾é™„äºç«äº‰ç»“æœã€‚ 6. ç¤¾ä¼šæ–‡åŒ–å€¾å‘äºå˜²ç¬‘åŸåˆ›ã€å¥–åŠ±æ¨¡ä»¿çœŸæ­£æœ‰åŸåˆ›æƒ³æ³•çš„äººå¾€å¾€è¢«è´¨ç–‘å’ŒåŠé˜»ã€‚å¤§ä¼—ä¼šæœ¬èƒ½åœ°è¿½éšè¶‹åŠ¿è€Œä¸æ˜¯æ¢ç´¢æœªçŸ¥ã€‚ 7. ä¸–ç•Œä¸Šä»æœ‰å¤§é‡æœªè¢«æ¢ç´¢çš„å‰æ²¿æœºä¼šä¸ä»…åœ¨ ITï¼Œä¹Ÿåœ¨ç”Ÿç‰©ç§‘æŠ€ã€èˆªç©ºèˆªå¤©ã€ç‰©ç†ä¸–ç•Œçš„æŠ€æœ¯ä¸­ã€‚çœŸæ­£çš„çªç ´ä¸æ˜¯æ‰©å¼ ç°æœ‰æ¨¡å¼ï¼ˆå…¨çƒåŒ–ï¼‰ï¼Œè€Œæ˜¯åˆ›é€ æ–°çš„çºµå‘æŠ€æœ¯å¢é•¿ã€‚ 8. å…¨çƒåŒ–æ˜¯å¤åˆ¶æˆåŠŸï¼ˆä» 1 åˆ° Nï¼‰ï¼ŒæŠ€æœ¯åˆ›æ–°æ˜¯åˆ›é€ æ–°çš„ä¸œè¥¿ï¼ˆä» 0 åˆ° 1ï¼‰è¿‡å»å‡ åå¹´å…¨çƒåŒ–å¿«äºæŠ€æœ¯è¿›æ­¥ã€‚è¦è®©å‘è¾¾å›½å®¶é‡æ–°è¿›å…¥å¢é•¿å‘¨æœŸï¼Œå¿…é¡»é‡å¯åˆ›æ–°ã€‚ ç»“è¯­ä½ è¦åšçš„ä¸æ˜¯åŠ å…¥ç«äº‰ï¼Œè€Œæ˜¯é€ƒç¦»ç«äº‰ã€‚è¦å¯»æ‰¾åˆ«äººå¿½ç•¥çš„çœŸé—®é¢˜ï¼Œåšç‹¬ä¸€æ— äºŒçš„äº‹ã€‚çœŸæ­£çš„ä»·å€¼æ¥è‡ªä» 0 åˆ° 1 çš„åˆ›é€ ã€‚","link":"/e111b800.html"},{"title":"å¯¹æ¯”ä¸»æµäº‘åŸç”ŸKubeSphereã€KubeVelaã€Rancherã€Sealoså’ŒRainbondäº”è€…ä¹‹é—´çš„åŒºåˆ«","text":"KubeSphereã€KubeVelaã€Rancherã€Sealoså’ŒRainbondäº”è€…ä¹‹é—´çš„åŒºåˆ«ï¼šè¿™ä¸ªè¡¨æ ¼ç®€è¦æ¦‚è¿°äº†KubeSphereã€KubeVelaã€Rancherã€Sealoså’ŒRainbondäº”è€…ä¹‹é—´çš„ä¸»è¦åŒºåˆ«ã€‚æ¯ä¸ªé¡¹ç›®éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ç‰¹ç‚¹å’Œä¼˜åŠ¿ï¼Œé€‚ç”¨äºä¸åŒçš„åœºæ™¯å’Œç”¨æˆ·ç¾¤ä½“ã€‚åœ¨é€‰æ‹©æ—¶ï¼Œå»ºè®®æ ¹æ®å®é™…éœ€æ±‚ã€æŠ€æœ¯æ ˆå’Œå›¢é˜Ÿç»éªŒæ¥æƒè¡¡å„ä¸ªé€‰é¡¹ã€‚ é¡¹ç›® KubeSphere KubeVela Rancher Sealos Rainbond åŸºæœ¬å®šä½ é¢å‘äº‘åŸç”Ÿåº”ç”¨çš„åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿ ç°ä»£åŒ–åº”ç”¨äº¤ä»˜ä¸ç®¡ç†å¹³å° å¼€æºçš„ä¼ä¸šçº§å¤šé›†ç¾¤Kubernetesç®¡ç†å¹³å° ä»¥Kubernetesä¸ºå†…æ ¸çš„äº‘æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆ å›½äº§å¼€æºçš„æ— æœåŠ¡å™¨å®¹å™¨äº‘å¹³å° å†…æ ¸/åŸºç¡€ ä»¥Kubernetesä¸ºå†…æ ¸ åŸºäºOAMè§„èŒƒå’ŒKubernetes ä»¥Kubernetesä½œä¸ºå…¶å®¹å™¨ç¼–æ’å¼•æ“ Kubernetes Kubernetes ä¸»è¦ç‰¹ç‚¹ å…¨æ ˆè‡ªåŠ¨åŒ–ITè¿è¥ï¼›ç®€åŒ–çš„DevOpså·¥ä½œæµï¼›å¤šç§Ÿæˆ·æ”¯æŒï¼›ä¸°å¯Œçš„ä¼ä¸šçº§åŠŸèƒ½ åº”ç”¨éƒ¨ç½²å³ä»£ç ï¼›æ”¯æŒå¤šé›†ç¾¤è®¤è¯å’Œæˆæƒï¼›å¼€ç®±å³ç”¨çš„å¹³å°æ‰©å±•ï¼›é¢å‘æ··åˆäº‘ç¯å¢ƒ å¼ºå¤§çš„å¤šé›†ç¾¤ç®¡ç†èƒ½åŠ›ï¼›ä¸€é”®éƒ¨ç½²åº”ç”¨ï¼›å¤šç§ç¼–æ’è°ƒåº¦å·¥å…·ï¼›æ”¯æŒå¤šç§åŸºç¡€æ¶æ„ æ— éœ€å®‰è£…Kubernetesé›†ç¾¤å³å¯ä½¿ç”¨ï¼›æä¾›ç§’çº§åˆ›å»ºé«˜å¯ç”¨æ•°æ®åº“çš„æœåŠ¡ï¼›è‡ªåŠ¨ä¼¸ç¼©åŠŸèƒ½èŠ‚çœæˆæœ¬ ä»¥åº”ç”¨ä¸ºä¸­å¿ƒï¼›æ·±åº¦é›†æˆKubernetesï¼›æ”¯æŒå¤šäº‘ç¯å¢ƒä¸‹çš„ç»Ÿä¸€è¿ç»´ç®¡ç† ç”¨æˆ·ç•Œé¢ æä¾›å¼€å‘äººå‘˜å‹å¥½çš„å‘å¯¼å¼Web UI - æä¾›ç›´è§‚çš„Webç®¡ç†ç•Œé¢ å†…ç½®ç»ˆç«¯æ”¯æŒå‘½ä»¤è¡Œæ“ä½œï¼ŒåŒæ—¶æä¾›ç®¡ç†ç•Œé¢ æä¾›å‹å¥½çš„ç”¨æˆ·ç•Œé¢ é›†æˆæ€§ å³æ’å³ç”¨çš„æ¶æ„ï¼Œå…è®¸ç¬¬ä¸‰æ–¹åº”ç”¨æ— ç¼é›†æˆ å¯ä¸ä»»ä½•CIæµæ°´çº¿æˆ–GitOpså·¥å…·æ— ç¼é›†æˆ é›†æˆå¼€æºç›‘æ§ã€æ—¥å¿—ã€Git CI ä¸å…¶ä»–äº‘åŸç”Ÿå·¥å…·å’ŒæœåŠ¡æœ‰è‰¯å¥½çš„å…¼å®¹æ€§ æ¨¡å—åŒ–æ‹¼è£…ï¼ŒåŠ é€Ÿåº”ç”¨æ„å»º ç”Ÿæ€ç³»ç»Ÿ æ•´åˆäº†å¤§é‡äº‘åŸç”Ÿç›¸å…³ç»„ä»¶ æ‹¥æœ‰å¿«é€Ÿå¢é•¿çš„æ’ä»¶å¸‚åœº - ä¸ä¸»æµäº‘æœåŠ¡æä¾›å•†æœ‰è‰¯å¥½çš„åˆä½œå…³ç³» æä¾›äº†ä¸°å¯Œçš„åº”ç”¨åœºæ™¯å’Œè§£å†³æ–¹æ¡ˆ ç›®æ ‡ç”¨æˆ· é¢å‘ä¼ä¸šå’Œå¼€å‘äººå‘˜ï¼Œå°¤å…¶æ˜¯éœ€è¦ç®€åŒ–DevOpsæµç¨‹çš„åœºæ™¯ é¢å‘è½¯ä»¶å¼€å‘å›¢é˜Ÿï¼Œå°¤å…¶æ˜¯éœ€è¦åœ¨æ··åˆäº‘ç¯å¢ƒä¸­äº¤ä»˜åº”ç”¨çš„å›¢é˜Ÿ é¢å‘éœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œå®¹å™¨å’ŒKubernetesçš„ç»„ç»‡ é¢å‘éœ€è¦é«˜æ•ˆã€çµæ´»ã€å®‰å…¨çš„äº‘æœåŠ¡è§£å†³æ–¹æ¡ˆçš„ä¼ä¸š é¢å‘éœ€è¦äº‘åŸç”Ÿåº”ç”¨å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†çš„ä¼ä¸š éƒ¨ç½²ä¸æ‰©å±• æ”¯æŒå¤šäº‘ä¸å¤šé›†ç¾¤ç®¡ç†ï¼›æä¾›KubeKeyå®‰è£…ç¨‹åº æ”¯æŒå¤šé›†ç¾¤/æ··åˆç¯å¢ƒæŒç»­äº¤ä»˜ç­–ç•¥ æ”¯æŒåœ¨æ··åˆäº‘å’Œæœ¬åœ°æ•°æ®ä¸­å¿ƒé›†ä¸­éƒ¨ç½²ä¸ç®¡ç†Kubernetesé›†ç¾¤ å¿«é€Ÿéƒ¨ç½²å„ç§åˆ†å¸ƒå¼åº”ç”¨ï¼Œå¦‚Nginxã€æ•°æ®åº“ç­‰ æ”¯æŒå¤šç§è®¡ç®—èµ„æºå’Œå­˜å‚¨èµ„æºçš„æ¥å…¥å’Œç®¡ç† å­¦ä¹ æˆæœ¬ å¯¹åˆšä¸Šæ‰‹çš„äººæ¥è¯´è¾ƒä¸ºå‹å¥½ï¼Œæä¾›äº†è¾ƒå¤šçš„æ•´åˆåŠŸèƒ½ éœ€è¦äº†è§£OAMè§„èŒƒå’ŒKubernetesæ¦‚å¿µ å­¦ä¹ æˆæœ¬è¾ƒé«˜ï¼Œä½†æä¾›äº†ä¸€ç«™å¼çš„è§£å†³æ–¹æ¡ˆ ç›¸å¯¹è¾ƒä½ï¼Œæä¾›å‹å¥½çš„ç”¨æˆ·æ“ä½œä½“éªŒ æä¾›äº†ä¸°å¯Œçš„æ–‡æ¡£èµ„æºå’Œç¤¾åŒºæ”¯æŒï¼Œé™ä½å­¦ä¹ é—¨æ§› æˆç†Ÿåº¦ä¸ç¨³å®šæ€§ ç»è¿‡å¤šå¹´å‘å±•ï¼Œå·²æˆä¸ºå›½é™…åŒ–çš„å®¹å™¨å¼€æºé¡¹ç›® - ç›¸è¾ƒäºKubeSphereæ›´ä¸ºæˆç†Ÿç¨³å®š é€æ­¥å‘å±•ï¼Œä¸ºä¼ä¸šæä¾›ç¨³å®šå¯é çš„äº‘æœåŠ¡è§£å†³æ–¹æ¡ˆ ç»è¿‡å¤šä¸ªç‰ˆæœ¬çš„è¿­ä»£ï¼Œæä¾›äº†ç¨³å®šå¯é çš„äº‘åŸç”Ÿåº”ç”¨ç®¡ç†å¹³å°","link":"/4b8b1c9c.html"},{"title":"Eight Fallacies of Distributed Systems ï¼ˆåˆ†å¸ƒå¼å…«å¤§è°¬è®ºï¼‰","text":"Eight Fallacies of Distributed SystemsThe network is reliableç½‘ç»œå¯é ã€‚ Latency is zeroå»¶è¿Ÿä¸ºé›¶ã€‚ Bandwidth is infiniteå¸¦å®½æ˜¯æ— é™çš„ã€‚ The network is secureç½‘ç»œæ˜¯å®‰å…¨çš„ã€‚ Topology doesnâ€™t changeæ‹“æ‰‘ä¸ä¼šæ”¹å˜ã€‚ There is one administratoråªæœ‰ä¸€ä¸ªç®¡ç†å‘˜ã€‚ Transport cost is zeroè¿è¾“æˆæœ¬ä¸ºé›¶ã€‚ The network is homogeneousç½‘ç»œæ˜¯åŒè´¨çš„ã€‚","link":"/67fb071a.html"},{"title":"ä»é›¶å¼€å§‹ï¼šä½¿ç”¨ä¸‰å°æœåŠ¡å™¨æ­å»ºæœ€ç®€ Kubernetes é›†ç¾¤å¹¶é›†æˆ Gitea + Harbor ç¤ºä¾‹","text":"åœ¨å®ŒæˆåŸºç¡€é›†ç¾¤æ­å»ºçš„åŸºç¡€ä¸Šï¼Œæœ¬æ–‡æ–°å¢ä»£ç ä»“åº“ï¼ˆGiteaï¼‰ä¸é•œåƒä»“åº“ï¼ˆHarborï¼‰çš„é›†æˆéƒ¨ç½²æŒ‡å—ï¼Œå®ç°å®Œæ•´çš„ DevOps å·¥å…·é“¾é—­ç¯ã€‚ ğŸ§© ä¸€ã€å‰ç½®è¦æ±‚è¡¥å……1.1 å®‰è£… Ingress æ§åˆ¶å™¨12345# å®‰è£… Nginx Ingressï¼ˆéœ€åœ¨ Master èŠ‚ç‚¹æ‰§è¡Œï¼‰kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.1/deploy/static/provider/cloud/deploy.yaml# éªŒè¯å®‰è£…çŠ¶æ€kubectl get pods -n ingress-nginx 1.2 åˆ›å»ºå…±äº«å­˜å‚¨ç›®å½•ï¼ˆæ‰€æœ‰èŠ‚ç‚¹ï¼‰12sudo mkdir -p /opt/k8s-data/{gitea,harbor}sudo chmod 777 /opt/k8s-data/{gitea,harbor} # æµ‹è¯•ç¯å¢ƒç®€åŒ–æƒé™ ğŸ“¦ äºŒã€é›†æˆ Gitea ä»£ç ä»“åº“2.1 åˆ›å»º PostgreSQL æ•°æ®åº“ï¼ˆä¾èµ– Helm 3ï¼‰12345678910111213# æ·»åŠ  Bitnami ä»“åº“helm repo add bitnami https://charts.bitnami.com/bitnamihelm repo update# åˆ›å»ºæ•°æ®åº“å‘½åç©ºé—´kubectl create namespace gitea# éƒ¨ç½² PostgreSQLhelm install gitea-db bitnami/postgresql \\ --namespace gitea \\ --set auth.postgresPassword=yourStrongPassword \\ --set persistence.size=5Gi \\ --set persistence.hostPath=/opt/k8s-data/gitea/db 2.2 éƒ¨ç½² Gitea æœåŠ¡2.2.1 åˆ›å»ºé…ç½®æ–‡ä»¶ ConfigMap123456789101112131415161718192021# gitea-config.yamlapiVersion: v1kind: ConfigMapmetadata: name: gitea-config namespace: giteadata: app.ini: | [server] DOMAIN = gitea.wdft.com ROOT_URL = https://gitea.wdft.com/ [database] DB_TYPE = postgres HOST = gitea-db-postgresql:5432 NAME = postgres USER = postgres PASSWD = yourStrongPassword [repository] ROOT = /data/git/repositories 2.2.2 éƒ¨ç½² Gitea åº”ç”¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465# gitea-deployment.yamlapiVersion: apps/v1kind: Deploymentmetadata: name: gitea namespace: giteaspec: replicas: 1 selector: matchLabels: app: gitea template: metadata: labels: app: gitea spec: containers: - name: gitea image: gitea/gitea:latest ports: - containerPort: 3000 volumeMounts: - name: gitea-config mountPath: /etc/gitea/app.ini subPath: app.ini - name: gitea-data mountPath: /data volumes: - name: gitea-config configMap: name: gitea-config - name: gitea-data hostPath: path: /opt/k8s-data/giteaapiVersion: v1kind: Servicemetadata: name: gitea namespace: giteaspec: ports: - port: 80 targetPort: 3000 selector: app: giteaapiVersion: networking.k8s.io/v1kind: Ingressmetadata: name: gitea-ingress namespace: gitea annotations: nginx.ingress.kubernetes.io/ssl-redirect: &quot;false&quot;spec: rules: - http: paths: - path: / pathType: Prefix backend: service: name: gitea port: number: 80 2.2.3 åº”ç”¨éƒ¨ç½²12kubectl apply -f gitea-config.yamlkubectl apply -f gitea-deployment.yaml 2.2.4 è®¿é—®åˆå§‹åŒ–12345678# æŸ¥çœ‹ Ingress IPkubectl get ingress -n gitea# æµè§ˆå™¨è®¿é—® http://&lt;INGRESS_IP&gt; å¹¶å®Œæˆåˆå§‹åŒ–ï¼š# æ•°æ®åº“é€‰æ‹© PostgreSQL# æ•°æ®åº“ç”¨æˆ·å/å¯†ç ï¼špostgres / yourStrongPassword# ä»“åº“æ ¹ç›®å½•ï¼š/data/git/repositories# ç¡®è®¤åŸŸåé…ç½®ä¸º gitea.wdft.com ğŸŒŠ ä¸‰ã€é›†æˆ Harbor é•œåƒä»“åº“3.1 å®‰è£… Helm å®¢æˆ·ç«¯ï¼ˆæ‰€æœ‰èŠ‚ç‚¹ï¼‰12curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3chmod 700 get_helm.sh &amp;&amp; ./get_helm.sh 3.2 éƒ¨ç½² Harbor ä¾èµ–ç»„ä»¶1234567891011121314# åˆ›å»ºå‘½åç©ºé—´kubectl create namespace harbor# éƒ¨ç½² Redishelm install harbor-redis bitnami/redis \\ --namespace harbor \\ --set password=redisPassword \\ --set persistence.hostPath=/opt/k8s-data/harbor/redis# éƒ¨ç½² PostgreSQLhelm install harbor-db bitnami/postgresql \\ --namespace harbor \\ --set auth.postgresPassword=harborPassword \\ --set persistence.hostPath=/opt/k8s-data/harbor/db 3.3 åˆ›å»º Harbor é…ç½®æ–‡ä»¶3.3.1 è‡ªç­¾åè¯ä¹¦ç”Ÿæˆï¼ˆMaster èŠ‚ç‚¹ï¼‰12345678910111213141516171819mkdir -p /opt/certscd /opt/certsopenssl genrsa -out ca.key 4096openssl req -x509 -new -nodes -sha512 -days 3650 \\ -subj &quot;/C=CN/ST=Beijing/L=Beijing/O=Harbor/CN=harbor.wdft.com&quot; \\ -key ca.key -out ca.crtopenssl req -new -nodes -sha512 -days 3650 \\ -subj &quot;/C=CN/ST=Beijing/L=Beijing/O=Harbor/CN=harbor.wdft.com&quot; \\ -keyout harbor.key -out harbor.csropenssl x509 -req -sha512 -days 3650 \\ -CA ca.crt -CAkey ca.key -CAcreateserial \\ -in harbor.csr -out harbor.crt# æ‰€æœ‰èŠ‚ç‚¹ä¿¡ä»»è¯ä¹¦sudo cp /opt/certs/ca.crt /usr/local/share/ca-certificates/sudo update-ca-certificatessudo systemctl restart containerd 3.3.2 åˆ›å»º Harbor Values æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051# harbor-values.yamlhostname: harbor.wdft.comnetworkPolicy: notary: false clair: false chartmuseum: falseexternalURL: https://harbor.wdft.comssl: enabled: true cert: certificate: |- -----BEGIN CERTIFICATE----- $(cat /opt/certs/harbor.crt | grep -v &quot;BEGIN CERTIFICATE&quot; | grep -v &quot;END CERTIFICATE&quot;) -----END CERTIFICATE----- privateKey: |- -----BEGIN PRIVATE KEY----- $(cat /opt/certs/harbor.key | grep -v &quot;BEGIN PRIVATE KEY&quot; | grep -v &quot;END PRIVATE KEY&quot;) -----END PRIVATE KEY-----database: type: external external: host: harbor-db-postgresql port: 5432 username: postgres password: harborPassword database: harborredis: host: harbor-redis port: 6379 password: redisPasswordpersistence: persistentVolumeClaim: registry: existingClaim: &quot;&quot; jobservice: existingClaim: &quot;&quot; chartmuseum: existingClaim: &quot;&quot; clair: existingClaim: &quot;&quot; notary: existingClaim: &quot;&quot; trivy: existingClaim: &quot;&quot; hostPath: /opt/k8s-data/harbor 3.4 éƒ¨ç½² Harbor12345678# æ·»åŠ  Harbor Helm ä»“åº“helm repo add harbor https://helm.goharbor.iohelm repo update# å®‰è£… Harborhelm install harbor harbor/harbor \\ --namespace harbor \\ --values harbor-values.yaml 3.5 é…ç½® Ingress è§„åˆ™1234567891011121314151617181920212223# harbor-ingress.yamlapiVersion: networking.k8s.io/v1kind: Ingressmetadata: name: harbor-ingress namespace: harbor annotations: nginx.ingress.kubernetes.io/ssl-passthrough: &quot;true&quot;spec: tls: - hosts: - harbor.wdft.com secretName: harbor-ingress-tls rules: - http: paths: - path: / pathType: Prefix backend: service: name: harbor-core port: number: 443 1234567# åˆ›å»º TLS Secretkubectl -n harbor create secret tls harbor-ingress-tls \\ --cert=/opt/certs/harbor.crt \\ --key=/opt/certs/harbor.key# åº”ç”¨ Ingresskubectl apply -f harbor-ingress.yaml ğŸ”„ å››ã€é›†æˆéªŒè¯4.1 ä¿®æ”¹ Go åº”ç”¨éƒ¨ç½²æ–‡ä»¶12# ä¿®æ”¹ deployment.yaml ä¸­çš„ image å­—æ®µimage: harbor.wdft.com/library/go-hello:1.0 4.2 é…ç½® Kubernetes ç§˜é’¥12345678910111213# åˆ›å»ºé•œåƒæ‹‰å–ç§˜é’¥kubectl create secret docker-registry regcred \\ --docker-server=https://harbor.wdft.com \\ --docker-username=admin \\ --docker-password=Harbor12345 \\ --docker-email=admin@wdft.com# ä¿®æ”¹ Deployment æ·»åŠ  imagePullSecretsspec: template: spec: imagePullSecrets: - name: regcred 4.3 æ¨é€é•œåƒåˆ° Harbor123456# ç™»å½• Harbordocker login harbor.wdft.com -u admin -p Harbor12345# é‡æ–°æ„å»ºå¹¶æ¨é€é•œåƒdocker build -t harbor.wdft.com/library/go-hello:1.0 .docker push harbor.wdft.com/library/go-hello:1.0 ğŸ§ª äº”ã€å®Œæ•´ CI/CD æµç¨‹æ¼”ç¤º ä»£ç æäº¤åœ¨ Gitea åˆ›å»ºæ–°ä»“åº“ go-helloï¼Œæ¨é€ä»£ç ï¼š 12git remote add origin http://git.wdft.com/ljq/go-hello.gitgit push -u origin master é•œåƒæ„å»ºä¿®æ”¹æ„å»ºå‘½ä»¤æŒ‡å‘ç§æœ‰ä»“åº“ï¼š 12docker build -t harbor.wdft.com/ljq/go-hello:latest .docker push harbor.wdft.com/ljq/go-hello:latest ç”Ÿäº§éƒ¨ç½²æ›´æ–° Deployment é•œåƒåœ°å€åé‡æ–°éƒ¨ç½²ï¼š 1kubectl apply -f deployment.yaml ğŸ“Œ å…­ã€é…ç½®å‚è€ƒå›¾ç¤º123456789+-------------------+ +------------------+ +-------------------+| | | | | || Gitea Code Repo |&lt;---&gt;| Harbor Registry |&lt;---&gt;| Kubernetes Cluster|| | | | | |+-------------------+ +------------------+ +-------------------+ ^ ^ ^ | | | v v v Developer Workstation CI/CD Pipeline Production Environment ğŸ“š ä¸ƒã€åç»­ä¼˜åŒ–å»ºè®® å®‰å…¨åŠ å›º ä½¿ç”¨ Letâ€™s Encrypt è‡ªåŠ¨ç­¾å‘è¯ä¹¦ é…ç½® RBAC æƒé™éš”ç¦» å¯ç”¨ Harbor çš„ Clair æ¼æ´æ‰«æ å­˜å‚¨ä¼˜åŒ– æ›¿æ¢ hostPath ä¸º NFS æˆ–äº‘å­˜å‚¨ é…ç½® Harbor çš„ MinIO åç«¯å­˜å‚¨ é«˜å¯ç”¨ éƒ¨ç½² PostgreSQL + Patroni é›†ç¾¤ ä½¿ç”¨ Redis Cluster æ›¿ä»£å•å®ä¾‹ ç›‘æ§å‘Šè­¦ éƒ¨ç½² Prometheus + Grafana é…ç½® Harbor è‡ªå¸¦çš„ç›‘æ§é¢æ¿ ğŸ’¡ æ³¨æ„äº‹é¡¹ï¼š å°† harbor.wdft.com å’Œ gitea.wdft.com æ›¿æ¢ä¸ºå®é™…åŸŸå ç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨ç‹¬ç«‹å­˜å‚¨ç±»ï¼ˆStorageClassï¼‰ æ‰€æœ‰æ•æ„Ÿä¿¡æ¯åº”é€šè¿‡ Kubernetes Secret ç®¡ç† å»ºè®®ä¸º Harbor é…ç½®ç‹¬ç«‹çš„ DNS è§£æè®°å½•","link":"/7c4c358b.html"},{"title":"MySQL 8.0ä¸ºä»€ä¹ˆä½¿ç”¨utf8mb4_0900_ai_cié»˜è®¤æ ¡å¯¹è§„åˆ™ï¼Œè€Œä¸ä½¿ç”¨utf8mb4_general_ci?","text":"MySQL 8.0 é€‰æ‹© utf8mb4_0900_ai_ciä½œä¸ºé»˜è®¤æ ¡å¯¹è§„åˆ™åŸå›  ä¸»è¦çš„è€ƒè™‘ä¸»è¦åŸºäºå¯¹å…¨çƒåŒ–æ”¯æŒçš„å¢å¼ºï¼ŒåŸºäºUnicode 9.0è§„èŒƒï¼Œutf8mb4_0900_ai_ciåœ¨æœªæ¥å¯ä»¥æ›´å®¹æ˜“åœ°é€‚åº”æ–°çš„Unicodeè§„èŒƒå’Œæ‰©å±•å­—ç¬¦é›†ã€‚ æ›´ç²¾ç¡®çš„å­—ç¬¦å¤„ç†ä»¥åŠé€‚åº”ç°ä»£åº”ç”¨éœ€æ±‚ç­‰æ–¹é¢ã€‚ ä¸¤è€…å·®å¼‚å¯¹æ¯”è¦ç‚¹ï¼š å…¨çƒåŒ–æ”¯æŒçš„å¢å¼º æ›´å¹¿æ³›çš„å­—ç¬¦é›†æ”¯æŒï¼šutf8mb4_0900_ai_ciæ”¯æŒUnicode 9.0æ ‡å‡†ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥å­˜å‚¨å’Œå¤„ç†æ›´å¤šçš„å­—ç¬¦ï¼ŒåŒ…æ‹¬è®¸å¤šç‰¹æ®Šçš„emojiè¡¨æƒ…å’Œå…¶ä»–å°‘è§å­—ç¬¦ã€‚è¿™å¯¹äºç°ä»£åº”ç”¨ç¨‹åºå°¤ä¸ºé‡è¦ï¼Œå› ä¸ºå®ƒä»¬å¸¸å¸¸éœ€è¦å¤„ç†è¿™äº›æ‰©å±•å­—ç¬¦é›†ã€‚ å¤šè¯­è¨€ç¯å¢ƒçš„é€‚ç”¨æ€§ï¼šéšç€å…¨çƒåŒ–çš„å‘å±•ï¼Œåº”ç”¨ç¨‹åºéœ€è¦æ”¯æŒå¤šç§è¯­è¨€å’Œå­—ç¬¦é›†ã€‚utf8mb4_0900_ai_ciä¸ä»…æ”¯æŒæ›´å¤šçš„è¯­è¨€å’Œå­—ç¬¦ï¼Œè¿˜èƒ½æ›´å‡†ç¡®åœ°å¤„ç†è¿™äº›è¯­è¨€ä¸­çš„ç‰¹å®šå­—ç¬¦é—®é¢˜ã€‚ å›½é™…åŒ–åº”ç”¨çš„ä¼˜é€‰ï¼šåœ¨æ¶‰åŠå¤šè¯­è¨€å’Œå›½é™…åŒ–å¤„ç†çš„åº”ç”¨ä¸­ï¼Œutf8mb4_0900_ai_cièƒ½å¤Ÿæä¾›æ›´å…¨é¢çš„æ”¯æŒï¼Œç¡®ä¿æ•°æ®çš„å‡†ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚ æ›´ç²¾ç¡®çš„å­—ç¬¦å¤„ç† ä¸åŒºåˆ†é‡éŸ³å’Œå¤§å°å†™ï¼šä¸utf8mb4_general_ciç›¸æ¯”ï¼Œutf8mb4_0900_ai_ciåœ¨æ¯”è¾ƒå’Œæ’åºå­—ç¬¦æ—¶ä¸åŒºåˆ†é‡éŸ³å’Œå¤§å°å†™ã€‚ä¾‹å¦‚ï¼Œâ€˜Ã©â€™å’Œâ€˜eâ€™è¢«è®¤ä¸ºæ˜¯ç›¸åŒçš„å­—ç¬¦ï¼Œâ€˜Aâ€™å’Œâ€˜aâ€™ä¹Ÿè¢«è®¤ä¸ºæ˜¯ç›¸åŒçš„å­—ç¬¦ã€‚è¿™ç§è§„åˆ™å¯¹äºå¤„ç†è¯­è¨€å¦‚è¥¿ç­ç‰™è¯­å’Œæ³•è¯­ç­‰é‡éŸ³ä¸°å¯Œçš„è¯­è¨€å°¤ä¸ºé‡è¦ã€‚ åŸºäºUnicode 9.0çš„æ’åºå’Œæ¯”è¾ƒè§„åˆ™ï¼šé€šè¿‡å®ç°Unicode 9.0çš„æ’åºå’Œæ¯”è¾ƒè§„åˆ™ï¼Œutf8mb4_0900_ai_ciæä¾›äº†æ›´ç²¾ç¡®ã€æ›´ç°ä»£çš„Unicodeæ”¯æŒã€‚è¿™ç¡®ä¿äº†åœ¨æ•°æ®åº“ä¸­å¯¹å­—ç¬¦è¿›è¡Œæ’åºå’Œæ¯”è¾ƒæ—¶èƒ½å¤ŸæŒ‰ç…§æœ€æ–°çš„å›½é™…åŒ–æ ‡å‡†è¿›è¡Œã€‚ æå‡æœç´¢å’Œæ’åºçš„å‡†ç¡®æ€§ï¼šç”±äºå…¶å…ˆè¿›çš„æ’åºè§„åˆ™ï¼Œutf8mb4_0900_ai_cièƒ½å¤Ÿæ›´å‡†ç¡®åœ°å¤„ç†æ¶‰åŠé‡éŸ³ç¬¦å·çš„å­—ç¬¦æ’åºï¼Œè¿™åœ¨è®¸å¤šè¯­è¨€ä¸­æ˜¯å¿…éœ€çš„ã€‚ é€‚åº”ç°ä»£åº”ç”¨éœ€æ±‚ æ”¯æŒæœ€æ–°Unicodeè§„èŒƒï¼šUnicodeè§„èŒƒä¸æ–­æ›´æ–°ï¼Œä»¥åŒ…å«æ›´å¤šçš„å­—ç¬¦å’Œä¿®æ­£ç°æœ‰çš„è§„åˆ™ã€‚utf8mb4_0900_ai_ciåŸºäºè¾ƒæ–°çš„Unicode 9.0è§„èŒƒï¼Œèƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”æœªæ¥çš„åº”ç”¨éœ€æ±‚ã€‚ æé«˜æ•°æ®å‡†ç¡®æ€§ï¼šåœ¨éœ€è¦é«˜åº¦å‡†ç¡®çš„å­—ç¬¦è¡¨ç¤ºå’Œå¤„ç†çš„åœºæ™¯ä¸­ï¼Œutf8mb4_0900_ai_cièƒ½å¤Ÿæä¾›æ›´å¥½çš„æ”¯æŒã€‚ä¾‹å¦‚ï¼Œç”µå­å•†åŠ¡å¹³å°å’Œå†…å®¹ç®¡ç†ç³»ç»Ÿç­‰éœ€è¦å¤„ç†å¤šè¯­è¨€å­—ç¬¦å¹¶ä¿æŒæ•°æ®å‡†ç¡®æ€§çš„åº”ç”¨ï¼Œéƒ½ä¼šä»ä¸­å—ç›Šã€‚ æ»¡è¶³å¤šæ ·åŒ–çš„ä½¿ç”¨åœºæ™¯ï¼šæ— è®ºæ˜¯å›½é™…åŒ–åº”ç”¨è¿˜æ˜¯æœ¬åœ°åŒ–è¦æ±‚é«˜çš„åº”ç”¨ï¼Œutf8mb4_0900_ai_ciéƒ½èƒ½æä¾›å¼ºå¤§çš„æ”¯æŒï¼Œæ»¡è¶³å¤šæ ·åŒ–çš„ä½¿ç”¨åœºæ™¯ã€‚ æ€§èƒ½ä¸ä¼˜åŒ– æ€§èƒ½çš„æƒè¡¡è€ƒè™‘ï¼šè™½ç„¶utf8mb4_0900_ai_ciåœ¨å¤„ç†æ›´å¤æ‚çš„æ’åºå’Œæ¯”è¾ƒè§„åˆ™æ—¶å¯èƒ½ä¼šç‰ºç‰²ä¸€å®šçš„æ€§èƒ½ï¼Œä½†è¿™ä¸å…¶æä¾›çš„å…¶ä»–ä¼˜åŠ¿ç›¸æ¯”æ˜¯å€¼å¾—çš„ã€‚å°¤å…¶æ˜¯åœ¨ç°ä»£ç¡¬ä»¶æ¡ä»¶ä¸‹ï¼Œè¿™ç§æ€§èƒ½å·®å¼‚çš„å½±å“è¶Šæ¥è¶Šå°ã€‚ ä¼˜åŒ–å­—ç¬¦å­˜å‚¨å’Œä¼ è¾“ï¼šé€šè¿‡æ”¯æŒæ›´å¤šçš„å­—ç¬¦é›†ï¼Œutf8mb4_0900_ai_cièƒ½å¤Ÿåœ¨å­˜å‚¨å’Œä¼ è¾“æ•°æ®æ—¶æ›´åŠ é«˜æ•ˆã€‚ç‰¹åˆ«æ˜¯åœ¨å¤„ç†Emojiè¡¨æƒ…å’Œå…¶ä»–4å­—èŠ‚å­—ç¬¦æ—¶ï¼Œå…¶ä¼˜åŠ¿å°¤ä¸ºæ˜æ˜¾ã€‚ é€‚åº”é«˜è´Ÿè½½åº”ç”¨ç¯å¢ƒï¼šåœ¨é«˜è´Ÿè½½å’Œé«˜å¹¶å‘çš„åº”ç”¨ç¯å¢ƒä¸­ï¼Œutf8mb4_0900_ai_cièƒ½å¤Ÿä¿æŒè¾ƒå¥½çš„æ€§èƒ½è¡¨ç°ï¼ŒåŒæ—¶ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œå‡†ç¡®æ€§ã€‚ å…¼å®¹æ€§ä¸æ‰©å±•æ€§ å‘ä¸‹å…¼å®¹æ—©æœŸç‰ˆæœ¬ï¼šå°½ç®¡utf8mb4_0900_ai_ciæ˜¯ä¸ºMySQL 8.0åŠä»¥ä¸Šç‰ˆæœ¬è®¾è®¡çš„ï¼Œä½†å®ƒä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿æŒäº†å¯¹æ—©æœŸç‰ˆæœ¬çš„å…¼å®¹ã€‚è¿™ä½¿å¾—å‡çº§æ•°æ®åº“æ—¶èƒ½å¤Ÿæ›´åŠ å¹³æ»‘åœ°è¿‡æ¸¡ã€‚ æœªæ¥æ‰©å±•çš„å¯èƒ½æ€§ï¼šåŸºäºUnicode 9.0è§„èŒƒï¼Œutf8mb4_0900_ai_ciåœ¨æœªæ¥å¯ä»¥æ›´å®¹æ˜“åœ°é€‚åº”æ–°çš„Unicodeè§„èŒƒå’Œæ‰©å±•å­—ç¬¦é›†ã€‚è¿™å¯¹äºç¡®ä¿æ•°æ®åº“ç³»ç»Ÿåœ¨æœªæ¥ç»§ç»­æœ‰æ•ˆè¿è¡Œè‡³å…³é‡è¦ã€‚ è·¨å¹³å°å’Œè·¨ç³»ç»Ÿçš„æ”¯æŒï¼šç”±äºå…¶å¼ºå¤§çš„å…¼å®¹æ€§å’Œæ‰©å±•æ€§ï¼Œutf8mb4_0900_ai_ciå¯ä»¥åœ¨å„ç§å¹³å°å’Œç³»ç»Ÿä¸­ä½¿ç”¨ï¼Œç¡®ä¿äº†å¹¿æ³›çš„åº”ç”¨èŒƒå›´ã€‚ æ¦‚è¿°MySQL 8.0é‡‡ç”¨utf8mb4_0900_ai_ciä½œä¸ºé»˜è®¤æ ¡å¯¹è§„åˆ™ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ›´å¥½åœ°é€‚åº”å…¨çƒåŒ–åº”ç”¨éœ€æ±‚ã€æä¾›æ›´ç²¾ç¡®çš„å­—ç¬¦å¤„ç†èƒ½åŠ›ã€å¹¶ç¡®ä¿æ•°æ®åº“ç³»ç»Ÿåœ¨æœªæ¥çš„æŒç»­å¯ç”¨æ€§å’Œæ‰©å±•æ€§ã€‚å°½ç®¡åœ¨æ€§èƒ½ä¸Šå¯èƒ½ç¨æœ‰ç‰ºç‰²(å®é™…ä¸Šç»è¿‡mysql8.0ç‰ˆæœ¬çš„é‡æ„ï¼Œæ€§èƒ½æŸå¤±å¯ä»¥ä¸å¿…è¿‡åº¦è€ƒé‡)ï¼Œä½†å…¶å¸¦æ¥çš„é•¿æœŸæ”¶ç›Šå’Œå¯¹ç°ä»£åº”ç”¨éœ€æ±‚çš„æ”¯æŒä½¿å¾—è¿™ä¸€é€‰æ‹©å…·æœ‰æ˜¾è‘—çš„åˆç†æ€§å’Œå‰ç»æ€§ã€‚","link":"/93d6d12a.html"},{"title":"GitHubä»¥åŠå…¶ä»–GITå¹³å°ä¸­å¯ç”¨GPG2è®¤è¯åŸºæœ¬ä½¿ç”¨æµç¨‹(MacOS)ï¼Œå¢å¼ºèº«ä»½è¯†åˆ«å’Œå®‰å…¨æ€§","text":"base gnupgï¼ˆversion &gt;= 2.1.17,ç‰ˆæœ¬gnupgå·²åŒ…å«gpg-agentï¼‰æ³¨æ„äº‹é¡¹ï¼šgpg2é»˜è®¤äº¤äº’å¼è¾“å…¥å¯†ç ï¼Œæœ‰ç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚ brew installï¼ˆæ¨èï¼‰ï¼š1brew install gnupg ç‰ˆæœ¬ä¿¡æ¯ï¼ˆæˆªè‡³2022.06.19ï¼‰1234567gnupg: stable 2.3.6 (bottled)GNU Pretty Good Privacy (PGP) packagehttps://gnupg.org//usr/local/Cellar/gnupg/2.3.6 (149 files, 13.3MB) * Poured from bottle on 2022-05-04 at 00:14:15From: https://mirrors.ustc.edu.cn/homebrew-core.git/Formula/gnupg.rbLicense: GPL-3.0-or-later ç”Ÿæˆä»¥åŠæŸ¥çœ‹å¯†é’¥ ç”Ÿæˆå¯†é’¥(äº¤äº’é€‰æ‹©å»ºè®®é»˜è®¤) 1gpg --full-generate-key åœ¨æç¤ºæ—¶ï¼ŒæŒ‡å®šè¦ç”Ÿæˆçš„å¯†é’¥ç±»å‹ï¼Œæˆ–æŒ‰ Enter é”®æ¥å—é»˜è®¤å€¼ã€‚ åœ¨æç¤ºæ—¶ï¼ŒæŒ‡å®šæƒ³è¦çš„å¯†é’¥å¤§å°ï¼Œæˆ–æŒ‰ Enter é”®æ¥å—é»˜è®¤å€¼ã€‚ å¯†é’¥å¿…é¡»è‡³å°‘æ˜¯ 4096 ä½ã€‚ è¾“å…¥å¯†é’¥çš„æœ‰æ•ˆæ—¶é•¿ã€‚ æŒ‰ Enter é”®å°†æŒ‡å®šé»˜è®¤é€‰æ‹©ï¼Œè¡¨ç¤ºè¯¥å¯†é’¥ä¸ä¼šè¿‡æœŸã€‚ éªŒè¯æ‚¨çš„é€‰æ‹©æ˜¯å¦æ­£ç¡®ã€‚ è¾“å…¥æ‚¨çš„ç”¨æˆ· ID ä¿¡æ¯ã€‚ æŸ¥çœ‹å·²ç­¾å‘å¯†é’¥ 1gpg --list-secret-keys --keyid-format=long æŸ¥çœ‹æŒ‡å®šå…¬é’¥çš„ä¿¡æ¯(Prints the GPG key ID, in ASCII armor format) 1gpg --armor --export &lt;GPG key ID&gt; å¤åˆ¶å…¬é’¥ä¿¡æ¯åˆ°GitHubä¸Šï¼šä» -----BEGIN PGP PUBLIC KEY BLOCK----- å¼€å§‹ï¼Œåˆ° -----END PGP PUBLIC KEY BLOCK----- è®¾ç½®é‚®ç®±(å»ºè®®å…¨å±€é»˜è®¤ä¸€ä¸ªå¸¸ç”¨Email)ï¼š 1git config --global user.email &quot;&quot; è®¾ç½®é¡¹ç›®å¼€å¯GPGéªŒè¯ç­¾å(ä¸å»ºè®®å…¨å±€å¼€å¯ï¼Œå¯å±€éƒ¨å¼€å¯ï¼Œé˜²æ­¢å½±å“å…¶ä»–å¹³å°æˆ–é¡¹ç›®çš„æäº¤å¼•å‘è¿é”ååº”) 1git config commit.gpgsign true GPGå¯†é’¥å¯¼å‡ºä»¥åŠå¤‡ä»½åˆ›å»ºå¯¼å‡ºå¤‡ä»½å¯†é’¥æ–‡ä»¶çš„è·¯å¾„(ä¾‹å¦‚)ï¼š 12# æ³¨æ„ï¼šå¯†é’¥å¤‡ä»½å®Œæ¯•åå»ºè®®æ¸…ç†æ­¤ç›®å½•åŠæ–‡ä»¶å¤¹ï¼mkdir -p ~/GPGBAK è­¦å‘Šï¼šå¯¼å‡ºçš„å¤‡ä»½å¯†é’¥ä¸ºæ•æ„Ÿæ–‡ä»¶ï¼Œä¸ºäº†å®‰å…¨è¯·ç¡®ä¿å¯†é’¥å¼‚åœ°ä¿å­˜å¦¥å½“åï¼Œæ¸…ç†å¯¼å‡ºå½“å‰çš„å¤‡ä»½æ–‡ä»¶ å¤‡ä»½GPGå…¬é’¥ 1gpg -o ~/GPGBAK/gpg_keys_github_macos --export &lt;GPG Key ID&gt; å¤‡ä»½GPGç§é’¥ 1gpg -o ~/GPGBAK/gpg_secret_keys_github_macos --export-secret-keys &lt;GPG Key ID&gt; å¸¸è§é—®é¢˜ åœ¨ç»ˆç«¯å¯èƒ½å‡ºç°gitæäº¤commitæ—¶æäº¤å¤±è´¥éœ€è¦è¾“å…¥GPGå¯†ç è§£å¯†å¯†é’¥ï¼Ÿ å¯è®¾ç½®ç»ˆç«¯ä¿¡æ¯ï¼Œç„¶åé‡æ–°å¼€å¯ä¸€ä¸ªç»ˆç«¯ç”Ÿæ•ˆã€‚ é”™è¯¯ä¿¡æ¯ï¼š 12error: gpg æ•°æ®ç­¾åå¤±è´¥fatal: å†™æäº¤å¯¹è±¡å¤±è´¥ è§£å†³æ–¹æ¡ˆï¼š 1vim ~/.zshrc 12# GPG CONFIG (äº¤äº’å¼çª—å£ä¸å¼¹å‡ºè§£å†³æ–¹æ¡ˆ)export GPG_TTY=$(tty) GPG2å¯†ç ç¼“å­˜æ—¶é—´è®¾ç½®ï¼šé»˜è®¤æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»º 123456789touch ~/.gnupg/gpg-agent.conf``` **æ¨è**é…ç½®gpg-agent é€‰é¡¹(å¯†ç ç¼“å­˜æœ‰æ•ˆæ—¶é—´(ä¸å»ºè®®ttlè®¾ç½®è¿‡é•¿ï¼) * GnuPG agentæ˜¯ä¸€ä¸ªå¸®åŠ©å·¥å…·ï¼Œå½“ä½ è¿è¡Œgpgç”¨äºç¼“å­˜ç§é’¥æ—¶ä¼šè‡ªåŠ¨è¿è¡Œã€‚* default-cache-ttlï¼ˆsecondsï¼‰ï¼šå¦‚æœåœ¨å¤±æ•ˆæœŸå‰ï¼Œä½¿ç”¨äº†ç›¸åŒåç§°çš„ç§é’¥ï¼Œé‚£ä¹ˆè®¡æ•°å™¨ä¼šè¢«é‡ç½®ï¼Œé»˜è®¤æ˜¯600sï¼ˆ10minï¼‰* max-cache-ttl (seconds)ï¼šä¸è®ºä½ æœ€è¿‘æ˜¯å¦ä½¿ç”¨è¿‡ç§é’¥ï¼Œåªè¦è¶…è¿‡äº†æ­¤å€¼ï¼Œå°±éœ€è¦è¿›è¡Œé‡æ–°éªŒè¯ï¼Œé»˜è®¤æ˜¯30minã€‚* **å¯è®¾ç½®é•¿æ—¶é—´ï¼Œä½†ä¸å»ºè®®å¤ªé•¿**ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯å®šæœŸåˆ·æ–°æœ‰æ•ˆæ—¶é—´ï¼Œä½†éœ€è¦é…ç½®ç³»ç»Ÿä»»åŠ¡å®¹æ˜“é—å¿˜æ‰€ä»¥ä¸æ¨èã€‚ default-cache-ttl 1800max-cache-ttl 7200 12é‡å¯ gpg-agentè¿›ç¨‹ï¼š echo RELOADAGENT | gpg-connect-agent æäº¤æ¨é€å®ŒæˆåGitHubä»ç„¶æç¤ºæœªéªŒè¯ï¼Ÿè§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥æœ¬åœ°æäº¤çš„GITé»˜è®¤é‚®ç®±å’ŒGitHubå¹³å°çš„ç™»è®°é‚®ç®±æ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´å¯ä¿®æ”¹å½“å‰é¡¹ç›®çš„é‚®ç®±ä¿æŒå’ŒGPGä¸€è‡´å³å¯ã€‚ å…¶ä»–å¹³å°å¦‚ä½•è®¾ç½®ï¼Ÿè§£å†³æ–¹æ¡ˆï¼šå…¶ä»–GITåœ¨çº¿å¹³å°å’ŒGitHubæ“ä½œæ–¹æ³•åŸºæœ¬ä¸€è‡´ã€‚ è¯·å¦¥å–„ä¿å­˜å’Œä½¿ç”¨GPGç­¾åå¯†é’¥ï¼Œé˜²æ­¢æ•æ„Ÿæ–‡ä»¶æ³„æ¼ï¼","link":"/eadfec01.html"},{"title":"å¸¸ç”¨GUIåº“","text":"å¸¸ç”¨GUIåº“Xåè®® X Window System(X11)ï¼Œç¬¬11ä¸ªç‰ˆæœ¬ã€‚ ä¸‹ä¸€ä»£æ”¹è¿›åè®®Waylandï¼ŒWaylandä¸ä»…ä»…æ˜¯è¦å®Œå…¨å–ä»£X11ï¼Œå–ä»£ç›®å‰Linuxæ¡Œé¢ä¸ŠX Client/X Serverçš„è®¾è®¡ç†å¿µã€‚ æ³¨æ„äº‹é¡¹ï¼šæˆªè‡³2020å¹´å¤§å¤šæ•°ç”¨äºLinuxçš„è§†é¢‘æ¸¸æˆå’Œå›¾å½¢å¯†é›†å‹åº”ç”¨ç¨‹åºä»ä¸ºX11ç¼–å†™ã€‚ä½†è®¸å¤šå°é—­æºä»£ç çš„å›¾å½¢é©±åŠ¨ç¨‹åºï¼Œä¾‹NVIDIA GPUçš„é©±åŠ¨ç¨‹åºéƒ½å°šæœªå®Œå…¨æä¾›å¯¹Waylandçš„æ”¯æŒã€‚ X åè®®ç”± X server å’Œ X client ç»„æˆï¼š X server ç®¡ç†ä¸»æœºä¸Šä¸æ˜¾ç¤ºç›¸å…³çš„ç¡¬ä»¶è®¾å¤‡ï¼Œå®ƒè´Ÿè´£å±å¹•ç”»é¢çš„ç»˜åˆ¶ä¸æ˜¾ç¤ºï¼Œä»¥åŠå°†è¾“å…¥è®¾å¤‡çš„åŠ¨ä½œå‘ŠçŸ¥ X clientã€‚ X client åº”ç”¨ç¨‹åºç«¯åˆ™ä¸»è¦è´Ÿè´£äº‹ä»¶çš„å¤„ç†ï¼ˆç¨‹åºçš„é€»è¾‘ï¼‰ã€‚ Linux/Unixç±»æ“ä½œç³»ç»Ÿä¸Š, $DISPLAYè®¾ç½®å›¾å½¢æ˜¾ç¤ºå‡ºå¤„. graph LR A[X clients]--->B[Xlibæ¥å°è£…åè®®]; B--->C[X server]; C--->D[QT] C--->E[GTK] X clients äº†Xlibæ¥å°è£…åè®®ï¼›Xlibä¸å¤Ÿæ–¹ä¾¿ï¼Œäºæ˜¯å°±æœ‰äº†qtå’Œgtkï¼Œæä¾›äº†å¾ˆå¤šçª—å£æ§ä»¶ï¼ˆwidgetsï¼‰ Xå’ŒXFree86 XFree86åŸºäºXåè®®å®ç°å…è´¹XæœåŠ¡å™¨è½¯ä»¶ X Window System(X11)ï¼Œç¬¬11ä¸ªç‰ˆæœ¬ X11R6 å®é™…ä¸Šæ˜¯ X Protocol version 11 Release 6(Xåè®®ç¬¬11ç‰ˆç¬¬å…­æ¬¡å‘è¡Œ) Xå’ŒXFree86ï¼š graph TD A[Xåè®®]--->B[å…è´¹] A[Xåè®®]--->C[å•†ç”¨] B--->D[xorg] B--->E[Xfree86] B--->F[Wayland] C--->G[MOTIF] XFree86åªæ˜¯å®ç°Xåè®®çš„ä¸€ä¸ªå…è´¹XæœåŠ¡å™¨è½¯ä»¶.å•†ä¸šä¸Šå¸¸ç”¨MOTIF,ç°åœ¨è¿˜æœ‰XORG","link":"/8ee4d6e3.html"},{"title":"clang Data Type","text":"clang Data TypeCè¯­è¨€â€™\\0â€™çš„å«ä¹‰ \\0 æ˜¯åˆ¤å®šå­—ç¬¦æ•°ç»„ç»“æŸçš„æ ‡è¯† \\0 è¡¨ç¤ºçš„æ˜¯ASCIIæ§åˆ¶å­—ç¬¦ä¸­ç©ºå­—ç¬¦çš„å«ä¹‰ï¼Œä»£ç ä¸ºNULï¼ŒéNULL \\0 æœ¬èº«å ä¸€ä¸ªä½ç½® \\0 åœ¨æ•°ç»„ä¸­å æœ‰ç©ºé—´ä½†ä¸æ˜¾æ€§ NULå’ŒNULLçš„åŒºåˆ« NUL æ˜¯ASCII å­—ç¬¦é›†ä¸­ â€˜\\0â€™ å­—ç¬¦çš„åå­—ï¼Œå®ƒçš„å­—èŠ‚æ¨¡å¼ä¸ºå…¨ 0ã€‚NULL æŒ‡ä¸€ä¸ªå…¶å€¼ä¸º 0 çš„æŒ‡é’ˆã€‚å®ƒä»¬éƒ½æ˜¯æ•´å‹å€¼ï¼Œå…¶å€¼ä¹Ÿç›¸åŒï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥äº’æ¢ä½¿ç”¨ã€‚ ç¬¦å· NULL åœ¨å¤´æ–‡ä»¶ stdio.h ä¸­å®šä¹‰ã€‚å¦ä¸€æ–¹é¢ï¼Œå¹¶ä¸å­˜åœ¨é¢„å®šä¹‰çš„ç¬¦å· NULã€‚ NULL æŒ‡é’ˆå¹¶ä¸æŒ‡å‘ä»»ä½•å¯¹è±¡ã€‚é™¤éæ˜¯ç”¨äºèµ‹å€¼æˆ–æ¯”è¾ƒè¿ç®—ï¼Œå‡ºäºå…¶ä»–ä»»ä½•ç›®çš„çš„ä½¿ç”¨NULLæŒ‡é’ˆéƒ½æ˜¯éæ³•çš„ã€‚ NULLæ˜¯ä¸€ä¸ªå®ï¼Œå®ƒåœ¨å‡ ä¸ªæ ‡å‡†å¤´æ–‡ä»¶ä¸­å®šä¹‰ï¼Œ0æ˜¯ä¸€ä¸ªæ•´å‹å¸¸é‡ï¼Œâ€™\\0â€™æ˜¯ä¸€ä¸ªå­—ç¬¦å¸¸é‡ï¼Œè€ŒNULæ˜¯ä¸€ä¸ªå­—ç¬¦å¸¸é‡çš„åå­—ã€‚æœ¯è¯­éƒ½ä¸å¯äº’æ¢ã€‚ 1ã€NULLå°±æ˜¯ç©ºæŒ‡é’ˆ 2ã€0å¯ä»¥è¢«ç”¨äºä»»ä½•åœ°æ–¹ï¼Œå®ƒæ˜¯è¡¨ç¤ºå„ç§ç±»å‹é›¶å€¼çš„ç¬¦å·å¹¶ä¸”ç¼–è¯‘å™¨ä¼šæŒ‘å‡ºå®ƒ 3ã€â€™\\0â€™åº”è¯¥åªè¢«ç”¨äºç»“æŸå­—ç¬¦ä¸² 4ã€NULæ²¡æœ‰è¢«å®šä¹‰äºCå’ŒC++ï¼Œå®ƒä¸åº”è¯¥è¢«ä½¿ç”¨ï¼Œé™¤éä½ è‡ªå·±å®šä¹‰å®ƒï¼Œåƒï¼š#define nul â€˜\\0â€™ ç©ºæŒ‡é’ˆçš„ç”¨æ³• ï¼š ç”¨ç©ºæŒ‡é’ˆç»ˆæ­¢å¯¹é€’å½’æ•°æ®ç»“æ„çš„é—´æ¥å¼•ç”¨ ç”¨ç©ºæŒ‡é’ˆä½œå‡½æ•°è°ƒç”¨å¤±è´¥æ—¶çš„è¿”å›å€¼ ç”¨ç©ºæŒ‡é’ˆä½œè­¦æˆ’å€¼ åŠ å‡ä¹˜é™¤è¿ç®—ç®€å†™æ–¹å¼ï¼š 1234int a = 1, b = 2;a += 1; // a = a + 1;a *= (b-1); // a = a * (b-1);a -= (a+2); // a = a - (a+2); ç‰¹æ®Šç®€å†™(è‡ªåŠ æˆ–è‡ªå¢: ++ å’Œ â€“ è‡ªå¢è¿ç®—ç¬¦å’Œè‡ªå‡è¿ç®—ç¬¦) 12345// a = a + 1a++;// a = a + 1++a; å‰è‡ªå¢å’Œåè‡ªå¢åŒºåˆ«ï¼š ++ åœ¨å‰é¢å«åšå‰è‡ªå¢ ++ åœ¨åé¢å«åšåè‡ªå¢ â€“ åœ¨å‰é¢å«åšå‰è‡ªå‡ â€“ åœ¨åé¢å«åšåè‡ªå‡1234567891011121314int a = 1, b = 2;int a1 = ++a, b1 = b++; printf(&quot;a=%d, a1=%d\\n&quot;, a, a1);// æ³¨æ„äº‹é¡¹ï¼šb1=b++ï¼Œb å€¼å…ˆèµ‹å€¼ b1ï¼Œç„¶åå†åŠ  1ã€‚printf(&quot;b=%d, b1=%d\\n&quot;, b, b1);//ç»¼åˆæ“ä½œint a = 2, b = 1;int c = a - (b--); // åè‡ªå‡ï¼Œä¼šå…ˆè¿›è¡Œa-bè¿ç®—ï¼Œç»“æœæ˜¯ 1ï¼Œç„¶å b å†è‡ªå‡ï¼Œå°±å˜æˆäº† 0ï¼›æœ€åå†å°†a-bçš„ç»“æœï¼ˆä¹Ÿå°±æ˜¯1ï¼‰äº¤ç»™ cï¼Œæ‰€ä»¥ c çš„å€¼æ˜¯ 1ã€‚int d = (++a) - (--b); //b çš„å€¼å·²ç»å˜æˆ 0ã€‚å¯¹äºd=(++a)-(--b)ï¼Œa ä¼šå…ˆè‡ªå¢ï¼Œå˜æˆ 3ï¼Œç„¶å b å†è‡ªå‡ï¼Œå˜æˆ -1ï¼Œæœ€åå†è®¡ç®—3-(-1)ï¼Œç»“æœæ˜¯ 4ï¼Œäº¤ç»™ dï¼Œæ‰€ä»¥ d æœ€ç»ˆæ˜¯ 4ã€‚printf(&quot;c=%d, d=%d\\n&quot;, c, d); æ³¨æ„äº‹é¡¹ï¼š 1.Cè¯­è¨€ä¸­çš„é™¤æ³•è¿ç®—,ç±»å‹æ³¨æ„äº‹é¡¹ï¼š **å½“é™¤æ•°å’Œè¢«é™¤æ•°éƒ½æ˜¯æ•´æ•°æ—¶ï¼Œè¿ç®—ç»“æœä¹Ÿæ˜¯æ•´æ•°ï¼›éæ•´é™¤åˆ™ç›´æ¥ä¸¢æ‰å°æ•°éƒ¨åˆ†åªä¿ç•™æ•´æ•°éƒ¨åˆ†ï¼Œä¸å°æ•°èµ‹å€¼ç»™æ•´æ•°ç±»å‹åŒç†ã€‚ é™¤æ•°å’Œè¢«é™¤æ•°ä¸­å¦‚å«æœ‰å°æ•°ï¼Œé‚£ä¹ˆè¿ç®—ç»“æœä¹Ÿæ˜¯å°æ•°ï¼Œdouble ç±»å‹å°æ•°ã€‚ 2.å–ä½™æ³¨æ„äº‹é¡¹ï¼š Cè¯­è¨€ä¸­çš„å–ä½™è¿ç®— % çš„ä¸¤è¾¹éƒ½å¿…é¡»æ˜¯æ•´æ•°ï¼Œå°æ•°éæ³•ï¼Œå¦åˆ™ç¼–è¯‘å™¨æŠ¥é”™ã€‚ä½™æ•°å¯ä»¥æ˜¯æ­£æ•°ä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°ï¼Œç”± % å·¦è¾¹çš„æ•´æ•°å†³å®šï¼šå¦‚æœ % å·¦è¾¹æ˜¯æ­£æ•°ï¼Œé‚£ä¹ˆä½™æ•°ä¹Ÿæ˜¯æ­£æ•°ï¼›å¦‚æœ % å·¦è¾¹æ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆä½™æ•°ä¹Ÿæ˜¯è´Ÿæ•°","link":"/8ed5dc39.html"},{"title":"clang macro","text":"C Macro å®å®šä¹‰#define å®å®šä¹‰å‘½ä»¤ï¼ŒCè¯­è¨€é¢„å¤„ç†å‘½ä»¤ã€‚æ ‡è¯†ç¬¦æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»£ç è¿è¡Œä¸­ä¼šå°†è¡¨ç¤ºç¬¦è¿›è¡Œå…¨éƒ¨æ›¿æ¢æˆæŒ‡å®šçš„å­—ç¬¦ä¸²ã€‚ 1234567#define N 1int main(){ int sum = 1 + N; printf(&quot;Output: %d\\n&quot;, sum); return 0;}// output: 2 å®å®šä¹‰å’Œå®šä¹‰å…¨å±€å˜é‡çš„åŒºåˆ«å’Œæ³¨æ„äº‹é¡¹ ä½œç”¨æ—¶é—´ä¸åŒï¼šå®å®šä¹‰åœ¨ç¼–è¯‘æœŸé—´å³ä¼šä½¿ç”¨å¹¶æ›¿æ¢ï¼Œè€Œå…¨å±€å˜é‡è¦åˆ°è¿è¡Œæ—¶æ‰å¯ä»¥ã€‚ æœ¬è´¨ç±»å‹ä¸åŒï¼š å®å®šä¹‰çš„åªæ˜¯ä¸€æ®µå­—ç¬¦ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™è¢«æ›¿æ¢åˆ°å¼•ç”¨çš„ä½ç½®ã€‚åœ¨è¿è¡Œä¸­æ˜¯æ²¡æœ‰å®å®šä¹‰çš„æ¦‚å¿µçš„ã€‚è€Œå˜é‡åœ¨è¿è¡Œæ—¶è¦ä¸ºå…¶åˆ†é…å†…å­˜ã€‚ å®å®šä¹‰ä¸å¯ä»¥è¢«èµ‹å€¼ï¼Œå³å…¶å€¼ä¸€æ—¦å®šä¹‰ä¸å¯ä¿®æ”¹ï¼Œè€Œå˜é‡åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¯ä»¥è¢«ä¿®æ”¹ã€‚ å®å®šä¹‰åªæœ‰åœ¨å®šä¹‰æ‰€åœ¨æ–‡ä»¶ï¼Œæˆ–å¼•ç”¨æ‰€åœ¨æ–‡ä»¶çš„å…¶å®ƒæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚å…¨å±€å˜é‡å¯ä»¥åœ¨å·¥ç¨‹æ‰€æœ‰æ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œåªéœ€åœ¨ä½¿ç”¨å‰åŠ ä¸€ä¸ªå£°æ˜å°±å¯ä»¥ï¼Œå³å®å®šä¹‰ä¸æ”¯æŒexternæ¨¡å¼ã€‚","link":"/c603c446.html"},{"title":"clang io format","text":"è¾“å…¥è¾“å‡ºæ ¼å¼åŒ–ç»ˆç«¯è¾“å…¥ inputé”®ç›˜è·å–è¾“å…¥(ä¸‰ä¸ªå‡½æ•°)ï¼š scanf()ï¼šå’Œ printf() ç±»ä¼¼ï¼Œscanf() å¯ä»¥è¾“å…¥å¤šç§ç±»å‹çš„æ•°æ®ã€‚ getchar()ã€getche()ã€getch()ï¼šè¿™ä¸‰ä¸ªå‡½æ•°éƒ½ç”¨äºè¾“å…¥å•ä¸ªå­—ç¬¦ã€‚ gets()ï¼šè·å–ä¸€è¡Œæ•°æ®ï¼Œå¹¶ä½œä¸ºå­—ç¬¦ä¸²å¤„ç†ã€‚ scanf()é»˜è®¤ä»¥ç©ºæ ¼åˆ†å‰²ï¼š scanf() åœ¨è¯»å–æ•°æ®æ—¶éœ€è¦çš„æ˜¯æ•°æ®çš„åœ°å€ï¼Œå­—ç¬¦ä¸²åå­—æˆ–è€…æ•°ç»„åå­—åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­è‡ªåŠ¨ä¼šè½¬æ¢ä¸ºå†…å­˜åœ°å€ï¼Œæ‰€ä»¥æ— éœ€åŠ &amp; intã€charã€float ç­‰ç±»å‹çš„å˜é‡ç”¨äº scanf() æ—¶éƒ½è¦åœ¨å‰é¢æ·»åŠ &amp;ï¼Œè€Œæ•°ç»„æˆ–è€…å­—ç¬¦ä¸²ç”¨äº scanf() æ—¶ä¸ç”¨æ·»åŠ &amp;ï¼Œå®ƒä»¬æœ¬èº«å°±ä¼šè½¬æ¢ä¸ºåœ°å€ã€‚ scanf() å¯ä»¥è¯»å–å¸¦ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦çš„æ•°ç›®ï¼ŒæŒ‡å®šçš„å­—ç¬¦ï¼Œä¸è¯»å–æŸäº›å­—ç¬¦ï¼Œä¸¢å¼ƒå­—ç¬¦ã€‚ ç»ˆç«¯è¾“å‡º outputä¸‰ä¸ªå‡½æ•°å¯ä»¥ç”¨æ¥åœ¨æ˜¾ç¤ºå™¨ç»ˆç«¯è¾“å‡ºæ•°æ®ï¼š puts()ï¼šä»…è¾“å‡ºå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”è¾“å‡ºç»“æŸåä¼šè‡ªåŠ¨æ¢è¡Œ putchar()ï¼šä»…è¾“å‡ºå•ä¸ªå­—ç¬¦ printf()ï¼šå¯ä»¥è¾“å‡ºå„ç§ç±»å‹çš„æ•°æ® printf()ç¼“å­˜æœºåˆ¶printf() è¾“å‡ºå»¶è¿Ÿé—®é¢˜ï¼š 12345678printf(&quot;è¾“å‡º1&quot;);//sleep() æ˜¯ Linux å’Œ Mac OS ä¸‹ç‰¹æœ‰çš„å‡½æ•°ï¼ŒSleep()æ˜¯Windowså‡½æ•°sleep(2); // å»¶è¿Ÿ2sprintf(&quot;è¾“å‡º2&quot;); æœ¬è´¨ä¸Šprintf() æ‰§è¡Œç»“æŸä»¥åæ•°æ®å¹¶æ²¡æœ‰ç›´æ¥è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨ä¸Šï¼Œè€Œæ˜¯æ”¾å…¥äº†ç¼“å†²åŒºï¼Œè¾“å‡ºç¼“å†²åŒºç›´åˆ°é‡è§æ¢è¡Œç¬¦\\næ‰å°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨ä¸Šï¼ˆLinux æˆ–è€… Mac OS ä¸‹è¿è¡Œï¼‰å¯¹ç¼“å­˜çš„ç†è§£ï¼Œæ˜¯å¤„ç†Cè¯­è¨€å„ç§ç–‘éš¾é—®é¢˜çš„é‡è¦æ€è·¯å’Œæ–¹å‘ã€‚","link":"/5fc261d7.html"},{"title":"nanochat-ä¸­æ–‡ç¿»è¯‘ç‰ˆæœ¬ï¼ˆå«ä»£ç æ³¨é‡Šå’Œæ–‡æ¡£ç¿»è¯‘ï¼Œæ–¹ä¾¿ä¸­æ–‡è¯­å¢ƒå¿«é€Ÿé˜…è¯»å’ŒæŸ¥çœ‹ï¼‰","text":"ğŸ”— nanochat-ä¸­æ–‡ç¿»è¯‘ç‰ˆæœ¬(å«æ–‡æ¡£å’Œä»£ç æ³¨é‡Š) nanochaté¡¹ç›®æºç åœ°å€ æ„Ÿè°¢åŸä½œè€…ï¼šAndrej karpathyè¿™ä¸ªä»“åº“æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç±»ChatGPTå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„å…¨æ ˆå®ç°ï¼Œé‡‡ç”¨å•ä¸€ã€ç®€æ´ã€æœ€å°åŒ–ã€å¯å®šåˆ¶ã€ä¾èµ–è½»é‡çš„ä»£ç åº“ã€‚nanochatè®¾è®¡ä¸ºé€šè¿‡åƒspeedrun.shè¿™æ ·çš„è„šæœ¬åœ¨å•ä¸ª8XH100èŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œä»å¼€å§‹åˆ°ç»“æŸè¿è¡Œæ•´ä¸ªæµç¨‹ã€‚è¿™åŒ…æ‹¬åˆ†è¯ã€é¢„è®­ç»ƒã€å¾®è°ƒã€è¯„ä¼°ã€æ¨ç†ä»¥åŠé€šè¿‡ç®€å•UIæä¾›WebæœåŠ¡ï¼Œè®©ä½ å¯ä»¥åƒä½¿ç”¨ChatGPTä¸€æ ·ä¸ä½ è‡ªå·±çš„LLMå¯¹è¯ã€‚nanochatå°†æˆä¸ºEureka Labsæ­£åœ¨å¼€å‘çš„LLM101nè¯¾ç¨‹çš„é¡¶ç‚¹é¡¹ç›®ã€‚ æ–‡ä»¶ç»“æ„è¯´æ˜nanochaté¡¹ç›®çš„ä¸»è¦æ–‡ä»¶åŠå…¶ç”¨é€”ï¼š æ ¸å¿ƒæ¨¡å— (nanochat/) nanochat/gpt.py - GPTæ¨¡å‹æ¶æ„å®ç°ï¼ŒåŒ…å«Transformerå±‚ã€æ³¨æ„åŠ›æœºåˆ¶ç­‰ nanochat/adamw.py - AdamWä¼˜åŒ–å™¨å®ç° nanochat/muon.py - Muonä¼˜åŒ–å™¨å®ç°ï¼Œç”¨äºçº¿æ€§å±‚è®­ç»ƒ nanochat/checkpoint_manager.py - æ¨¡å‹æ£€æŸ¥ç‚¹ä¿å­˜å’ŒåŠ è½½ç®¡ç† nanochat/common.py - é€šç”¨å·¥å…·å‡½æ•°ï¼ŒåŒ…æ‹¬åˆ†å¸ƒå¼è®­ç»ƒåˆå§‹åŒ– nanochat/configurator.py - é…ç½®å‚æ•°ç®¡ç†ï¼Œæ”¯æŒå‘½ä»¤è¡Œè¦†ç›– nanochat/core_eval.py - æ ¸å¿ƒè¯„ä¼°æŒ‡æ ‡è®¡ç®— nanochat/dataloader.py - æ•°æ®åŠ è½½å™¨å®ç°ï¼Œæ”¯æŒåˆ†å¸ƒå¼è®­ç»ƒ nanochat/dataset.py - æ•°æ®é›†å¤„ç†å’Œä¸‹è½½ nanochat/engine.py - æ¨¡å‹æ¨ç†å¼•æ“ï¼Œæ”¯æŒæ‰¹é‡ç”Ÿæˆ nanochat/execution.py - æ‰§è¡Œä¸Šä¸‹æ–‡ç®¡ç† nanochat/loss_eval.py - æŸå¤±è¯„ä¼°å‡½æ•° nanochat/report.py - è®­ç»ƒæŠ¥å‘Šç”Ÿæˆ nanochat/tokenizer.py - åˆ†è¯å™¨æ¥å£å’Œå®ç° nanochat/ui.html - WebèŠå¤©ç•Œé¢ è®­ç»ƒè„šæœ¬ (scripts/) scripts/base_train.py - åŸºç¡€æ¨¡å‹é¢„è®­ç»ƒè„šæœ¬ scripts/mid_train.py - ä¸­æœŸè®­ç»ƒè„šæœ¬ï¼Œåœ¨é¢„è®­ç»ƒåŸºç¡€ä¸Šç»§ç»­è®­ç»ƒ scripts/chat_sft.py - ç›‘ç£å¾®è°ƒè®­ç»ƒè„šæœ¬ scripts/chat_rl.py - å¼ºåŒ–å­¦ä¹ è®­ç»ƒè„šæœ¬ scripts/tok_train.py - åˆ†è¯å™¨è®­ç»ƒè„šæœ¬ scripts/base_eval.py - åŸºç¡€æ¨¡å‹è¯„ä¼°è„šæœ¬ scripts/base_loss.py - åŸºç¡€æŸå¤±è¯„ä¼°è„šæœ¬ scripts/chat_eval.py - èŠå¤©æ¨¡å‹è¯„ä¼°è„šæœ¬ scripts/tok_eval.py - åˆ†è¯å™¨è¯„ä¼°è„šæœ¬ scripts/chat_cli.py - å‘½ä»¤è¡ŒèŠå¤©ç•Œé¢ scripts/chat_web.py - WebèŠå¤©æœåŠ¡å™¨ ä»»åŠ¡æ¨¡å— (tasks/) tasks/common.py - ä»»åŠ¡æ··åˆå’Œæ•°æ®åŠ è½½ tasks/arc.py - ARCé—®ç­”ä»»åŠ¡å®ç° tasks/gsm8k.py - GSM8Kæ•°å­¦æ¨ç†ä»»åŠ¡å®ç° tasks/humaneval.py - HumanEvalä»£ç ç”Ÿæˆä»»åŠ¡å®ç° tasks/mmlu.py - MMLUå¤šä»»åŠ¡è¯­è¨€ç†è§£ä»»åŠ¡å®ç° tasks/smoltalk.py - SmolTalkå¯¹è¯æ•°æ®é›†å¤„ç† åˆ†è¯å™¨ (rustbpe/) rustbpe/src/lib.rs - Rustå®ç°çš„BPEåˆ†è¯å™¨æ ¸å¿ƒé€»è¾‘ rustbpe/Cargo.toml - Rusté¡¹ç›®é…ç½® rustbpe/README.md - åˆ†è¯å™¨æ–‡æ¡£ å¼€å‘å·¥å…· (dev/) dev/generate_logo.html - é¡¹ç›®logoç”Ÿæˆå·¥å…· dev/nanochat.png - é¡¹ç›®logoå›¾ç‰‡ dev/repackage_data_reference.py - æ•°æ®é‡æ–°æ‰“åŒ…å‚è€ƒè„šæœ¬ è¿è¡Œè„šæœ¬ speedrun.sh - å¿«é€Ÿè¿è¡Œè„šæœ¬ï¼ˆçº¦4å°æ—¶è®­ç»ƒï¼‰ run1000.sh - 1000ç¾å…ƒçº§åˆ«è®­ç»ƒè„šæœ¬ uv.lock - Pythonä¾èµ–é”å®šæ–‡ä»¶ pyproject.toml - Pythoné¡¹ç›®é…ç½® ä¸å®ƒå¯¹è¯ä¸ºäº†äº†è§£è¿™ä¸ªä»“åº“çš„æœ€ç»ˆç›®æ ‡ï¼Œä½ ç›®å‰å¯ä»¥åœ¨nanochat.karpathy.aiä¸Šæ‰¾åˆ°æ‰˜ç®¡çš„nanochat d32ã€‚â€d32â€è¡¨ç¤ºè¿™ä¸ªæ¨¡å‹åœ¨Transformerç¥ç»ç½‘ç»œä¸­æœ‰32å±‚ã€‚è¿™ä¸ªæ¨¡å‹æœ‰19äº¿å‚æ•°ï¼Œé€šè¿‡ç®€å•åœ°è¿è¡Œå•ä¸ªè„šæœ¬run1000.shåœ¨380äº¿tokenä¸Šè®­ç»ƒï¼Œæ€»è®­ç»ƒæˆæœ¬çº¦ä¸º800ç¾å…ƒï¼ˆåœ¨8XH100 GPUèŠ‚ç‚¹ä¸Šçº¦33å°æ—¶è®­ç»ƒæ—¶é—´ï¼‰ã€‚è™½ç„¶ä»Šå¤©è¿™è¶³ä»¥è¶…è¶Š2019å¹´çš„GPT-2ï¼Œä½†å®ƒä¸ç°ä»£å¤§è¯­è¨€æ¨¡å‹å¦‚GPT-5ç›¸æ¯”ä»æœ‰å·¨å¤§å·®è·ã€‚ä¸è¿™äº›å¾®å‹æ¨¡å‹å¯¹è¯æ—¶ï¼Œä½ ä¼šçœ‹åˆ°å®ƒä»¬çŠ¯å¾ˆå¤šé”™è¯¯ï¼Œæœ‰ç‚¹å¤©çœŸå’Œæ„šè ¢ï¼Œä¼šäº§ç”Ÿå¤§é‡å¹»è§‰ï¼Œæœ‰ç‚¹åƒå­©å­ã€‚è¿™æœ‰ç‚¹æœ‰è¶£ã€‚ä½†nanochatçš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå®ƒå®Œå…¨å±äºä½  - å®Œå…¨å¯é…ç½®ã€å¯è°ƒæ•´ã€å¯å®šåˆ¶ï¼Œå¹¶ç”±ä½ ä»å¤´åˆ°å°¾è®­ç»ƒã€‚è¦è®­ç»ƒå¹¶ä¸ä½ è‡ªå·±çš„æ¨¡å‹å¯¹è¯ï¼Œæˆ‘ä»¬è½¬å‘â€¦ å¿«é€Ÿå¼€å§‹æ„Ÿå—é­”åŠ›çš„æœ€å¿«æ–¹å¼æ˜¯è¿è¡Œspeedrunè„šæœ¬speedrun.shï¼Œå®ƒè®­ç»ƒå¹¶æ¨ç†100ç¾å…ƒçº§åˆ«çš„nanochatã€‚åœ¨8XH100èŠ‚ç‚¹ä¸Šæ¯å°æ—¶24ç¾å…ƒï¼Œæ€»è¿è¡Œæ—¶é—´çº¦ä¸º4å°æ—¶ã€‚ä»ä½ å–œæ¬¢çš„æä¾›å•†å¯åŠ¨ä¸€ä¸ªæ–°çš„8XH100 GPUç›’å­ï¼ˆä¾‹å¦‚æˆ‘ä½¿ç”¨å¹¶å–œæ¬¢Lambdaï¼‰ï¼Œç„¶åå¯åŠ¨è®­ç»ƒè„šæœ¬ï¼š 1bash speedrun.sh æˆ–è€…ï¼Œç”±äºè„šæœ¬è¿è¡Œ4å°æ—¶ï¼Œæˆ‘å–œæ¬¢åœ¨ä¸€ä¸ªæ–°çš„screenä¼šè¯speedrunä¸­è¿™æ ·å¯åŠ¨ï¼ˆå¹¶å°†è¾“å‡ºè®°å½•åˆ°speedrun.logï¼‰ï¼š 1screen -L -Logfile speedrun.log -S speedrun bash speedrun.sh å¦‚æœä½ ä¸å¤ªç†Ÿæ‚‰ï¼Œè¯·æŸ¥çœ‹screené€ŸæŸ¥è¡¨ã€‚ä½ å¯ä»¥åœ¨screenä¼šè¯ä¸­è§‚çœ‹è¿›åº¦ï¼Œæˆ–è€…ç”¨Ctrl-a dåˆ†ç¦»å¹¶ç”¨tail speedrun.logæŸ¥çœ‹è¿›åº¦ã€‚ç°åœ¨ç­‰å¾…4å°æ—¶ã€‚å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡ç±»ä¼¼ChatGPTçš„Web UIä¸ä½ çš„LLMå¯¹è¯ã€‚ç¡®ä¿ä½ çš„æœ¬åœ°uvè™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»ï¼ˆè¿è¡Œsource .venv/bin/activateï¼‰ï¼Œç„¶åå¯åŠ¨æœåŠ¡ï¼š 1python -m scripts.chat_web ç„¶åè®¿é—®æ˜¾ç¤ºçš„URLã€‚ç¡®ä¿æ­£ç¡®è®¿é—®ï¼Œä¾‹å¦‚åœ¨Lambdaä¸Šä½¿ç”¨ä½ æ‰€åœ¨èŠ‚ç‚¹çš„å…¬å…±IPï¼Œåè·Ÿç«¯å£ï¼Œä¾‹å¦‚http://209.20.xxx.xxx:8000/ç­‰ã€‚ç„¶ååƒé€šå¸¸ä¸ChatGPTå¯¹è¯ä¸€æ ·ä¸ä½ çš„LLMå¯¹è¯ï¼è®©å®ƒå†™æ•…äº‹æˆ–è¯—æ­Œã€‚é—®å®ƒä½ æ˜¯è°ä»¥çœ‹åˆ°å¹»è§‰ã€‚é—®å®ƒä¸ºä»€ä¹ˆå¤©ç©ºæ˜¯è“è‰²çš„ã€‚æˆ–è€…ä¸ºä»€ä¹ˆæ˜¯ç»¿è‰²çš„ã€‚speedrunæ˜¯ä¸€ä¸ª4e19 FLOPsèƒ½åŠ›çš„æ¨¡å‹ï¼Œæ‰€ä»¥æœ‰ç‚¹åƒä¸å¹¼å„¿å›­å°æœ‹å‹å¯¹è¯:)ã€‚ ä½ ä¹Ÿå¯ä»¥cat report.mdæ–‡ä»¶ï¼Œå®ƒå‡ºç°åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼ŒåŒ…å«è¿è¡Œçš„â€æˆç»©å•â€ï¼Œå³ä¸€å †è¯„ä¼°å’ŒæŒ‡æ ‡ã€‚åœ¨æœ€åï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªæ±‡æ€»è¡¨æ ¼ï¼Œä¾‹å¦‚ï¼š å­—ç¬¦æ•°: 333,989 è¡Œæ•°: 8,304 æ–‡ä»¶æ•°: 44 Tokenæ•°ï¼ˆçº¦ï¼‰: 83,497 ä¾èµ–é¡¹ï¼ˆuv.lockè¡Œæ•°ï¼‰: 2,004 æŒ‡æ ‡ BASE MID SFT RL CORE 0.2219 - - - ARC-Challenge - 0.2875 0.2807 - ARC-Easy - 0.3561 0.3876 - GSM8K - 0.0250 0.0455 0.0758 HumanEval - 0.0671 0.0854 - MMLU - 0.3111 0.3151 - ChatCORE - 0.0730 0.0884 - æ€»æŒ‚é’Ÿæ—¶é—´: 3h51m ï¼ˆä½ çš„è¡¨æ ¼å¯èƒ½é»˜è®¤ç¼ºå°‘RLæ•°å­—ï¼‰ã€‚å…³äºspeedrunè„šæœ¬ä»¥åŠè¦å¯»æ‰¾å’ŒæœŸæœ›çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒæˆ‘åœ¨ä»“åº“è®¨è®ºåŒºå‘å¸ƒçš„æ¼”ç»ƒï¼šâ€œä»‹ç»nanochatï¼š100ç¾å…ƒèƒ½ä¹°åˆ°çš„æœ€å¥½çš„ChatGPTâ€ã€‚ æ›´å¤§çš„æ¨¡å‹ä¸å‡ºæ‰€æ–™ï¼Œ100ç¾å…ƒä¸è¶³ä»¥è®­ç»ƒä¸€ä¸ªé«˜æ€§èƒ½çš„ChatGPTå…‹éš†ã€‚äº‹å®ä¸Šï¼ŒLLMä»¥å…¶æ•°ç™¾ä¸‡ç¾å…ƒçš„èµ„æœ¬æ”¯å‡ºè€Œé—»åã€‚å¯¹äºæˆ‘ä»¬çš„ç›®çš„ï¼Œæˆ‘è®¤ä¸ºè¿˜æœ‰ä¸¤ä¸ªæ›´æœ‰è¶£çš„è§„æ¨¡ã€‚é¦–å…ˆæ˜¯çº¦300ç¾å…ƒçš„d26æ¨¡å‹ï¼ˆå³æ·±åº¦=26ï¼‰ï¼Œè®­ç»ƒçº¦12å°æ—¶ï¼Œç•¥å¾®è¶…è¶ŠGPT-2 COREåˆ†æ•°ã€‚å…¶æ¬¡æ˜¯1000ç¾å…ƒçº§åˆ«ï¼ˆçº¦41.6å°æ—¶ï¼‰ï¼Œåªæ˜¯å› ä¸ºè¿™æ˜¯ä¸€ä¸ªä¸é”™çš„æ•´æ•°ã€‚ä½†è¿™ä¸¤è€…å°šæœªå®Œå…¨æ”¯æŒï¼Œå› æ­¤å°šæœªé™„åŠ åˆ°ä¸»åˆ†æ”¯ä¸­ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ºäº†ç»™å‡ºä¸€ä¸ªæ¦‚å¿µï¼Œè®­ç»ƒGPT-2çº§åˆ«æ¨¡å‹d26æ‰€éœ€çš„speedrun.shæ–‡ä»¶ç¤ºä¾‹æ›´æ”¹ä»…æ¶‰åŠä¸‰ä¸ªæ›´æ”¹ï¼š 1234567891011...# ä½ éœ€è¦ä¸‹è½½æ›´å¤šç”¨äºé¢„è®­ç»ƒçš„æ•°æ®åˆ†ç‰‡# è·å–å‚æ•°æ•°é‡ï¼Œä¹˜ä»¥20å¾—åˆ°tokenæ•°ï¼Œä¹˜ä»¥4.8å¾—åˆ°å­—ç¬¦æ•°ï¼Œ# é™¤ä»¥2.5äº¿å¾—åˆ°åˆ†ç‰‡æ•°é‡ã€‚å¾…åŠï¼šéœ€è¦æ”¹è¿›è¿™ä¸ª...python -m nanochat.dataset -n 450 &amp;...# ä½¿ç”¨--depthå¢åŠ æ¨¡å‹å¤§å°ã€‚ä¸ºäº†é¿å…å†…å­˜ä¸è¶³ï¼Œå°†è®¾å¤‡æ‰¹å¤§å°å‡åŠ32 -&gt; 16ï¼štorchrun --standalone --nproc_per_node=8 -m scripts.base_train -- --depth=26 --device_batch_size=16...# ç¡®ä¿åœ¨ä¸­æœŸè®­ç»ƒæœŸé—´ä½¿ç”¨ç›¸åŒçš„è®¾ç½®ï¼štorchrun --standalone --nproc_per_node=8 -m scripts.mid_train -- --device_batch_size=16 å°±æ˜¯è¿™æ ·ï¼æœ€éœ€è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ç¡®ä¿ä½ æœ‰è¶³å¤Ÿçš„æ•°æ®åˆ†ç‰‡è¿›è¡Œè®­ç»ƒï¼ˆå¦åˆ™ä»£ç å°†å¾ªç¯å¹¶åœ¨ç›¸åŒçš„è®­ç»ƒé›†ä¸Šåšæ›´å¤šè½®æ¬¡ï¼Œç¨å¾®é™ä½å­¦ä¹ é€Ÿåº¦ï¼‰ï¼Œä»¥åŠç®¡ç†ä½ çš„å†…å­˜/VRAMï¼Œä¸»è¦é€šè¿‡å‡å°‘device_batch_sizeç›´åˆ°é€‚åˆï¼ˆè„šæœ¬é€šè¿‡å¢åŠ æ¢¯åº¦ç´¯ç§¯å¾ªç¯æ¬¡æ•°è‡ªåŠ¨è¡¥å¿ï¼Œç®€å•åœ°å°†å¹¶è¡Œè®¡ç®—è½¬æ¢ä¸ºé¡ºåºè®¡ç®—ï¼‰ã€‚ å…³äºè¿è¡Œnanochatçš„è®¡ç®—ç¯å¢ƒçš„æ›´å¤šä¿¡æ¯ï¼š ä»£ç åœ¨Ampere 8XA100 GPUèŠ‚ç‚¹ä¸Šä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼Œä½†ä¼šæ…¢ä¸€äº›ã€‚ æ‰€æœ‰ä»£ç ç”šè‡³å¯ä»¥åœ¨å•ä¸ªGPUä¸Šé€šè¿‡çœç•¥torchrunæ­£å¸¸è¿è¡Œï¼Œå¹¶äº§ç”Ÿå‡ ä¹ç›¸åŒçš„ç»“æœï¼ˆä»£ç å°†è‡ªåŠ¨åˆ‡æ¢åˆ°æ¢¯åº¦ç´¯ç§¯ï¼‰ï¼Œä½†ä½ å¿…é¡»ç­‰å¾…8å€æ—¶é—´ã€‚ å¦‚æœä½ çš„GPU(s)å°‘äº80GBï¼Œä½ å¿…é¡»è°ƒæ•´ä¸€äº›è¶…å‚æ•°ï¼Œå¦åˆ™ä¼šå‡ºç°OOM / VRAMä¸è¶³ã€‚åœ¨è„šæœ¬ä¸­æŸ¥æ‰¾--device_batch_sizeå¹¶å‡å°‘å®ƒç›´åˆ°é€‚åˆã€‚ä¾‹å¦‚ä»32ï¼ˆé»˜è®¤ï¼‰åˆ°16ã€8ã€4ã€2ï¼Œç”šè‡³1ã€‚å°‘äºè¿™ä¸ªä½ éœ€è¦æ›´äº†è§£ä½ åœ¨åšä»€ä¹ˆå¹¶æ›´æœ‰åˆ›æ„ã€‚ å¤§éƒ¨åˆ†ä»£ç æ˜¯ç›¸å½“æ ‡å‡†çš„PyTorchï¼Œæ‰€ä»¥å®ƒåº”è¯¥åœ¨ä»»ä½•æ”¯æŒPyTorchçš„ç¯å¢ƒä¸­è¿è¡Œ - xpuã€mpsç­‰ï¼Œä½†æˆ‘æ²¡æœ‰å¼€ç®±å³ç”¨åœ°å®ç°è¿™ä¸ªï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦ä¸€äº›è°ƒæ•´ã€‚ åœ¨CPU / MPSä¸Šè¿è¡Œå¦‚æœä½ æƒ³åœ¨Macbookæˆ–CPUæœºå™¨ä¸Šè°ƒæ•´nanochatï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªè¿›è¡Œä¸­çš„CPU|MPS PRã€‚å¦‚æœä½ åœ¨Macbookä¸Šï¼Œåœ¨è¿è¡Œbase_train.pyæ—¶ä½¿ç”¨--device_type=mpsã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…PRåŠå…¶å·®å¼‚ã€‚æ²¡æœ‰GPUèŠ‚ç‚¹ä½ ä¸ä¼šèµ°å¾—å¤ªè¿œï¼Œä½†è‡³å°‘ä½ å°†èƒ½å¤Ÿè¿è¡Œä»£ç ï¼Œå¹¶å¯èƒ½é€šè¿‡ä¸€äº›è€å¿ƒè®­ç»ƒä¸€ä¸ªéå¸¸å°çš„LLMã€‚ é—®é¢˜nanochatè®¾è®¡ä¸ºç®€çŸ­è€Œç”œç¾ã€‚è¿™æ ·åšçš„ä¸€ä¸ªå¤§ä¼˜åŠ¿æ˜¯æˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰æ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œå¹¶å¤åˆ¶ç²˜è´´åˆ°ä½ å–œæ¬¢çš„LLMä¸­è¯¢é—®ä»»æ„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œæˆ‘å–œæ¬¢ä½¿ç”¨files-to-promptå®ç”¨ç¨‹åºåƒè¿™æ ·æ‰“åŒ…ä»“åº“ï¼š 1files-to-prompt . -e py -e md -e rs -e html -e toml -e sh --ignore &quot;*target*&quot; --cxml &gt; packaged.txt è¿™åŒ…æ‹¬æ‰€æœ‰pyã€rsã€htmlã€tomlã€shæ–‡ä»¶ï¼Œæ’é™¤rustbpe/targetæ–‡ä»¶å¤¹ï¼Œå¹¶é€‰æ‹©cxmlè¾“å‡ºæ ¼å¼ã€‚æ‰€æœ‰å†…å®¹éƒ½å†™å…¥packaged.txtæ–‡ä»¶ï¼Œç›®å‰æµ‹é‡çº¦330KBï¼ˆå³è¿œä½äºæœ€å…ˆè¿›LLMçš„çº¦10ä¸‡tokenï¼‰ï¼Œä»¥åŠçº¦8Kè¡Œä»£ç åœ¨45ä¸ªæ–‡ä»¶ä¸­ã€‚ æˆ–è€…ï¼Œæˆ‘æ¨èä½¿ç”¨DeepWikiæ¥è‡ªDevin/Cognitionæ¥è¯¢é—®è¿™ä¸ªä»“åº“çš„é—®é¢˜ã€‚åœ¨è¿™ä¸ªä»“åº“çš„URLä¸­ï¼Œåªéœ€å°†github.comæ›´æ”¹ä¸ºdeepwiki.comï¼Œä½ å°±å¯ä»¥å¼€å§‹äº†ã€‚ æµ‹è¯•æˆ‘åœ¨è¿™é‡ŒæŠ•å…¥ä¸å¤šï¼Œä½†å­˜åœ¨ä¸€äº›æµ‹è¯•ï¼Œç‰¹åˆ«æ˜¯å¯¹äºåˆ†è¯å™¨ã€‚è¿è¡Œä¾‹å¦‚ï¼š 1python -m pytest tests/test_rustbpe.py -v -s è´¡çŒ®nanochatè¿œæœªå®Œæˆã€‚ç›®æ ‡æ˜¯æ”¹è¿›åœ¨&lt;1000ç¾å…ƒé¢„ç®—ä¸‹å¯ç«¯åˆ°ç«¯å·¥ä½œçš„å¾®å‹æ¨¡å‹çš„æœ€æ–°æŠ€æœ¯æ°´å¹³ã€‚å¯è®¿é—®æ€§æ˜¯å…³äºæ€»ä½“æˆæœ¬ï¼Œä¹Ÿæ˜¯å…³äºè®¤çŸ¥å¤æ‚æ€§ - nanochatä¸æ˜¯ä¸€ä¸ªè¯¦å°½å¯é…ç½®çš„LLMâ€æ¡†æ¶â€ï¼›ä»£ç åº“ä¸­ä¸ä¼šæœ‰å·¨å¤§çš„é…ç½®å¯¹è±¡ã€æ¨¡å‹å·¥å‚æˆ–if-then-elseæ€ªç‰©ã€‚å®ƒæ˜¯ä¸€ä¸ªå•ä¸€ã€è¿è´¯ã€æœ€å°åŒ–ã€å¯è¯»ã€å¯å®šåˆ¶ã€æœ€å¤§å¯å¤åˆ¶çš„â€å¼ºåŸºçº¿â€ä»£ç åº“ï¼Œè®¾è®¡ä¸ºä»å¤´åˆ°å°¾è¿è¡Œå¹¶äº§ç”Ÿå…·ä½“çš„ChatGPTå…‹éš†åŠå…¶æˆç»©å•ã€‚ è‡´è°¢ åç§°ï¼ˆnanochatï¼‰æºè‡ªæˆ‘çš„æ—©æœŸé¡¹ç›®nanoGPTï¼Œå®ƒåªæ¶µç›–é¢„è®­ç»ƒã€‚ nanochatä¹Ÿå—åˆ°modded-nanoGPTçš„å¯å‘ï¼Œå®ƒé€šè¿‡æ¸…æ™°çš„æŒ‡æ ‡å’Œæ’è¡Œæ¦œå°†nanoGPTä»“åº“æ¸¸æˆåŒ–ï¼Œå¹¶å€Ÿç”¨äº†å®ƒçš„è®¸å¤šæƒ³æ³•å’Œä¸€äº›é¢„è®­ç»ƒå®ç°ã€‚ æ„Ÿè°¢HuggingFaceæä¾›finewebå’Œsmoltalkã€‚ æ„Ÿè°¢Lambdaæä¾›ç”¨äºå¼€å‘æ­¤é¡¹ç›®çš„è®¡ç®—èµ„æºã€‚ æ„Ÿè°¢é¦–å¸­LLMä¸“å®¶ğŸ§™â€â™‚ï¸ Alec Radfordçš„å»ºè®®/æŒ‡å¯¼ã€‚ å¼•ç”¨å¦‚æœä½ å‘ç°nanochatå¯¹ä½ çš„ç ”ç©¶æœ‰å¸®åŠ©ï¼Œè¯·å¼•ç”¨ä¸ºï¼š 1234567@misc{nanochat, author = {Andrej Karpathy}, title = {nanochat: The best ChatGPT that $100 can buy}, year = {2025}, publisher = {GitHub}, url = {https://github.com/karpathy/nanochat}} è®¸å¯è¯MIT","link":"/24988dad.html"},{"title":"clang ANSI lib æ ‡å‡†å·®å¼‚æ±‡æ€»é€ŸæŸ¥","text":"C(ANSI C)è¯­è¨€æ ‡å‡†å‡½æ•°åº“Cæ ‡å‡†åº“æ¦‚è¿°åŸºæœ¬è¯´æ˜ä»è¯­è¨€æœ¬èº«çš„è§’åº¦(ä¸å¹³å°æ— å…³)æ¥è¯´ï¼Œæ ‡å‡†Cè¯­è¨€ï¼ˆANSI Cï¼‰å…±å®šä¹‰äº†15 ä¸ªå¤´æ–‡ä»¶ï¼Œæˆªè‡³C11æ ‡å‡†å…±åŒ…å«29ä¸ªå¤´æ–‡ä»¶ã€‚ å„æ ‡å‡†å·®å¼‚ï¼š æ ‡å‡†åç§° å¤´æ–‡ä»¶å·®å¼‚ C89 15 æ ‡å‡†å¤´æ–‡ä»¶ C90ã€C89 æ ‡å‡†å¤´æ–‡ä»¶æ— å·®å¼‚, æ’ç‰ˆå­˜åœ¨å·®å¼‚ C95 +3 æ ‡å‡†å¤´æ–‡ä»¶ C99 +6 æ ‡å‡†å¤´æ–‡ä»¶ C11 +5 æ ‡å‡†å¤´æ–‡ä»¶ C17 æ—  Cæ ‡å‡†åº“æŒ‰ä½¿ç”¨é¢‘åº¦:å¸¸ç”¨ï¼š ä¸€ç»„ï¼š 1234stdio.hctype.hstdlib.hstring.h äºŒç»„ï¼š 1234assert.hlimits.hstddef.htime.h ä¸‰ç»„ï¼š 1234567float.hmath.herror.hlocale.hsetjmp.hsignal.hstdarg.h æ ‡å‡†åº“å¤‡æ³¨ å¤´æ–‡ä»¶ æ ‡å‡†ç‰ˆæœ¬ å¤‡æ³¨ assert.h C89/C90 æ¡ä»¶ç¼–è¯‘å®ï¼Œå°†å‚æ•°ä¸é›¶æ¯”è¾ƒ ctype.h C89/C90 ç”¨äºç¡®å®šåŒ…å«å­—ç¬¦æ•°æ®ä¸­çš„ç±»å‹ errno.h C89/C90 æŠ¥å‘Šé”™è¯¯æ¡ä»¶å®,å†…å«3ä¸ªå®(EDOM ç‰¹å®šå«ä¹‰çš„é”™è¯¯ï¼Œåœ¨math.h ä¸­è¡¨ç¤ºåŸŸé”™è¯¯;ERANGE ç‰¹å®šå«ä¹‰çš„é”™è¯¯ï¼Œåœ¨math.h ä¸­è¡¨ç¤ºæº¢å‡ºé”™è¯¯;errno åº“å‡½æ•°ä¸­ç”¨æ¥ç››æ”¾é”™è¯¯ä»£ç çš„å®) float.h C89/C90 æµ®ç‚¹æ•°ç±»å‹,æä¾›èŒƒå›´å’Œç²¾åº¦çš„å®ï¼ŒåŒ…å«äº†ä¸€ç»„ä¸æµ®ç‚¹å€¼ç›¸å…³çš„ä¾èµ–äºå¹³å°çš„å¸¸é‡ limits.h C89/C90 æ£€æµ‹æ•´å‹æ•°æ®æ•°æ®ç±»å‹çš„è¡¨è¾¾å€¼èŒƒå›´ locale.h C89/C90 æœ¬åœ°åŒ– math.h C89/C90 å¸¸ç”¨æ•°å­¦å‡½æ•°åº“ setjmp.h C89/C90 éå±€éƒ¨è·³è½¬ signal.h C89/C90 ä¿¡å·å¤„ç† stdarg.h C89/C90 å¯å˜å‚æ•° stddef.h C89/C90 å¸¸ç”¨å®å®šä¹‰ stdio.h C89/C90 è¾“å…¥/è¾“å‡º stdlib.h C89/C90 standard libraryæ ‡å‡†åº“å‡½æ•°åº“ï¼šå†…å­˜ç®¡ç†ã€ç¨‹åºå·¥å…·ã€å­—ç¬¦ä¸²è½¬æ¢ã€éšæœºæ•° string.h C89/C90 å­—ç¬¦ä¸²å¤„ç† time.h C89/C90 æ—¶é—´å¤„ç† wchar.h C95 æ‰©å±•å¤šå­—èŠ‚å’Œå®½å­—ç¬¦å¤„ç† wctype.h C95 åŒ…å«äº†ä¸€ç³»åˆ—ç”¨äºæ£€æµ‹å’Œè½¬æ¢å•ä¸ªå®½å­—ç¬¦çš„å‡½æ•°åº“ï¼Œwctype.h æ˜¯ctype.hçš„å®½å­—ç¬¦ç‰ˆæœ¬ï¼Œwctype.hçš„å‡ºç°æ™šäºctype.hã€‚wctype.hçš„å¼•å…¥ä½¿Cè¯­è¨€å¯ä»¥æ›´å¥½åœ°å¤„ç†è‹±æ–‡ä»¥å¤–çš„è¯­è¨€ã€‚ complex.h C99 å¤æ•°è¿ç®— fenv.h C99 æµ®ç‚¹æ•°ç¯å¢ƒ inttypes.h C99 æ•´æ•°ç±»å‹çš„æ ¼å¼è½¬æ¢ stdbool.h C99 å¸ƒå°”ç±»å‹ stdint.h C99 å®šå®½æ•´æ•°ç±»å‹ tgmath.h C99 æ³›å‹æ•°å­¦ï¼ˆåŒ…è£… math.h å’Œ complex.h çš„å®ï¼‰ stdalign.h C11 alignas ä¸ alignof ä¾¿åˆ©å® stdatomic.h C11 åŸå­ç±»å‹ stdnoreturn.h C11 noreturn ä¾¿åˆ©å® threads.h C11 çº¿ç¨‹åº“ uchar.h C11 UTF-16 å’Œ UTF-32 å­—ç¬¦å·¥å…· è¿è¡Œæ—¶åº“C run-time libraryï¼ˆCRTï¼‰ Cè¿è¡Œæ—¶åº“åŒºåˆ«äºC++è¯­è¨€çš„è¿è¡Œæ—¶åº“ï¼ŒæŒ‡çš„æ˜¯Cç¨‹åºè¿è¡Œæ—¶éœ€è¦è°ƒç”¨çš„åº“çš„å‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªç›¸å¯¹æ¦‚å¿µ Cè¿è¡Œæ—¶åº“ç”±ç¼–è¯‘å™¨ç”Ÿäº§å•†æä¾›ï¼Œäº¦ç§°ä¸ºç¬¬ä¸‰æ–¹ C è¿è¡Œåº“ï¼ˆThird party C run-time librariesï¼‰ Cè¿è¡Œæ—¶åº“ä¸€èˆ¬æ˜¯å¹³å°æˆ–ç³»ç»Ÿæä¾›ï¼Œwindowsæˆ–linuxï¼Œmacosç­‰ã€‚ Universal C Runtime åº“ï¼ˆUCRT åº“ï¼‰é€šç”¨Cè¿è¡Œæ—¶åº“ï¼ŒåŒ…å«å¤šCåº“çš„å¤´æ–‡ä»¶ï¼ŒWindowsç»„ä»¶ä¹‹ä¸€ï¼Œè‡ªwin10å¼€å§‹ä»¥ç³»ç»Ÿå‘è¡Œæ–¹å¼éƒ¨åˆ†æä¾›ã€‚å…³è”åº“ï¼š å¯¹åº”çš„libåº“ä¸ºlibucrt.lib å¯¹åº”çš„dllåº“ä¸ºucrtbase.dll UCRTåº“æ–‡ä»¶ï¼š åº“ å…³è”çš„DLL å¤‡æ³¨ é€‰é¡¹ é¢„å¤„ç†å™¨æŒ‡ä»¤ libucrt.lib æ—  å°† UCRT é™æ€é“¾æ¥åˆ°ä½ çš„ä»£ç ã€‚ /MT _MT libucrtd.lib æ—  ç”¨äºé™æ€é“¾æ¥çš„ UCRT è°ƒè¯•ç‰ˆæœ¬ã€‚ä¸å¯å†å‘è¡Œã€‚ /MTd _DEBUG,_MT ucrt.lib ucrtbase.dll UCRT çš„ DLL å¯¼å…¥åº“ã€‚ /MD _MT,_DLL ucrtd.lib ucrtbased.dll UCRT è°ƒè¯•ç‰ˆæœ¬çš„ DLL å¯¼å…¥åº“ã€‚ä¸å¯å†å‘è¡Œã€‚ /MDd _DEBUG,_MT,_DLL æ ‡å‡†åº“å’Œè¿è¡Œæ—¶åº“çš„åŒºåˆ« Cæ ‡å‡†åº“å†è·¨å¹³å°ç³»ç»Ÿä¸Šï¼Œæ‰§è¡Œç»“æœä¸€è‡´ Cè¿è¡Œåº“æ˜¯Cæ ‡å‡†åº“çš„æ‰©å±•é›†ï¼Œå®Œå…¨åŒ…å«Cæ ‡å‡†åº“ï¼Œä½†æ‰©å±•çš„å‡½æ•°å› ä¸åŒçš„æ“ä½œç³»ç»Ÿå¹³å°æœ‰å·®å¼‚ ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œcè¿è¡Œæ—¶åº“æ‰§è¡Œçš„ç»“æœå¯èƒ½ä¸åŒï¼Œä½†æ˜¯å¯¹cæ ‡å‡†åº“çš„æ”¯æŒæ˜¯å®Œå…¨ä¸€è‡´","link":"/f4ab9929.html"},{"title":"JavaScript map function grammatical sugar trap","text":"Donâ€™t pursue techniques that seem too fancy, or they may backfire(ä¸è¦è¿½æ±‚çœ‹ä¼¼è¿‡äºèŠ±å“¨çš„æŠ€å·§ï¼Œå¦åˆ™å¯èƒ½é€‚å¾—å…¶å) 12let m = [10, 10, 10].map(parseInt);document.write(m);","link":"/ad4a4750.html"},{"title":"Go tool pprofæ€§èƒ½ç›‘æ§è°ƒè¯•å·¥å…·åŸºæœ¬ä½¿ç”¨è¯´æ˜","text":"Go tool pprofä½¿ç”¨æ–¹å¼goä¸­æœ‰pprofåŒ…æ¥åšä»£ç çš„æ€§èƒ½ç›‘æ§ä¸»è¦æ¶‰åŠä¸¤ä¸ªpkgï¼š 1234567891011#webæœåŠ¡å™¨:import ( &quot;net/http&quot; _ &quot;net/http/pprof&quot;)#ä¸€èˆ¬åº”ç”¨ç¨‹åº(å®é™…åº”ç”¨æ— webäº¤äº’)import ( &quot;net/http&quot; _ &quot;runtime/pprof&quot;) net/http/pprofä¸­åªæ˜¯ä½¿ç”¨runtime/pprofåŒ…æ¥è¿›è¡Œå°è£…äº†ä¸€ä¸‹ï¼Œå¹¶åœ¨httpç«¯å£ä¸Šæš´éœ²å‡ºæ¥ã€‚ Go tool pprofè¾…åŠ©å·¥å…·å®‰è£…(å›¾å½¢å·¥å…·graphvizä¸ºä¾‹) __Windows__ï¼š1.å®˜æ–¹ä¸‹è½½å®‰è£…åŒ…: http://www.graphviz.org/download/ä¸‹è½½Stableç¨³å®šç‰ˆæœ¬(.msi)2.é…ç½®PATHç³»ç»Ÿç¯å¢ƒå˜é‡ï¼šC:\\Program Files (x86)\\Graphviz2.38\\bin Linux(ä¾‹ï¼šCentos) æ–¹å¼1).æ·»åŠ repoä¾èµ–http://204.178.9.49/graphviz-rhel.repo 123yum list available 'graphviz*'yum install 'graphviz*' --skip-broken#å¤‡æ³¨ï¼š--skip-brokenå¯é€‰ï¼šè·³è¿‡é”™è¯¯ä¾èµ–ï¼Œä¸åŠ è¿™ä¸ªå‚æ•°ä¼šæç¤ºå®‰è£…åŒ…ä¾èµ–é”™è¯¯ï¼Œå› ä¸ºè¿™é‡Œå¹¶ä¸éœ€è¦å…¶å®ƒçš„å®‰è£…åŒ…ï¼Œæ‰€ä»¥è·³è¿‡å³å¯ã€‚ â€“skip-brokenå¯é€‰ï¼šè·³è¿‡é”™è¯¯ä¾èµ–ï¼Œä¸åŠ è¿™ä¸ªå‚æ•°ä¼šæç¤ºå®‰è£…åŒ…ä¾èµ–é”™è¯¯ï¼Œå› ä¸ºè¿™é‡Œå¹¶ä¸éœ€è¦å…¶å®ƒçš„å®‰è£…åŒ…ï¼Œæ‰€ä»¥è·³è¿‡å³å¯ã€‚ æ–¹å¼2).æºç åŒ…ç¼–è¯‘å®‰è£…./configuremakemake install MacOS:brew install graphviz Go tool pprofå¸¸ç”¨åŸºæœ¬è°ƒè¯•åŸºæœ¬å‘½ä»¤(é»˜è®¤30sé‡‡é›†æ—¶é—´ï¼Œå¯é€šè¿‡â€“seconds)HTTPåœºæ™¯(å‚æ•°å¯é€‰:â€“text)ï¼šHeap profile: 1go tool pprof --text http://localhost:8080/debug/pprof/heap CPU profile: 1go tool pprof --text http://localhost:8080/debug/pprof/profile Goroutine blocking profile: 1go tool pprof --text http://localhost:8080/debug/pprof/block 1.å®æ—¶é€šè¿‡åœ°å€æŸ¥çœ‹æµè§ˆå™¨: http://localhost:8080/debug/pprof/;2.é€šè¿‡ç”Ÿæˆçš„profileæ–‡ä»¶åˆ†æ;é€‰æ‹©æŒ‡å®šçš„profileå‹ç¼©gzæ–‡ä»¶(.gz),ä½¿ç”¨go tool pprofè¿›å…¥ 12345go tool pprof http://localhost:8080/debug/pprof/profile#ç»“æŸåç›´æ¥è¿›å…¥äº¤äº’ï¼š(pprof) web(pprof) å¦‚æŸ¥çœ‹å†å²è°ƒè¯•æ–‡ä»¶ä¿¡æ¯ï¼Œé€šè¿‡æŒ‡å®šçš„profileæ–‡ä»¶è¿›å…¥å³å¯:go tool pprof [*.gz] pprofäº¤äº’åŸºæœ¬å‘½ä»¤ï¼šweb ç›´æ¥ç”Ÿæˆwebæµè§ˆå™¨å¯è®¿é—®çš„svgå›¾;(å…¶ä»–å‘½ä»¤è‡ªè¡Œæ‘¸ç´¢)Windowsä¸‹è‡ªåŠ¨ç”Ÿæˆ.svgæ–‡ä»¶ä¸”è°ƒç”¨é»˜è®¤æµè§ˆå™¨è®¿é—®;MacOSä¸‹è‡ªåŠ¨ç”Ÿæˆ.gzæ–‡ä»¶ï¼Œç³»ç»Ÿé™åˆ¶å¯æ ¹æ®æç¤ºæ–‡ä»¶è·¯å¾„é€šè¿‡æ‰‹åŠ¨è®¿é—®æŸ¥çœ‹; ã€æ³¨æ„äº‹é¡¹ã€‘ï¼šprofileæ–‡ä»¶ä¸ºç©ºçš„é—®é¢˜, heapå’Œblockä¸€èˆ¬ä¸å—å½±å“ã€‚æ‰§è¡Œäº¤äº’webå‘½ä»¤ä¼šæŠ¥: 123(pprof) webprofile is empty(pprof) äº§ç”ŸåŸå› ï¼špprofå†…å­˜åˆ†æå™¨é‡‡å–æŠ½æ ·çš„æ–¹å¼ï¼Œå®ƒä»…ä»…ä»ä¸€äº›å†…å­˜åˆ†é…çš„å­é›†ä¸­æ”¶é›†ä¿¡æ¯ã€‚æœ‰å¯èƒ½å¯¹ä¸€ä¸ªå¯¹è±¡çš„é‡‡æ ·ä¸è¢«é‡‡æ ·å¯¹è±¡çš„å¤§å°æˆæ¯”ä¾‹ã€‚é€šè¿‡ä½¿ç”¨go test â€“memprofilerateæ ‡è¯†ï¼Œæˆ–è€…é€šè¿‡ç¨‹åºå¯åŠ¨æ—¶ çš„è¿è¡Œé…ç½®ä¸­çš„MemProfileRateå˜é‡æ¥æ”¹å˜è°ƒæ•´è¿™ä¸ªé‡‡æ ·çš„æ¯”ä¾‹ã€‚å¦‚æœæ¯”ä¾‹ä¸º1ï¼Œåˆ™ä¼šå¯¼è‡´å…¨éƒ¨ç”³è¯·çš„ä¿¡æ¯éƒ½ä¼šè¢«æ”¶é›†ï¼Œä½†æ˜¯è¿™æ ·çš„è¯å°†ä¼šä½¿å¾—æ‰§è¡Œå˜æ…¢ã€‚é»˜è®¤çš„é‡‡æ ·æ¯”ä¾‹æ˜¯æ¯512KBçš„å†…å­˜ç”³è¯·å°±é‡‡æ ·ä¸€æ¬¡ã€‚ æ–¹æ³•1).åœ¨è¿›è¡Œè°ƒè¯•æ—¶ï¼ŒæŒ‡å®šè¿è¡Œå‚æ•°ï¼Œæˆ–è¿è¡Œä»£ç ä¸­åŠ¨æ€è°ƒæ•´å‚æ•°1go tool pprof --text http://localhost:8080/debug/pprof/profile æ­¤å‘½ä»¤å°†ä¼šæ‰“å°è€—è´¹æœ€å¤šCPUæ—¶é—´çš„å‡½æ•°åˆ—è¡¨ã€‚è¿™é‡Œæœ‰å‡ ç§å¯ç”¨çš„è¾“å‡ºå½¢å¼ï¼Œæœ€å®ç”¨çš„æœ‰ â€“text, â€“web å’Œ â€“listã€‚è¿è¡Œ â€œgo tool pprofâ€ æ¥å¾—åˆ°å®Œæ•´çš„åˆ—è¡¨ã€‚ ã€å¤‡æ³¨ã€‘ï¼šå®é™…æµ‹è¯•æ—¶ï¼ŒMacOSä¸‹åŸºæœ¬æ˜¯ç©ºçš„,éœ€è¦æŒ‡å®šå‚æ•°ã€‚ æ–¹æ³•2).è®¾ç½®ç¯å¢ƒå˜é‡(æ­¤æ–¹æ³•æä¸æ¨è!)è®¾ç½®Goç¯å¢ƒå˜é‡ GODEBUG=â€memprofilerate=1â€. é€šè¿‡æ§åˆ¶é‡‡æ ·çš„æ¯”ä¾‹å’Œè¡Œä¸ºï¼Œå¯ä»¥è¾¾åˆ°æ€§èƒ½è°ƒè¯•ç²’åº¦çš„æ§åˆ¶ï¼","link":"/2188b831.html"},{"title":"Golang CHANGELOG History(æˆªè‡³2025.11.07çš„å®Œæ•´å˜æ›´æ—¥å¿—Changelog)","text":"Golang Changelog**ï¼š Goè¯­è¨€ç‰ˆæœ¬å˜æ›´æ—¥å¿—ï¼ˆæˆªè‡³2025.11.07çš„å˜æ›´æ—¥å¿—ï¼‰Go 1.25 (2025å¹´8æœˆ12æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2025å¹´8æœˆ12æ—¥ç‰ˆæœ¬å‘¨æœŸ: è·ç¦»Go 1.24å‘å¸ƒå…­ä¸ªæœˆå…¼å®¹æ€§: ä¿æŒGo 1çš„å…¼å®¹æ€§æ‰¿è¯º ä¸»è¦ç‰¹æ€§ä¸æ”¹è¿›: è¯­è¨€ä¸ç¼–è¯‘å™¨: å¤§éƒ¨åˆ†æ›´æ”¹é›†ä¸­åœ¨å·¥å…·é“¾ã€è¿è¡Œæ—¶å’Œåº“çš„å®ç°ä¼˜åŒ– æ²¡æœ‰å¼•å…¥ç ´åæ€§çš„è¯­è¨€å˜åŒ– æ ‡å‡†åº“å¢å¼º: æ–°å¢encoding/json/v2åŒ…ï¼ˆé€šè¿‡GOEXPERIMENT=jsonv2æ ‡å¿—å¯ç”¨ï¼‰ï¼Œå¸¦æ¥æ˜¾è‘—æ€§èƒ½æ”¹è¿› ä¿®å¤äº†crypto/subtleã€encoding/pemã€net/urlå’Œosç­‰åŒ…çš„å¤šä¸ªé—®é¢˜ è¿è¡Œæ—¶ä¼˜åŒ–: å®¹å™¨æ„ŸçŸ¥è¿è¡Œæ—¶ï¼Œæ›´å¥½åœ°é€‚åº”å®¹å™¨åŒ–ç¯å¢ƒ å®éªŒæ€§åŠŸèƒ½æ”¯æŒï¼Œä¸ºæœªæ¥ç‰ˆæœ¬å¥ å®šåŸºç¡€ æ€§èƒ½æ”¹è¿›: è¿è¡Œæ—¶æ€§èƒ½æ˜¾è‘—ä¼˜åŒ–ï¼Œæä¾›æ›´é«˜æ•ˆçš„æ‰§è¡Œä½“éªŒ å†…å­˜ç®¡ç†å’Œåƒåœ¾å›æ”¶è¿›ä¸€æ­¥ä¼˜åŒ– Go 1.24 (2025å¹´2æœˆ6æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2025å¹´2æœˆ6æ—¥ç‰ˆæœ¬å‘¨æœŸ: è·ç¦»Go 1.23å‘å¸ƒå…­ä¸ªæœˆï¼Œå¼€å‘å‘¨æœŸä»2024å¹´7æœˆå¼€å§‹ï¼Œ11æœˆä¸‹æ—¬å†»ç»“ï¼Œç»è¿‡3ä¸ªæœˆæµ‹è¯•å®Œå–„ ä¸»è¦ç‰¹æ€§ä¸æ”¹è¿›: è¯­è¨€ç‰¹æ€§: æ³›å‹ç±»å‹åˆ«å: å®Œå…¨æ”¯æŒæ³›å‹ç±»å‹åˆ«åï¼Œå…è®¸å¼€å‘è€…ä»¥ä¸å®šä¹‰æ³›å‹ç›¸åŒçš„æ–¹å¼å‚æ•°åŒ–ç±»å‹åˆ«å å¼±æŒ‡é’ˆæ”¯æŒ: å¼•å…¥å…¨æ–°çš„weakåŒ…ï¼Œæ”¯æŒå¼±æŒ‡é’ˆåŠŸèƒ½ ç»ˆç»“å™¨å¢å¼º: æ”¹è¿›å¯¹è±¡æ¸…ç†æœºåˆ¶ï¼Œæä¾›æ›´æ™ºèƒ½çš„èµ„æºç®¡ç† æ€§èƒ½ä¼˜åŒ–: CPUæ€§èƒ½æå‡: CPUå¼€é”€å¹³å‡é™ä½2-3% Mapå®ç°é‡æ„: åŸºäºSwiss Tablesçš„å…¨æ–°å†…ç½®mapå®ç°ï¼Œå¤§å¹…æå‡mapæ“ä½œæ€§èƒ½ å†…å­˜åˆ†é…ä¼˜åŒ–: æ›´é«˜æ•ˆçš„å°å¯¹è±¡å†…å­˜åˆ†é…ç­–ç•¥ åƒåœ¾å›æ”¶æ”¹è¿›: æ›´æ™ºèƒ½çš„åƒåœ¾å›æ”¶ä¸å¯¹è±¡æ¸…ç†æœºåˆ¶ å·¥å…·é“¾æ›´æ–°: æ›´æ™ºèƒ½çš„ä¾èµ–ç®¡ç† æ„å»ºç³»ç»Ÿå’Œæµ‹è¯•å·¥å…·çš„å¤šé¡¹æ”¹è¿› æ–‡ä»¶ç³»ç»Ÿè®¿é—®: ç›®å½•èŒƒå›´çš„æ–‡ä»¶ç³»ç»Ÿè®¿é—®æ§åˆ¶ å¢å¼ºçš„æ–‡ä»¶æ“ä½œå®‰å…¨æ€§å’Œæ€§èƒ½ ç‰ˆæœ¬ç»´æŠ¤: å®šæœŸå®‰å…¨æ›´æ–°ï¼Œå¦‚go1.24.5ï¼ˆ2025å¹´7æœˆ8æ—¥å‘å¸ƒï¼‰åŒ…å«goå‘½ä»¤çš„å®‰å…¨ä¿®å¤ï¼Œä»¥åŠç¼–è¯‘å™¨ã€é“¾æ¥å™¨ã€è¿è¡Œæ—¶å’Œgoå‘½ä»¤çš„é”™è¯¯ä¿®å¤ Go 1.23 (2024å¹´8æœˆ6æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2024å¹´8æœˆ6æ—¥ è¯­è¨€ç‰¹æ€§ è¿­ä»£å™¨è¯­æ³•è½¬æ­£ï¼šfor-rangeå¾ªç¯æ”¯æŒä½¿ç”¨å‡½æ•°ä½œä¸ºrangeè¡¨è¾¾å¼ï¼Œæ ‡å‡†åº“sliceså’ŒmapsåŒ…æ–°å¢è¿­ä»£å™¨æ”¯æŒ æ³›å‹ç±»å‹åˆ«åé¢„è§ˆï¼šå¯ç”¨GOEXPERIMENT=aliastypeparamsåå¯åœ¨åŒ…å†…ä½¿ç”¨æ³›å‹ç±»å‹åˆ«å åŒ…çº§å˜é‡åˆå§‹åŒ–æ¬¡åºæ˜ç¡®åŒ–ï¼šä¿®æ­£å¹¶æ˜ç¡®åŒ…çº§å˜é‡åˆå§‹åŒ–é¡ºåº æœ¯è¯­è§„èŒƒï¼šæ¾„æ¸…â€ä¸¥æ ¼å¯æ¯”è¾ƒâ€å’Œâ€ç±»å‹çº¦æŸâ€ç­‰æœ¯è¯­ï¼Œç¦æ­¢åŒ¿åæ¥å£ç±»å‹çš„å¾ªç¯å®šä¹‰ å·¥å…·é“¾ æ–°å¢go telemetryå‘½ä»¤ï¼šå¯é€‰çš„é¥æµ‹ç³»ç»Ÿï¼Œæ”¯æŒon/local/offä¸‰ç§æ¨¡å¼ æ„å»ºç»“æœJSONåŒ–ï¼šgo build -jsonæ”¯æŒç»“æ„åŒ–è¾“å‡º ç§»é™¤GOROOT_FINALæ”¯æŒ è¿è¡Œæ—¶ä¸ç¼–è¯‘å™¨ Timer/Tickeræ”¹è¿›ï¼š æœªå¼•ç”¨çš„Timer/Tickerå¯è¢«GCç«‹å³å›æ”¶ï¼Œæ— éœ€æ‰‹åŠ¨Stop Timer/Tickerçš„channelæ”¹ä¸ºæ— ç¼“å†²ï¼Œä¿è¯Stop/Resetåä¸æ¥æ”¶æ—§å€¼ PGOä¼˜åŒ–ï¼šé€šè¿‡é‡å å‡½æ•°ä¸­å±€éƒ¨å˜é‡çš„æ ˆå¸§æ§½ä½å‡å°‘æ ˆä½¿ç”¨ï¼Œæ”¹å–„ç¼–è¯‘æ—¶é—´ æ¶æ„æ”¯æŒï¼šæ–°å¢GOARM64å’ŒGORISCV64ç¯å¢ƒå˜é‡ï¼Œæ”¯æŒopenbsd/riscv64å®éªŒæ€§ç«¯å£ ç³»ç»Ÿè¦æ±‚ macOSæœ€ä½ç‰ˆæœ¬è¦æ±‚æå‡è‡³11 Big Sur æœ€åä¸€ä¸ªæ”¯æŒLinux 2.6.32çš„ç‰ˆæœ¬ï¼ˆGo 1.24å°†è¦æ±‚Linux 3.17+ï¼‰ Go 1.22 (2024å¹´2æœˆ6æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2024å¹´2æœˆ6æ—¥ è¯­è¨€ç‰¹æ€§ Forå¾ªç¯å˜é‡ä½œç”¨åŸŸä¿®å¤ï¼šæ¯æ¬¡è¿­ä»£åˆ›å»ºæ–°å˜é‡ï¼Œè§£å†³å¾ªç¯å˜é‡æ„å¤–å…±äº«é—®é¢˜ æ•´æ•°èŒƒå›´æ”¯æŒï¼šæ”¯æŒfor i := range nè¯­æ³•ï¼ˆnä¸ºæ•´æ•°ï¼‰ æ ‡å‡†åº“ æ–°å¢math/rand/v2åŒ…ï¼šæ›´ç®€æ´çš„APIï¼Œæ›´é«˜è´¨é‡çš„ä¼ªéšæœºç®—æ³• æ–°å¢go/versionåŒ…ï¼šç‰ˆæœ¬ä¿¡æ¯ç®¡ç† net/httpè·¯ç”±å¢å¼ºï¼šæ”¯æŒæ–¹æ³•ï¼ˆGET/POSTç­‰ï¼‰å’Œé€šé…ç¬¦ï¼ˆå¦‚/task/{id}/ï¼‰ database/sqlæ–°å¢Null[T]ç±»å‹ï¼šæ›´å¥½çš„å¯ç©ºåˆ—å¤„ç† slicesåŒ…æ–°å¢Concatå‡½æ•°ï¼šè¿æ¥å¤šä¸ªåˆ‡ç‰‡ å·¥å…·é“¾ go vetå¢å¼ºï¼šæ£€æµ‹å¾ªç¯å˜é‡å¼•ç”¨ã€log/slogé”®å€¼ä¸åŒ¹é…ç­‰é—®é¢˜ go env -changedï¼šåˆ—å‡ºéé»˜è®¤ç¯å¢ƒé…ç½® go mod tidy -diffï¼šé¢„è§ˆæ–‡ä»¶å˜æ›´è€Œä¸å®é™…ä¿®æ”¹ è¿è¡Œæ—¶ GCå…ƒæ•°æ®ä¼˜åŒ–ï¼šæå‡1-3% CPUæ€§èƒ½ï¼Œå‡å°‘çº¦1%å†…å­˜å¼€é”€ Windows/AMD64å¢å¼ºï¼šæ”¯æŒSetUnhandledExceptionFilteræ•è·æœªå¤„ç†å¼‚å¸¸ Go 1.21 (2023å¹´8æœˆ8æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2023å¹´8æœˆ8æ—¥ ä¸»è¦ç‰¹æ€§ min/maxå†…ç½®å‡½æ•°ï¼šæ”¯æŒä»»æ„å¯æ¯”è¾ƒæœ‰åºç±»å‹ clearå†…ç½®å‡½æ•°ï¼šæ¸…ç©ºmapæˆ–åˆ‡ç‰‡ ç»“æ„åŒ–æ—¥å¿—å®Œå–„ï¼šlog/slogåŒ…æ€§èƒ½ä¼˜åŒ– panicè°ƒç”¨æ ˆæ”¹è¿›ï¼šä¼˜åŒ–é”™è¯¯ä¿¡æ¯å±•ç¤º å·¥å…·é“¾ Goå·¥å…·é“¾æ¨¡å—åŒ–ï¼šgoå‘½ä»¤ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ **åŸºäºé…ç½®æ–‡ä»¶ä¼˜åŒ–(PGO)**ï¼šæ­£å¼ç¨³å®šæ”¯æŒ go testè¦†ç›–ç‡æ”¹è¿›ï¼šæ”¯æŒé›†æˆæµ‹è¯•è¦†ç›–ç‡æ”¶é›† æ ‡å‡†åº“ æ–°å¢mapsåŒ…ï¼šmapç›¸å…³æ“ä½œå‡½æ•° æ–°å¢slicesåŒ…ï¼šåˆ‡ç‰‡æ“ä½œå‡½æ•°ï¼ˆå®éªŒæ€§ï¼‰ æ€§èƒ½ åƒåœ¾å›æ”¶å™¨ä¼˜åŒ–ï¼šæŸäº›ç¨‹åºæ€§èƒ½æå‡å¯è¾¾40% å†…å­˜åˆ†é…å™¨ä¼˜åŒ–ï¼šå‡å°‘é”ç«äº‰ Go 1.20 (2023å¹´2æœˆ1æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2023å¹´2æœˆ1æ—¥ è¯­è¨€ç‰¹æ€§ åˆ‡ç‰‡è½¬æ•°ç»„æŒ‡é’ˆç®€åŒ–ï¼šè¯­æ³•æ›´ç®€æ´ï¼Œæ— éœ€unsafeåŒ… å·¥å…·é“¾ åº”ç”¨è¦†ç›–ç‡æŠ¥å‘Šï¼šæ‰©å±•go test -coveræ”¯æŒåº”ç”¨æ•´ä½“è¦†ç›–ç‡ç»Ÿè®¡ åºŸå¼ƒ-iæ ‡å¿—ï¼šgo build/install/testä¸å†æ”¯æŒ-iæ ‡å¿— æ ‡å‡†åº“ æ–°å¢http.ResponseControllerï¼šæ”¯æŒå¯¹æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚è¿›è¡Œæ›´ç²¾ç»†æ§åˆ¶ æ–°å¢crypto/ecdhåŒ…ï¼šæ¤­åœ†æ›²çº¿Diffie-Hellmanå¯†é’¥äº¤æ¢ è¿è¡Œæ—¶ å¯åŠ¨æ—¶é—´ä¼˜åŒ–ï¼šå‡å°‘çº¦25%å¯åŠ¨æ—¶é—´ GCæš‚åœæ—¶é—´æ”¹å–„ï¼šå¤§éƒ¨åˆ†ç¨‹åºæš‚åœæ—¶é—´&lt;100å¾®ç§’ Go 1.19 (2022å¹´8æœˆ2æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2022å¹´8æœˆ2æ—¥ è¯­è¨€ç‰¹æ€§ å†…å­˜æ¨¡å‹ä¿®è®¢ï¼šä¸C/C++/Javaç­‰ä¸»æµè¯­è¨€å†…å­˜æ¨¡å‹ä¿æŒä¸€è‡´ sync/atomicæ–°ç±»å‹ï¼šæ–°å¢Bool, Int32, Int64, Uint32, Uint64, Uintptr, Pointerç­‰ç±»å‹ è¿è¡Œæ—¶ æ–°å¢SetMemoryLimitï¼šruntime/debug.SetMemoryLimité™åˆ¶Goå†…å­˜ä½¿ç”¨ æ–‡æ¡£æ³¨é‡Šå¢å¼ºï¼šæ”¯æŒé“¾æ¥ã€åˆ—è¡¨å’Œæ›´æ¸…æ™°çš„æ ‡é¢˜ æ ‡å‡†åº“ net/httpè¶…æ—¶æ”¹è¿›ï¼šServer.ConnContextæ”¯æŒè®¾ç½®è¿æ¥çº§è¶…æ—¶ ç§»æ¤æ€§ æ–°å¢LoongArch 64ä½æ”¯æŒï¼šlinux/loong64ç«¯å£ Go 1.18 (2022å¹´3æœˆ15æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2022å¹´3æœˆ15æ—¥ è¯­è¨€ç‰¹æ€§ æ³›å‹æ­£å¼å‘å¸ƒï¼šæ”¯æŒç±»å‹å‚æ•°ã€ç±»å‹çº¦æŸï¼Œå®ç°ç®—æ³•å¤ç”¨ å‡½æ•°è¿­ä»£å™¨é¢„è§ˆï¼šrange over funcï¼ˆéœ€GOEXPERIMENT=rangefuncï¼‰ å·¥å…·é“¾ Fuzzingæµ‹è¯•ï¼šé¦–ä¸ªå°†æ¨¡ç³Šæµ‹è¯•é›†æˆåˆ°æ ‡å‡†å·¥å…·é“¾çš„ä¸»è¦è¯­è¨€ å·¥ä½œåŒºæ¨¡å¼ï¼šè§£å†³æœ¬åœ°å¤šæ¨¡å—å¼€å‘ä¾èµ–é—®é¢˜ï¼ˆgo workå‘½ä»¤ï¼‰ ç¼–è¯‘æ€§èƒ½ï¼šAMD64æ¶æ„æ€§èƒ½æå‡20%ï¼ˆå¯„å­˜å™¨ABIæ‰©å±•ï¼‰ æ ‡å‡†åº“ æ–°å¢net/netipåŒ…ï¼šæ›´é«˜æ•ˆçš„IPåœ°å€å¤„ç† crypto/tlsï¼šé»˜è®¤ä½¿ç”¨TLS 1.2+ crypto/x509ï¼šé»˜è®¤æ‹’ç»SHA-1ç­¾åè¯ä¹¦ æ€§èƒ½æ”¹è¿› CPUæ€§èƒ½æå‡ï¼šARM64å’ŒPowerPC64ä¸Šæå‡é«˜è¾¾20% Go 1.17 (2021å¹´8æœˆ16æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2021å¹´8æœˆ16æ—¥ è¯­è¨€ç‰¹æ€§ åˆ‡ç‰‡è½¬æ•°ç»„æŒ‡é’ˆï¼šæ”¯æŒ(*[N]T)(slice)è¯­æ³•ï¼Œè¿è¡Œæ—¶è¾¹ç•Œæ£€æŸ¥ å·¥å…·é“¾ æ„å»ºçº¦æŸæ–°è¯­æ³•ï¼šå¼•å…¥//go:buildæ›¿ä»£æ—§çš„// +build æ¨¡å—å›¾è£å‰ªï¼šgo.modæ›´ç²¾ç®€ è¿è¡Œæ—¶ å¯„å­˜å™¨ABIæ‰©å±•ï¼š64ä½ARMæ¶æ„æ€§èƒ½æå‡10%+ åƒåœ¾å›æ”¶ä¼˜åŒ–ï¼šæš‚åœæ—¶é—´è¿›ä¸€æ­¥é™ä½ æ ‡å‡†åº“ æ–°å¢io/fsåŒ…ï¼šæŠ½è±¡æ–‡ä»¶ç³»ç»Ÿæ¥å£ embedåŒ…è½¬æ­£ï¼šæ­£å¼æ”¯æŒé™æ€èµ„æºåµŒå…¥ Go 1.16 (2021å¹´2æœˆ16æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2021å¹´2æœˆ16æ—¥ è¯­è¨€ç‰¹æ€§ embedåŒ…ï¼šé™æ€èµ„æºç¼–è¯‘æ—¶åµŒå…¥ io/fsåŒ…ï¼šæ–‡ä»¶ç³»ç»ŸæŠ½è±¡ å·¥å…·é“¾ Moduleæˆä¸ºé»˜è®¤ï¼šGO111MODULEé»˜è®¤å¼€å¯ Mac Apple Siliconæ”¯æŒï¼šdarwin/arm64ç«¯å£ æ ‡å‡†åº“ net/httpï¼šHTTP/2æ¨é€æ”¯æŒæ”¹è¿› archive/zipï¼šæ€§èƒ½ä¼˜åŒ– Go 1.15 (2020å¹´8æœˆ11æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2020å¹´8æœˆ11æ—¥ è¿è¡Œæ—¶ GCä¼˜åŒ–ï¼šå…¸å‹GCæš‚åœæ—¶é—´&lt;1ms é“¾æ¥å™¨ä¼˜åŒ–ï¼šé“¾æ¥é€Ÿåº¦æå‡20%ï¼ŒäºŒè¿›åˆ¶ä½“ç§¯å‡å° æ ‡å‡†åº“ timeåŒ…æ€§èƒ½æå‡ï¼šTå‰Šå¼±å¯¹cgoçš„ä¾èµ– Go 1.14 (2020å¹´2æœˆ25æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2020å¹´2æœˆ25æ—¥ è¿è¡Œæ—¶ goroutineæŠ¢å è°ƒåº¦ï¼šåŸºäºä¿¡å·çš„å¼‚æ­¥æŠ¢å ï¼Œè§£å†³é•¿æ—¶é—´å ç”¨CPUé—®é¢˜ deferæ€§èƒ½æå‡ï¼šdeferæ€§èƒ½æå‡30% å·¥å…·é“¾ Moduleæ”¯æŒç”Ÿäº§ç¯å¢ƒï¼šæ¨¡å—ç¼“å­˜æ”¹è¿› Go 1.13 (2019å¹´9æœˆ3æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2019å¹´9æœˆ3æ—¥ å·¥å…·é“¾ æ•°å­—å­—é¢é‡è¯­æ³•ï¼šæ”¯æŒ0bäºŒè¿›åˆ¶ã€0oå…«è¿›åˆ¶ã€0xåå…­è¿›åˆ¶åŠä¸‹åˆ’çº¿åˆ†éš” é”™è¯¯åŒ…è£…ï¼šæ ‡å‡†åº“æ”¯æŒ%wæ ¼å¼åŒ–åŠ¨è¯ æ ‡å‡†åº“ æ–°ç‰ˆTLS 1.3ï¼šcrypto/tlsé»˜è®¤å¯ç”¨TLS 1.3 Go 1.12 (2019å¹´2æœˆ25æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2019å¹´2æœˆ25æ—¥ è¿è¡Œæ—¶ GCä¼˜åŒ–ï¼šå†™å…¥å±éšœä¼˜åŒ–ï¼Œå‡å°‘çº¦10-30%å†…å­˜å ç”¨ å·¥å…·é“¾ Moduleå®éªŒæ€§æ”¯æŒï¼šGO111MODULEå¼•å…¥ æ ‡å‡†åº“ crypto/tlsï¼šæ€§èƒ½å’Œå®‰å…¨æ”¹è¿› Go 1.11 (2018å¹´8æœˆ24æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2018å¹´8æœˆ24æ—¥ ä¸»è¦ç‰¹æ€§ Modulesï¼šå¼•å…¥Goæ¨¡å—ç³»ç»Ÿï¼Œè§£å†³GOPATHä¾èµ–ç®¡ç†é—®é¢˜ WebAssemblyæ”¯æŒï¼šå®éªŒæ€§æ”¯æŒGoç¼–è¯‘ä¸ºWasm Go 1.10 (2018å¹´2æœˆ16æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2018å¹´2æœˆ16æ—¥ å·¥å…·é“¾ æ„å»ºç¼“å­˜ï¼šgo buildå¼•å…¥æ„å»ºç¼“å­˜ï¼Œå¤§å¹…æå‡æ„å»ºé€Ÿåº¦ æµ‹è¯•ç¼“å­˜ï¼šgo testç»“æœç¼“å­˜ æ ‡å‡†åº“ strings.Builderï¼šé«˜æ•ˆå­—ç¬¦ä¸²æ„å»º Go 1.9 (2017å¹´8æœˆ24æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2017å¹´8æœˆ24æ—¥ æ ‡å‡†åº“ type aliasæ­£å¼æ”¯æŒï¼šç±»å‹åˆ«åè¯­æ³•ç¨³å®š sync.Mapï¼šå¹¶å‘å®‰å…¨çš„mapå®ç° è¿è¡Œæ—¶ åƒåœ¾å›æ”¶ä¼˜åŒ–ï¼šå¹¶è¡ŒGCï¼Œå‡å°‘STWæ—¶é—´ Go 1.8 (2017å¹´2æœˆ16æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2017å¹´2æœˆ16æ—¥ æ ‡å‡†åº“ contextåŒ…è¿›å…¥æ ‡å‡†åº“ï¼šæä¾›å–æ¶ˆå’Œè¶…æ—¶æœºåˆ¶ sort.Sliceï¼šåŸºäºå›è°ƒçš„åˆ‡ç‰‡æ’åº è¿è¡Œæ—¶ GCå»¶è¿Ÿä¼˜åŒ–ï¼šSTWæ—¶é—´é™è‡³æ¯«ç§’çº§ deferæ€§èƒ½æ”¹è¿›ï¼šå»¶è¿Ÿè°ƒç”¨å¼€é”€é™ä½ Go 1.7 (2016å¹´8æœˆ15æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2016å¹´8æœˆ15æ—¥ ä¸»è¦ç‰¹æ€§ contextåŒ…å¼•å…¥ï¼ˆå®éªŒæ€§ï¼‰ ç¼–è¯‘å™¨ä¼˜åŒ–ï¼šç¼–è¯‘é€Ÿåº¦æå‡ï¼ŒäºŒè¿›åˆ¶ä½“ç§¯ç¼©å°20-30% ç§»æ¤æ€§ Linux on IBM z Systemsï¼šæ–°å¢linux/s390xç«¯å£ Go 1.5 (2015å¹´8æœˆ19æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2015å¹´8æœˆ19æ—¥ é‡å¤§å˜é© è‡ªä¸¾ç¼–è¯‘ï¼šGoç¼–è¯‘å™¨å®Œå…¨ç”¨Goé‡å†™ï¼Œä¸å†ä¾èµ–Cè¯­è¨€ GCé‡å†™ï¼šå¼•å…¥å¹¶å‘GCï¼ŒSTWæ—¶é—´å¤§å¹…ç¼©çŸ­ Go 1.4 (2014å¹´12æœˆ10æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2014å¹´12æœˆ10æ—¥ å·¥å…·é“¾ go generateï¼šä»£ç ç”Ÿæˆå·¥å…·å¼•å…¥ internalåŒ…ï¼šæ”¯æŒinternalç›®å½•å¯è§æ€§çº¦æŸ Go 1.3 (2014å¹´6æœˆ18æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2014å¹´6æœˆ18æ—¥ è¿è¡Œæ—¶ æ ˆç®¡ç†ä¼˜åŒ–ï¼šåˆ†æ®µæ ˆæ”¹ä¸ºè¿ç»­æ ˆ æ ‡å‡†åº“ sync.Poolï¼šå¯¹è±¡æ± æœºåˆ¶å¼•å…¥ Go 1.2 (2013å¹´12æœˆ1æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2013å¹´12æœˆ1æ—¥ è¯­è¨€ç‰¹æ€§ ä¸‰ç´¢å¼•åˆ‡ç‰‡ï¼šintroduced slice[low:high:max] syntax æµ‹è¯•è¦†ç›–ç‡ï¼šgo testæ”¯æŒè¦†ç›–ç‡ç»Ÿè®¡ Go 1.1 (2013å¹´5æœˆ13æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2013å¹´5æœˆ13æ—¥ ä¸»è¦æ”¹è¿› æ€§èƒ½å¤§å¹…æå‡ï¼šç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶ä¼˜åŒ– Method valuesï¼šæ”¯æŒå°†æ–¹æ³•ä½œä¸ºå‡½æ•°å€¼ Go 1.0 (2012å¹´3æœˆ28æ—¥å‘å¸ƒ)å‘å¸ƒæ—¥æœŸ: 2012å¹´3æœˆ28æ—¥ é‡Œç¨‹ç¢‘ é¦–ä¸ªç¨³å®šç‰ˆæœ¬ï¼šGo 1å…¼å®¹æ€§æ‰¿è¯ºå¼€å§‹ è¯­è¨€è§„èŒƒç¡®å®šï¼šå¥ å®šåç»­ç‰ˆæœ¬åŸºç¡€ ç‰ˆæœ¬å‘å¸ƒå‘¨æœŸ å¸¸è§„å‘¨æœŸï¼šæ¯å¹´2æœˆã€8æœˆå‘å¸ƒä¸¤ä¸ªç‰ˆæœ¬ ç»´æŠ¤ç­–ç•¥ï¼šå½“å‰ç‰ˆæœ¬bugä¿®å¤ï¼Œå‰ä¸¤ä¸ªç‰ˆæœ¬å®‰å…¨æ›´æ–° å…¼å®¹æ€§ï¼šéµå¾ªGo 1å…¼å®¹æ€§æ‰¿è¯ºï¼Œä¿è¯å‘åå…¼å®¹ å®˜æ–¹Release CHANGELOGå‚è€ƒgo.dev/doc/devel/release","link":"/3ba902b3.html"},{"title":"Go:chain operation","text":"chain operationé“¾å¼è°ƒç”¨æ³¨æ„äº‹é¡¹ æœ¬èº«ä¸ºè¾ƒå®½æ³›çš„æ¦‚å¿µ é“¾å¼è°ƒç”¨çš„åœºæ™¯ï¼š è¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•(å¾ˆå°‘æœ‰å®é™…æ„ä¹‰)ï¼› æ–¹æ³•é“¾ï¼ˆfunc chainæˆ–method chainï¼‰:è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨å¯¹è±¡ç»‘å®šçš„æ–¹æ³•ï¼› é“¾å¼è°ƒç”¨æ–¹æ³•é“¾æ˜¯åŒ…å«å…³ç³»ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šè¯´ï¼Œé“¾å¼è°ƒç”¨â€‹ â‰  æ–¹æ³•é“¾ï¼› é“¾å¼è°ƒç”¨çš„ä¼˜ç‚¹ è°ƒç”¨è¿‡ç¨‹æ›´æ¥è¿‘è‡ªç„¶è¯­è¨€ï¼Œé“¾å¼å‘ˆç°å¯è¯»æ€§å¥½ï¼› å‚æ•°åˆ—è¡¨å¤æ‚åŒ–çš„æ–¹æ³•æå¤§ç®€åŒ–æ¸…æ™°ï¼› ç²¾ç®€ä»£ç é‡ï¼Œé¿å…ä¸»æ“ä½œå¯¹è±¡åå¤çš„ä¹¦å†™ï¼› ä¼˜åŠ¿:è®¾è®¡ä¸Šï¼Œæ“ä½œä¸æ•°æ®åˆ†ç¦»ã€è§£è€¦; é“¾å¼è°ƒç”¨çš„ç¼ºç‚¹ å¼€å‘è€…éœ€è¦è®°ä½è°ƒç”¨çš„å±‚æ•°ï¼Œå±‚æ•°ä¸èƒ½è¿‡å¤šã€‚ æ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦åˆ›å»ºå¾ˆæ·±çš„è°ƒç”¨å †æ ˆï¼Œæ•ˆç‡ç›¸å¯¹è¾ƒä½ã€‚ é“¾å¼æ“ä½œçš„å®è´¨ï¼ˆå‡½æ•°ORæ–¹æ³•ï¼‰æ“ä½œ =ã€‹ è¿”å›å¯¹è±¡ =ã€‹ç»§ç»­æ“ä½œè¿”å›å¯¹è±¡æ‰€å±å‡½æ•°ORæ–¹æ³• 12345678910111213141516171819202122232425262728package mainimport &quot;fmt&quot;type A struct { Aa string Ab int}func (p *A) SetAa(aa string) *A { p.Aa = aa return p //è¿”å›æ“ä½œå¯¹è±¡}func (p *A) SetAb(ab int) *A { p.Ab = ab return p //è¿”å›æ“ä½œå¯¹è±¡}func (p *A) Print() { fmt.Printf(&quot;Aa:%s || Ab:%d\\n&quot;, p.Aa, p.Ab)}func main() { varA := &amp;A{} varA.SetAa(&quot;Aa&quot;).SetAb(100).Print()}","link":"/b45ac9b7.html"},{"title":"Go:æ–¹æ³•å€¼(func value) å’Œ æ–¹æ³•è¡¨è¾¾å¼(func expression)","text":"æ–¹æ³•å€¼(func value) &amp; æ–¹æ³•è¡¨è¾¾å¼(func expression)ä¾æ®å‡½æ•°æˆ–æ–¹æ³•å…·å¤‡ä¸¤å¤§ç‰¹ç‚¹ï¼š 1.å‡½æ•°æœ¬èº«æ˜¯ä¸€ç§ç±»å‹Tï¼› 2.å‡½æ•°å˜é‡ï¼šå‡½æ•°æˆ–æ–¹æ³•æœ¬èº«å‚¨å­˜åœ¨å˜é‡ä¸­ï¼› æ–¹æ³•å€¼æ–¹æ³•å€¼çš„æœ¬è´¨æ˜¯è°ƒç”¨æ—¶éšè—äº†æ¥æ”¶è€…ï¼Œå’Œä¼ ç»Ÿè°ƒç”¨æ˜¯ç­‰ä»·çš„ï¼› 12345678910111213141516171819202122232425262728package mainimport &quot;fmt&quot;type A struct { name string}func (a *A) SetValue () { fmt.Println(&quot;set&quot;)}func main() { aa := A{&quot;Jaco&quot;} //ä¼ ç»Ÿè°ƒç”¨ aa.SetValue() //æ–¹æ³•å€¼ï¼Œè°ƒç”¨æ—¶éšè—æ¥æ”¶è€… vFunc := aa.SetValue vFunc() //æ–¹æ³•è¡¨è¾¾å¼ï¼Œè°ƒç”¨æ—¶éšè—æ¥æ”¶è€… aFunc := (*A).SetValue //æ˜¾å¼ä¼ é€’æ¥æ”¶è€…,ç­‰ä»·äºaa.SetValue() aFunc(&amp;aa)}","link":"/78f4f0b0.html"},{"title":"Go:func å‡½æ•°","text":"func å‡½æ•°funcå‡½æ•°ï¼ˆé€‚ç”¨äºmethodï¼‰å°ç»“Goå‡½æ•°æ•°ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ï¼Œå¯ä»¥å’Œå…¶ä»–ç±»å‹ä¸€æ ·è¢«ä¿å­˜åœ¨å˜é‡ä¸­ã€‚å’Œæ¥å£ä¸€æ ·ï¼Œæ¥å£ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ã€‚ 12345678910111213package mainimport ( &quot;fmt&quot;)func foo() { fmt.Println(&quot;foo&quot;)}func main() { var f func() f = foo f()} Goå‡½æ•°ç±»å‹å®ç°æ¥å£â€”â€”æŠŠå‡½æ•°ä½œä¸ºæ¥å£æ¥è°ƒç”¨å‡½æ•°ä½“å®ç°æ¥å£å‡½æ•°çš„å£°æ˜ä¸èƒ½ç›´æ¥å®ç°æ¥å£ï¼Œéœ€è¦å°†å‡½æ•°å®šä¹‰ä¸ºç±»å‹åï¼Œä½¿ç”¨ç±»å‹å®ç°ç»“æ„ä½“ã€‚å½“ç±»å‹æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œè¿˜éœ€è¦è°ƒç”¨å‡½æ•°æœ¬ä½“ã€‚ 1234567891011121314// å‡½æ•°å®šä¹‰ä¸ºç±»å‹type FuncCaller func(interface{}) // func(interface{}) å®šä¹‰ä¸º FuncCaller ç±»å‹ã€‚// å®ç°Invokerçš„Callfunc (f FuncCaller) Call(p interface{}) { // è°ƒç”¨f()å‡½æ•°æœ¬ä½“ f(p) //FuncCaller çš„ Call() æ–¹æ³•å°†å®ç° Invoker çš„ Call() æ–¹æ³•ã€‚ // FuncCaller çš„ Call() æ–¹æ³•è¢«è°ƒç”¨ä¸ func(interface{}) æ— å…³ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨è°ƒç”¨å‡½æ•°æœ¬ä½“ã€‚}//ä»£ç å¤‡æ³¨ï¼š//ä»¥ä¸Šå‡½æ•°ç±»å‹ï¼Œéœ€è¦å‡½æ•°æœ¬èº«è¿›è¡Œé€»è¾‘å¤„ç†ã€‚FuncCaller æ— é¡»è¢«å®ä¾‹åŒ–ï¼Œåªéœ€è¦å°†å‡½æ•°è½¬//æ¢ä¸º FuncCaller ç±»å‹å³å¯ï¼Œå‡½æ•°æ¥æºå¯ä»¥æ˜¯å‘½åå‡½æ•°ã€åŒ¿åå‡½æ•°æˆ–é—­åŒ…ã€‚ HTTPå®ç°åœºæ™¯ï¼šå‡½æ•° handler() è½¬ä¸º HandlerFunc ç±»å‹ï¼ŒHandlerFunc ç±»å‹å®ç°äº† Handler çš„ ServeHTTP æ–¹æ³•ï¼Œåº•å±‚å¯ä»¥åŒæ—¶ä½¿ç”¨å„ç§ç±»å‹æ¥å®ç° Handler æ¥å£è¿›è¡Œå¤„ç†ã€‚ 1234567891011121314151617181920212223HTTP åŒ…ä¸­åŒ…å«æœ‰ Handler æ¥å£å®šä¹‰ï¼Œä»£ç å¦‚ä¸‹ï¼štype Handler interface { ServeHTTP(ResponseWriter, *Request)}Handler ç”¨äºå®šä¹‰æ¯ä¸ª HTTP çš„è¯·æ±‚å’Œå“åº”çš„å¤„ç†è¿‡ç¨‹ã€‚åŒæ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤„ç†å‡½æ•°å®ç°æ¥å£ï¼Œå®šä¹‰å¦‚ä¸‹ï¼štype HandlerFunc func(ResponseWriter, *Request)func (f HandlerFunc) ServeHTTP(w ResponseWriter, r *Request) { f(w, r)}è¦ä½¿ç”¨é—­åŒ…å®ç°é»˜è®¤çš„ HTTP è¯·æ±‚å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨ http.HandleFunc() å‡½æ•°ï¼Œå‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼šfunc HandleFunc(pattern string, handler func(ResponseWriter, *Request)) { DefaultServeMux.HandleFunc(pattern, handler)}è€Œ DefaultServeMux æ˜¯ ServeMux ç»“æ„ï¼Œæ‹¥æœ‰ HandleFunc() æ–¹æ³•ï¼Œå®šä¹‰å¦‚ä¸‹ï¼šfunc (mux *ServeMux) HandleFunc(pattern string, handler func(ResponseWriter, *Request)) { mux.Handle(pattern, HandlerFunc(handler))}ä¸Šé¢ä»£ç å°†å¤–éƒ¨ä¼ å…¥çš„å‡½æ•° handler() è½¬ä¸º HandlerFunc ç±»å‹ï¼ŒHandlerFunc ç±»å‹å®ç°äº† Handler çš„ ServeHTTP æ–¹æ³•ï¼Œ åº•å±‚å¯ä»¥åŒæ—¶ä½¿ç”¨å„ç§ç±»å‹æ¥å®ç° Handler æ¥å£è¿›è¡Œå¤„ç†ã€‚ Goå¯å˜å‚æ•°å‡½æ•°è°ƒç”¨æ³¨æ„äº‹é¡¹ï¼ˆthree dotsï¼‰ è‹¥å°† string æ•°ç»„åˆ‡ç‰‡ï¼Œæ¯é¡¹ç‹¬è‡ªä¼ å…¥å‡½æ•°ï¼Œåˆ™ä¼šæ‰§è¡Œ[]T{arg1,arg2}ç­‰ç±»ä¼¼æ“ä½œï¼Œä»æ–°è¿›è¡Œåˆå§‹åŒ–ï¼› è‹¥å°† interface{} æ•°ç»„åˆ‡ç‰‡æ‰“æ•£åç›´æ¥ä¼ å…¥å‡½æ•°ï¼Œåˆ™ä¸å†è¿›è¡Œå¯¹è±¡çš„åˆ›å»ºï¼Œç›´æ¥è¯•ç”¨è¯¥å¯¹è±¡ï¼› Go â€¦ three dots ç”¨æ³•ï¼šå˜é•¿çš„å‡½æ•°å‚æ•°ï¼ˆé€ä¸€ä¼ å‚ç”¨æ³•ï¼‰è°ƒç”¨å‚æ•°æœ€åä¸€ä¸ªâ€¦Tï¼Œåœ¨å‚æ•°åˆ—è¡¨çš„æœ€åä½¿ç”¨è‹¥å¹²ä¸ªç±»å‹ä¸ºTçš„å‚æ•°ã€‚â€¦Tåœ¨å‡½æ•°å†…éƒ¨çš„ç±»å‹å®é™…æ˜¯[]T. è°ƒç”¨æ‹¥æœ‰å˜é•¿å‚æ•°åˆ—è¡¨çš„å‡½æ•°sliceç±»å‹å‚æ•°ä¸å¿…æ‹†åˆ†è°ƒç”¨ï¼Œç›´æ¥åœ¨sliceåè·Ÿâ€¦ æ ‡è¯†æ•°ç»„å…ƒç´ ä¸ªæ•°ä¾‹å¦‚[â€¦]int{1,2,3} Goå‘½ä»¤è¡Œä¸­çš„é€šé…ç¬¦æè¿°åŒ…æ–‡ä»¶çš„é€šé…ç¬¦ã€‚ä¼šæ‰§è¡Œå½“å‰ç›®å½•å’Œæ‰€æœ‰å­ç›®å½•çš„æ‰€æœ‰åŒ…ï¼š 12345go test ./...go run ./...go build ./..","link":"/4f443298.html"},{"title":"Proverbs from @rob_pike&#39;s inspiring talk at Gopherfest SV 2015 (video)","text":"Go Proverbs Simple, Poetic, Pithy Don't communicate by sharing memory, share memory by communicating. Concurrency is not parallelism. Channels orchestrate; mutexes serialize. The bigger the interface, the weaker the abstraction. Make the zero value useful. interface{} says nothing. Gofmt's style is no one's favorite, yet gofmt is everyone's favorite. A little copying is better than a little dependency. Syscall must always be guarded with build tags. Cgo must always be guarded with build tags. Cgo is not Go. With the unsafe package there are no guarantees. Clear is better than clever. Reflection is never clear. Errors are values. Don't just check errors, handle them gracefully. Design the architecture, name the components, document the details. Documentation is for users. Don't panic. Proverbs from @rob_pike's inspiring talk at Gopherfest SV 2015 (video). The Gopher character is based on the Go mascot designed by RenÃ©e French and copyrighted under the Creative Commons Attribution 3.0 license. These proverbs are the basis of a talk by Rob Pike and the list may be updated when he next gives the talk. Please read the contribution guidelines before opening an issue to nominate a new proverb.","link":"/5978836a.html"},{"title":"Jaco Liu Golang personal summary combing notes","text":"Jaco Liu Golang personal summary combing notesJaco Liu Golang personal summary notes GoJaco Liu contact Item Contact Author Jaco Liu Email ljqlab@163.com WeChat laulinux QQ 404691073 Blog https://www.wdft.com I love Goï¼ŒSimple, efficient, practical, engineered â€¦The world of programming should be pluralistic, free from any one mindset.EN English DocumentsEnglish Documents zh_CN ä¸­æ–‡README_CN","link":"/5767103d.html"},{"title":"Go:goroutine","text":"goroutineGolangä¸ä½¿ç”¨OSå±‚processè€Œä½¿ç”¨è¯­è¨€å±‚é¢ï¼ˆGoroutineï¼‰å¤„ç† å¹¶å‘ &amp; å¹¶è¡Œ Taskä»»åŠ¡æ–¹æ¡ˆ(é’ˆå¯¹ä¸šåŠ¡æ¥è¯´)çš„ä¸ªäººæ€è€ƒå’Œå®è·µæ€è·¯éšæƒ³ â€”Jaco Liu ç§‹1.ä½¿ç”¨OSå±‚é¢è¿›ç¨‹ç®¡ç†ï¼Œè™½ç„¶æˆæœ¬ä½å»‰å¿«æ·ï¼Œä½†å¯¹CPUçš„æ€§èƒ½å¼€é”€æ¯”è¾ƒå¤§ï¼ŒGolangé€šè¿‡Goroutineçš„å¼•å…¥ï¼Œæ„å»ºä¸€ç§SandBoxæ²™ç®±å®¹å™¨å¼çš„æ–¹æ¡ˆï¼Œå¯ä»¥å°†å¹¶å‘å¤„ç†ä»»åŠ¡æ”¾åœ¨è¯­è¨€å±‚é¢å†…éƒ¨ï¼Œâ€œéš”ç¦»â€œåœ¨ç³»ç»Ÿå±‚é¢ä¹‹ä¸Šï¼Œæ„å»ºGoroutineæ± çš„åŒæ—¶ï¼Œä¹Ÿèƒ½ä¿è¯åœ¨æ€§èƒ½å¯é çš„å‰æä¸‹ï¼Œå®‰å…¨æ€§ä¹Ÿå¢å¼ºã€‚ ç›®å‰å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ•´ä½“æ–¹å‘ï¼Œå¤§éƒ¨åˆ†ä¹Ÿéƒ½æ˜¯å»ºç«‹åœ¨OSç³»ç»Ÿå±‚ä¹‹ä¸Š(è€Œéç³»ç»Ÿå±‚é¢)ä»¥è¾¾åˆ°å¯æ§çš„æ ‡å‡†æ§åˆ¶ï¼Œå°†OSç³»ç»Ÿçº§å†…æ ¸CPUçš„å¼€é”€é™åˆ°æœ€ä½ä¿è¯OSå±‚æµç•…è¿è¡Œï¼Œè¿™ä¹Ÿè®©Linuxä¸ºä»£è¡¨çš„æœåŠ¡å™¨OSç³»ç»Ÿæ›´â€œä¸“æ³¨â€åšBaseåº•å±‚åŸºç¡€æ€§çš„ä¸šåŠ¡æ”¯æ’‘ã€‚ 2.ç³»ç»Ÿå±‚é¢ä¸Šï¼ŒæŠ›å¼€ç¼–ç¨‹è¯­è¨€å±‚é¢ä¸è°ˆï¼ŒæœåŠ¡ç«¯è¶Šæ¥è¶Šè¶‹äºServiceæœåŠ¡åŒ–å’Œåˆ†å¸ƒå¼ã€é›†ç¾¤åŒ–ï¼Œä»¥æ­¤åº”å¯¹è¶Šæ¥è¶Šå¤æ‚çš„ä¸šåŠ¡ã€‚ç°æœ‰ç¼–ç¨‹è¯­è¨€å†å²é—ç•™å’Œç”Ÿæ€ç¯å¢ƒç­‰å› ç´ å¤„ç†çš„æˆæœ¬è¾ƒé«˜ï¼Œé’ˆå¯¹å¤šæ ¸CPUä½¿ç”¨ç‡ä¹Ÿä¸é«˜ï¼Œæ€§èƒ½é—®é¢˜å‡¸æ˜¾ã€‚Golangåœ¨æœåŠ¡å™¨ç«¯çš„ä¼˜åŠ¿åœ¨äºï¼Œéå¸¸ä½æˆæœ¬å°†å¼€å‘äººå‘˜ä»ä»¥å‰çš„å•è¿›ç¨‹ç±»ç¼–ç¨‹è¯­è¨€ä¸­è§£æ”¾ï¼Œæä¾›æœ€ä½æˆæœ¬å¿«é€Ÿè½¬å˜ä¸ºå¹¶è¡Œç¼–ç¨‹çš„æ€ç»´æ¨¡å¼ã€‚Goroutineå¹¶å‘æ‰§è¡Œçš„æ¨¡å¼ï¼Œä¸æ”¾åœ¨ç³»ç»Ÿè¿›ç¨‹å¤„ç†ï¼Œå¥½å¤„ï¼šï¼ˆ1ï¼‰.å®‰å…¨éš”ç¦»å‹è®¾è®¡ï¼Œé™åˆ¶è¿›ç¨‹ä¸­Task Processå¤„ç†çš„è¾¹ç•Œï¼Œåœ¨å¤§è§„æ¨¡é›†ç¾¤æœåŠ¡å™¨ä¸­ä½¿ç”¨ç›¸å¯¹ç»Ÿä¸€çš„æ ‡å‡†å¤„ç†æ–¹å¼ï¼Œæœ€å¤§é™åº¦è§„é¿OSå±‚é¢çš„å·®å¼‚å¸¦æ¥çš„é—®é¢˜ï¼›ï¼ˆ2ï¼‰.é™ä½OSè¿›ç¨‹çš„å¼€é”€ï¼Œä¸å› golangçš„æ‰§è¡Œå¯¼è‡´æ‹–ç´¯ç³»ç»ŸCPUèµ„æºï¼›ï¼ˆ3ï¼‰.å¹¶å‘Taskä»»åŠ¡è¡Œä¸ºå’ŒçŠ¶æ€å¯æ§ï¼Œå†…å­˜å ç”¨å¼€é”€å°ï¼Œå®¹é‡è‡ªç”±æ‰©å±•ï¼›ï¼ˆ4ï¼‰.è½»é‡çº§åœ¨åç¨‹å¤„ç†æ—¶å¯é æ€§é«˜ï¼›ï¼ˆ5ï¼‰.ä½¿ç”¨è¿™ç§æœºåˆ¶ï¼Œå¯ä»¥è¾ƒä½æˆæœ¬æ„å»ºå¤§å‹å’Œå¯ä¼¸ç¼©è®¡ç®—å’Œæ‰¹å¤„ç†Taskä»»åŠ¡çš„åº”ç”¨å’Œç¨‹åºï¼Œä¸€å¼€å§‹Golangçš„å®šä½å°±æ˜¯ç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€ï¼Œæ‰€ä»¥äºŒè¿›åˆ¶çš„è¿è¡Œæ€§èƒ½ä¸ä¼šå·®ï¼Œç°é˜¶æ®µçš„è¯­è¨€æ€§èƒ½ä¹‹äº‰æ¯«æ— æ„ä¹‰ã€‚ ç›®å‰ä¸šå†…é’ˆå¯¹ä¸šåŠ¡å¤„ç†çš„å¤§å‹ç³»ç»Ÿåº”ç”¨çš„å¸¸æ€åº”è¯¥è‡³å°‘åŒ…å«ä¸¤ç‚¹ï¼š1.æ”¯æŒæœ€å°æˆæœ¬ç»„ç»‡å¤§è§„æ¨¡æ•°æ®å’Œè®¡ç®—å¤„ç†ï¼›2.Taskä»»åŠ¡çš„è¡Œä¸ºå’ŒçŠ¶æ€èƒ½å¤Ÿå¯é ã€ä½æˆæœ¬å¯æ§ã€‚ äº‘è®¡ç®—è¿½æ±‚å¯¹æœåŠ¡ç«¯åœ¨å®‰å…¨å¯æ§çš„å‰æä¸‹è½¯ç¡¬ä»¶èµ„æºçš„æœ€ä½æˆæœ¬é…ç½®å’Œæœ€ä½³çš„èµ„æºè°ƒåº¦ï¼Œåšçš„æ‰€æœ‰åˆ†å¸ƒå¼ã€è‡ªç”±ä¼¸ç¼©ã€é›†ç¾¤çš„é‡è¦åŸå› ä¹Ÿæ˜¯æºä¸ºæ­¤ï¼ŒGoroutinesåœ¨è¿™æ–¹é¢å¤§æœ‰å¯ä¸ºã€‚ å®˜æ–¹ä¸€å¥è¯è¯´å¾—æ¯”è¾ƒç›´ç™½å’Œä»£è¡¨æ€§ï¼šDo not communicate by sharing memory; instead, share memory by communicating.ä¸è¦é€šè¿‡å…±äº«å†…å­˜è¿›è¡Œé€šä¿¡ï¼Œè€Œæ˜¯é€šè¿‡é€šä¿¡å…±äº«å†…å­˜ã€‚ æ˜ç¡®å¹¶å‘å’Œå¹¶è¡Œçš„ä¸¤ä¸ªæ¦‚å¿µï¼šå¹¶å‘ä¸æ˜¯å¹¶è¡Œï¼šå¹¶å‘æ˜¯ç”±åˆ‡æ¢æ—¶é—´æ¥å®ç°â€œåŒæ—¶â€è¿è¡Œï¼Œå¹¶è¡Œæ˜¯å¤šæ ¸å¤šçº¿ç¨‹goroutine é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜ï¼Œè€Œä¸æ˜¯å…±äº«å†…å­˜æ¥é€šä¿¡ã€‚è¿™æ ·å°±å¯ä»¥è¾ƒä¸ºå……åˆ†åˆ©ç”¨å¤šæ ¸CPUå’Œå†…å­˜èµ„æºçš„åŒæ—¶ï¼Œåˆç›¸å¯¹æ¯”è¾ƒå¯é ï¼Œâ€åç¨‹â€ä¹Ÿæ˜¯ç±»ä¼¼ç§â€ç®¡é“â€çš„æ€ç»´æ¨¡å¼ï¼Œåœ¨è¿™é‡Œï¼Œé€šä¿¡æ˜¾å¾—æ¯”è¾ƒé‡è¦ï¼Œè¿™äº›Golangå·²ç»åšäº†åº•å±‚åŒ–å®ç°ï¼Œå¯¹å¼€å‘è€…æ¥è¯´æ¯”è¾ƒç®€ä¾¿ä¸€äº›ï¼Œå¤§éƒ¨åˆ†ç²¾åŠ›æ”¾åœ¨ç®¡ç†å¥½è¿™äº›é˜€é—¨å‡ºå…¥å£å³å¯ã€‚Linuxçš„ç®¡é“æ˜¯éå¸¸ä¼˜ç§€çš„è®¾è®¡ã€‚ è¿™ä¸ªåº”è¯¥ä¸æ˜¯è¯´ä»¥å‰çš„æ–¹æ¡ˆæˆ–å…¶ä»–è¯­è¨€å¤„ç†æ€è·¯æ˜¯é”™è¯¯ã€ä¸ä½³æˆ–æœ‰åå·®çš„ï¼Œå†å²ä¸Šå¾ˆå¤šæ–¹æ¡ˆå¾€å¾€å—åˆ¶äºç¡¬ä»¶çš„è¿ç®—æ€§èƒ½ç»¼åˆå› ç´ è€ƒè™‘ï¼Œæ˜¯å½“æ—¶æƒè¡¡ä¸‹æ¥çš„æœ€å¥½çš„æ–¹æ¡ˆï¼Œæ¯”å¦‚ç¡¬ä»¶æˆæœ¬å¤ªé«˜ç­‰ï¼Œç°åœ¨éšç€è½¯ç¡¬ä»¶çš„å¿«é€Ÿå‘å±•å’Œæˆæœ¬ä½å»‰æœ‰è¿™ä¸ªæ¡ä»¶æ¥åšè¿™ä¸ªäº‹æƒ…äº†ã€‚ç»ˆå½’æ˜¯æœ‰å½“æ—¶åŸºäºç°å®æƒ…å†µçš„å„ç§å› ç´ è€ƒé‡ã€‚æ— è®ºæ€§èƒ½å†æ€ä¹ˆå¿«ï¼Œå¿…é¡»æŠŠå¯é æ€§æ”¾åœ¨é‡è¦ä½ç½®ï¼Œä¸€ä¸ªç›¸å¯¹ä¸å¯é çš„æ–¹æ¡ˆï¼Œç¨‹åºè¿è¡Œé€Ÿåº¦å†å¿«å°†æ¯«æ— æ„ä¹‰ï¼Œæˆ‘æƒ³è¿™æ˜¯Golangä»è½¯ä»¶å·¥ç¨‹åŒ–è€ƒè™‘çš„é‡è¦è€ƒé‡å§ã€‚ Golangè®¾è®¡å“²å­¦å’ŒUnixåº”è¯¥æ˜¯ä¸€è‡´çš„ï¼šå¤§é“è‡³ç®€ï¼Œâ€œç®€â€æ˜¯å¯¹å¤§è§„æ¨¡å·¥ç¨‹åŒ–ç³»ç»Ÿå¼€å‘ä¸­æœ€å¥½çš„æ€è€ƒèŒƒç•´ï¼Œè™½ä¸‡å˜ä»ä¸ç¦»å…¶å®—ã€‚ å¹¶å‘&amp;å¹¶è¡Œçš„ç¼–ç¨‹ç†å¿µå¯¹å¼€å‘äººå‘˜æ¥è¯´æ˜¯æœªæ¥ç¼–ç¨‹æ€ç»´çš„å¸¸æ€ï¼Œäº‹ç‰©å‘å±•çš„è§„å¾‹ã€‚ è‡³å°‘åœ¨å…¬å¸äº§å“å’Œé¡¹ç›®å¼€å‘ä¸­ï¼ŒGolangè‡³å°‘æ˜¯æœªæ¥ä¸»åŠ›çš„è¯­è¨€ï¼Œå› ä¸ºéšç€æ•°æ®çš„ä¸æ–­å¢é•¿ï¼Œå¿…é¡»è¦ä¸€ç§ä»æ€§èƒ½ä¸Šï¼Œå¯é æ€§ä¸Šå’Œå¼€å‘ä¸Šç›¸å¯¹æœ€åˆé€‚çš„æŠ€æœ¯é€‰å‹ï¼ŒGolangæ˜¯å¾ˆç¬¦åˆè¿™ä¸€ç‚¹çš„ï¼ŒGolangä¸åªæ˜¯ä¸€ä¸ªç®€å•çš„ç¼–ç¨‹è¯­è¨€è¿™ä¹ˆç®€å•ã€‚Cç³»çš„å¼€å‘è¯­è¨€ç»ä¹…ä¸è¡°å¾ˆé‡è¦çš„åŸå› å°±æ˜¯è¿½æ±‚ç”¨æœ€ç®€å•çš„æ–¹å¼è§£å†³ç°å®é—®é¢˜ï¼ŒGolangæ˜¯æœªæ¥è€ƒè™‘çš„ä¸»åŠ›å¼€å‘è¯­è¨€ã€‚ ä¸ªäººå®è·µæ€è·¯ç¤ºæ„ï¼š â€”â€”â€” Jaco Liu ç§‹ Dateï¼š2017-05-30","link":"/6480b1cd.html"},{"title":"Go:init()","text":"init()init()å‡½æ•°ç‰¹æ€§ init()åœ¨mainåŒ…æ‰§è¡Œä¹‹å‰ init()è‡ªåŠ¨æ‰§è¡Œ,ä¸èƒ½æ˜¾ç¤ºè°ƒç”¨ åŒä¸€ä¸ªGoæ–‡ä»¶ä¸­å¯å®šä¹‰å¤šä¸ªinit()å‡½æ•°ï¼Œé¡ºåºæ‰§è¡Œ åŒä¸€ä¸ªpackageä¸­ä¸åŒæ–‡ä»¶ï¼Œå°†æ–‡ä»¶åæŒ‰å­—ç¬¦ä¸²è¿›è¡Œå­—æ¯å’Œæ•°å­—è‡ªç„¶æ’åºï¼Œä¹‹åé¡ºåºè°ƒç”¨å„æ–‡ä»¶ä¸­çš„init() importå¯¼å…¥ï¼š å­—ç¬¦ _ (ä¸‹åˆ’çº¿)æ“ä½œï¼Œæœ¬è´¨æ˜¯å¼•å…¥packageä¸”ä¸ç›´æ¥ä½¿ç”¨å†…éƒ¨å‡½æ•°ï¼Œä»…ä»…è°ƒç”¨init()åˆå§‹åŒ– æŒ‰ç…§importå¯¼å…¥é¡ºåºè°ƒç”¨åŒ…ä¸­init() packageçš„init()åœ¨è¢«å¼•ç”¨æ—¶è‡ªåŠ¨è¢«è°ƒç”¨ packageå­˜åœ¨ä¾èµ–ï¼Œè°ƒç”¨é¡ºåºä¸ºæœ€åè¢«ä¾èµ–çš„æœ€å…ˆè¢«æ‰§è¡Œåˆå§‹åŒ– packageè¢«å…¶ä»–å¤šä¸ªåŒ…importï¼Œåªèƒ½è¢«åˆå§‹åŒ–ä¸€æ¬¡","link":"/5ae2eb16.html"},{"title":"Go:interfaceåŸç†è¯¦è§£-æ¥å£ç”±ä½¿ç”¨è€…å®šä¹‰ï¼Œè€Œä¸æ˜¯ç”±å®ç°è€…å®šä¹‰ã€‚","text":"æ¥å£è®¾è®¡æ¨¡å¼çš„å¸¸è§ç–‘æƒ‘Golangæ¥å£ç”±ä½¿ç”¨è€…å®šä¹‰ï¼Œè€Œä¸æ˜¯ç”±å®ç°è€…å®šä¹‰ã€‚å¼€å‘å¸¸è§çš„ç–‘æƒ‘ï¼šâ€œå¦‚æœæ¥å£æ˜¯ä½¿ç”¨è€…å®šä¹‰çš„ï¼Œé‚£ä½¿ç”¨è€…æ€ä¹ˆçŸ¥é“å®ç°è€…æœ‰æ²¡æœ‰é‚£ä¸ªæ–¹æ³•ï¼Ÿä¼šä¸ä¼šçŒœé”™ï¼Ÿæ˜¯ä¸æ˜¯åè€Œæ›´éš¾ç”¨äº†ï¼Ÿâ€ è¿™ä¸ªé—®é¢˜æ˜¯å¾ˆå¤šäººçš„å›°æƒ‘ï¼Œè€Œä¸”è§¦åŠäº† Go æ¥å£è®¾è®¡å“²å­¦ä¸­æœ€å®¹æ˜“è®©äººå›°æƒ‘çš„æ ¸å¿ƒçŸ›ç›¾ï¼š â€œå¦‚æœæ¥å£æ˜¯ä½¿ç”¨è€…å®šä¹‰çš„ï¼Œé‚£ä½¿ç”¨è€…æ€ä¹ˆçŸ¥é“å®ç°è€…æœ‰æ²¡æœ‰é‚£ä¸ªæ–¹æ³•ï¼Ÿä¼šä¸ä¼šçŒœé”™ï¼Ÿæ˜¯ä¸æ˜¯åè€Œæ›´éš¾ç”¨äº†ï¼Ÿâ€ æˆ‘ä»¬æ¥ä¸€å±‚å±‚æ‹†è§£è¿™ä¸ªç–‘é—®ï¼Œä½ ä¼šå‘ç°ï¼šGo çš„è®¾è®¡å…¶å®ä¸æ˜¯â€œè®©ä½¿ç”¨è€…å»çŒœâ€ï¼Œè€Œæ˜¯â€œè®©èƒ½åŠ›è‡ªç„¶æš´éœ²â€ã€‚ â“ é—®é¢˜æœ¬è´¨ï¼šä½¿ç”¨è€…çœŸçš„éœ€è¦â€œçŒœâ€å—ï¼Ÿä¸éœ€è¦ã€‚ åœ¨ Go ä¸­ï¼Œæ¥å£ä¸æ˜¯å‡­ç©ºå®šä¹‰çš„ï¼Œè€Œæ˜¯åŸºäºå·²æœ‰çš„æ–¹æ³•è¡Œä¸ºæ¥å®šä¹‰çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šä½ å…ˆçœ‹åˆ°æŸä¸ªç±»å‹æœ‰ ToString() æ–¹æ³•ï¼Œç„¶åä½ æ‰å®šä¹‰ Stringable æ¥å£ï¼Œè€Œä¸æ˜¯åè¿‡æ¥ã€‚ ä¸¾ä¸ªå®é™…å¼€å‘åœºæ™¯ï¼šä½ æ­£åœ¨ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚ï¼š 12type Config struct { ... }func (c Config) String() string { return &quot;...&quot; } ä½ æƒ³å†™ä¸€ä¸ªé€šç”¨æ—¥å¿—å‡½æ•°ï¼Œèƒ½æ‰“å°ä»»ä½•â€œèƒ½è½¬æˆå­—ç¬¦ä¸²â€çš„å¯¹è±¡ã€‚ ä½ çœ‹åˆ° Config æœ‰ String() æ–¹æ³•ï¼ˆé€šè¿‡æ–‡æ¡£ã€IDE æç¤ºã€æºç ï¼‰ï¼Œäºæ˜¯ä½ å†™ï¼š 1234567type Loggable interface { String() string // æ³¨æ„ï¼šåå­—å’Œç¬¬ä¸‰æ–¹åº“ä¸€è‡´ï¼}func Log(l Loggable) { fmt.Println(l.String())} âœ… ä½ ä¸æ˜¯åœ¨â€œçŒœâ€ï¼Œè€Œæ˜¯åœ¨è§‚å¯Ÿå·²æœ‰è¡Œä¸ºåï¼Œæç‚¼å‡ºå…±æ€§ã€‚ ğŸ†š å’Œ Java çš„å¯¹æ¯”ï¼šè°æ›´â€œåäººç±»â€ï¼Ÿ Java Go æ¥å£å®šä¹‰æ—¶æœº å®ç°è€…æå‰å®šä¹‰æ¥å£ï¼ˆimplementsï¼‰ ä½¿ç”¨è€…æŒ‰éœ€å®šä¹‰æ¥å£ï¼ˆéšå¼æ»¡è¶³ï¼‰ è€¦åˆæ€§ å®ç°è€…å¿…é¡»çŸ¥é“æ¥å£å­˜åœ¨ å®ç°è€…å®Œå…¨ä¸çŸ¥é“æ¥å£å­˜åœ¨ æ‰©å±•æ€§ æ— æ³•è®©ç¬¬ä¸‰æ–¹ç±»å®ç°ä½ çš„æ¥å£ ä»»ä½•æœ‰å¯¹åº”æ–¹æ³•çš„ç±»å‹è‡ªåŠ¨â€œå®ç°â€ä½ çš„æ¥å£ å¿ƒæ™ºè´Ÿæ‹… å®ç°è€…è¦è§„åˆ’æ¥å£ ä½¿ç”¨è€…åªéœ€è§‚å¯Ÿæ–¹æ³•ç­¾å ğŸ‘‰ Go æŠŠâ€œæŠ½è±¡â€çš„æƒåŠ›äº¤ç»™äº†æœ€éœ€è¦å®ƒçš„äººâ€”â€”ä½¿ç”¨è€…ã€‚è€Œ Java æŠŠâ€œå¥‘çº¦â€çš„è´£ä»»å‹ç»™äº†å®ç°è€…ã€‚ ğŸ¤” é‚£å¦‚æœæ–¹æ³•åä¸ä¸€æ ·æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚æœ‰äººç”¨ ToString()ï¼Œæœ‰äººç”¨ String()ï¼Ÿè¿™ç¡®å®æ˜¯ç°å®é—®é¢˜ï¼Œä½† Go çš„è§£æ³•æ˜¯ï¼š æ ‡å‡†åº“å’Œç¤¾åŒºçº¦å®šä¼˜å…ˆï¼Œå°æ¥å£é™ä½å†²çª æ¯”å¦‚ï¼š Go æ ‡å‡†åº“ä¸­ï¼Œå‡ ä¹æ‰€æœ‰ç±»å‹å¦‚æœè¦è½¬å­—ç¬¦ä¸²ï¼Œéƒ½å®ç° String() stringï¼ˆè¿™æ˜¯ fmt åŒ…çº¦å®šçš„ï¼‰ æ‰€ä»¥ä½ å®šä¹‰æ¥å£æ—¶ï¼Œç›´æ¥ç”¨ String() stringï¼Œå°±èƒ½å…¼å®¹å¤§é‡ç±»å‹ å¦‚æœæŸä¸ªç±»å‹ç”¨äº† ToString()ï¼Œä½ å¯ä»¥ï¼š è‡ªå·±åŒ…ä¸€å±‚é€‚é…å™¨ï¼ˆwrapperï¼‰ æˆ–è€…å°±åˆ«å¼ºæ±‚ç»Ÿä¸€ï¼Œç›´æ¥è°ƒç”¨å®ƒçš„æ–¹æ³• Go ä¸è¿½æ±‚â€œä¸‡ç‰©å½’ä¸€â€ï¼Œè€Œæ˜¯â€œæŒ‰éœ€ç»„åˆâ€ã€‚ ğŸ’¡ å…³é”®è®¤çŸ¥è½¬å˜ï¼š Go çš„æ¥å£ä¸æ˜¯â€œè®¾è®¡å¥‘çº¦â€ï¼Œè€Œæ˜¯â€œè¡Œä¸ºåŒ¹é…â€ã€‚ ä½ ä¸æ˜¯åœ¨â€œçŒœæµ‹å®ç°è€…æœ‰ä»€ä¹ˆæ¥å£â€ï¼Œè€Œæ˜¯åœ¨è¯´ï¼š â€œæˆ‘éœ€è¦ä¸€ä¸ªæœ‰ Xxx() Yyy æ–¹æ³•çš„å¯¹è±¡ï¼Œä¸ç®¡å®ƒæ˜¯è°ï¼Œåªè¦å®ƒæœ‰ï¼Œæˆ‘å°±ç”¨ã€‚â€ è¿™å°±åƒä½ å»ç§Ÿæˆ¿å­ï¼Œä¸ä¼šè¯´â€œä½ å¿…é¡»æ˜¯â€˜æ­£è§„æˆ¿ä¸œæ¥å£â€™çš„å®ç°ç±»â€ï¼Œè€Œæ˜¯è¯´ï¼š â€œåªè¦ä½ æœ‰æˆ¿äº§è¯ã€èƒ½ç­¾åˆåŒã€èƒ½æ”¶ç§Ÿï¼Œæˆ‘å°±ç§Ÿä½ çš„æˆ¿ã€‚â€â€”â€”ä¸ç®¡ä½ æ˜¯ä¸ªäººæˆ¿ä¸œã€ä¸­ä»‹ã€è¿˜æ˜¯ Airbnbã€‚ âœ… ä¸¾ä¸ªæç«¯ä½†çœŸå®çš„ä¾‹å­ï¼šæ ‡å‡†åº“ io.Reader123type Reader interface { Read(p []byte) (n int, err error)} è¿™ä¸ªæ¥å£æ˜¯ Go æ ‡å‡†åº“å®šä¹‰çš„ï¼ˆä½¿ç”¨è€…è§†è§’ï¼‰ï¼Œä½†æˆåƒä¸Šä¸‡çš„ç±»å‹éƒ½â€œè‡ªåŠ¨å®ç°â€äº†å®ƒï¼š os.File bytes.Buffer net.Conn strings.Reader ç”šè‡³ä½ è‡ªå·±å†™çš„ MyCustomStream è¿™äº›ç±»å‹çš„ä½œè€…åœ¨å†™ä»£ç æ—¶å¯èƒ½æ ¹æœ¬æ²¡çœ‹è¿‡ io.Reader çš„å®šä¹‰ï¼Œä½†ä»–ä»¬æä¾›äº† Read([]byte) (int, error) æ–¹æ³•ï¼Œäºæ˜¯å°±èƒ½è¢« io.Copyã€ioutil.ReadAll ç­‰å‡½æ•°ä½¿ç”¨ã€‚ ğŸ‘‰ è¿™å°±æ˜¯â€œä½¿ç”¨è€…å®šä¹‰æ¥å£â€çš„å¨åŠ›ï¼šæ— éœ€åè°ƒï¼Œè‡ªç„¶å…¼å®¹ã€‚ ğŸ§  æœ€åæ€»ç»“ï¼šä¸ºä»€ä¹ˆä½ è§‰å¾—â€œæ›´å¤æ‚â€ï¼Ÿå› ä¸ºä½ å¯èƒ½è¿˜åœ¨ç”¨ â€œé¢å‘æ¥å£è®¾è®¡â€ çš„æ€ç»´ï¼ˆåƒ Java é‚£æ ·ï¼‰ï¼Œè€Œ Go æ˜¯ â€œé¢å‘è¡Œä¸ºç»„åˆâ€ã€‚ ä¸è¦ä¸€å¼€å§‹å°±å®šä¹‰æ¥å£ å…ˆå†™å…·ä½“ç±»å‹å’Œæ–¹æ³• å½“å¤šä¸ªåœ°æ–¹å‡ºç°é‡å¤é€»è¾‘æ—¶ï¼Œå†æç‚¼æ¥å£ æ¥å£åªä¸ºå½“å‰ä½¿ç”¨åœºæ™¯æœåŠ¡ï¼Œè¶Šå°è¶Šå¥½ Go çš„å“²å­¦æ˜¯ï¼šâ€œIf it walks like a duck and quacks like a duck, itâ€™s a duck.â€ï¼ˆèµ°èµ·æ¥åƒé¸­å­ï¼Œå«èµ·æ¥åƒé¸­å­ï¼Œå®ƒå°±æ˜¯é¸­å­ã€‚ï¼‰ ä½ ä¸éœ€è¦é¸­å­â€œå£°æ˜è‡ªå·±æ˜¯é¸­å­â€ï¼Œä½ åªéœ€è¦å®ƒè¡¨ç°å‡ºé¸­å­çš„è¡Œä¸ºã€‚ å¦‚æœä½ è¿˜æ˜¯è§‰å¾—åˆ«æ‰­ï¼Œé‚£å¾ˆæ­£å¸¸â€”â€”è¿™æ˜¯ä»â€œæ˜¾å¼å¥‘çº¦â€åˆ°â€œéšå¼èƒ½åŠ›â€çš„æ€ç»´åˆ‡æ¢ã€‚ä½†ä¸€æ—¦ä½ åœ¨ä¸€ä¸ªçœŸå®é¡¹ç›®ä¸­é‡åˆ°â€œéœ€è¦ç»Ÿä¸€å¤„ç†å¤šä¸ªç¬¬ä¸‰æ–¹ç±»å‹â€çš„åœºæ™¯ï¼Œä½ å°±ä¼šå‘ç° Go è¿™ç§æ–¹å¼æå…¶çµæ´»ã€æå…¶è§£è€¦ã€‚ ä¸ºä»€ä¹ˆè¯´è¿™æ˜¯â€œGo çš„ç²¾é«“â€ï¼Ÿè§£è€¦ï¼šå®ç°è€…ä¸éœ€è¦çŸ¥é“è°ä¼šç”¨å®ƒï¼Œä½¿ç”¨è€…ä¹Ÿä¸éœ€è¦ä¿®æ”¹å®ç°è€…çš„ä»£ç ã€‚çµæ´»ï¼šä½ å¯ä»¥ç»™ä»»ä½•å·²æœ‰ç±»å‹ï¼ˆåŒ…æ‹¬æ ‡å‡†åº“ç±»å‹ï¼‰â€œèµ‹äºˆâ€æ¥å£èƒ½åŠ›ï¼Œåªè¦å®ƒæœ‰å¯¹åº”æ–¹æ³•ã€‚å°è€Œä¸“ï¼šGo é¼“åŠ±å®šä¹‰å°æ¥å£ï¼ˆæ¯”å¦‚ io.Reader åªæœ‰ä¸€ä¸ª Read() æ–¹æ³•ï¼‰ï¼Œç”¨çš„æ—¶å€™æŒ‰éœ€ç»„åˆã€‚ å®é™…ä¸Š Go æ ‡å‡†åº“å°±æ˜¯è¿™ä¹ˆå¹²çš„ï¼æ¯”å¦‚ io.Copy(dst Writer, src Reader) ä¸­çš„ Writer å’Œ Reader æ¥å£ï¼Œæ˜¯æ ‡å‡†åº“å®šä¹‰çš„ï¼Œä½†æˆåƒä¸Šä¸‡çš„ç±»å‹ï¼ˆæ–‡ä»¶ã€ç½‘ç»œè¿æ¥ã€buffer ç­‰ï¼‰éƒ½â€œè‡ªåŠ¨â€å®ç°äº†å®ƒä»¬ï¼Œè€Œå®ƒä»¬çš„ä½œè€…æ ¹æœ¬æ²¡çœ‹è¿‡ io åŒ…çš„æºç ã€‚ Golangçš„interfaceè®¾è®¡é™æ€ç¼–è¯‘è¯­è¨€çš„ç±»å‹å®‰å…¨ã€ç±»ä¼¼åŠ¨æ€è¯­è¨€çš„çµæ´»æ€§ä»¥åŠç»„ä»¶é—´çš„è§£è€¦ä¸‰è€…ä¹‹é—´å–å¾—äº†ç²¾å¦™çš„å¹³è¡¡ã€‚è¿™ç§å¹³è¡¡æ­£æ˜¯ Go è¯­è¨€â€œåŠ¡å®â€å“²å­¦çš„ä½“ç°ï¼Œå·¥ç¨‹å®è·µçš„ä»·å€¼ã€‚è¦çŸ¥é“åœ¨æ­¤ä¹‹å‰ï¼Œæƒ³åšåˆ°â€œé™â€å’Œâ€œåŠ¨â€çš„ç»“åˆï¼Œå¾ˆå¤šè§£å†³æ–¹æ¡ˆéƒ½å­˜åœ¨é—®é¢˜å› ä¸ºå¼•å…¥è¿‡å¤šçš„ä¸­é—´å±‚æœ€åè¢«æ”¾å¼ƒï¼ŒGoä¸æ˜¯æœ€å®Œç¾çš„ï¼Œä½†æ˜¯ç›¸å¯¹å®ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œä¸”Goè¯­è¨€çš„é™æ€ç±»å‹æ£€æŸ¥ã€ç¼–è¯‘ã€è¿è¡Œé€Ÿåº¦éå¸¸é«˜æ•ˆï¼Œè¯´interfaceæ˜¯Goè¯­è¨€çš„â€œçµé­‚â€â€œ ä¹‹ä¸€ä¸å¤¸å¼ ã€‚","link":"/82c2ce4a.html"},{"title":"Go:interface","text":"interface æ¥å£goï¼šinterface{}ã€æ–­è¨€ä¸ç±»å‹è½¬æ¢ Goçš„æ¥å£æ›´å¤§çš„ä½œç”¨æ˜¯å£°æ˜æ–¹æ³•é›†åˆï¼Œè€Œéç±»å‹çº¦æŸã€‚ interface{}å¯ç”¨äºå‘å‡½æ•°ä¼ é€’ä»»æ„ç±»å‹çš„å˜é‡ï¼Œä½†å¯¹äºå‡½æ•°å†…éƒ¨ï¼Œè¯¥å˜é‡ä»ç„¶ä¸ºinterface{}ç±»å‹ï¼ˆç©ºæ¥å£ç±»å‹ï¼‰ï¼Œæ•…å¿…é¡»è¿›è¡Œç±»å‹æ–­è¨€ç¡®è®¤ç±»å‹åæ£€æŸ¥æ‰èƒ½ä½¿ç”¨ï¼ˆä¸èƒ½ç›´æ¥éšå¼è½¬æ¢ï¼‰ã€‚ æ¥å£ç±»å‹å‘æ™®é€šç±»å‹çš„è½¬æ¢ç§°ä¸ºç±»å‹æ–­è¨€(è¿è¡ŒæœŸç¡®å®š)ã€‚ æ¥å£è½¬æ¢åŸºæœ¬åŸåˆ™ æ™®é€šç±»å‹ =ã€‹ æ¥å£ç±»å‹ï¼šç¼–è¯‘å™¨è¿è¡Œæ—¶éšå¼è½¬æ¢ã€‚ æ¥å£ç±»å‹ =ã€‹æ™®é€šç±»å‹ï¼šå¿…é¡»æ˜¾å¼ç±»å‹æ–­è¨€ã€‚ è¶…é›†å’Œå­é›†è½¬æ¢å…³ç³»ï¼šè¶…è½¬å­å¯ä»¥ï¼Œå­è½¬è¶…ä¸å¯ä»¥ã€‚ æ–­è¨€æ¨èæ–¹å¼ï¼š1234567b,ok:=a.([]int)if ok{ ...}//æ–­è¨€å¤±è´¥åœ¨ç¼–è¯‘é˜¶æ®µä¸ä¼šæŠ¥é”™ï¼Œæ•…å¾ˆå¯èƒ½å‡ºç°æ–­è¨€å¤±è´¥å¯¼è‡´è¿è¡Œé”™è¯¯ã€‚ 1.æ–­è¨€çš„ä½œç”¨ï¼šä½¿ç”¨interface{}æ—¶ï¼Œè§£å†³ç©ºæ¥å£ç±»å‹å‘æ™®é€šç±»å‹è½¬æ¢çš„ç±»å‹è½¬æ¢é—®é¢˜ï¼› 2.æ™®é€šç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œä½¿ç”¨æ˜¾å¼çš„ç±»å‹è½¬æ¢ï¼Œå¦åˆ™åæœä¸¥é‡ä¸å¯æ§ã€‚ interfaceå€¼ä¼ é€’æ³¨æ„äº‹é¡¹ï¼š å¦‚æœæ¥å£å®ç°æ–¹æ³•ï¼Œç±»å‹è‡ªå·±çš„å®ç°ä½¿ç”¨çš„æ˜¯å€¼æ¥æ”¶å™¨ï¼Œé‚£ä¹ˆåœ¨ä¼ é€’å€¼çš„æ—¶å€™æ— è®ºä½¿ç”¨æŒ‡é’ˆè¿˜æ˜¯å€¼éƒ½å¯ä»¥ã€‚ å¦‚æœæ¥å£å®ç°æ–¹æ³•ï¼Œç±»å‹è‡ªå·±çš„å®ç°ä½¿ç”¨çš„æ˜¯æŒ‡é’ˆæ¥æ”¶å™¨ï¼Œé‚£ä¹ˆåœ¨ä¼ é€’å€¼çš„æ—¶å€™å¿…é¡»ä¼ é€’åœ°å€ã€‚12345åŸå› ï¼šç¼–è¯‘å™¨ä¸èƒ½è‡ªåŠ¨è·å¾—ä¸€ä¸ªæœªå£°æ˜åœ°å€ã€‚ç»“æ„ä½“ç±»å‹å®šä¹‰çš„æ–¹æ³•å¯ä»¥è¢«è¯¥ç»“æ„ä½“çš„æŒ‡é’ˆç±»å‹è°ƒç”¨ï¼›è€Œç»“æ„ä½“ç±»å‹è°ƒç”¨è¯¥æŒ‡é’ˆç±»å‹çš„æ–¹æ³•æ—¶æ˜¯è¢«è½¬æ¢æˆæŒ‡é’ˆï¼Œä¸æ˜¯ç›´æ¥è°ƒç”¨ã€‚æ¥å£å®ç°æ–¹æ³•æ—¶ï¼Œç”¨æŒ‡é’ˆç±»å‹å®ç°çš„æ¥å£å‡½æ•°åªèƒ½ç®—æ˜¯æŒ‡é’ˆç±»å‹å®ç°çš„ï¼Œç”¨ç»“æ„ä½“ç±»å‹å®ç°çš„æ–¹æ³•ä¹Ÿä½œä¸ºæ˜¯æŒ‡é’ˆç±»å‹å®ç°ã€‚ interface{} ä¸ []interface{}12var dataSlice []int = foo()var interfaceSlice []interface{} = dataSlice ç¼–è¯‘é”™è¯¯ 1cannot use dataSlice (type []int) as type []interface { } in assignment ä»»ä½•ç±»å‹èµ‹å€¼ç»™interface{}ï¼Œä¸èƒ½æŠŠä»»ä½•ç±»å‹çš„åˆ‡ç‰‡èµ‹å€¼åˆ°[]interface{} ä¸èƒ½ ç›´æ¥å°†æŸäº›[]MyTypeåˆ‡ç‰‡èµ‹å€¼ç»™[]interface{}ï¼Œ ä»–ä»¬èƒŒåä»£è¡¨çš„æ•°æ®æ„ä¹‰ä¸åŒã€‚ 12345678910 //ç¼–è¯‘é”™è¯¯//t := []int{1, 2, 3, 4} wrong //var s []interface{} = t //æ­£ç¡®t := []int{1, 2, 3, 4} //right s := make([]interface{}, len(t)) for i, v := range t { s[i] = v } æ¥å£è½¬æ¢ åˆ©ç”¨ç±»å‹æ¨æ–­ï¼Œå¯åˆ¤æ–­æ¥å£å¯¹è±¡æ˜¯å¦æŸä¸ªå…·ä½“çš„æ¥å£æˆ–ç±»å‹ã€‚ è¿˜å¯ç”¨ switch åšæ‰¹é‡ç±»å‹åˆ¤æ–­ï¼Œä¸æ”¯æŒ fallthroughã€‚ è¶…é›†æ¥å£å¯¹è±¡å¯è½¬æ¢ä¸ºå­é›†æ¥å£ï¼Œåä¹‹å‡ºé”™ã€‚ åŸå› ï¼š []interface{}ç±»å‹ ä¸æ˜¯ interface{}ç±»å‹ï¼Œ å®ƒæ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œåˆ‡ç‰‡å…ƒç´ çš„ç±»å‹æ°å¥½æ˜¯interface{}ã€‚ []interface{}ç±»å‹å˜é‡æ‹¥æœ‰ç‰¹å®šçš„å†…å­˜ç»“æ„ï¼Œè¿™åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å†³å®šã€‚æ¯ä¸ªinterface{}å ä¸¤ä¸ªå­—ï¼ˆword)ï¼Œä¸€ä¸ªå­—ç”¨äºå­˜æ”¾interfaceå­˜æ”¾çš„ç±»å‹ï¼Œå¦ä¸€ä¸ªå­—ç”¨äºå­˜æ”¾å®é™…æ•°æ®æˆ–è€…æ˜¯æŒ‡å‘æ•°æ®çš„æŒ‡é’ˆã€‚äºæ˜¯é•¿åº¦ä¸ºNçš„[]interface{}ç±»å‹åˆ‡ç‰‡èƒŒåæ˜¯ä¸€ä¸ªN2å­—é•¿çš„ä¸€å—æ•°æ®ã€‚è¿™ä¸ä¸€èˆ¬çš„[]MyTypeç±»å‹åˆ‡ç‰‡ä¸åŒï¼Œç›¸åŒé•¿åº¦çš„[]MyTypeåˆ‡ç‰‡èƒŒåçš„æ•°æ®å—å¤§å°ä¸ºNsizeof(MyType)å­—é•¿ã€‚ ä½¿ç”¨æ–¹å¼ï¼šå¦‚æœæƒ³å¾—åˆ°ä¸€ä¸ªå…ƒç´ ä¸ºä»»æ„ç±»å‹çš„åˆ—è¡¨çš„å®¹å™¨ï¼Œå¹¶ä¸”åœ¨ç´¢å¼•å…¶ä¸­å…ƒç´ ä¹‹å‰ä¼šæŠŠå®ƒè½¬æ¢ä¸ºåŸæœ¬çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨interface{}å³å¯ã€‚æ­¤ç§æ–¹å¼å¾ˆé€šç”¨ï¼ˆå¦‚æœ ä¸æ˜¯ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨ çš„ï¼‰ä¹Ÿå¾ˆå¿«é€Ÿã€‚ æ¥å£ç±»å‹å†…å­˜å¸ƒå±€(åŸç†)interfaceåœ¨å†…å­˜ä¸Šå®é™…ç”±ä¸¤ä¸ªæˆå‘˜ç»„æˆ tabæŒ‡å‘è™šè¡¨(Virtual Table) dataåˆ™æŒ‡å‘å®é™…å¼•ç”¨çš„æ•°æ®ã€‚ è™šè¡¨æç»˜äº†å®é™…çš„ç±»å‹ä¿¡æ¯åŠè¯¥æ¥å£æ‰€éœ€è¦çš„æ–¹æ³•é›†ã€‚ æ¥å£çš„åº•å±‚ç»“æ„runtime.h 123456789101112131415161718192021struct Iface{ Itab* tab; void* data;};struct Itab{ InterfaceType* inter; Type* type; void (*fun[])(void);};struct Itab{ InterfaceType* inter; Type* type; void (*fun[])(void);};//åªæœ‰ tab å’Œ data éƒ½ä¸º nil æ—¶ï¼Œæ¥å£æ‰ç­‰äº nilã€‚ æ¥å£Demoï¼š 123456789101112131415161718192021222324252627package mainimport ( &quot;fmt&quot;)type People interface { Do()}type Student struct { UserId int UserName string}func (s Student) Do() { s.UserName = &quot;Jaco Liu&quot; return}func main() { stu := Student{1, &quot;Jaco&quot;} p := People(stu)// //a.Do() fmt.Printf(&quot;%T %v&quot;, p, p)} Peopleæ¥å£æœ¬èº«ï¼Œåº•å±‚å«æœ‰tabè™šè¡¨å’Œdataå®é™…å­˜å‚¨çš„å€¼ä¸¤éƒ¨åˆ†ï¼› :123456789101112131415161718192021222324**é€šè¿‡æ¥å£è¿›è¡Œå‡½æ•°è°ƒç”¨** ï¼Œå®é™…çš„æ“ä½œå…¶å®å°±æ˜¯```p.tab-&gt;fun[0](p.data)```; ###### å‚è€ƒGoå’ŒC++çš„è™šè¡¨çš„å¼‚åŒï¼š* C++ï¼š * c++ çš„è™šè¡¨æ˜¯åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆçš„ï¼Œæ³¨æ„ï¼šè¡¨ç°å‡ºçš„å¤šæ€æ˜¯åœ¨runtimeè¿è¡Œæ—¶å†³å®š; * æ¯ä¸ªclassåˆ›å»ºäº†ä¸€ä¸ªæ–¹æ³•é›†(è™šè¡¨); * å½“å­ç±»é‡å†™çˆ¶ç±»çš„è™šå‡½æ•°æ—¶ï¼Œå°±å°†è¡¨ä¸­çš„ç›¸åº”å‡½æ•°æŒ‡é’ˆæ”¹ä¸ºå­ç±»è‡ªå·±å®ç°çš„å‡½æ•°; * å¦‚æœæ²¡æœ‰åˆ™æŒ‡å‘çˆ¶ç±»çš„å®ç°; * å½“é¢ä¸´å¤šç»§æ‰¿æ—¶ï¼ŒC++å¯¹è±¡ç»“æ„é‡Œå°±ä¼šå­˜åœ¨å¤šä¸ªè™šè¡¨æŒ‡é’ˆï¼Œæ¯ä¸ªè™šè¡¨æŒ‡é’ˆæŒ‡å‘è¯¥æ–¹æ³•é›†çš„ä¸åŒéƒ¨åˆ†ã€‚* Go: * Go æ¥å£çš„è™šè¡¨æ˜¯åœ¨runtimeè¿è¡Œæ—¶ç”Ÿæˆï¼› * ``` p := People(Student{1, &quot;Jaco&quot;})```ç”ŸæˆPeopleæ¥å£å¯¹åº”äºStudentç±»å‹çš„è™šè¡¨ï¼Œå¹¶å°†å…¶ç¼“å­˜ã€‚###### åŸå› ï¼š* Goæ— ç»§æ‰¿å…³ç³»ï¼Œé‡‡ç”¨çš„æ˜¯ç»„åˆæ–¹å¼ï¼Œæ‰€ä»¥ä¸èƒ½è¿›è¡Œè™šè¡¨åˆå§‹åŒ–(å¤šå°‘ç±»å‹å®ç°äº†æŸä¸ªæ¥å£ï¼Œå•ä¸ªç±»å‹åˆ°åº•å®ç°äº†å¤šå°‘æ¥å£è¿™è®©ç¼–è¯‘å™¨æ— ä»è·çŸ¥.* é€‰æ‹©åœ¨è¿è¡Œæ—¶ç”Ÿæˆè™šè¡¨æ˜¯è‡ªç„¶çš„æ–¹æ¡ˆï¼Œæ”¾åˆ°runtimeè¿è¡Œæ—¶ï¼Œåªè¦åœ¨éœ€è¦æ¥å£çš„å»åˆ†æä¸€ä¸‹ç±»å‹æ˜¯å¦å®ç°äº†æ¥å£çš„æ‰€æœ‰æ–¹æ³•å³å¯ï¼Œè¿™æ ·é¿å…äº†å»ç»´æŠ¤å¤§é‡ç»§æ‰¿å’Œç»‘å®šå…³ç³»çš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œæ­¤å¹¶ä¸ä¼šå¸¦æ¥æ€§èƒ½ä¸Šçš„å¤ªå¤§é—®é¢˜ã€‚* Goæ¥å£ç»„åˆçš„æ–¹æ¡ˆå’ŒC++åå…¶é“è€Œè¡Œä¹‹ï¼Œæœ¬è´¨ä¸Šæ¥è¯´ï¼Œå„æœ‰ä¼˜ç¼ºç‚¹ã€‚#### æ¥å£æŠ€å·§è®©ç¼–è¯‘å™¨æ£€æŸ¥ï¼Œä»¥ç¡®ä¿æŸä¸ªç±»å‹å®ç°æ¥å£ã€‚``` var _ fmt.Stringer = (*Data)(nil) ```æŸäº›æ—¶å€™ï¼Œè®©å‡½æ•°ç›´æ¥ &quot;å®ç°&quot; æ¥å£èƒ½çœä¸å°‘äº‹ã€‚ type Tester interface { Do()} type FuncDo func()func (self FuncDo) Do() { self() } func main() { var t Tester = FuncDo(func() { println(â€œHello, World!â€) }) t.Do()}","link":"/512e106c.html"},{"title":"Go:JSON","text":"JSONjson.Marshal()é»˜è®¤è½¬æ¢è§„åˆ™ï¼š1.å¸ƒå°”å‹è½¬æ¢ä¸º JSON åä»æ˜¯å¸ƒå°”å‹ ï¼Œ å¦‚true -&gt; true2.æµ®ç‚¹å‹å’Œæ•´æ•°å‹è½¬æ¢åä¸ºJSONé‡Œé¢çš„å¸¸è§„æ•°å­—ï¼Œå¦‚ 1.23 -&gt; 1.233.å­—ç¬¦ä¸²å°†ä»¥UTF-8ç¼–ç è½¬åŒ–è¾“å‡ºä¸ºUnicodeå­—ç¬¦é›†çš„å­—ç¬¦ä¸²ï¼Œç‰¹æ®Šå­—ç¬¦æ¯”å¦‚&lt;å°†ä¼šè¢«è½¬ä¹‰ä¸º\\u003c 4.æ•°ç»„å’Œåˆ‡ç‰‡è¢«è½¬æ¢ä¸ºJSON é‡Œé¢çš„æ•°ç»„ï¼Œ[]byteç±»ä¼šè¢«è½¬æ¢ä¸ºbase64ç¼–ç åçš„å­—ç¬¦ä¸²ï¼Œsliceçš„é›¶å€¼è¢«è½¬æ¢ä¸ºnull5.ç»“æ„ä½“ä¼šè½¬åŒ–ä¸ºJSONå¯¹è±¡ï¼Œå¹¶ä¸”åªæœ‰ç»“æ„ä½“é‡Œè¾¹ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„å¯è¢«å¯¼å‡ºçš„å­—æ®µæ‰ä¼šè¢«è½¬åŒ–è¾“å‡ºï¼Œè€Œè¿™äº›å¯å¯¼å‡ºçš„å­—æ®µä¼šä½œä¸ºJSONå¯¹è±¡çš„å­—ç¬¦ä¸²ç´¢å¼•6.è½¬åŒ–ä¸€ä¸ªmap ç±»å‹çš„æ•°æ®ç»“æ„æ—¶ï¼Œè¯¥æ•°æ®çš„ç±»å‹å¿…é¡»æ˜¯ map[string]Tï¼ˆT å¯ä»¥æ˜¯encoding/json åŒ…æ”¯æŒçš„ä»»æ„æ•°æ®ç±»å‹ï¼‰ json.Unmarshal()æ³¨æ„ï¼šå¦‚æœJSONä¸­çš„å­—æ®µåœ¨Goç›®æ ‡ç±»å‹ä¸­ä¸å­˜åœ¨ï¼Œjson.Unmarshal() å‡½æ•°åœ¨è§£ç è¿‡ç¨‹ä¸­ä¼šä¸¢å¼ƒè¯¥å­—æ®µã€‚æœªçŸ¥ç±»å‹,éµå¾ªè§„åˆ™ï¼š1.JSONä¸­çš„å¸ƒå°”å€¼å°†ä¼šè½¬æ¢ä¸ºGoä¸­çš„boolç±»å‹2.æ•°å€¼ä¼šè¢«è½¬æ¢ä¸ºGoä¸­çš„float64ç±»å‹3.å­—ç¬¦ä¸²è½¬æ¢åè¿˜æ˜¯stringç±»å‹4.JSONæ•°ç»„ä¼šè½¬æ¢ä¸º[]interface{} ç±»å‹5.JSONå¯¹è±¡ä¼šè½¬æ¢ä¸ºmap[string]interface{}ç±»å‹6.nullå€¼ä¼šè½¬æ¢ä¸ºnil","link":"/72259ecc.html"},{"title":"Go:new,make,struct{}","text":"new,make,struct{} å‡½æ•° é€‚ç”¨èŒƒå›´ è¿”å›å€¼ å¡«å……å€¼ make() ä»…é™åˆ›å»ºç±»å‹(slice map channel) å¼•ç”¨ï¼Œmakeè¿”å›å¤æ‚çš„ç»“æ„ä¸ºsliceæ—¶:å®ƒæ˜¯ä¸€ä¸ªåŒ…å«3ä¸ªåŸŸçš„ç»“æ„ä½“ï¼šæŒ‡å‘sliceä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œsliceçš„é•¿åº¦ï¼Œä»¥åŠsliceçš„å®¹é‡ã€‚ éé›¶å€¼ï¼Œmake(T, args)è¿”å›ä¸€ä¸ªåˆå§‹åŒ–çš„(è€Œä¸æ˜¯ç½®é›¶)ï¼Œç±»å‹ä¸ºTçš„å€¼ï¼ˆè€Œä¸æ˜¯*Tï¼‰ã€‚ä¹‹æ‰€ä»¥æœ‰æ‰€ä¸åŒï¼Œæ˜¯å› ä¸ºè¿™ä¸‰ä¸ªç±»å‹çš„èƒŒåå¼•ç”¨äº†ä½¿ç”¨å‰å¿…é¡»åˆå§‹åŒ–çš„æ•°æ®ç»“æ„ new() æ‰€æœ‰ç±»å‹ æŒ‡é’ˆï¼Œnewè¿”å›ä¸€ä¸ªæŒ‡å‘å·²æ¸…é›¶å†…å­˜çš„æŒ‡é’ˆï¼Œè€Œmakeè¿”å›ä¸€ä¸ªå¤æ‚çš„ç»“æ„ã€‚ é›¶å€¼ï¼Œnew(T)ä¼šä¸ºTç±»å‹çš„æ–°é¡¹ç›®ï¼Œä½†newå®ƒå¹¶ä¸åˆå§‹åŒ–å†…å­˜ï¼Œåªæ˜¯å°†å…¶ç½®é›¶ å¤‡æ³¨ï¼šç›´æ¥ä½¿ç”¨struct{} æ¥åˆå§‹åŒ–strutæ—¶ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªstructç±»å‹çš„å€¼ï¼Œè€Œä¸æ˜¯æŒ‡é’ˆã€‚","link":"/96edd24c.html"},{"title":"Go:pointer","text":"pointer æŒ‡é’ˆåŸºäºæŒ‡é’ˆå¯¹è±¡çš„æ–¹æ³•å½“è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¼šå¯¹å…¶æ¯ä¸€ä¸ªå‚æ•°å€¼è¿›è¡Œæ‹·è´ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°éœ€è¦æ›´æ–°ä¸€ä¸ªå˜é‡ï¼Œæˆ–è€…å‡½æ•°çš„å…¶ä¸­ä¸€ä¸ªå‚æ•°å®åœ¨å¤ªå¤§æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿé¿å…è¿›è¡Œè¿™ç§é»˜è®¤çš„æ‹·è´ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°æŒ‡é’ˆäº†ã€‚å¯¹åº”åˆ°æˆ‘ä»¬è¿™é‡Œç”¨æ¥æ›´æ–°æ¥æ”¶å™¨çš„å¯¹è±¡çš„æ–¹æ³•ï¼Œå½“è¿™ä¸ªæ¥å—è€…å˜é‡æœ¬èº«æ¯”è¾ƒå¤§æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨å…¶æŒ‡é’ˆè€Œä¸æ˜¯å¯¹è±¡æ¥å£°æ˜æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š func (p *Point) ScaleBy(factor float64) { p.X *= factor p.Y *= factor}è¿™ä¸ªæ–¹æ³•çš„åå­—æ˜¯(Point).ScaleByã€‚è¿™é‡Œçš„æ‹¬å·æ˜¯å¿…é¡»çš„ï¼›æ²¡æœ‰æ‹¬å·çš„è¯è¿™ä¸ªè¡¨è¾¾å¼å¯èƒ½ä¼šè¢«ç†è§£ä¸º(Point.ScaleBy)ã€‚ åœ¨ç°å®çš„ç¨‹åºé‡Œï¼Œä¸€èˆ¬ä¼šçº¦å®šå¦‚æœPointè¿™ä¸ªç±»æœ‰ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºæ¥æ”¶å™¨çš„æ–¹æ³•ï¼Œé‚£ä¹ˆæ‰€æœ‰Pointçš„æ–¹æ³•éƒ½å¿…é¡»æœ‰ä¸€ä¸ªæŒ‡é’ˆæ¥æ”¶å™¨ï¼Œå³ä½¿æ˜¯é‚£äº›å¹¶ä¸éœ€è¦è¿™ä¸ªæŒ‡é’ˆæ¥æ”¶å™¨çš„å‡½æ•°ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œæ‰“ç ´äº†è¿™ä¸ªçº¦å®šåªæ˜¯ä¸ºäº†å±•ç¤ºä¸€ä¸‹ä¸¤ç§æ–¹æ³•çš„å¼‚åŒè€Œå·²ã€‚ åªæœ‰ç±»å‹(Point)å’ŒæŒ‡å‘ä»–ä»¬çš„æŒ‡é’ˆ(*Point)ï¼Œæ‰æ˜¯å¯èƒ½ä¼šå‡ºç°åœ¨æ¥æ”¶å™¨å£°æ˜é‡Œçš„ä¸¤ç§æ¥æ”¶å™¨ã€‚æ­¤å¤–ï¼Œä¸ºäº†é¿å…æ­§ä¹‰ï¼Œåœ¨å£°æ˜æ–¹æ³•æ—¶ï¼Œå¦‚æœä¸€ä¸ªç±»å‹åæœ¬èº«æ˜¯ä¸€ä¸ªæŒ‡é’ˆçš„è¯ï¼Œæ˜¯ä¸å…è®¸å…¶å‡ºç°åœ¨æ¥æ”¶å™¨ä¸­çš„ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š type P intfunc (P) f() { / â€¦ */ } // compile error: invalid receiver typeæƒ³è¦è°ƒç”¨æŒ‡é’ˆç±»å‹æ–¹æ³•(*Point).ScaleByï¼Œåªè¦æä¾›ä¸€ä¸ªPointç±»å‹çš„æŒ‡é’ˆå³å¯ï¼Œåƒä¸‹é¢è¿™æ ·ã€‚ r := &amp;Point{1, 2}r.ScaleBy(2)fmt.Println(*r) // â€œ{2, 4}â€æˆ–è€…è¿™æ ·ï¼š p := Point{1, 2}pptr := &amp;ppptr.ScaleBy(2)fmt.Println(p) // â€œ{2, 4}â€æˆ–è€…è¿™æ ·: p := Point{1, 2}(&amp;p).ScaleBy(2)fmt.Println(p) // â€œ{2, 4}â€ä¸è¿‡åé¢ä¸¤ç§æ–¹æ³•æœ‰äº›ç¬¨æ‹™ã€‚å¹¸è¿çš„æ˜¯ï¼Œgoè¯­è¨€æœ¬èº«åœ¨è¿™ç§åœ°æ–¹ä¼šå¸®åˆ°æˆ‘ä»¬ã€‚å¦‚æœæ¥æ”¶å™¨pæ˜¯ä¸€ä¸ªPointç±»å‹çš„å˜é‡ï¼Œå¹¶ä¸”å…¶æ–¹æ³•éœ€è¦ä¸€ä¸ªPointæŒ‡é’ˆä½œä¸ºæ¥æ”¶å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢è¿™ç§ç®€çŸ­çš„å†™æ³•ï¼š p.ScaleBy(2)ç¼–è¯‘å™¨ä¼šéšå¼åœ°å¸®æˆ‘ä»¬ç”¨&amp;på»è°ƒç”¨ScaleByè¿™ä¸ªæ–¹æ³•ã€‚è¿™ç§ç®€å†™æ–¹æ³•åªé€‚ç”¨äºâ€œå˜é‡â€ï¼ŒåŒ…æ‹¬structé‡Œçš„å­—æ®µæ¯”å¦‚p.Xï¼Œä»¥åŠarrayå’Œsliceå†…çš„å…ƒç´ æ¯”å¦‚perim[0]ã€‚æˆ‘ä»¬ä¸èƒ½é€šè¿‡ä¸€ä¸ªæ— æ³•å–åˆ°åœ°å€çš„æ¥æ”¶å™¨æ¥è°ƒç”¨æŒ‡é’ˆæ–¹æ³•ï¼Œæ¯”å¦‚ä¸´æ—¶å˜é‡çš„å†…å­˜åœ°å€å°±æ— æ³•è·å–å¾—åˆ°ï¼š Point{1, 2}.ScaleBy(2) // compile error: canâ€™t take address of Point literalä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªPointè¿™æ ·çš„æ¥æ”¶å™¨æ¥è°ƒç”¨Pointçš„æ–¹æ³•ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ°å€æ¥æ‰¾åˆ°è¿™ä¸ªå˜é‡ï¼Œåªè¦ç”¨è§£å¼•ç”¨ç¬¦å·æ¥å–åˆ°è¯¥å˜é‡å³å¯ã€‚ç¼–è¯‘å™¨åœ¨è¿™é‡Œä¹Ÿä¼šç»™æˆ‘ä»¬éšå¼åœ°æ’å…¥*è¿™ä¸ªæ“ä½œç¬¦ï¼Œæ‰€ä»¥ä¸‹é¢è¿™ä¸¤ç§å†™æ³•ç­‰ä»·çš„ï¼š pptr.Distance(q)(*pptr).Distance(q)è¿™é‡Œçš„å‡ ä¸ªä¾‹å­å¯èƒ½è®©ä½ æœ‰äº›å›°æƒ‘ï¼Œæ‰€ä»¥æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼šåœ¨æ¯ä¸€ä¸ªåˆæ³•çš„æ–¹æ³•è°ƒç”¨è¡¨è¾¾å¼ä¸­ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢ä¸‰ç§æƒ…å†µé‡Œçš„ä»»æ„ä¸€ç§æƒ…å†µéƒ½æ˜¯å¯ä»¥çš„ï¼š ä¸è®ºæ˜¯æ¥æ”¶å™¨çš„å®é™…å‚æ•°å’Œå…¶æ¥æ”¶å™¨çš„å½¢å¼å‚æ•°ç›¸åŒï¼Œæ¯”å¦‚ä¸¤è€…éƒ½æ˜¯ç±»å‹Tæˆ–è€…éƒ½æ˜¯ç±»å‹*Tï¼š Point{1, 2}.Distance(q) // Pointpptr.ScaleBy(2) // Pointæˆ–è€…æ¥æ”¶å™¨å®å‚æ˜¯ç±»å‹Tï¼Œä½†æ¥æ”¶å™¨å½¢å‚æ˜¯ç±»å‹Tï¼Œè¿™ç§æƒ…å†µä¸‹ç¼–è¯‘å™¨ä¼šéšå¼åœ°ä¸ºæˆ‘ä»¬å–å˜é‡çš„åœ°å€ï¼š p.ScaleBy(2) // implicit (&amp;p)æˆ–è€…æ¥æ”¶å™¨å®å‚æ˜¯ç±»å‹*Tï¼Œå½¢å‚æ˜¯ç±»å‹Tã€‚ç¼–è¯‘å™¨ä¼šéšå¼åœ°ä¸ºæˆ‘ä»¬è§£å¼•ç”¨ï¼Œå–åˆ°æŒ‡é’ˆæŒ‡å‘çš„å®é™…å˜é‡ï¼š pptr.Distance(q) // implicit (pptr)å¦‚æœå‘½åç±»å‹T(è¯‘æ³¨ï¼šç”¨type xxxå®šä¹‰çš„ç±»å‹)çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯ç”¨Tç±»å‹è‡ªå·±æ¥åšæ¥æ”¶å™¨(è€Œä¸æ˜¯T)ï¼Œé‚£ä¹ˆæ‹·è´è¿™ç§ç±»å‹çš„å®ä¾‹å°±æ˜¯å®‰å…¨çš„ï¼›è°ƒç”¨ä»–çš„ä»»ä½•ä¸€ä¸ªæ–¹æ³•ä¹Ÿå°±ä¼šäº§ç”Ÿä¸€ä¸ªå€¼çš„æ‹·è´ã€‚æ¯”å¦‚time.Durationçš„è¿™ä¸ªç±»å‹ï¼Œåœ¨è°ƒç”¨å…¶æ–¹æ³•æ—¶å°±ä¼šè¢«å…¨éƒ¨æ‹·è´ä¸€ä»½ï¼ŒåŒ…æ‹¬åœ¨ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°çš„æ—¶å€™ã€‚ä½†æ˜¯å¦‚æœä¸€ä¸ªæ–¹æ³•ä½¿ç”¨æŒ‡é’ˆä½œä¸ºæ¥æ”¶å™¨ï¼Œä½ éœ€è¦é¿å…å¯¹å…¶è¿›è¡Œæ‹·è´ï¼Œå› ä¸ºè¿™æ ·å¯èƒ½ä¼šç ´åæ‰è¯¥ç±»å‹å†…éƒ¨çš„ä¸å˜æ€§ã€‚æ¯”å¦‚ä½ å¯¹bytes.Bufferå¯¹è±¡è¿›è¡Œäº†æ‹·è´ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¼•èµ·åŸå§‹å¯¹è±¡å’Œæ‹·è´å¯¹è±¡åªæ˜¯åˆ«åè€Œå·²ï¼Œä½†å®é™…ä¸Šå…¶æŒ‡å‘çš„å¯¹è±¡æ˜¯ä¸€è‡´çš„ã€‚ç´§æ¥ç€å¯¹æ‹·è´åçš„å˜é‡è¿›è¡Œä¿®æ”¹å¯èƒ½ä¼šæœ‰è®©ä½ æ„å¤–çš„ç»“æœã€‚ è¯‘æ³¨ï¼š ä½œè€…è¿™é‡Œè¯´çš„æ¯”è¾ƒç»•ï¼Œå…¶å®æœ‰ä¸¤ç‚¹ï¼š ä¸ç®¡ä½ çš„methodçš„receiveræ˜¯æŒ‡é’ˆç±»å‹è¿˜æ˜¯éæŒ‡é’ˆç±»å‹ï¼Œéƒ½æ˜¯å¯ä»¥é€šè¿‡æŒ‡é’ˆ/éæŒ‡é’ˆç±»å‹è¿›è¡Œè°ƒç”¨çš„ï¼Œç¼–è¯‘å™¨ä¼šå¸®ä½ åšç±»å‹è½¬æ¢ã€‚åœ¨å£°æ˜ä¸€ä¸ªmethodçš„receiverè¯¥æ˜¯æŒ‡é’ˆè¿˜æ˜¯éæŒ‡é’ˆç±»å‹æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘ä¸¤æ–¹é¢çš„å†…éƒ¨ï¼Œç¬¬ä¸€æ–¹é¢æ˜¯è¿™ä¸ªå¯¹è±¡æœ¬èº«æ˜¯ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œå¦‚æœå£°æ˜ä¸ºéæŒ‡é’ˆå˜é‡æ—¶ï¼Œè°ƒç”¨ä¼šäº§ç”Ÿä¸€æ¬¡æ‹·è´ï¼›ç¬¬äºŒæ–¹é¢æ˜¯å¦‚æœä½ ç”¨æŒ‡é’ˆç±»å‹ä½œä¸ºreceiverï¼Œé‚£ä¹ˆä½ ä¸€å®šè¦æ³¨æ„ï¼Œè¿™ç§æŒ‡é’ˆç±»å‹æŒ‡å‘çš„å§‹ç»ˆæ˜¯ä¸€å—å†…å­˜åœ°å€ï¼Œå°±ç®—ä½ å¯¹å…¶è¿›è¡Œäº†æ‹·è´ã€‚ç†Ÿæ‚‰Cæˆ–è€…Cè‰¹çš„äººè¿™é‡Œåº”è¯¥å¾ˆå¿«èƒ½æ˜ç™½ã€‚","link":"/a753c2b9.html"},{"title":"Go:polymorphism","text":"polymorphismå¤šæ€ç‰¹æ€§ å¤šæ€ï¼šåŒä¸€ä»¶äº‹æƒ…ç”±äºæ¡ä»¶ä¸åŒäº§ç”Ÿçš„ç»“æœä¸åŒï¼› ç”±äºGoè¯­è¨€ä¸­ç»“æ„ä½“ä¸èƒ½ç›¸äº’è½¬æ¢ï¼Œæ‰€ä»¥æ²¡æœ‰ç»“æ„ä½“ç±»å‹çš„å¤šæ€ï¼Œåªæœ‰åŸºäºæ¥å£çš„å¤šæ€ã€‚è¿™ç¬¦åˆGoè¯­è¨€å¯¹é¢å‘å¯¹è±¡çš„è¯ é‡Šï¼› å¤šæ€å’Œæ³›å‹çš„åŒºåˆ« æ³›å‹æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ³›å‹ç±»æ—¶å€™å†å»ç¡®å®šè¿™ä¸ªç±»é‡Œé¢çš„æˆå‘˜å…·ä½“ä»€ä¹ˆç±»å‹çš„ï¼Œä¸¤è€…æœ¬è´¨ä¸æ˜¯ä¸€ä¸ªå±‚æ¬¡ï¼Œå¤šæ€ä¸èƒ½å®ç°æ³›å‹ã€‚ å¤šæ€æ˜¯åœ¨ç»§æ‰¿å±‚é¢ä¸Šï¼Œå³æ ¹æ®å®é™…è¿è¡Œæ—¶å€™æ¥ç¡®å®šå…·ä½“çš„å®ç°ã€‚ æ³›å‹æœ¬è´¨ä¸Šå¹¶ä¸æ˜¯å¤šæ€çš„ä¸€ç§ç‰¹ä¾‹ï¼Œå¤šæ€å¹¶ä¸èƒ½å®ç°æ³›å‹ã€‚ å¼•å…¥æ³›å‹çš„æœ¬è´¨æ˜¯ä¸ºäº†å®‰å…¨ï¼ŒæŠŠç¼–è¯‘æ—¶èƒ½å‘ç°çš„é”™è¯¯ä¸å¸¦åˆ°runtimeè¿è¡Œæ—¶ã€‚","link":"/165668dc.html"},{"title":"Go:Map","text":"Map è¦ç‚¹æ³¨æ„äº‹é¡¹ map æ˜¯å¼•ç”¨ç±»å‹çš„ï¼š å†…å­˜ç”¨ make æ–¹æ³•æ¥åˆ†é…ã€‚ newï¼Œæ°¸è¿œç”¨ make æ¥æ„é€  mapã€‚new() åˆ†é…äº†ä¸€ä¸ªå¼•ç”¨å¯¹è±¡ï¼Œä½ ä¼šè·å¾—ä¸€ä¸ªç©ºå¼•ç”¨çš„æŒ‡é’ˆï¼Œç›¸å½“äºå£°æ˜äº†ä¸€ä¸ªæœªåˆå§‹åŒ–çš„å˜é‡å¹¶ä¸”å–äº†å®ƒçš„åœ°å€ã€‚ å½“ map å¢é•¿åˆ°å®¹é‡ä¸Šé™çš„æ—¶å€™ï¼Œå¦‚æœå†å¢åŠ æ–°çš„ key-value å¯¹ï¼Œmap çš„å¤§å°ä¼šè‡ªåŠ¨åŠ  1ã€‚æ‰€ä»¥å‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œå¯¹äºå¤§çš„ map æˆ–è€…ä¼šå¿«é€Ÿæ‰©å¼ çš„ mapï¼Œå³ä½¿åªæ˜¯å¤§æ¦‚çŸ¥é“å®¹é‡ï¼Œä¹Ÿæœ€å¥½å…ˆæ ‡æ˜ã€‚ ç‰¹æ®Šç”¨æ³•ç”¨åˆ‡ç‰‡ä½œä¸º map çš„å€¼ 12mp1 := make(map[int][]int)mp2 := make(map[int]*[]int) åªéå†é”®KEYæ—¶ï¼Œä½¿ç”¨ä¸‹é¢çš„å½¢å¼,æ— é¡»å°†å€¼æ”¹ä¸ºåŒ¿åå˜é‡å½¢å¼ï¼Œå¿½ç•¥å€¼å³å¯: 123for key := range mapData { //Code ...} mapæ¸…ç©ºï¼šæ— ç›¸å…³å‡½æ•°å’Œæ–¹æ³•ã€‚æˆªè‡³Go 1.12ï¼Œæ¸…ç©ºå”¯ä¸€åŠæ³•å°±æ˜¯é‡æ–° make ä¸€ä¸ªæ–°çš„ mapã€‚ä½†æ‹…å¿ƒåƒåœ¾å›æ”¶çš„æ•ˆç‡ï¼ŒGoçš„GCçš„å›æ”¶æ•ˆç‡è¿œé«˜äºä¸€ä¸ªæ¸…ç©ºå‡½æ•°ã€‚ mapå¹¶å‘å®‰å…¨æ³¨æ„äº‹é¡¹sync.Mapæœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š æ— é¡»åˆå§‹åŒ–ï¼Œç›´æ¥å£°æ˜å³å¯ã€‚ sync.Map ä¸èƒ½ä½¿ç”¨ map çš„æ–¹å¼è¿›è¡Œå–å€¼å’Œè®¾ç½®ç­‰æ“ä½œï¼Œè€Œæ˜¯ä½¿ç”¨ sync.Map çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚ Store è¡¨ç¤ºå­˜å‚¨ï¼Œ Load è¡¨ç¤ºè·å–ï¼Œ Delete è¡¨ç¤ºåˆ é™¤ã€‚ éå†æ“ä½œ RangeåŠ å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°è¿”å›å†…éƒ¨éå†å‡ºæ¥çš„å€¼ã€‚ Range å‚æ•°ä¸­çš„å›è°ƒå‡½æ•°çš„è¿”å›å€¼åŠŸèƒ½æ˜¯ï¼š éœ€è¦ç»§ç»­è¿­ä»£éå†æ—¶ï¼Œè¿”å› trueï¼› ç»ˆæ­¢è¿­ä»£éå†æ—¶ï¼Œè¿”å›falseã€‚ 12345678910#å®šä¹‰var mapData sync.Map#éå†æ‰€æœ‰sync.Mapä¸­çš„é”®å€¼å¯¹mapData.Range(func(k, v interface{}) bool { fmt.Println(&quot;list-kv: %v , %v&quot;, k, v) return true})","link":"/73ca5667.html"},{"title":"Go:null judge","text":"null judgeintç©ºå€¼æ˜¯0ï¼Œstringç©ºå€¼æ˜¯â€â€è€Œä¸æ˜¯nullæˆ–è€…nilï¼ˆåŒºåˆ«Sliceç©ºå€¼æ˜¯é•¿åº¦ä¸º0çš„mapç©ºå€¼æ˜¯nilï¼Œerrorç©ºå€¼æ˜¯nilï¼Œstructç©ºå€¼æ˜¯ä¸€ä¸ªâ€œæ‰€æœ‰æˆå‘˜éƒ½æ˜¯ç©ºå€¼â€çš„ç©ºStructè€Œä¸æ˜¯nilï¼Œ ä¸èƒ½å•çº¯åœ°åˆ¤æ–­ä¸€ä¸ªstructæ˜¯ä¸æ˜¯nilï¼Œå› ä¸ºå®ƒæ°¸è¿œä¸å¯èƒ½æ˜¯nilï¼Œå¯ä»¥é€šè¿‡è¿”å›ä¸€ä¸ªerroræ¥åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œgolangæ ‡å‡†åº“é‡Œçš„å¸¸è§åšæ³•ï¼šif err != nil","link":"/31b42193.html"},{"title":"Go:fmt.Printf() æ ¼å¼åŒ–å ä½ç¬¦","text":"fmt.Printf() æ ¼å¼åŒ–å ä½ç¬¦æ ¼å¼ç¬¦ fmt.Printf(&quot;%v&quot;, variable) 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485# ã€é€šç”¨å ä½ç¬¦ã€‘ v å€¼çš„é»˜è®¤æ ¼å¼ã€‚ %+v æ·»åŠ å­—æ®µå(å¦‚ç»“æ„ä½“) %#v ç›¸åº”å€¼çš„Goè¯­æ³•è¡¨ç¤º %T ç›¸åº”å€¼çš„ç±»å‹çš„Goè¯­æ³•è¡¨ç¤º %% å­—é¢ä¸Šçš„ç™¾åˆ†å·ï¼Œå¹¶éå€¼çš„å ä½ç¬¦ # ã€å¸ƒå°”å€¼ã€‘ %t true æˆ– false# ã€æ•´æ•°å€¼ã€‘ %b äºŒè¿›åˆ¶è¡¨ç¤º %c ç›¸åº”Unicodeç ç‚¹æ‰€è¡¨ç¤ºçš„å­—ç¬¦ %d åè¿›åˆ¶è¡¨ç¤º %o å…«è¿›åˆ¶è¡¨ç¤º %q å•å¼•å·å›´ç»•çš„å­—ç¬¦å­—é¢å€¼ï¼Œç”±Goè¯­æ³•å®‰å…¨åœ°è½¬ä¹‰ %x åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå­—æ¯å½¢å¼ä¸ºå°å†™ a-f %X åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå­—æ¯å½¢å¼ä¸ºå¤§å†™ A-F %U Unicodeæ ¼å¼ï¼šU+1234ï¼Œç­‰åŒäº &quot;U+%04X&quot;# ã€æµ®ç‚¹æ•°åŠå¤æ•°ã€‘ %b æ— å°æ•°éƒ¨åˆ†çš„ï¼ŒæŒ‡æ•°ä¸ºäºŒçš„å¹‚çš„ç§‘å­¦è®¡æ•°æ³•ï¼Œ ä¸ strconv.FormatFloatä¸­çš„ 'b' è½¬æ¢æ ¼å¼ä¸€è‡´ã€‚ä¾‹å¦‚ -123456p-78 %e ç§‘å­¦è®¡æ•°æ³•ï¼Œä¾‹å¦‚ -1234.456e+78 %E ç§‘å­¦è®¡æ•°æ³•ï¼Œä¾‹å¦‚ -1234.456E+78 %f æœ‰å°æ•°ç‚¹è€Œæ— æŒ‡æ•°ï¼Œä¾‹å¦‚ 123.456 %g æ ¹æ®æƒ…å†µé€‰æ‹© %e æˆ– %f ä»¥äº§ç”Ÿæ›´ç´§å‡‘çš„ï¼ˆæ— æœ«å°¾çš„0ï¼‰è¾“å‡º %G æ ¹æ®æƒ…å†µé€‰æ‹© %E æˆ– %f ä»¥äº§ç”Ÿæ›´ç´§å‡‘çš„ï¼ˆæ— æœ«å°¾çš„0ï¼‰è¾“å‡º# ã€å­—ç¬¦ä¸²å’Œbytesçš„sliceè¡¨ç¤ºã€‘ %s å­—ç¬¦ä¸²æˆ–åˆ‡ç‰‡çš„æ— è§£è¯‘å­—èŠ‚ %q åŒå¼•å·å›´ç»•çš„å­—ç¬¦ä¸²ï¼Œç”±Goè¯­æ³•å®‰å…¨åœ°è½¬ä¹‰ %x åå…­è¿›åˆ¶ï¼Œå°å†™å­—æ¯ï¼Œæ¯å­—èŠ‚ä¸¤ä¸ªå­—ç¬¦ %X åå…­è¿›åˆ¶ï¼Œå¤§å†™å­—æ¯ï¼Œæ¯å­—èŠ‚ä¸¤ä¸ªå­—ç¬¦# ã€æŒ‡é’ˆã€‘ %p åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå‰ç¼€ 0x è¿™é‡Œæ²¡æœ‰ 'u' æ ‡è®°ã€‚è‹¥æ•´æ•°ä¸ºæ— ç¬¦å·ç±»å‹ï¼Œä»–ä»¬å°±ä¼šè¢«æ‰“å°æˆæ— ç¬¦å·çš„ã€‚# ã€ç²¾åº¦å’Œå¯¹é½æ–¹å¼ã€‘ ã€”è¾“å‡ºæœ€å°‘å®½åº¦ã€•ã€”ï¼ç²¾åº¦ã€•ã€”é•¿åº¦ã€•ç±»å‹ &quot;%-md&quot; ï¼šå·¦å¯¹é½ï¼Œè‹¥mæ¯”å®é™…å°‘æ—¶ï¼ŒæŒ‰å®é™…è¾“å‡ºã€‚ &quot;%m.ns&quot;ï¼šè¾“å‡ºmä½ï¼Œå–å­—ç¬¦ä¸²(å·¦èµ·)nä½ï¼Œå·¦è¡¥ç©ºæ ¼ï¼Œå½“n&gt;m or mçœç•¥æ—¶m=n &quot;%m.nf&quot;ï¼šè¾“å‡ºæµ®ç‚¹æ•°çš„è¾“å‡ºå®½åº¦å¯¹é½ï¼Œmä¸ºå®½åº¦ï¼Œnä¸ºå°æ•°ç‚¹å³è¾¹æ•°ä½# ã€å®½åº¦å’Œç²¾åº¦ã€‘ æŒ‡ç¤ºç¬¦(`f')ä¸ºä¾‹ï¼š %f: é»˜è®¤å®½åº¦å’Œç²¾åº¦ %mf å®½åº¦m, é»˜è®¤ç²¾åº¦ %.nf é»˜è®¤å®½åº¦, ç²¾åº¦n %m.nf å®½åº¦m, ç²¾åº¦n %m.f å®½åº¦m, ç²¾åº¦0 è‹¥é‡åˆ°æµ®ç‚¹æ•°çš„æŒ‡ç¤ºç¬¦(`f')çš„è¯ï¼Œå®ƒè¡¨ç¤ºå°æ•°éƒ¨åˆ†çš„ä½æ•°ã€‚ è‹¥é‡åˆ°æµ®ç‚¹æ•°çš„æŒ‡ç¤ºç¬¦(`e', `E', `g', `G')çš„è¯ï¼Œå®ƒè¡¨ç¤ºæœ‰æ•ˆä½æ•° è‹¥å°†ç²¾åº¦è®¾ä¸º`*'çš„è¯ï¼Œå°†ä»å‚æ•°ä¸­æå–ç²¾åº¦çš„å€¼ æ•´æ•°çš„æŒ‡ç¤ºç¬¦(`d', `i', `b', `o', `x', `X', `u') å…¶ä¸­å¯¹äºå­—ç¬¦ä¸²ï¼…sæˆ–è€…æµ®ç‚¹ç±»å‹ï¼…f,æ¥è¯´ï¼Œç²¾åº¦å¯ä»¥æˆªæ–­æ•°æ®çš„é•¿åº¦ &quot;%-md&quot; ï¼šå·¦å¯¹é½ï¼Œè‹¥mæ¯”å®é™…å°‘æ—¶ï¼ŒæŒ‰å®é™…è¾“å‡ºã€‚ &quot;%m.ns&quot;ï¼šè¾“å‡ºmä½ï¼Œå–å­—ç¬¦ä¸²(å·¦èµ·)nä½ï¼Œå·¦è¡¥ç©ºæ ¼ï¼Œå½“n&gt;m or mçœç•¥æ—¶m=n# ã€æ˜¾ç¤ºå‚æ•°å ä½ç¬¦ã€‘ %[2]d, %[1]d ä»¥%dä¸ºä¾‹ï¼šå…ˆè¾“å‡ºç¬¬äºŒä¸ªå€¼ï¼Œå†è¾“å‡ºç¬¬ä¸€ä¸ªå€¼.# ã€ç‰¹æ®Šæ ¼å¼æ ‡è¯†ç¬¦ã€‘ + æ€»æ‰“å°æ•°å€¼çš„æ­£è´Ÿå·ï¼›å¯¹äº%qï¼ˆ%+qï¼‰ä¿è¯åªè¾“å‡ºASCIIç¼–ç çš„å­—ç¬¦ã€‚ - å·¦å¯¹é½ # å¤‡ç”¨æ ¼å¼ï¼š ä¸ºå…«è¿›åˆ¶æ·»åŠ å‰å¯¼ 0ï¼ˆ%#oï¼‰ï¼Œ ä¸ºåå…­è¿›åˆ¶æ·»åŠ å‰å¯¼ 0xï¼ˆ%#xï¼‰æˆ–0Xï¼ˆ%#Xï¼‰ï¼Œä¸º %pï¼ˆ%#pï¼‰å»æ‰å‰å¯¼ 0xï¼› å¯¹äº %qï¼Œè‹¥ strconv.CanBackquote è¿”å› trueï¼Œ å°±ä¼šæ‰“å°åŸå§‹ï¼ˆå³åå¼•å·å›´ç»•çš„ï¼‰å­—ç¬¦ä¸²ï¼› å¦‚æœæ˜¯å¯æ‰“å°å­—ç¬¦ï¼Œ%Uï¼ˆ%#Uï¼‰ä¼šå†™å‡ºè¯¥å­—ç¬¦çš„ Unicodeç¼–ç å½¢å¼ï¼ˆå¦‚å­—ç¬¦ x ä¼šè¢«æ‰“å°æˆ U+0078 'x'ï¼‰ã€‚ ' ' ï¼ˆç©ºæ ¼ï¼‰ä¸ºæ•°å€¼ä¸­çœç•¥çš„æ­£è´Ÿå·ç•™å‡ºç©ºç™½ï¼ˆ% dï¼‰ï¼› ä»¥åå…­è¿›åˆ¶ï¼ˆ% x, % Xï¼‰æ‰“å°å­—ç¬¦ä¸²æˆ–åˆ‡ç‰‡æ—¶ï¼Œåœ¨å­—èŠ‚ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ 0 å¡«å……å‰å¯¼çš„0è€Œéç©ºæ ¼ï¼›å¯¹äºæ•°å­—ï¼Œè¿™ä¼šå°†å¡«å……ç§»åˆ°æ­£è´Ÿå·ä¹‹å","link":"/8aaf9686.html"},{"title":"Go:reflect åå°„","text":"reflect åå°„åå°„æ€§èƒ½çš„ä¸€èˆ¬åŸåˆ™åŸºå‡†æµ‹è¯•ç»“æœçš„æ•°å€¼åˆ†æçš„ä¸€èˆ¬åŸåˆ™å»ºè®®ï¼š èƒ½ä½¿ç”¨åŸç”Ÿä»£ç æ—¶ï¼Œå°½é‡é¿å…åå°„æ“ä½œã€‚ æå‰ç¼“å†²åå°„å€¼å¯¹è±¡ï¼Œå¯¹æ€§èƒ½æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚ é¿å…åå°„å‡½æ•°è°ƒç”¨ï¼Œå®åœ¨éœ€è¦è°ƒç”¨æ—¶ï¼Œå…ˆæå‰ç¼“å†²å‡½æ•°å‚æ•°åˆ—è¡¨ï¼Œå¹¶ä¸”å°½é‡å°‘åœ°ä½¿ç”¨è¿”å›å€¼ã€‚ reflect åŒ…ç±»å‹å®šä¹‰12345678910111213141516171819202122232425262728293031323334//reflect åŒ…ç±»å‹å®šä¹‰type Kind Signconst ( Invalid Kind = iota // éæ³•ç±»å‹ Bool // å¸ƒå°”å‹ Int // æœ‰ç¬¦å·æ•´å‹ Int8 // æœ‰ç¬¦å·8ä½æ•´å‹ Int16 // æœ‰ç¬¦å·16ä½æ•´å‹ Int32 // æœ‰ç¬¦å·32ä½æ•´å‹ Int64 // æœ‰ç¬¦å·64ä½æ•´å‹ Uint // æ— ç¬¦å·æ•´å‹ Uint8 // æ— ç¬¦å·8ä½æ•´å‹ Uint16 // æ— ç¬¦å·16ä½æ•´å‹ Uint32 // æ— ç¬¦å·32ä½æ•´å‹ Uint64 // æ— ç¬¦å·64ä½æ•´å‹ Uintptr // æŒ‡é’ˆ Float32 // å•ç²¾åº¦æµ®ç‚¹æ•° Float64 // åŒç²¾åº¦æµ®ç‚¹æ•° Complex64 // 64ä½å¤æ•°ç±»å‹ Complex128 // 128ä½å¤æ•°ç±»å‹ Array // æ•°ç»„ Chan // é€šé“ Func // å‡½æ•° Interface // æ¥å£ Map // æ˜ å°„ Ptr // æŒ‡é’ˆ Slice // åˆ‡ç‰‡ String // å­—ç¬¦ä¸² Struct // ç»“æ„ä½“ UnsafePointer // åº•å±‚æŒ‡é’ˆ)","link":"/53f6e137.html"},{"title":"Go:slice åˆ‡ç‰‡æœ¬è´¨","text":"go åˆ‡ç‰‡ï¼šæœ¬è´¨æ•°ç»„Goçš„åˆ‡ç‰‡æ˜¯åœ¨æ•°ç»„ä¹‹ä¸Šçš„æŠ½è±¡æ•°æ®ç±»å‹ï¼Œå› æ­¤åœ¨äº†è§£åˆ‡ç‰‡ä¹‹å‰å¿…é¡»è¦è¦ç†è§£æ•°ç»„ã€‚æ•°ç»„ç±»å‹ç”±æŒ‡å®šå’Œé•¿åº¦å’Œå…ƒç´ ç±»å‹å®šä¹‰ã€‚æ•°ç»„ä¸éœ€è¦æ˜¾å¼çš„åˆå§‹åŒ–ï¼›æ•°ç»„å…ƒç´ ä¼šè‡ªåŠ¨åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼š Goçš„æ•°ç»„æ˜¯å€¼è¯­ä¹‰ã€‚ä¸€ä¸ªæ•°ç»„å˜é‡è¡¨ç¤ºæ•´ä¸ªæ•°ç»„ï¼Œå®ƒä¸æ˜¯æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼ˆæ¯”å¦‚Cè¯­è¨€çš„æ•°ç»„ï¼‰ã€‚å½“ä¸€ä¸ªæ•°ç»„å˜é‡è¢«èµ‹å€¼æˆ–è€…è¢«ä¼ é€’çš„æ—¶å€™ï¼Œå®é™…ä¸Šä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„ã€‚ï¼ˆä¸ºäº†é¿å…å¤åˆ¶æ•°ç»„ï¼Œä½ å¯ä»¥ä¼ é€’ä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Œä½†æ˜¯æ•°ç»„æŒ‡é’ˆå¹¶ä¸æ˜¯æ•°ç»„ã€‚ï¼‰å¯ä»¥å°†æ•°ç»„çœ‹ä½œä¸€ä¸ªç‰¹æ®Šçš„structï¼Œç»“æ„çš„å­—æ®µåå¯¹åº”æ•°ç»„çš„ç´¢å¼•ï¼ŒåŒæ—¶æˆå‘˜çš„æ•°ç›®å›ºå®šã€‚ åˆ‡ç‰‡æ•°ç»„è™½ç„¶æœ‰é€‚ç”¨å®ƒä»¬çš„åœ°æ–¹ï¼Œä½†æ˜¯æ•°ç»„ä¸å¤Ÿçµæ´»ï¼Œå› æ­¤åœ¨Goä»£ç ä¸­æ•°ç»„ä½¿ç”¨çš„å¹¶ä¸å¤šã€‚ä½†æ˜¯ï¼Œåˆ‡ç‰‡åˆ™ä½¿ç”¨å¾—ç›¸å½“å¹¿æ³›ã€‚åˆ‡ç‰‡åŸºäºæ•°ç»„æ„å»ºï¼Œä½†æ˜¯æä¾›æ›´å¼ºçš„åŠŸèƒ½å’Œä¾¿åˆ©ã€‚åˆ‡ç‰‡çš„ç±»å‹æ˜¯ []Tï¼ŒT æ˜¯åˆ‡ç‰‡å…ƒç´ çš„ç±»å‹ã€‚å’Œæ•°ç»„ä¸åŒçš„æ˜¯ï¼Œåˆ‡ç‰‡æ²¡æœ‰å›ºå®šçš„é•¿åº¦ã€‚åˆ‡ç‰‡çš„å­—é¢å€¼å’Œæ•°ç»„å­—é¢å€¼å¾ˆåƒï¼Œä¸è¿‡åˆ‡ç‰‡æ²¡æœ‰æŒ‡å®šå…ƒç´ ä¸ªæ•°ï¼šåˆ‡ç‰‡å¯ä»¥å†…ç½®å‡½æ•° make åˆ›å»ºï¼Œå‡½æ•°ç­¾åä¸ºï¼šfunc make([]T, len, cap) []TT ä»£è¡¨è¢«åˆ›å»ºçš„åˆ‡ç‰‡å…ƒç´ çš„ç±»å‹ã€‚å‡½æ•° make æ¥å—ä¸€ä¸ªç±»å‹ã€ä¸€ä¸ªé•¿åº¦å’Œä¸€ä¸ªå¯é€‰çš„å®¹é‡å‚æ•°ã€‚è°ƒç”¨ make æ—¶ï¼Œå†…éƒ¨ä¼šåˆ†é…ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åè¿”å›æ•°ç»„å¯¹åº”çš„åˆ‡ç‰‡ã€‚å½“å®¹é‡å‚æ•°è¢«å¿½ç•¥æ—¶ï¼Œå®ƒé»˜è®¤ä¸ºæŒ‡å®šçš„é•¿åº¦ã€‚ä¸‹é¢æ˜¯ç®€æ´çš„å†™æ³•ï¼šs := make([]byte, 5)å¯ä»¥ä½¿ç”¨å†…ç½®å‡½æ•° len å’Œ cap è·å–åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡ä¿¡æ¯ã€‚len(s) == 5cap(s) == 5 é•¿åº¦å’Œå®¹é‡ä¹‹é—´çš„å…³ç³»ã€‚é›¶å€¼çš„åˆ‡ç‰‡ç±»å‹å˜é‡ä¸º nilã€‚å¯¹äºé›¶å€¼åˆ‡ç‰‡å˜é‡ï¼Œlen å’Œ cap éƒ½å°†è¿”å› 0ã€‚åˆ‡ç‰‡ä¹Ÿå¯ä»¥åŸºäºç°æœ‰çš„åˆ‡ç‰‡æˆ–æ•°ç»„ç”Ÿæˆã€‚åˆ‡åˆ†çš„èŒƒå›´ç”±ä¸¤ä¸ªç”±å†’å·åˆ†å‰²çš„ç´¢å¼•å¯¹åº”çš„åŠå¼€åŒºé—´æŒ‡å®šã€‚åˆ‡ç‰‡çš„å¼€å§‹å’Œç»“æŸçš„ç´¢å¼•éƒ½æ˜¯å¯é€‰çš„ï¼›å®ƒä»¬åˆ†åˆ«é»˜è®¤ä¸ºé›¶å’Œæ•°ç»„çš„é•¿åº¦ã€‚ åˆ‡ç‰‡çš„æœ¬è´¨ä¸€ä¸ªåˆ‡ç‰‡æ˜¯ä¸€ä¸ªæ•°ç»„åˆ‡å‰²åŒºé—´çš„æè¿°ã€‚å®ƒåŒ…å«äº†æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Œåˆ‡å‰²åŒºé—´çš„é•¿åº¦ï¼Œå’Œå®¹é‡ï¼ˆåˆ‡å‰²åŒºé—´çš„æœ€å¤§é•¿åº¦ï¼‰ã€‚åˆ‡ç‰‡å¹¶ä¸å¤åˆ¶æ•´ä¸ªåˆ‡ç‰‡å…ƒç´ ã€‚å®ƒåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ‡ç‰‡æ‰§è¡ŒåŒæ ·çš„åº•å±‚æ•°ç»„ã€‚è¿™ä½¿å¾—åˆ‡ç‰‡æ“ä½œå’Œæ•°ç»„ç´¢å¼•ä¸€æ ·é«˜æ•ˆã€‚å› æ­¤ï¼Œé€šè¿‡ä¸€ä¸ªæ–°åˆ‡ç‰‡ä¿®æ”¹å…ƒç´ åŒæ ·ä¼šå½±å“åˆ°åŸå§‹çš„åˆ‡ç‰‡ã€‚åˆ‡ç‰‡å¢é•¿ä¸èƒ½è¶…å‡ºå…¶å®¹é‡ã€‚å¢é•¿è¶…å‡ºåˆ‡ç‰‡å®¹é‡å°†ä¼šå¯¼è‡´è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå°±åƒåˆ‡ç‰‡æˆ–æ•°ç»„çš„ç´¢å¼•è¶…å‡ºèŒƒå›´å¼•èµ·å¼‚å¸¸ä¸€æ ·ã€‚åŒæ ·ï¼Œä¸èƒ½ä½¿ç”¨å°äºé›¶çš„ç´¢å¼•å»è®¿é—®åˆ‡ç‰‡ä¹‹å‰çš„å…ƒç´ ã€‚åˆ‡ç‰‡ç”Ÿé•¿ï¼ˆå¤åˆ¶å’Œè¿½åŠ ï¼‰è¦å¢åŠ åˆ‡ç‰‡çš„å®¹é‡å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„ã€æ›´å¤§å®¹é‡çš„åˆ‡ç‰‡ï¼Œç„¶åå°†åŸæœ‰åˆ‡ç‰‡çš„å†…å®¹å¤åˆ¶åˆ°æ–°çš„åˆ‡ç‰‡ã€‚æ•´ä¸ªæŠ€æœ¯æ˜¯ä¸€äº›æ”¯æŒåŠ¨æ€æ•°ç»„è¯­è¨€çš„å¸¸è§å®ç°ã€‚å¾ªç¯ä¸­å¤åˆ¶çš„æ“ä½œå¯ä»¥ç”± copy å†…ç½®å‡½æ•°æ›¿ä»£ã€‚copy å‡½æ•°å°†æºåˆ‡ç‰‡çš„å…ƒç´ å¤åˆ¶åˆ°ç›®çš„åˆ‡ç‰‡ã€‚å®ƒè¿”å›å¤åˆ¶å…ƒç´ çš„æ•°ç›®ã€‚func copy(dst, src []T) intcopy å‡½æ•°æ”¯æŒä¸åŒé•¿åº¦çš„åˆ‡ç‰‡ä¹‹é—´çš„å¤åˆ¶ï¼ˆå®ƒåªå¤åˆ¶æœ€å°åˆ‡ç‰‡é•¿åº¦çš„å…ƒç´ ï¼‰ã€‚æ­¤å¤–ï¼Œcopy å‡½æ•°å¯ä»¥æ­£ç¡®å¤„ç†æºå’Œç›®çš„åˆ‡ç‰‡æœ‰é‡å çš„æƒ…å†µã€‚ä½†å¤§å¤šæ•°ç¨‹åºä¸éœ€è¦å®Œå…¨çš„æ§åˆ¶ï¼Œå› æ­¤Goæä¾›äº†ä¸€ä¸ªå†…ç½®å‡½æ•° appendï¼Œç”¨äºå¤§å¤šæ•°åœºåˆï¼›å®ƒçš„å‡½æ•°ç­¾åï¼šfunc append(s []T, x â€¦T) []Tappendå‡½æ•°å°†xè¿½åŠ åˆ°åˆ‡ç‰‡sçš„æœ«å°¾ï¼Œå¹¶ä¸”åœ¨å¿…è¦çš„æ—¶å€™å¢åŠ å®¹é‡ã€‚å¦‚æœæ˜¯è¦å°†ä¸€ä¸ªåˆ‡ç‰‡è¿½åŠ åˆ°å¦ä¸€ä¸ªåˆ‡ç‰‡å°¾éƒ¨ï¼Œéœ€è¦ä½¿ç”¨â€¦è¯­æ³•å°†ç¬¬2ä¸ªå‚æ•°å±•å¼€ä¸ºå‚æ•°åˆ—è¡¨ã€‚å¯ä»¥å£°æ˜ä¸€ä¸ªé›¶å€¼åˆ‡ç‰‡ï¼ˆnilï¼‰ï¼Œç„¶ååœ¨å¾ªç¯ä¸­å‘åˆ‡ç‰‡è¿½åŠ æ•°æ®ï¼š å¯èƒ½çš„â€œé™·é˜±â€åˆ‡ç‰‡æ“ä½œå¹¶ä¸ä¼šå¤åˆ¶åº•å±‚çš„æ•°ç»„ã€‚æ­¤å±‚çš„æ•°ç»„å°†è¢«ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°å®ƒä¸å†è¢«å¼•ç”¨ã€‚æœ‰æ—¶å€™å¯èƒ½ä¼šå› ä¸ºä¸€ä¸ªå°çš„å†…å­˜å¼•ç”¨å¯¼è‡´ä¿å­˜æ‰€æœ‰çš„æ•°æ®ã€‚ Go åˆ‡ç‰‡æ‰©å®¹æœºåˆ¶è¯¦è§£ï¼šå®¹é‡å¢é•¿ä¸å†…å­˜å¯¹é½çš„åº•å±‚é€»è¾‘ï¼ˆé‡è¦æç¤ºï¼‰åœ¨ Go è¯­è¨€ä¸­ï¼Œåˆ‡ç‰‡ï¼ˆsliceï¼‰æ˜¯æ—¥å¸¸å¼€å‘ä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚å®ƒçµæ´»ã€é«˜æ•ˆï¼Œæ”¯æŒåŠ¨æ€å¢é•¿ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬é¢‘ç¹ä½¿ç”¨ append å‘åˆ‡ç‰‡æ·»åŠ å…ƒç´ æ—¶ï¼Œå…¶åº•å±‚å®¹é‡ï¼ˆcapï¼‰æ˜¯å¦‚ä½•å¢é•¿çš„ï¼Ÿä¸ºä»€ä¹ˆæœ‰æ—¶å®é™…åˆ†é…çš„å®¹é‡ä¼šâ€œç•¥å¤§äºâ€æˆ‘ä»¬é¢„æœŸçš„å€¼ï¼Ÿæœ¬æ–‡å°†ç»“åˆ Go æºç ï¼Œæ·±å…¥å‰–æåˆ‡ç‰‡æ‰©å®¹æœºåˆ¶ï¼Œç‰¹åˆ«æ˜¯å®¹é‡å¢é•¿ç­–ç•¥ä¸å†…å­˜å¯¹é½å¯¹æœ€ç»ˆåˆ†é…å¤§å°çš„å½±å“ã€‚ ä¸€ã€åˆ‡ç‰‡çš„åŸºæœ¬ç»“æ„å›é¡¾Go çš„åˆ‡ç‰‡æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼ŒåŒ…å«ä¸‰ä¸ªå­—æ®µï¼š 12345type slice struct { array unsafe.Pointer // æŒ‡å‘åº•å±‚æ•°ç»„ len int // é•¿åº¦ cap int // å®¹é‡} lenï¼šå½“å‰å…ƒç´ ä¸ªæ•°ï¼› capï¼šä» array å¼€å§‹åˆ°åº•å±‚æ•°ç»„æœ«å°¾çš„å¯ç”¨å…ƒç´ æ€»æ•°ï¼› å½“ len == cap æ—¶ï¼Œå†æ‰§è¡Œ append å°±ä¼šè§¦å‘æ‰©å®¹ï¼ˆreallocationï¼‰ã€‚ äºŒã€æ‰©å®¹çš„æ ¸å¿ƒé€»è¾‘ï¼šgrowsliceGo çš„åˆ‡ç‰‡æ‰©å®¹ç”±è¿è¡Œæ—¶å‡½æ•° growslice å®ç°ï¼ˆä½äº runtime/slice.goï¼‰ã€‚å…¶æ ¸å¿ƒç›®æ ‡æ˜¯ï¼šåœ¨æ»¡è¶³æ–°å®¹é‡éœ€æ±‚çš„å‰æä¸‹ï¼Œå°½é‡å‡å°‘å†…å­˜åˆ†é…æ¬¡æ•°ï¼ŒåŒæ—¶å…¼é¡¾å†…å­˜æ•ˆç‡ã€‚ æ‰©å®¹ç­–ç•¥æ¦‚è§ˆ è‹¥åŸå®¹é‡ä¸º 0ï¼šæ–°å®¹é‡è‡³å°‘ä¸º 1ï¼ˆæˆ–æ‰€éœ€æœ€å°å®¹é‡ï¼‰ï¼› è‹¥åŸå®¹é‡ &lt; 1024ï¼šå¤§è‡´ç¿»å€ï¼ˆÃ—2ï¼‰ï¼› è‹¥åŸå®¹é‡ â‰¥ 1024ï¼šæ¯æ¬¡å¢é•¿çº¦ 25%ï¼ˆÃ—1.25ï¼‰ï¼› æœ€ç»ˆå®¹é‡éœ€ â‰¥ æ‰€éœ€æœ€å°å®¹é‡ï¼ˆå³ len + æ–°å¢å…ƒç´ æ•°ï¼‰ï¼› ä¸ºå†…å­˜å¯¹é½ï¼Œå®é™…åˆ†é…å¯èƒ½ç•¥å¤§äºè®¡ç®—å€¼ã€‚ ä¸‰ã€å†…å­˜å¯¹é½ï¼šä¸ºä»€ä¹ˆâ€œç•¥å¤§â€ï¼Ÿå³ä½¿æˆ‘ä»¬è®¡ç®—å‡ºâ€œç†æƒ³æ–°å®¹é‡â€ä¸º 1600ï¼ŒGo å®é™…åˆ†é…çš„å®¹é‡å¯èƒ½æ˜¯ 1632 æˆ– 1664ã€‚è¿™æ˜¯å› ä¸ºåœ¨åˆ†é…å†…å­˜æ—¶ï¼ŒGo ä¼šè€ƒè™‘å†…å­˜å¯¹é½ï¼ˆmemory alignmentï¼‰ï¼Œä»¥æå‡ CPU è®¿é—®æ•ˆç‡å¹¶æ»¡è¶³åº•å±‚åˆ†é…å™¨çš„è¦æ±‚ã€‚ å¯¹é½åŸç†ç®€è¿°ç°ä»£ CPU åœ¨è®¿é—®å†…å­˜æ—¶ï¼Œå¯¹æŸäº›æ•°æ®ç±»å‹ï¼ˆå¦‚ int64ã€æŒ‡é’ˆï¼‰è¦æ±‚å…¶åœ°å€æ˜¯ 8 å­—èŠ‚å¯¹é½çš„ã€‚Go çš„å†…å­˜åˆ†é…å™¨ï¼ˆå¦‚ mallocgcï¼‰ä¼šå°†è¯·æ±‚çš„å†…å­˜å¤§å°å‘ä¸Šå¯¹é½åˆ°ç‰¹å®šçš„â€œå°ºå¯¸ç±»â€ï¼ˆsize classï¼‰ï¼Œè¿™äº›å°ºå¯¸ç±»æ˜¯é¢„å®šä¹‰çš„ã€å¯¹é½å‹å¥½çš„å—å¤§å°ã€‚ å› æ­¤ï¼Œå³ä½¿ä½ åªéœ€è¦ 1600 ä¸ª intï¼ˆå‡è®¾ int ä¸º 8 å­—èŠ‚ï¼Œå…± 12800 å­—èŠ‚ï¼‰ï¼Œåˆ†é…å™¨å¯èƒ½ä¼šåˆ†é…ä¸€ä¸ª 13056 å­—èŠ‚ çš„å—ï¼ˆå¯¹åº”å®¹é‡ 1632ï¼‰ï¼Œå› ä¸ºè¿™æ˜¯æœ€æ¥è¿‘ä¸”æ»¡è¶³å¯¹é½è¦æ±‚çš„å°ºå¯¸ç±»ã€‚ å››ã€ç»“åˆä»£ç éªŒè¯æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®éªŒè§‚å¯Ÿå®é™…æ‰©å®¹è¡Œä¸ºï¼š 123456789101112131415161718192021// grow_test.gopackage mainimport &quot;fmt&quot;func main() { s := make([]int, 0, 1000) // åˆå§‹ cap=1000 fmt.Printf(&quot;åˆå§‹: len=%d, cap=%d\\n&quot;, len(s), cap(s)) // è¿½åŠ  25 ä¸ªå…ƒç´ ï¼Œä½¿ len=1025 &gt; cap=1000ï¼Œè§¦å‘æ‰©å®¹ for i := 0; i &lt; 25; i++ { s = append(s, i) } fmt.Printf(&quot;æ‰©å®¹å: len=%d, cap=%d\\n&quot;, len(s), cap(s)) // ç»§ç»­è¿½åŠ ï¼Œè§‚å¯Ÿä¸‹ä¸€æ¬¡æ‰©å®¹ for i := 0; i &lt; 300; i++ { s = append(s, i) } fmt.Printf(&quot;å†æ¬¡æ‰©å®¹å: len=%d, cap=%d\\n&quot;, len(s), cap(s))} è¾“å‡ºï¼ˆGo 1.22ï¼‰ï¼š 123åˆå§‹: len=0, cap=1000æ‰©å®¹å: len=25, cap=1280å†æ¬¡æ‰©å®¹å: len=325, cap=1632 åˆ†æï¼š åˆå§‹ cap=1000ï¼Œå±äº â‰¥1024 çš„ä¸´ç•Œç‚¹é™„è¿‘ï¼› ç¬¬ä¸€æ¬¡æ‰©å®¹ï¼šæœŸæœ›å®¹é‡ = 1000 + 25 = 1025ï¼› æŒ‰ 1.25 å€å¢é•¿ï¼š1000 Ã— 1.25 = 1250ï¼› ä½† 1250 &lt; 1025ï¼Ÿä¸æˆç«‹ï¼Œå®é™…åº”ä¸º max(1250, 1025) = 1250ï¼› ç„¶è€Œå®é™… cap=1280ï¼Œæ¯” 1250 å¤§ â€”â€” è¿™å°±æ˜¯å†…å­˜å¯¹é½çš„ç»“æœï¼› ç¬¬äºŒæ¬¡æ‰©å®¹ï¼šä» 1280 å¢é•¿ 25% â†’ 1600ï¼Œä½†å®é™…åˆ†é… 1632ã€‚ ğŸ’¡ æ³¨æ„ï¼šGo 1.18+ å¯¹å¢é•¿ç®—æ³•åšäº†ä¼˜åŒ–ï¼Œç¡®ä¿å¢é•¿åå®¹é‡è‡³å°‘æ»¡è¶³éœ€æ±‚ï¼Œå¹¶è€ƒè™‘å¯¹é½ã€‚ äº”ã€æºç ç‰‡æ®µè§£æï¼ˆGo 1.22ï¼‰ä»¥ä¸‹æ˜¯ runtime/slice.go ä¸­ growslice çš„å…³é”®é€»è¾‘ï¼ˆç®€åŒ–ï¼‰ï¼š 12345678910111213141516171819202122232425262728293031func growslice(et *_type, old slice, cap int) slice { newcap := old.cap doublecap := newcap + newcap if cap &gt; doublecap { newcap = cap } else { if old.cap &lt; 1024 { newcap = doublecap } else { // Check 0 &lt; newcap to detect overflow for 0 &lt; newcap &amp;&amp; newcap &lt; cap { newcap += newcap / 4 } // å¦‚æœä»ä¸å¤Ÿï¼Œç›´æ¥è®¾ä¸º cap if newcap &lt;= 0 { newcap = cap } } } // å†…å­˜å¯¹é½ï¼šè®¡ç®—æ‰€éœ€å­—èŠ‚æ•°ï¼Œå¹¶å‘ä¸Šå¯¹é½ var overflow bool uintptr(newcap) * et.size // æ£€æŸ¥æº¢å‡º newcap, overflow = roundupsize(uintptr(newcap) * et.size) if overflow { panic(errorString(&quot;growslice: cap out of range&quot;)) } newcap = int(newcap / et.size) // è½¬å›å…ƒç´ ä¸ªæ•° // åˆ†é…æ–°æ•°ç»„...} å…³é”®ç‚¹ï¼š roundupsize æ˜¯å†…å­˜å¯¹é½çš„æ ¸å¿ƒå‡½æ•°ï¼Œå®ƒå°†è¯·æ±‚çš„å­—èŠ‚æ•°å‘ä¸Šèˆå…¥åˆ°æœ€è¿‘çš„å¯¹é½å°ºå¯¸ç±»ï¼› æœ€ç»ˆ newcap æ˜¯å¯¹é½åçš„å­—èŠ‚æ•°é™¤ä»¥å…ƒç´ å¤§å°ï¼Œå› æ­¤å¯èƒ½ç•¥å¤§äºç†è®ºè®¡ç®—å€¼ã€‚ å…­ã€å¯¹å¼€å‘è€…çš„å¯ç¤º é¢„åˆ†é…å®¹é‡ï¼šè‹¥èƒ½é¢„ä¼°å…ƒç´ æ•°é‡ï¼Œä½¿ç”¨ make([]T, 0, N) å¯é¿å…å¤šæ¬¡æ‰©å®¹å’Œæ•°æ®æ‹·è´ï¼› ä¸è¦ä¾èµ–å…·ä½“æ‰©å®¹å€æ•°ï¼šGo ç‰ˆæœ¬å‡çº§å¯èƒ½è°ƒæ•´ç­–ç•¥ï¼› å¤§å®¹é‡åˆ‡ç‰‡æ³¨æ„å†…å­˜å¼€é”€ï¼šæ‰©å®¹è™½å¹³ç¼“ï¼Œä½†åº•å±‚æ•°ç»„ä¸€æ—¦åˆ†é…ï¼Œç›´åˆ°æ— å¼•ç”¨æ‰ä¼šé‡Šæ”¾ï¼› æ€§èƒ½æ•æ„Ÿåœºæ™¯æ…ç”¨ appendï¼šå¯è€ƒè™‘ copy + é¢„åˆ†é…æˆ–ä½¿ç”¨ sync.Pool ç¼“å­˜åˆ‡ç‰‡ã€‚ ä¸ƒã€ç»“è¯­Go åˆ‡ç‰‡çš„æ‰©å®¹æœºåˆ¶æ˜¯æ€§èƒ½ä¸å†…å­˜æ•ˆç‡ä¹‹é—´ç²¾å¦™å¹³è¡¡çš„ä½“ç°ã€‚å®ƒä¸ä»…è€ƒè™‘äº†ç®—æ³•å±‚é¢çš„å¢é•¿ç­–ç•¥ï¼ˆå°åˆ‡ç‰‡ç¿»å€ã€å¤§åˆ‡ç‰‡ç¼“å¢ï¼‰ï¼Œè¿˜æ·±å…¥åˆ°ç³»ç»Ÿåº•å±‚ï¼Œé€šè¿‡å†…å­˜å¯¹é½ç¡®ä¿è¿è¡Œæ•ˆç‡ã€‚ç†è§£è¿™ä¸€æœºåˆ¶ï¼Œæœ‰åŠ©äºæˆ‘ä»¬å†™å‡ºæ›´é«˜æ•ˆã€æ›´å¯é¢„æµ‹çš„ Go ä»£ç ã€‚ ğŸ“Œ è®°ä½ï¼šGo çš„è®¾è®¡å“²å­¦æ˜¯â€œç®€å•ä½†ä¸ç®€é™‹â€â€”â€”çœ‹ä¼¼è‡ªåŠ¨çš„ append èƒŒåï¼Œæ˜¯è¿è¡Œæ—¶ç²¾å¿ƒä¼˜åŒ–çš„å·¥ç¨‹æ™ºæ…§ã€‚ å‚è€ƒï¼š Go æºç ï¼šsrc/runtime/slice.go Go å†…å­˜åˆ†é…å™¨ï¼šsrc/runtime/malloc.go ã€ŠGo è¯­è¨€é«˜çº§ç¼–ç¨‹ã€‹â€”â€”åˆ‡ç‰‡ä¸å†…å­˜ç®¡ç†ç« èŠ‚ æœ¬æ–‡åŸºäº Go 1.22 ç¼–å†™ï¼Œä¸åŒç‰ˆæœ¬è¡Œä¸ºå¯èƒ½ç•¥æœ‰å·®å¼‚ã€‚å»ºè®®åœ¨å…³é”®é¡¹ç›®ä¸­é€šè¿‡å®æµ‹éªŒè¯ã€‚","link":"/647ce9cb.html"},{"title":"Go:string","text":"stringå¸¸ç”¨æ‹¼æ¥æ–¹æ³• += æ¥æ‹¼æ¥ bytes.Buffer strings.Builder ( &gt;= go1.10 ) æ‹¼æ¥æ–¹æ³•æ€§èƒ½å¯¹æ¯” ä½¿ç”¨ += çš„æ–¹æ³•æ€§èƒ½æ˜¯æœ€æ…¢çš„ï¼Œæ€§èƒ½æ¶ˆè€—ç›¸å¯¹æœ€å¤§; Bufferå’ŒBuilderæ€§èƒ½ç›¸å·®æ— å‡ ï¼ŒBuilderåœ¨å†…å­˜çš„ä½¿ç”¨ä¸Šè¦ç•¥ä¼˜äºBuffer; å®˜æ–¹æ¨èstrings.Builderï¼Œä¼˜ç‚¹: æ€§èƒ½å¥½ï¼Œä»£ç æ¸…æ™°;","link":"/765e2161.html"},{"title":"Go:struct","text":"structé¢å‘å¯¹è±¡Classç±»çš„åº•å±‚å®ç°ä»æŸäº›æ–¹é¢è¯´å°±æ˜¯ç»“æ„ä½“ï¼Œå¯¹è±¡çš„å¼•ç”¨å°±æ˜¯æŒ‡é’ˆï¼Œåªæ˜¯è¯­è¨€æŠŠä»–ä»¬å°è£…èµ·æ¥äº†è€Œå·²ã€‚Golangçš„Structç»“æ„ä½“ï¼ˆæºäºCè¯­è¨€ï¼Œä½†åˆæœ‰åˆ«äºCï¼‰çš„çµæ´»æ€§ï¼šgoè¯­è¨€ä¸­å¹¶æ²¡æœ‰åƒC++ï¼ŒJavaè¯­è¨€ä¸­è¿™ç±»çš„Classï¼Œå®ƒåªå«æœ‰åƒCè¯­è¨€ä¸­çš„ç»“æ„ä½“ï¼Œç”¨ç»“æ„ä½“å’ŒæŒ‡é’ˆç­‰ç‰¹æ€§ï¼Œå®Œæˆä¸€ä¸ªç±»çš„ä½œç”¨ï¼Œå¾ˆå·§å¦™çš„ä½¿ç”¨äº†æŒ‡é’ˆå’Œç»“æ„ä½“ï¼Œä¸ä»…æ˜¯goçš„é¢å‘å¯¹è±¡ï¼ŒåŒ…æ‹¬goè¯­è¨€ä¸­çš„mapç­‰æ“ä½œéƒ½æ˜¯å€ŸåŠ©äº†ç»“æ„ä½“ã€‚å…¶å®ï¼Œè¯´ç™½äº†ï¼ŒC++ã€Javaç­‰é¢å‘å¯¹è±¡çš„è¯­è¨€ä¸­ï¼Œç±»çš„åº•å±‚å®ç°å°±æ˜¯ç»“æ„ä½“ï¼Œå¯¹è±¡çš„å¼•ç”¨å°±æ˜¯æŒ‡é’ˆï¼Œåªæ˜¯è¯­è¨€æŠŠä»–ä»¬å°è£…èµ·æ¥äº†è€Œå·²ã€‚å¾ˆå¤šäººåˆšæ¥è§¦é¢å‘å¯¹è±¡å¾ˆä¸ç†è§£è¿™äº›ä¸œè¥¿ä¹Ÿåº”è¯¥ç¼˜äºæ­¤ã€‚ æˆ–è€…è¯´ï¼Œé¢å‘å¯¹è±¡çš„å°è£…åœ¨æŸç§æ„ä¹‰ä¸Šæ˜¯ä»¥ç‰ºç‰²çµæ´»ç‰¹æ€§çš„ä¸ºä»£ä»·çš„ä¸€ç§æŠ½è±¡ç®€åŒ–ã€‚ æ‰€æœ‰é«˜çº§è¯­è¨€(PHPã€Javaã€Pythonã€JavaScriptç­‰ç­‰â€¦)çš„æ•°ç»„Arrayã€å­—å…¸mapã€Sliceåˆ‡ç‰‡ã€Jsonç­‰ç»“æ„ç±»å‹å¾€å¾€åªæ˜¯å«æ³•ä¸ä¸€æ ·ï¼Œå¤šå°‘éƒ½æºäºCç³»æˆ–è€…å—åˆ°Cç³»çš„Structç»“æ„ä½“æ€æƒ³çš„å½±å“,åœ¨æŸäº›ç‰¹å®šé¢†åŸŸå†…ï¼Œåšäº†ä¸€äº›é’ˆå¯¹æ€§çš„è§£å†³æ–¹æ¡ˆã€‚ PHPå°±æ˜¯cè¯­è¨€å®ç°çš„ä¸€å¥—é«˜çº§â€œç¨‹åºâ€è¯­è¨€ï¼Œåªä¸è¿‡æ˜¯è¿™å¥—â€œç¨‹åºåŒ–çš„è¯­è¨€â€çš„è§„èŒƒå’Œè¯­æ³•ç­‰æœºåˆ¶å¯ä»¥ç”¨æ¥å¿«é€Ÿåšwebé¢†åŸŸçš„äº‹æƒ…ï¼Œé€šè¿‡è§£é‡Šå™¨ï¼Œè½¬æˆåº•å±‚è¯­è¨€å®Œæˆä»£ç çš„æœ€ç»ˆæ‰§è¡Œã€‚ è¿™ä¹Ÿå°è¯äº†å¾ˆå¤šç­”æ¡ˆå¾€å¾€è¿½æ ¹æº¯æºéƒ½åœ¨è®¡ç®—æœºæ•°æ®ç»“æ„åŸºç¡€é‡Œæ²¡æœ‰æ·å¾„å¯ä»¥èµ°ã€‚ golang structæ³¨æ„äº‹é¡¹ï¼šå¯¹äºstructç±»å‹æ¥è¯´ï¼Œå­—æ®µçš„å…ˆåé¡ºåºæ˜¯éå¸¸å…³é”®çš„ã€‚å¦‚æœä¸¤ä¸ªstructç±»å‹åŒ…å«äº†å®Œå…¨ç›¸åŒçš„å­—æ®µï¼Œä½†æ˜¯æ’åˆ—é¡ºåºä¸åŒæˆ–è€…è¿›è¡Œäº†éƒ¨åˆ†åˆå¹¶ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªstructå°±æ˜¯ä¸åŒçš„ç±»å‹ï¼ å¦‚æœstructå­—æ®µæ˜¯å¤§å†™å­—æ¯å¼€å¤´ï¼Œé‚£ä¹ˆè¯¥å­—æ®µå°±æ˜¯å¯¼å‡ºçš„ï¼ˆåŒ…å¤–å¯è§ï¼‰ï¼Œè¿™ä¹Ÿç¬¦åˆGoè¯­è¨€çš„å¯è§æ€§è§„åˆ™ã€‚å› æ­¤ä¸€ä¸ªstructå¯ä»¥åŒæ—¶åŒ…å«å¯¼å‡ºå’Œæœªå¯¼å‡ºçš„å˜é‡ã€‚","link":"/527244e6.html"},{"title":"Go:switch","text":"switchswitch æ³¨æ„äº‹é¡¹ fallthroughä¸èƒ½ç”¨åœ¨switchçš„æœ€åä¸€ä¸ªåˆ†æ”¯ã€‚","link":"/8709d8d0.html"},{"title":"Go:å…³äºGoè¯­è¨€:ç»“æ„ä½“(Struct)-æ–¹æ³•(Method)-æ¥æ”¶è€…(Receiver)ç±»å‹çš„é€‚ç”¨åœºæ™¯é€‰æ‹©å’Œå‘½åçº¦å®š(Goå®˜æ–¹å»ºè®®)","text":"å…³äºGoè¯­è¨€:ç»“æ„ä½“(Struct)-æ–¹æ³•(Method)-æ¥æ”¶è€…(Receiver)ç±»å‹çš„é€‚ç”¨åœºæ™¯é€‰æ‹©å’Œå‘½åçº¦å®š(Goå®˜æ–¹å»ºè®®)ä½•æ—¶ä½¿ç”¨å€¼ç±»å‹åœºæ™¯1.å¦‚æœæ¥å—è€…æ˜¯ä¸€ä¸ª mapï¼Œfunc æˆ–è€… chanï¼Œä½¿ç”¨å€¼ç±»å‹(å› ä¸ºå®ƒä»¬æœ¬èº«å°±æ˜¯å¼•ç”¨ç±»å‹)ã€‚2.å¦‚æœæ¥å—è€…æ˜¯ä¸€ä¸ª sliceï¼Œå¹¶ä¸”æ–¹æ³•ä¸æ‰§è¡Œ reslice æ“ä½œï¼Œä¹Ÿä¸é‡æ–°åˆ†é…å†…å­˜ç»™ sliceï¼Œä½¿ç”¨å€¼ç±»å‹ã€‚3.å¦‚æœæ¥å—è€…æ˜¯ä¸€ä¸ªå°çš„æ•°ç»„æˆ–è€…åŸç”Ÿçš„å€¼ç±»å‹ç»“æ„ä½“ç±»å‹(æ¯”å¦‚ time.Time ç±»å‹)ï¼Œè€Œä¸”æ²¡æœ‰å¯ä¿®æ”¹çš„å­—æ®µå’ŒæŒ‡é’ˆï¼Œåˆæˆ–è€…æ¥å—è€…æ˜¯ä¸€ä¸ªç®€å•åœ°åŸºæœ¬ç±»å‹åƒæ˜¯ int å’Œ stringï¼Œä½¿ç”¨å€¼ç±»å‹å°±å¥½äº†ã€‚ ä¸€ä¸ªå€¼ç±»å‹çš„æ¥å—è€…å¯ä»¥å‡å°‘ä¸€å®šæ•°é‡çš„åƒåœ¾ç”Ÿæˆï¼Œå¦‚æœä¸€ä¸ªå€¼è¢«ä¼ å…¥ä¸€ä¸ªå€¼ç±»å‹æ¥å—è€…çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ ˆä¸Šçš„æ‹·è´ä¼šæ›¿ä»£åœ¨å †ä¸Šåˆ†é…å†…å­˜(ä½†ä¸æ˜¯ä¿è¯ä¸€å®šæˆåŠŸ)ï¼Œæ‰€ä»¥åœ¨æ²¡ææ˜ç™½ä»£ç æƒ³å¹²ä»€ä¹ˆä¹‹å‰ï¼Œåˆ«å› ä¸ºè¿™ä¸ªåŸå› è€Œé€‰æ‹©å€¼ç±»å‹æ¥å—è€…ã€‚ ä½¿ç”¨æŒ‡é’ˆç±»å‹åœºæ™¯1.å¦‚æœæ–¹æ³•éœ€è¦ä¿®æ”¹æ¥å—è€…ï¼Œæ¥å—è€…å¿…é¡»æ˜¯æŒ‡é’ˆç±»å‹ã€‚2.å¦‚æœæ¥å—è€…æ˜¯ä¸€ä¸ªåŒ…å«äº† sync.Mutex æˆ–è€…ç±»ä¼¼åŒæ­¥å­—æ®µçš„ç»“æ„ä½“ï¼Œæ¥å—è€…å¿…é¡»æ˜¯æŒ‡é’ˆï¼Œè¿™æ ·å¯ä»¥é¿å…æ‹·è´ã€‚3.å¦‚æœæ¥å—è€…æ˜¯ä¸€ä¸ªå¤§çš„ç»“æ„ä½“æˆ–è€…æ•°ç»„ï¼Œé‚£ä¹ˆæŒ‡é’ˆç±»å‹æ¥å—è€…æ›´æœ‰æ•ˆç‡ã€‚4.ä»æ­¤æ–¹æ³•ä¸­å¹¶å‘çš„è°ƒç”¨å‡½æ•°å’Œæ–¹æ³•æ—¶ï¼Œæ¥å—è€…å¯ä»¥è¢«ä¿®æ”¹å—ï¼Ÿä¸€ä¸ªå€¼ç±»å‹çš„æ¥å—è€…å½“æ–¹æ³•è°ƒç”¨æ—¶ä¼šåˆ›å»ºä¸€ä»½æ‹·è´ï¼Œæ‰€ä»¥å¤–éƒ¨çš„ä¿®æ”¹ä¸èƒ½ä½œç”¨åˆ°è¿™ä¸ªæ¥å—è€…ä¸Šã€‚å¦‚æœä¿®æ”¹å¿…é¡»è¢«åŸå§‹çš„æ¥å—è€…å¯è§ï¼Œé‚£ä¹ˆæ¥å—è€…å¿…é¡»æ˜¯æŒ‡é’ˆç±»å‹ã€‚5.å¦‚æœæ¥å—è€…æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œæ•°ç»„æˆ–è€… sliceï¼Œå®ƒä»¬ä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ æ˜¯æŒ‡é’ˆç±»å‹è€Œä¸”å¯èƒ½è¢«ä¿®æ”¹ï¼Œå»ºè®®ä½¿ç”¨æŒ‡é’ˆç±»å‹æ¥å—è€…ï¼Œè¿™æ ·ä¼šå¢åŠ ç¨‹åºçš„å¯è¯»æ€§ã€‚ Receiveræ¥æ”¶è€…çš„å‘½å1.ç¤¾åŒºçº¦å®šçš„æ¥å—è€…å‘½åæ˜¯ç±»å‹çš„ä¸€ä¸ªæˆ–ä¸¤ä¸ªå­—æ¯çš„ç¼©å†™(åƒ c æˆ–è€… cl å¯¹äº Client)ã€‚2.é¿å…ä½¿ç”¨æ³›æŒ‡çš„åå­—åƒæ˜¯ meï¼Œthis æˆ–è€… selfï¼Œä¹Ÿé¿å…ä½¿ç”¨è¿‡åº¦æè¿°çš„åå­—ï¼›3.å¦‚æœä½ åœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨äº† cï¼Œé‚£ä¹ˆå°±ä¸è¦åœ¨åˆ«çš„åœ°æ–¹ä½¿ç”¨ clï¼› è‡ªæˆ‘æ€»ç»“ä¸€èˆ¬ä½¿ç”¨åœºæ™¯ä¸‹ï¼Œå†³å®šæ˜¯å¦ä½¿ç”¨æŒ‡é’ˆï¼Œçœ‹æ•°æ®å•ä½“(ç»“æ„ä½“ã€æ¥å£ç­‰ç­‰â€¦)å®¹é‡çš„å¤§å°(ç‰¹åˆ«æ³¨æ„:æ³¨æ„åˆ‡ç‰‡sliceã€å­—å…¸mapã€ç®¡é“channelæœ¬èº«å¼•ç”¨ç±»å‹ï¼Œåº•å±‚æœ¬èº«æ˜¯æŒ‡é’ˆè°ƒç”¨)ï¼Œè¯­è¨€å±‚é¢æ•°æ®å•ä½“å­˜å‚¨çš„å½¢å¼æ˜¯å¦æœ¬èº«å°±æ˜¯æŒ‡é’ˆç±»å‹ï¼Œæ•°æ®å•ä½“çš„ä½œç”¨èŒƒå›´å’Œæ“ä½œçš„èŒƒå›´ï¼Œå½’æ ¹ç»“åº•ï¼Œè¿˜æ˜¯è¦ç»“åˆå®é™…å…·ä½“ä¸šåŠ¡åœºæ™¯æå‰è§„åˆ’å¥½æ•°æ®ç»“æ„,å¼€å‘ä¸­å¤šè€ƒè™‘æ•°æ®å•ä½“çš„æ‹·è´æˆæœ¬æ˜¯å¦è¿‡é«˜ã€‚Goå®˜æ–¹çš„ä½¿ç”¨å»ºè®®ï¼Œä¹Ÿæ˜¯åœ¨Goå†…å­˜åˆ†é…å’Œæ•°æ®å­˜å‚¨åŸç†ä¸Šçš„å½’çº³æ€»ç»“ã€‚Goè¯­è¨€è™½ç„¶æœ‰æŒ‡é’ˆä½†æ˜¯æ²¡æœ‰åŒ…å«æŒ‡é’ˆè®¡ç®—ï¼ŒæŒ‡é’ˆçš„æ“ä½œä¹Ÿéå¸¸ç®€å•(è¿™ç‚¹è€ƒé‡ç‰¹åˆ«åœ°å¥½,ç®€å•çš„ç»“æ„å¯ä»¥è®©GCæœ€ä½æˆæœ¬åœ°ç›‘æµ‹å†…å­˜è¿è¡ŒçŠ¶æ€,é¿å…è¿‡å¤šçš„æŒ‡é’ˆå…³è”,åˆ©äºGCå†…å­˜ç®¡ç†å’Œå›æ”¶)ã€‚","link":"/b5903345.html"},{"title":"Go:package time","text":"package timetime è½¬æ¢æ³¨æ„äº‹é¡¹Goè¯­è¨€æŒ‡å®šæ—¶é—´åŸç‚¹ 123456789101112package mainimport ( &quot;time&quot; &quot;fmt&quot;)func main() { //å½“å‰æ—¶é—´æ ¼å¼åŒ–ï¼Œè®°å¿†è§„å¾‹ï¼šåˆ›å§‹å¹´ä»½2016 | ä¸€ | äºŒ | ä¸‰ï¼ˆ15æ—¶ï¼Œå³ 3 pmï¼‰ | å›› | äº” nowTime := time.Now().Format(&quot;2006-01-02 15:04:05&quot;) fmt.Println(nowTime)}","link":"/b5c88baa.html"},{"title":"Go:typeå…³é”®è¯æ€»ç»“","text":"typeå…³é”®è¯æ€»ç»“type ç”¨æ³•ï¼š å®šä¹‰ç»“æ„ä½“ å®šä¹‰æ¥å£ ç±»å‹åˆ«å ç±»å‹å®šä¹‰ ç±»å‹å¼€å…³ ç±»å‹å®šä¹‰å’Œç±»å‹åˆ«åçš„åŒºåˆ«ï¼šåŒºåˆ«å°±æ˜¯ç±»å‹å®šä¹‰æ˜¯å®Œå…¨å®šä¹‰äº†ä¸€ç§æ–°çš„ç±»å‹ï¼Œè€Œç±»å‹åˆ«ååªæ˜¯ç»™ç°æœ‰çš„ç±»å‹å–äº†ä¸€ä¸ªåˆ«åaliasã€‚ï¼ˆç¼–è¯‘å™¨ä¼šæ›¿æ¢æˆåŸºæœ¬ç±»å‹ã€‚ï¼‰ Typeå¸¸è§Demoå®šä¹‰ç»“æ„ä½“12type Demo struct {} å®šä¹‰æ¥å£12type Demoer interface {} ç±»å‹åˆ«å12type Demo string ç±»å‹å®šä¹‰12type handle func(str string) ç±»å‹å¼€å…³1234567891011func Demo(params ...interface{}) { for i, x := range params { switch x.(type) { case bool: fmt.Printf(&quot;type #%d is bool&quot;,i) default: fmt.Printf(&quot;type is unknow&quot;) } }} ç±»å‹æ³¨æ„äº‹é¡¹ç±»å‹æ¯”è¾ƒå¤‡æ³¨ï¼šå‚è€ƒGoæ–‡æ¡£typeè¯´æ˜ï¼š å‘½åç±»å‹ï¼ˆç®€å•ç±»å‹ï¼‰ï¼Œæœ‰ç±»å‹åç§°å¦‚ int, int64, float, string, bool. è¿˜æœ‰è‡ªå®šä¹‰çš„å‘½åç±»å‹ã€‚ éå‘½åç±»å‹ï¼ˆå¤æ‚ç±»å‹ï¼‰ï¼Œæ²¡ç±»å‹åç§° array slice, mapï¼Œfunc(){}, interface{}ã€‚ä½†æ˜¯chanç±»å‹æ˜¯å¯ä»¥==æ¯”è¾ƒã€‚ slice å†…å­˜ä¸è¿ç»­ï¼Œåº•å±‚å¯¹è±¡åˆ†å¼€æ”¾çš„ï¼Œä¸èƒ½ç›´æ¥æ¯”è¾ƒï¼› map å†…å­˜ä¸è¿ç»­ï¼Œåº•å±‚å¯¹è±¡ç‹¬ç«‹å­˜æ”¾ï¼Œä¸èƒ½ç›´æ¥æ¯”è¾ƒï¼› chan å†…å­˜æ˜¯è¿ç»­çš„ï¼Œå•ä¸€å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥æ¯”è¾ƒï¼› å½“æ¯”è¾ƒä¸¤ä¸ªå‘½åç±»å‹çš„æ—¶å€™ï¼Œç±»å‹åç§°å¿…é¡»ä¸€æ ·ï¼›å½“æ¯”è¾ƒå‘½åç±»å‹å’Œéå‘½åç±»å‹çš„æ—¶å€™ï¼Œåº•å±‚ç±»å‹ä¸€æ ·å³å¯ã€‚ æ¯”è¾ƒåŸºäºä¸¤ä¸ªåŸåˆ™ï¼š1.å†…å­˜åº•å±‚åŸºæœ¬ç±»å‹ï¼›2.ç±»å‹æœ¬èº«æ˜¯å¦ç¡®å®šç±»å‹æˆ–ä¸ç¨³å®šç±»å‹ï¼› ç©ºæ¥å£å€¼æ¯”è¾ƒ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package mainimport ( &quot;fmt&quot; &quot;reflect&quot;)type T1 []stringtype T2 []stringfunc main() { foo0 := []string{} foo1 := T1{} foo2 := T2{} fmt.Println(reflect.TypeOf(foo0)) fmt.Println(reflect.TypeOf(foo1)) fmt.Println(reflect.TypeOf(foo2)) // Output: // []string // main.T1 // main.T2 //ç¼–è¯‘é€šï¼Œåä¹‹äº¦ç„¶ //foo1 = foo0 //foo0 = foo1 // ç¼–è¯‘ä¸é€šè¿‡ // é”™è¯¯æç¤ºï¼šcannot use foo2 (type T2) as type T1 in assignment foo2 = foo0 foo1 = foo2 //cannot //ç¼–è¯‘é€šè¿‡ï¼šchan ch1 := make(chan int) ch2 := make(chan int) fmt.Println(ch1 == ch2) //ç¼–è¯‘ä¸é€šè¿‡ï¼šslice s1 := []int{1,2} s2 := []int{2,1} fmt.Println(s1 == s2) //ç¼–è¯‘ä¸é€šè¿‡ï¼šmap m1 := make(map[int]int) m2 := make(map[int]int) fmt.Println(m1 == m2)} ç±»å‹å¯æ¯”è¾ƒæ€§åˆ¤æ–­åŸåˆ™ï¼šåº•å±‚æ•°æ®ç»“æ„ç±»å‹æ˜¯å¦ç¨³å®šå’Œä¸€è‡´ ç±»å‹ è¯´æ˜ map å®•æœºé”™è¯¯ï¼Œä¸å¯æ¯”è¾ƒ åˆ‡ç‰‡ï¼ˆ[]Tï¼‰ å®•æœºé”™è¯¯ï¼Œä¸å¯æ¯”è¾ƒ é€šé“ï¼ˆchannelï¼‰ å¯æ¯”è¾ƒï¼Œå¿…é¡»ç”±åŒä¸€ä¸ª make ç”Ÿæˆï¼Œä¹Ÿå°±æ˜¯åŒä¸€ä¸ªé€šé“æ‰ä¼šæ˜¯ trueï¼Œå¦åˆ™ä¸º false æ•°ç»„ï¼ˆ[å®¹é‡]Tï¼‰ å¯æ¯”è¾ƒï¼Œç¼–è¯‘æœŸçŸ¥é“ä¸¤ä¸ªæ•°ç»„æ˜¯å¦ä¸€è‡´ ç»“æ„ä½“ å¯æ¯”è¾ƒï¼Œå¯ä»¥é€ä¸ªæ¯”è¾ƒç»“æ„ä½“çš„å€¼ å‡½æ•° å¯æ¯”è¾ƒ","link":"/49c8ae5b.html"},{"title":"LUA Syntax","text":"LUA Notesæ³¨é‡Š å•è¡Œæ³¨é‡Š-- å¤šè¡Œæ³¨é‡Š 123--[[ æ³¨é‡Š--]] æˆ– 123--[[ æ³¨é‡Š ]] å¤šè¡Œæ³¨é‡Šé‡åˆ°ç”¨[[å’Œ]]è¡¨ç¤ºçš„å­—ç¬¦ä¸²å°±ä¼šæå‰ç»“æŸï¼Œå¯ä»¥ç”¨â€”-[=[ æ³¨é‡Šå†…å®¹ ]=]æ¥è§£å†³ 123--[=[ æ³¨é‡Š ]=] ç¨‹åºå—chunkluaè¯­æ³•-ç¨‹åºå—ï¼ˆchunkï¼‰ luaè§£é‡Šå™¨ä»¥ç¨‹åºå—çš„æ–¹å¼å¤„ç†luaä»£ç  æ¯ä¸€æ®µå¯æ‰§è¡Œçš„luaä»£ç éƒ½å¯ä»¥æˆä¸ºç¨‹åºå— luaç¨‹åºå—æŒ‡ä¸€æ¡æˆ–å¤šæ¡åˆæ³•çš„å¯æ‰§è¡Œè¯­å¥ ä¸€ä¸ªç¨‹åºå—ç”±ä¸€æ¡æˆ–å¤šæ¡luaè¯­å¥æ„æˆ ç®€å•çš„ç¨‹åºå—ï¼šä¸€æ¡è¯­å¥ å¤æ‚çš„ç¨‹åºå—ï¼šå¤šæ¡ä¸åŒè¯­å¥åŠå‡½æ•°å®šä¹‰æ„æˆè¯­å¥ç»“å°¾çš„åˆ†å·ç¼ºçœï¼Œå¦‚ä¸€è¡Œå¤šå“¥è¯­å¥ï¼Œå»ºè®®åˆ†å·éš”å¼€ æ•°æ®ç±»å‹table ï¼ˆåˆ›å»ºä¸åŒçš„æ•°æ®ç±»å‹ï¼šæ•°ç»„ã€å­—å…¸ç­‰ï¼‰ table æ•°æ®ç»“æ„æœ¬èº«æ”¯æŒå¤šæ€ï¼Œå®šä¹‰çµæ´»,æ˜¯æ•°ç»„å’Œé›†åˆçš„æ··åˆç‰© table ä½¿ç”¨å…³è”æ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨äººè‰ºç±»å‹å€¼ä½œç´¢å¼•ï¼Œä½†å€¼ä¸èƒ½ä¸ºnil table æ˜¯ä¸å›ºå®šå¤§å°çš„ï¼Œä½ å¯ä»¥å“¥æ€’è‡ªå·±éœ€è¦è¿›è¡Œæ‰©å±• luaçš„æ¨¡å—ï¼ˆmobuleï¼‰ã€åŒ…ï¼ˆpackageï¼‰ã€å’Œå¯¹è±¡ï¼ˆObjectï¼‰æœ¬èº«ä¹Ÿæ˜¯åŸºäºtableçš„ 12345678t = { &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, [4] = &quot;d&quot;, [5] = &quot;f&quot;ï¼Œ [6] = function(){}} Table æ“ä½œ æ“ä½œ æ–¹æ³• ç”¨é€” è¿æ¥ table.concat (table [, sep [, start [, end]]]) concatæ˜¯concatenate(è¿é”, è¿æ¥)çš„ç¼©å†™. table.concat()å‡½æ•°åˆ—å‡ºå‚æ•°ä¸­æŒ‡å®štableçš„æ•°ç»„éƒ¨åˆ†ä»startä½ç½®åˆ°endä½ç½®çš„æ‰€æœ‰å…ƒç´ , å…ƒç´ é—´ä»¥æŒ‡å®šçš„åˆ†éš”ç¬¦(sep)éš”å¼€ã€‚ æ–°å¢ table.insert (table, [pos,] value) åœ¨tableçš„æ•°ç»„éƒ¨åˆ†æŒ‡å®šä½ç½®(pos)æ’å…¥å€¼ä¸ºvalueçš„ä¸€ä¸ªå…ƒç´ . poså‚æ•°å¯é€‰, é»˜è®¤ä¸ºæ•°ç»„éƒ¨åˆ†æœ«å°¾. maxn table.maxn (table) æŒ‡å®štableä¸­æ‰€æœ‰æ­£æ•°keyå€¼ä¸­æœ€å¤§çš„keyå€¼. å¦‚æœä¸å­˜åœ¨keyå€¼ä¸ºæ­£æ•°çš„å…ƒç´ , åˆ™è¿”å›0ã€‚(Lua5.2ä¹‹åè¯¥æ–¹æ³•å·²ç»ä¸å­˜åœ¨äº†) ç§»é™¤ table.remove (table [, pos]) è¿”å›tableæ•°ç»„éƒ¨åˆ†ä½äºposä½ç½®çš„å…ƒç´ . å…¶åçš„å…ƒç´ ä¼šè¢«å‰ç§». poså‚æ•°å¯é€‰, é»˜è®¤ä¸ºtableé•¿åº¦, å³ä»æœ€åä¸€ä¸ªå…ƒç´ åˆ èµ·ã€‚ æ’åº table.sort (table [, comp]) å¯¹ç»™å®šçš„tableè¿›è¡Œå‡åºæ’åºã€‚ å˜é‡ é»˜è®¤å˜é‡ä¸ºå…¨å±€å˜é‡ï¼ŒåŒ…å«æ–¹æ³•å†…å˜é‡ï¼Œå¦‚æœè®¾ç½®å±€éƒ¨å˜é‡ï¼Œåˆ™æ·»åŠ ä¿®é¥°ç¬¦local(æ­¤å¤„ææ˜“å¯¼è‡´å¼‚å¸¸å’ŒBugï¼Œè°¨æ…ä½¿ç”¨ï¼Œå°½å¯èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡)ï¼Œä½¿ç”¨å±€éƒ¨å˜é‡çš„å¥½å¤„ï¼š é¿å…å‘½åå†²çªå’Œå’Œå˜é‡è¯¯è¦†ç›– è®¿é—®å±€éƒ¨å˜é‡çš„é€Ÿåº¦æ›´å¿« é¿å…é€»è¾‘é”™è¯¯ç¼ºé™· å…¨å±€å˜é‡åˆ é™¤ï¼šåªéœ€è¦å°†å˜é‡èµ‹å€¼ä¸ºnilã€‚ è¿ç®—ç¬¦è¿ç®—ç¬¦å· å…³ç³»è¿ç®—ç¬¦: &lt; ã€&gt;ã€&lt;= ã€&gt;= ã€ == ã€ ~=(ä¸ç­‰äº) é€»è¾‘è¿ç®—ç¬¦: and or not è¿æ¥è¿ç®—ç¬¦: .. (ä¸¤ä¸ªç‚¹) è¿ç®—æ³¨æ„äº‹é¡¹ â€œ0â€ å’Œ 0 (false,ä¸ç›¸ç­‰) nilåªç­‰äºnilæœ¬èº« é€»è¾‘è¿ç®—ç¬¦falseå’Œnilæ˜¯å‡(false),å…¶ä»–ä¸ºtrueï¼ˆåŒ…æ‹¬0ä¹Ÿæ˜¯trueï¼‰ andå’Œorçš„è¿ç®—ç»“æœä¸æ˜¯trueå’Œfalseï¼Œè€Œå’Œä¸¤ä¸ªæ“ä½œæ•°ç›¸å…³ï¼š a and b â€“ å¦‚æœaä¸ºfalseï¼Œåˆ™è¿”å›aï¼Œå¦åˆ™è¿”å›b a or b â€“ å¦‚æœaä¸ºtrueï¼Œåˆ™è¿”å›aï¼Œå¦åˆ™è¿”å›b luaæ¯”è¾ƒæ•°å­—æŒ‰ä¼ ç»Ÿçš„æ•°å­—å¤§å°è¿›è¡Œï¼Œæ¯”è¾ƒå­—ç¬¦ä¸²æŒ‰å­—æ¯çš„é¡ºåºè¿›è¡Œï¼ˆä½†å­—æ¯é¡ºåºä¾èµ–äºæœ¬åœ°ç¯å¢ƒ(å­—ç¬¦ç¼–ç æˆ–å…¶ä»–é¡ºåºç­‰ä¸åŒ)ï¼‰ å‡½æ•° () æ‹¬å·ä»…ç”¨äºå‡½æ•°ä¸­ä½¿ç”¨ï¼Œå…¶ä»–åœ°æ–¹å¯ç¼ºçœå¿½ç•¥ å¾ªç¯while1234while(condition)do statementsend for123for var=exp1,exp2,exp3 do --end repeat123repeat statementsuntil( condition ) break å’Œ gotogotoè¯­æ³•æ ¼å¼ï¼šgoto Label; Label çš„æ ¼å¼ä¸º:: Label :: 12345678local a = 1::label:: print(&quot;--- goto label ---&quot;)a = a+1if a &lt; 3 then goto label -- a å°äº 3 çš„æ—¶å€™è·³è½¬åˆ°æ ‡ç­¾ labelend continueå®˜æ–¹æœªå†…ç½®ï¼Œå¯é€šè¿‡å…¶ä»–æ–¹å¼å®ç°ä¸æä¾›continueçš„åŸå› ï¼šLua-FAQï¼šThis is a common complaint. The Lua authors felt that continue was only one of a number of possible new control flow mechanisms (the fact that it cannot work with the scope rules of repeat/until was a secondary factor.)Luaä½œè€…è®¤ä¸ºcontinueéå¿…è¦ç‰¹æ€§ä¸”åªæ˜¯è®¸å¤šæ–°æ§åˆ¶æµæœºåˆ¶ä¸­çš„ä¸€ç§ï¼ŒæœªåŠ å…¥æ­¤ç‰¹æ€§ï¼Œcontinueå…³é”®å­—åœ¨repeat/untilç»“æ„ä¸­ä¼šå¼•å‘å‡ºç°ä¸€äº›é—®é¢˜ã€‚ luaä¸­æ¨¡æ‹Ÿâ€œcontinueâ€çš„å‡ ç§æ–¹æ³•ï¼š ä½¿ç”¨repeatå¾ªç¯åŒ…ä½éœ€è¦è¦continueè·³è¿‡çš„ä»£ç ï¼Œä½¿ç”¨breakè·³å‡ºå¾ªç¯, éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œluaä¸­çš„repeatè¯­å¥ï¼Œåœ¨å¾ªç¯æ¡ä»¶ä¸ºçœŸçš„æ—¶å€™é€€å‡º 123456789for i = 1, 10 do repeat if i%2 == 0 then break end print(i) break until trueend ä½¿ç”¨whileå¾ªç¯åŒ…ä½éœ€è¦continueè·³è¿‡çš„ä»£ç ï¼Œ ä½¿ç”¨breakè·³å‡ºå¾ªç¯ 123456789for i = 1, 10 do while true do if i%2 == 0 then break end print(i) break endend åœ¨lua5.2ç‰ˆæœ¬ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨gotoè¯­å¥æ¥æ¨¡æ‹Ÿ 1234567for i = 1, 10 do if i%2 == 0 then goto continue end print(i) ::continue::end æ¨¡å—ä¸åŒ… local å¯¹è±¡ï¼Œå¤–éƒ¨æ¨¡å—æ— æ³•è®¿é—® ç¯å¢ƒå˜é‡è‡ªå®šä¹‰è®¾ç½® æ–‡ä»¶è·¯å¾„ä»¥ â€œ;â€ å·åˆ†éš”ï¼Œæœ€åçš„ 2 ä¸ª â€œ;;â€ è¡¨ç¤ºæ–°åŠ çš„è·¯å¾„åé¢åŠ ä¸ŠåŸæ¥çš„é»˜è®¤è·¯å¾„ã€‚ æ³¨æ„äº‹é¡¹ï¼šMac OS ç³»ç»Ÿä¸‹ï¼Œexport LUA_PATH=&quot;~/lua/?.lua;;&quot;åœ¨.zshrcä¸­å¦‚æœåœ¨ç”¨æˆ·homeè·¯å¾„ä¸‹è‡ªå®šä¹‰æ¨¡å—è·¯å¾„ï¼Œä¼šè¢«å½“æˆï½å­—ç¬¦ï¼Œä¸ä¼šè§£æç”¨æˆ·çš„homeè·¯å¾„no file '~/lua/modules/module.lua'ï¼Œæ•…å»ºè®®åº”è¯¥å†™ä¸ºç»å¯¹è·¯å¾„ã€‚ 1234#LUA_PATH#export LUA_PATH=&quot;~/lua/?.lua;;&quot;export LUA_PATH=&quot;/Users/iotd/lua/?.lua;;&quot; 12345678910111213141516171819202122-- æ–‡ä»¶åä¸º module.lua-- å®šä¹‰ä¸€ä¸ªåä¸º module çš„æ¨¡å—module = {} -- å®šä¹‰ä¸€ä¸ªå¸¸é‡module.constant = &quot;è¿™æ˜¯ä¸€ä¸ªå¸¸é‡&quot; -- å®šä¹‰ä¸€ä¸ªå‡½æ•°function module.func1() io.write(&quot;è¿™æ˜¯ä¸€ä¸ªå…¬æœ‰å‡½æ•°ï¼\\n&quot;)end -- å¤–éƒ¨æ— æ³•è®¿é—®åˆ°local function func2() print(&quot;è¿™æ˜¯ä¸€ä¸ªç§æœ‰å‡½æ•°ï¼&quot;)end function module.func3() func2()end return module å…ƒè¡¨","link":"/a1a26b3d.html"},{"title":"php laravel artisan åŸºç¡€å‘½ä»¤","text":"php artisan å¸¸ç”¨å‘½ä»¤php artisan å¸¸ç”¨å‘½ä»¤,æ³¨æ„ä¸€äº›ç‰ˆæœ¬å·®å¼‚ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465å‘½ä»¤ è¯´æ˜ å¤‡æ³¨php artisan make:resource [parameter] åˆ›å»ºapiè¿”å›æ ¼å¼åŒ–èµ„æº &gt;=5.4ç‰ˆæœ¬å¯ç”¨php artisan make:rule [parameter] åˆ›å»ºvalidateè§„åˆ™ &gt;=5.4ç‰ˆæœ¬å¯ç”¨php artisan make:exception [parameter] åˆ›å»ºå¼‚å¸¸ç±» &gt;=5.4ç‰ˆæœ¬å¯ç”¨php artisan make:factory [parameter] åˆ›å»ºå·¥å‚ç±» &gt;=5.4ç‰ˆæœ¬å¯ç”¨php artisan package:discover é‡ç½®åŒ…çš„ç¼“å­˜ä¿¡æ¯ &gt;=5.4ç‰ˆæœ¬å¯ç”¨php artisan storage:link [parameter] Create a symbolic link from &quot;public/storage&quot; to &quot;storage/app/public&quot; &gt;=5.4ç‰ˆæœ¬å¯ç”¨php artisan view:clear æ¸…æ¥šæ‰€æœ‰å·²ç¼–è¯‘çš„è§†å›¾æ–‡ä»¶ &gt;=5.4ç‰ˆæœ¬å¯ç”¨ å‘½ä»¤ è¯´æ˜ å¤‡æ³¨php artisan clear-compiled æ¸…é™¤ç¼–è¯‘åçš„ç±»æ–‡ä»¶ php artisan down ä½¿åº”ç”¨ç¨‹åºè¿›å…¥ç»´ä¿®æ¨¡å¼ php artisan up é€€å‡ºåº”ç”¨ç¨‹åºçš„ç»´æŠ¤æ¨¡å¼ php artisan env æ˜¾ç¤ºå½“å‰æ¡†æ¶ç¯å¢ƒ php artisan fresh æ¸…é™¤åŒ…å«æ¡†æ¶å¤–çš„æ”¯æ¶ php artisan help æ˜¾ç¤ºå‘½ä»¤è¡Œçš„å¸®åŠ© php artisan list åˆ—å‡ºå‘½ä»¤ php artisan migrate è¿è¡Œæ•°æ®åº“è¿ç§» php artisan env æ˜¾ç¤ºå½“å‰æ¡†æ¶ç¯å¢ƒ php artisan optimize ä¸ºäº†æ›´å¥½çš„æ¡†æ¶å»ä¼˜åŒ–æ€§èƒ½ php artisan serve åœ¨phpå¼€å‘æœåŠ¡å™¨ä¸­æœåŠ¡è¿™ä¸ªåº”ç”¨ --port 8080ï¼Œ--host 0.0.0.0php artisan tinker åœ¨åº”ç”¨ä¸­äº¤äº’ php artisan app:name [parameter] è®¾ç½®åº”ç”¨ç¨‹åºå‘½åç©ºé—´php artisan auth:clear-resets æ¸…é™¤è¿‡æœŸçš„å¯†ç é‡ç½®å¯†é’¥ æœªä½¿ç”¨è¿‡php artisan cache:clear æ¸…é™¤åº”ç”¨ç¨‹åºç¼“å­˜ php artisan cache:table åˆ›å»ºä¸€ä¸ªç¼“å­˜æ•°æ®åº“è¡¨çš„è¿ç§» php artisan config:cache åˆ›å»ºä¸€ä¸ªåŠ è½½é…ç½®çš„ç¼“å­˜æ–‡ä»¶ php artisan config:clear åˆ é™¤é…ç½®çš„ç¼“å­˜æ–‡ä»¶ php artisan db:seed æ•°æ®åº“ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ® php artisan event:generate ç”Ÿæˆeventå’Œlisten éœ€è¦å®ç°é…ç½®eventserviceprivoderphp artisan make:command [parameter] åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½ä»¤å¤„ç†ç¨‹åºç±» php artisan make:console [parameter] ç”Ÿæˆä¸€ä¸ªArtisanå‘½ä»¤ php artisan key:generate è®¾ç½®ç¨‹åºå¯†é’¥ php artisan make:controller [parameter] ç”Ÿæˆä¸€ä¸ªèµ„æºæ§åˆ¶ç±» php artisan make:middleware [parameter] ç”Ÿæˆä¸€ä¸ªä¸­é—´ä»¶ php artisan make:migration [parameter] ç”Ÿæˆä¸€ä¸ªè¿ç§»æ–‡ä»¶ php artisan make:model [parameter] ç”Ÿæˆä¸€ä¸ªEloquent æ¨¡å‹ç±» php artisan make:provider [parameter] ç”Ÿæˆä¸€ä¸ªæœåŠ¡æä¾›å•†çš„ç±» php artisan make:request [parameter] ç”Ÿæˆä¸€ä¸ªè¡¨å•æ¶ˆæ¯ç±» php artisan migrate:install [parameter] åˆ›å»ºä¸€ä¸ªè¿ç§»åº“æ–‡ä»¶ php artisan make:migration [parameter] ç”Ÿæˆä¸€ä¸ªè¿ç§»æ–‡ä»¶ php artisan migrate:refresh [parameter] å¤ä½å¹¶é‡æ–°è¿è¡Œæ‰€æœ‰çš„è¿ç§» php artisan migrate:reset [parameter] å›æ»šå…¨éƒ¨æ•°æ®åº“è¿ç§» php artisan migrate:rollback [parameter] å›æ»šæœ€åä¸€ä¸ªæ•°æ®åº“è¿ç§» php artisan migrate:status æ˜¾ç¤ºåˆ—è¡¨çš„è¿ç§» php artisan queue:failed åˆ—å‡ºå…¨éƒ¨å¤±è´¥çš„é˜Ÿåˆ—å·¥ä½œ php artisan queue:failed-table [parameter] åˆ›å»ºä¸€ä¸ªè¿ç§»çš„å¤±è´¥çš„é˜Ÿåˆ—æ•°æ®åº“å·¥ä½œè¡¨ php artisan queue:flush æ¸…é™¤å…¨éƒ¨å¤±è´¥çš„é˜Ÿåˆ—å·¥ä½œ php artisan queue:forget [parameter] åˆ é™¤ä¸€ä¸ªå¤±è´¥çš„é˜Ÿåˆ—å·¥ä½œ php artisan queue:listen [parameter] ç›‘å¬ä¸€ä¸ªç¡®å®šçš„é˜Ÿåˆ—å·¥ä½œphp artisan queue:restart é‡å¯ç°åœ¨æ­£åœ¨è¿è¡Œçš„æ‰€æœ‰é˜Ÿåˆ—å·¥ä½œ php artisan queue:retry é‡è¯•ä¸€ä¸ªå¤±è´¥çš„é˜Ÿåˆ—å·¥ä½œ php artisan queue:subscribe è®¢é˜…URL,æ”¾åˆ°é˜Ÿåˆ—ä¸Š php artisan queue:table åˆ›å»ºä¸€ä¸ªè¿ç§»çš„é˜Ÿåˆ—æ•°æ®åº“å·¥ä½œè¡¨ php artisan queue:work è¿›è¡Œä¸‹ä¸€ä¸ªé˜Ÿåˆ—ä»»åŠ¡php artisan route:cache ä¸ºäº†æ›´å¿«çš„è·¯ç”±ç™»è®°ï¼Œåˆ›å»ºä¸€ä¸ªè·¯ç”±ç¼“å­˜æ–‡ä»¶ php artisan route:clear æ¸…é™¤è·¯ç”±ç¼“å­˜æ–‡ä»¶ php artisan route:list åˆ—å‡ºå…¨éƒ¨çš„æ³¨å†Œè·¯ç”± php artisan schedule:run è¿è¡Œé¢„å®šå‘½ä»¤ php artisan session:table åˆ›å»ºä¸€ä¸ªè¿ç§»çš„SESSIONæ•°æ®åº“å·¥ä½œè¡¨ php artisan vendor:publish å‘è¡¨ä¸€äº›å¯ä»¥å‘å¸ƒçš„æœ‰ç”¨çš„èµ„æºæ¥è‡ªæä¾›å•†çš„æ’ä»¶åŒ… baumåŒ…å‘½ä»¤å‘½ä»¤ è¯´æ˜ å¤‡æ³¨php artisan baum Get Baum version notice. php artisan baum:install [parameter] Scaffolds a new migration and model suitable for Baum","link":"/4b985e6d.html"},{"title":"LinuxCentos7-Systemd-Serviceè‡ªå®šä¹‰ç¼–å†™Serviceåº”ç”¨æœåŠ¡é…ç½®è¯´æ˜æ•´ç†","text":"Centos7-Systemd-Serviceè‡ªå®šä¹‰ç¼–å†™Serviceåº”ç”¨æœåŠ¡é…ç½®è¯´æ˜æ•´ç†ç³»ç»ŸåŸºæœ¬serviceæœåŠ¡é…ç½®ç›®å½•ï¼ˆæ­¤ç›®å½•å‹¿åŠ¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹åªæ”¾ç³»ç»Ÿæ ¸å¿ƒåŸºç¡€æœåŠ¡é…ç½®ï¼Œå¦å­˜æ”¾åº”ç”¨æ³¨å†Œç±»æœåŠ¡é…ç½®ï¼‰ï¼š/etc/systemd/system è‡ªå®šä¹‰æœåŠ¡é…ç½®ç®¡ç†ç›®å½•ï¼ˆå­˜æ”¾è‡ªå®šä¹‰åº”ç”¨æ³¨å†Œç±»æœåŠ¡å’Œç¬¬ä¸‰æ–¹æœåŠ¡ç±»é…ç½®ï¼‰ï¼š/usr/lib/systemd/system/ è‡ªå®šä¹‰.serviceé…ç½®æ–‡ä»¶ (æƒé™ï¼š754) æ ¼å¼ï¼ˆä»¥åº”ç”¨app-run.serviceä¸ºä¾‹, æ‰§è¡Œæ–‡ä»¶ä½œå¥½è¶…æ—¶å¤„ç†ï¼ï¼‰ï¼š12345678910111213141516171819202122232425[Unit]Description=&quot;app-run@Author Jaco Liu Process Daemon&quot; # æœåŠ¡æè¿°After=rc-local.service # æœåŠ¡ç±»åˆ«ï¼š # ä¾‹å¯åŠ¨é¡ºåº(é»˜è®¤åœ¨rc-local.serviceä¹‹åè°ƒç”¨æ‰§è¡Œ) [Service]Type=forking # ä¼˜å…ˆä½¿ç”¨forkingæ–¹å¼: # (éµå¾ªä¼ ç»ŸUnixåšæ³•,è®¾ç½®PIDFile=é€‰é¡¹ # å¸®åŠ©systemdå‡†ç¡®å®šä½è¯¥æœåŠ¡çš„ä¸»è¿›ç¨‹)PIDFile=/var/run/app-run.pid # è®¾ç½®åº”ç”¨è¿›ç¨‹çš„PIDï¼ˆç¼ºçœï¼‰Environment=&quot;GOPATH=/usr/local/go&quot; # ç¯å¢ƒå˜é‡è®¾ç½®ï¼Œå¯è®¾ç½®å¤šä¸ªEnvironment=é¡¹ # å¤‡æ³¨ï¼šEnvironment= æˆ– EnvironmentFile= # å¼•ç”¨æ–‡ä»¶, ä¸¤ç§æ–¹å¼çš†å¯ExecStart=/data/auto_run.sh start # è°ƒç”¨å¯åŠ¨å¯æ‰§è¡Œæ–‡ä»¶ï¼š # ï¼ˆServiceé…ç½®å…¨éƒ¨ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œ # å¯æ‰§è¡Œæ–‡ä»¶å†…å‘½ä»¤ç”¨ç»å¯¹çš„è·¯å¾„æ ¼å¼ï¼‰ ExecReload=/data/auto_run.sh reload # é‡æ–°åŠ è½½ï¼ˆç¼ºçœï¼‰ExecStop=/data/auto_run.sh stop # åœæ­¢æœåŠ¡ï¼ˆç¼ºçœï¼‰DefaultTimeoutStartSec=30 # æœåŠ¡å¯åŠ¨å…è®¸çš„æœ€å¤§æ—¶é•¿ï¼Œè¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤æ— å•ä½:ç§’ï¼‰ # å•ä½ï¼š&quot;ms&quot;(æ¯«ç§’), &quot;s&quot;(ç§’), &quot;min&quot;(åˆ†é’Ÿ), # &quot;h&quot;(å°æ—¶), &quot;d&quot;(å¤©), &quot;w&quot;(å‘¨) PrivateTmp=True # æ˜¯å¦åˆ†é…ç‹¬ç«‹çš„ä¸´æ—¶ç©ºé—´ï¼ˆç¼ºçœï¼‰ [Install]WantedBy=multi-user.target EnvironmentFileé»˜è®¤çº¦å®šå¼•ç”¨å­˜æ”¾ç›®å½•ä¸€èˆ¬ä¸ºï¼š/usr/lib/systemd/system/app-run.service.d/environment.conf(æ ¼å¼ï¼šKey=Value) ServiceæœåŠ¡ç®¡ç†å¸¸ç”¨æ“ä½œå‘½ä»¤12345678åœ¨å¼€æœºæ—¶å¯ç”¨ä¸€ä¸ªæœåŠ¡ï¼šsystemctl enable app-run.service åœ¨å¼€æœºæ—¶ç¦ç”¨ä¸€ä¸ªæœåŠ¡ï¼šsystemctl disable app-run.serviceå¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼šsystemctl start app-run.service å…³é—­ä¸€ä¸ªæœåŠ¡ï¼šsystemctl stop app-run.service é‡å¯ä¸€ä¸ªæœåŠ¡ï¼šsystemctl restart app-run.service æ˜¾ç¤ºä¸€ä¸ªæœåŠ¡çš„çŠ¶æ€ï¼šsystemctl status app-run.service æŸ¥çœ‹æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨ï¼šsystemctl is-enabled app-run.service æŸ¥çœ‹å·²å¯åŠ¨çš„æœåŠ¡åˆ—è¡¨ï¼šsystemctl list-unit-files|grep enabled æ³¨æ„ï¼šæœåŠ¡æ— æ³•æ‰§è¡Œæ£€æŸ¥SElinuxæ˜¯å¦å¼€å¯ï¼Œè‡ªè¡Œå…³é—­SElinuxã€‚","link":"/27eb580e.html"},{"title":"Centos7-chattræƒé™é—®é¢˜å¯¼è‡´é”å®šæ–‡ä»¶æ— æ³•è§£é”ä¸”rootç”¨æˆ·æ— æ³•ç¼–è¾‘","text":"chattrchattr å‘½ä»¤ï¼Œä¸“é—¨ç”¨æ¥ä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„éšè—å±æ€§ã€‚åœ¨éƒ¨åˆ†linuxå‘è¡Œç‰ˆä¸­ï¼Œéƒ¨åˆ†å­˜åœ¨chattræœ¬èº«æ‰§è¡Œæƒé™ç§»é™¤çš„é»˜è®¤è®¾ç½®ï¼Œå¯¼è‡´rootç”¨æˆ·æ— æ³•ç¼–è¾‘ç›¸å…³æ–‡ä»¶ä¸”chattrå‘½ä»¤æ— æ³•ä¿®æ”¹æ–‡ä»¶å±æ€§ã€‚è§£å†³çš„æ€è·¯æ˜¯å…ˆè§£å†³chattræœ¬èº«çš„æ–‡ä»¶å±æ€§ï¼Œç¡®ä¿chattrå¯ç”¨ã€‚ è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š è§£å†³æ–¹æ¡ˆ1234567891011cp /usr/bin/chattr /usr/bin/chattr_bakchmod 755 /usr/bin/chattr_bakchattr_bak -i /usr/bin/chattrchmod 755 /usr/bin/chattrls -la /usr/bin/chattr","link":"/e7a4c7e2.html"},{"title":"OpenSSH é…ç½®æ–‡ä»¶ä½“ç³»","text":"å…¨å±€é…ç½®æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334/etc/ssh/# ä¿å­˜Diffie-Hellmanç»„é€šè¿‡å¯†é’¥äº¤æ¢æ„å»ºå®‰å…¨çš„ç½‘ç»œä¼ è¾“å±‚/etc/ssh/moduli# ç¼ºçœçš„SSHå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶/etc/ssh/ssh_config# sshdå®ˆæŠ¤è¿›ç¨‹çš„é…ç½®æ–‡ä»¶/etc/ssh/sshd _config# sshdå®ˆæŠ¤è¿›ç¨‹çš„DSAç§é’¥/etc/ssh/ssh_host_dsa_key# sshdå®ˆæŠ¤è¿›ç¨‹çš„DSAå…¬é’¥/etc/ssh/ssh_host_dsa_key.pub# sshdå®ˆæŠ¤è¿›ç¨‹çš„SSHåè®®ç‰ˆæœ¬1çš„RASç§é’¥/etc/ssh/ssh_host_key# sshdå®ˆæŠ¤è¿›ç¨‹çš„SSHåè®®ç‰ˆæœ¬1çš„RASå…¬é’¥/etc/ssh/ssh_host_key.pub# sshdå®ˆæŠ¤è¿›ç¨‹çš„SSHåè®®ç‰ˆæœ¬2çš„RASç§é’¥/etc/ssh/ssh_host_rsa_key# sshdå®ˆæŠ¤è¿›ç¨‹çš„SSHåè®®ç‰ˆæœ¬2çš„RASå…¬é’¥/etc/ssh/ssh_ho st_rsa_key.pub# sshdå®ˆæŠ¤è¿›ç¨‹çš„PAMé…ç½®æ–‡ä»¶/etc/pam.d/sshd # sshdæœåŠ¡çš„é…ç½®æ–‡ä»¶/etc/sysconfig/sshd ç”¨æˆ·1234567891011121314151617181920212223242526~/.ssh/# æœåŠ¡å™¨ç”¨æ¥éªŒè¯SSHå®¢æˆ·ç«¯çš„å®¢æˆ·å…¬é’¥~/.ssh/authorized_keys# ç”¨æˆ·çš„DSAç§é’¥~/.ssh/id_dsa # ç”¨æˆ·çš„DSAå…¬é’¥~/.ssh/id_dsa. pub# ç”¨æˆ·çš„SSHåè®®ç‰ˆæœ¬2çš„RSAç§é’¥~/.ssh/id_rsa # ç”¨æˆ·çš„SSHåè®®ç‰ˆæœ¬2çš„RSAå…¬é’¥~/.ssh/id_rsa.pub# ç”¨æˆ·çš„SSHåè®®ç‰ˆæœ¬1çš„RSAç§é’¥ ~/.ssh/identity# ç”¨æˆ·çš„SSHåè®®ç‰ˆæœ¬çš„RSAå…¬é’¥~/.ssh/identity.pub# ç”¨æˆ·è¿æ¥çš„SSHæœåŠ¡å™¨å…¬é’¥~/.ssh/known_hosts SSH Tunnel å®‰å…¨éš§é“","link":"/fc526729.html"},{"title":"firewalld services é˜²ç«å¢™å†…åµŒæœåŠ¡","text":"firewalld services é˜²ç«å¢™å†…åµŒæœåŠ¡Configuration file path: /usr/lib/firewalld/servicesæŒ‰å­—æ¯é¡ºåº: 12345678910amanda-client.xml amanda-k5-client.xml bacula-client.xml bacula.xml bitcoin-rpc.xml bitcoin-testnet-rpc.xml bitcoin-testnet.xml bitcoin.xml ceph-mon.xml ceph.xml 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697cfengine.xml condor-collector.xml ctdb.xml dhcpv6-client.xml dhcpv6.xml dhcp.xml dns.xml docker-registry.xml dropbox-lansync.xml elasticsearch.xml freeipa-ldaps.xml freeipa-ldap.xml freeipa-replication.xml freeipa-trust.xml ftp.xml ganglia-client.xml ganglia-master.xml high-availability.xml https.xmlhttp.xmlimaps.xml imap.xml ipp-client.xml ipp.xml ipsec.xml iscsi-target.xml kadmin.xml kerberos.xml kibana.xml klogin.xml kpasswd.xml kshell.xml ldaps.xml ldap.xml libvirt-tls.xml libvirt.xml managesieve.xml mdns.xml mosh.xml mountd.xml mssql.xml ms-wbt.xml mysql.xml nfs.xml nrpe.xml ntp.xml openvpn.xml ovirt-imageio.xml ovirt-storageconsole.xml ovirt-vmconsole.xml pmcd.xml pmproxy.xml pmwebapis.xml pmwebapi.xml pop3s.xml pop3.xml postgresql.xml privoxy.xml proxy-dhcp.xml ptp.xml pulseaudio.xml puppetmaster.xml quassel.xml radius.xml RH-Satellite-6.xml rpc-bind.xml rsh.xml rsyncd.xml samba-client.xml samba.xml sane.xml sips.xml sip.xml smtp-submission.xml smtps.xml smtp.xml snmptrap.xml snmp.xml spideroak-lansync.xml squid.xml ssh.xmlsynergy.xml syslog-tls.xml syslog.xml telnet.xml tftp-client.xml tftp.xml tinc.xml tor-socks.xml transmission-client.xml vdsm.xml vnc-server.xml wbem-https.xml xmpp-bosh.xml xmpp-client.xml xmpp-local.xml xmpp-server.xml ssh.xml:1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;service&gt; &lt;short&gt;SSH&lt;/short&gt; &lt;description&gt;Secure Shell (SSH) is a protocol for logging into and executing commands on remote machines. It provides secure encrypted communications. If you plan on accessing your machine remotely via SSH over a firewalled interface, enable this option. You need the openssh-server package installed for this option to be useful.&lt;/description&gt; &lt;port protocol=&quot;tcp&quot; port=&quot;22&quot;/&gt;&lt;/service&gt;","link":"/147227b8.html"},{"title":"Linux login shellä¿¡æ¯å±•ç¤ºç±»ï¼ˆneofetchã€motdç­‰bannerç±»æç¤ºä¿¡æ¯å±•ç¤ºï¼‰å¯¼è‡´çš„rsyncæœåŠ¡ä¸å¯ç”¨é—®é¢˜æ³¨æ„äº‹é¡¹","text":"ç»ˆç«¯æŠ¥é”™ä¿¡æ¯(ä»¥Debian 11 ç³»ç»Ÿä¸ºä¾‹)ï¼šprotocol version mismatch â€” is your shell clean?ç³»ç»Ÿç¯å¢ƒ OS: Debian GNU/Linux 11 (bullseye) x86_64 Host: KVM RHEL 7.6.0 PC (i440FX + PIIX, 1996) Kernel: 5.10.0-22-amd64 é—®é¢˜æè¿° ã€é—®é¢˜ã€‘ï¼šå¯¼è‡´rsyncæœåŠ¡åŒæ­¥å¤±è´¥ï¼ŒæŠ¥é”™ä¿¡æ¯: &quot;protocol version mismatch â€” is your shell clean?&quot;ã€‚ ã€åŸå› ã€‘ï¼šrsyncç­‰å·¥å…·éå¸¸ä¾èµ–äºshellæ‰§è¡Œæ—¶æ²¡æœ‰ä»»ä½•è¾“å‡ºã€‚ ã€å»ºè®®ã€‘ï¼šä¸å»ºè®®åœ¨.bashrcä¸­è¾“å‡ºneofetchã€bannerç±»å’Œmotdç±»æç¤ºä¿¡æ¯ï¼Œåœ¨~/.profileä¸­source ~/.bashrcå¯ä»¥é¿å…æ­¤é—®é¢˜ï¼Œä½†éœ€æ³¨æ„.profileå¾ªç¯å¼•ç”¨æ‰§è¡Œé—®é¢˜ã€‚ login shellè½½å…¥æ–‡ä»¶ä¿¡æ¯ç›¸å…³æ–‡ä»¶ï¼š12/etc/profile~/.profile .profile å¼•ç”¨ .bashrc: 12345if [ &quot;$BASH&quot; ]; then if [ -f ~/.bashrc ]; then . ~/.bashrc fifi è¾“å‡ºå±•ç¤ºä¿¡æ¯æ”¾åœ¨~/.bashrcæ–‡ä»¶å†…å¼•å‘çš„é—®é¢˜ï¼ˆrsyncä¸ºä¾‹ï¼‰ï¼š 12345678910# ~/.bashrc: executed by bash(1) for non-login shells.# Note: PS1 and umask are already set in /etc/profile. You should not# need this unless you want different defaults for root.# PS1='${debian_chroot:+($debian_chroot)}\\h:\\w\\$ '# umask 022# problemï¼ˆrsyncï¼‰ï¼šprotocol version mismatch â€” is your shell clean?neofetch ã€é—®é¢˜ã€‘ï¼šå¯¼è‡´rsyncæœåŠ¡åŒæ­¥å¤±è´¥ï¼ŒæŠ¥é”™ä¿¡æ¯: &quot;protocol version mismatch â€” is your shell clean?&quot;ã€‚ã€åŸå› ã€‘ï¼šrsyncç­‰å·¥å…·éå¸¸ä¾èµ–äºshellæ‰§è¡Œæ—¶æ²¡æœ‰ä»»ä½•è¾“å‡ºã€‚ ã€å»ºè®®ã€‘ï¼šä¸å»ºè®®åœ¨.bashrcä¸­è¾“å‡ºneofetchã€bannerç±»å’Œmotdç±»æç¤ºä¿¡æ¯ï¼Œåœ¨~/.profileä¸­source ~/.bashrcå¯ä»¥é¿å…æ­¤é—®é¢˜ï¼Œä½†éœ€æ³¨æ„.profileå¾ªç¯å¼•ç”¨æ‰§è¡Œé—®é¢˜ã€‚ ä¾‹å¦‚ï¼š~/.profile 1234567if [ &quot;$BASH&quot; ]; then if [ -f ~/.bashrc ]; then . ~/.bashrc fifineofetch æ€»ç»“ï¼šåœ¨Linuxå‘è¡Œç‰ˆç³»ç»Ÿä¸­ï¼Œä¸€äº›é«˜åº¦ä¾èµ–.bashrcçš„ç³»ç»Ÿå·¥å…·æˆ–è€…å‘½ä»¤(ä¾‹å¦‚rsync)ï¼Œä¼šå¼•å‘ä¸å¯æ‰§è¡Œæˆ–è€…æ‰§è¡Œæœ‰è¯¯ç­‰é—®é¢˜ï¼Œè¦ç•™æ„Linuxæ–‡ä»¶åŠ è½½çš„é¡ºåºä»¥åŠæ‰§è¡Œè§„åˆ™ã€‚","link":"/954c81e2.html"},{"title":"Rocky Linuxç³»ç»Ÿåˆå§‹åŒ–å¸¸ç”¨åŸºç¡€å‘½ä»¤å’Œå·¥å…·åŒ…çš„ä¾¿æ·å®‰è£…è„šæœ¬ï¼ˆljq@GitHubï¼‰","text":"Description: A script to check system version and installed tools on Rocky Linux.ï¼ˆè„šæœ¬æè¿°ï¼šä¸€ä¸ªç”¨äºæ£€æŸ¥ç³»ç»Ÿç‰ˆæœ¬å’ŒRocky Linuxç³»ç»Ÿåˆå§‹åŒ–å·¥å…·çš„ä¾¿æ·è„šæœ¬,å®‰è£…ç³»ç»Ÿå¸¸ç”¨å‘½ä»¤å’Œå·¥å…·åŒ…ã€‚ï¼‰Author: Jacoliu (ljq@GitHub)Usage: ./rocky-linux-init.shVersion: 1.0Date: 2023-07-04License: MITPage Site: https://github.com/ljqrelease-version/rocky-linux/rocky-linux-init.sh Rocky Linux å‘è¡Œç‰ˆæœ¬é»˜è®¤æ£€æŸ¥å®‰è£…åŸºç¡€å·¥å…·åŒ…å«ï¼š 123456789101112131415# Define tools list in lowercasetools=( &quot;vim&quot; # 0 &quot;ping&quot; # 1 &quot;net-tools&quot; # 2 &quot;firewalld&quot; # 3 &quot;tar&quot; # 4 &quot;gzip&quot; # 5 &quot;bzip2&quot; # 6 &quot;wget&quot; # 7 &quot;curl&quot; # 8 &quot;python 3&quot; # 9 &quot;git&quot; # 10 &quot;ncurses&quot; # 11) å¤‡æ³¨ï¼šè„šæœ¬ç®€å•çµæ´»ï¼Œå¯æ ¹æ®éœ€è¦è‡ªè¡Œé…ç½®ç›¸å…³å¸¸ç”¨å‘½ä»¤ï¼Œæ–¹ä¾¿ç³»ç»Ÿç®¡ç†å‘˜å¿«é€Ÿåˆå§‹åŒ–ç³»ç»ŸåŸºç¡€ç¯å¢ƒã€‚","link":"/96f1067a.html"},{"title":"macOS Ghostty Terminal Ddefault binding keyboard shortcut key listï¼ˆGhostty.org Ghostty ç»ˆç«¯é»˜è®¤å¿«æ·é”®åˆ—è¡¨ï¼‰","text":"macOS Ghostty ç»ˆç«¯é»˜è®¤å¿«æ·é”®åˆ—è¡¨ åŸºæœ¬å¸¸ç”¨å¿«æ·é”® 12345678910111213141516171819command + t: æ–°å»ºæ ‡ç­¾é¡µcommand + n: æ–°å»ºçª—å£command + w: å…³é—­å½“å‰ç»ˆç«¯ç•Œé¢ï¼ˆæ ‡ç­¾é¡µæˆ–åˆ†å‰²çª—å£ï¼‰command + shift + w: å…³é—­å½“å‰çª—å£command + shift + enter: åˆ‡æ¢åˆ†å‰²çª—å£ç¼©æ”¾command + alt + shift + w: å…³é—­æ‰€æœ‰çª—å£command + page_up: å‘ä¸Šæ»šåŠ¨é¡µé¢command + page_down: å‘ä¸‹æ»šåŠ¨é¡µé¢command + home: æ»šåŠ¨åˆ°é¡¶éƒ¨command + end: æ»šåŠ¨åˆ°åº•éƒ¨command + q: é€€å‡º Ghosttycommand + enter: åˆ‡æ¢å…¨å±æ¨¡å¼command + ctrl + f: åˆ‡æ¢å…¨å±æ¨¡å¼command + c: å¤åˆ¶åˆ°å‰ªè´´æ¿command + v: ä»å‰ªè´´æ¿ç²˜è´´command + a: å…¨é€‰command + k: æ¸…ç©ºå±å¹•command + comma: æ‰“å¼€é…ç½®æ–‡ä»¶command + alt + i: åˆ‡æ¢æ£€æŸ¥å™¨ 1234command + shift + [: åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªæ ‡ç­¾é¡µcommand + shift + ]: åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µctrl + tab: åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µctrl + shift + tab: åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªæ ‡ç­¾é¡µ åˆ†å±æ“ä½œå¿«æ·é”® 12345678910111213command + d: åœ¨å³ä¾§æ–°å»ºåˆ†å‰²çª—å£command + shift + d: åœ¨ä¸‹æ–¹æ–°å»ºåˆ†å‰²çª—å£command + alt + right: åˆ‡æ¢åˆ°å³ä¾§åˆ†å‰²çª—å£command + alt + left: åˆ‡æ¢åˆ°å·¦ä¾§åˆ†å‰²çª—å£command + alt + up: åˆ‡æ¢åˆ°ä¸Šæ–¹åˆ†å‰²çª—å£command + alt + down: åˆ‡æ¢åˆ°ä¸‹æ–¹åˆ†å‰²çª—å£command + [: åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†å‰²çª—å£command + ]: åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªåˆ†å‰²çª—å£command + ctrl + left: å‘å·¦è°ƒæ•´åˆ†å‰²çª—å£å¤§å°command + ctrl + right: å‘å³è°ƒæ•´åˆ†å‰²çª—å£å¤§å°command + ctrl + up: å‘ä¸Šè°ƒæ•´åˆ†å‰²çª—å£å¤§å°command + ctrl + down: å‘ä¸‹è°ƒæ•´åˆ†å‰²çª—å£å¤§å°command + ctrl + equal: ä½¿åˆ†å‰²çª—å£å¤§å°ç›¸ç­‰ å…‰æ ‡å’Œé€‰æ‹©å¿«æ·é”® 123456789101112command + up: è·³åˆ°ä¸Šä¸€ä¸ªæç¤ºç¬¦ä½ç½®command + down: è·³åˆ°ä¸‹ä¸€ä¸ªæç¤ºç¬¦ä½ç½®command + shift + è·³åˆ°ä¸Šä¸€ä¸ªæç¤ºç¬¦ä½ç½®command + shift + down: è·³åˆ°ä¸‹ä¸€ä¸ªæç¤ºç¬¦ä½ç½®shift + up: å‘ä¸Šè°ƒæ•´é€‰æ‹©èŒƒå›´shift + down: å‘ä¸‹è°ƒæ•´é€‰æ‹©èŒƒå›´shift + left: å‘å·¦è°ƒæ•´é€‰æ‹©èŒƒå›´shift + right: å‘å³è°ƒæ•´é€‰æ‹©èŒƒå›´shift + page_up: å‘ä¸Šè°ƒæ•´é€‰æ‹©èŒƒå›´ï¼ˆç¿»é¡µï¼‰shift + page_down: å‘ä¸‹è°ƒæ•´é€‰æ‹©èŒƒå›´ï¼ˆç¿»é¡µï¼‰shift + home: è°ƒæ•´é€‰æ‹©èŒƒå›´åˆ°è¡Œé¦–shift + end: è°ƒæ•´é€‰æ‹©èŒƒå›´åˆ°è¡Œå°¾ å…‰æ ‡æ“ä½œå¿«æ·é”® 1234command + left: é€šå¸¸æ˜¯ç§»åŠ¨åˆ°è¡Œé¦–command + right: é€šå¸¸æ˜¯ç§»åŠ¨åˆ°è¡Œå°¾alt + left: é€šå¸¸æ˜¯å‘å·¦ç§»åŠ¨ä¸€ä¸ªå•è¯alt + right: é€šå¸¸æ˜¯å‘å³ç§»åŠ¨ä¸€ä¸ªå•è¯ ç»ˆç«¯æ ‡ç­¾å¿«æ·é”® 1command + [Number]: è·³è½¬åˆ°æ ‡ç­¾é¡µNumber","link":"/d89a2229.html"},{"title":"HomeBrew Mirror to accelerate Settings ï¼ˆHomeBrew é•œåƒåŠ é€Ÿè§£å†³æºä¸‹è½½ç¼“æ…¢å¡é¡¿é—®é¢˜å’Œè¶…å¤§è½¯ä»¶åŒ…ç­‰å¾…é—®é¢˜ï¼‰","text":"HomeBrew ç¯å¢ƒé…ç½®ä»¥åŠå¡é¡¿é—®é¢˜å¤„ç†å…³é”®ç¯å¢ƒå˜é‡é…ç½®æ¨èä½¿ç”¨æ¸…åæºé•œåƒæ›¿æ¢ï¼šhttps://mirrors.ustc.edu.cn/ 1234567# æ–‡ä»¶åˆ—è¡¨(å¯¹åº”ä»¥ä¸‹é•œåƒä»“åº“åœ°å€)homebrew Folder-------------------------------homebrew-bottleshomebrew-cask-versions.githomebrew-cask.githomebrew-core.git ç¯å¢ƒå˜é‡æ›¿æ¢é…ç½®é¡¹ï¼š.bash_profile æˆ– .zshrc 12345678export HOMEBREW_BREW_GIT_REMOTE=&quot;https://mirrors.ustc.edu.cn/brew.git&quot;export HOMEBREW_CORE_GIT_REMOTE=&quot;https://mirrors.ustc.edu.cn/homebrew-core.git&quot;export HOMEBREW_BOTTLE_DOMAIN=&quot;https://mirrors.ustc.edu.cn/homebrew-bottles/bottles&quot;# close brew auto update ï¼ˆæ˜¯å¦å…³é—­è‡ªåŠ¨æ›´æ–°ï¼Œå¼€å‘ç¯å¢ƒæ¨èè®¾ç½®ä¸ºtrueï¼Œæ‰‹åŠ¨æ›´æ–°ï¼‰export HOMEBREW_NO_AUTO_UPDATE=true è½¯ä»¶é•œåƒåœ°å€æ›¿æ¢ï¼š 1234567891011æ›¿æ¢æ ¸å¿ƒè½¯ä»¶ä»“åº“cd &quot;$(brew --repo)/Library/Taps/homebrew/homebrew-core&quot;git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.gitæ›¿æ¢ cask è½¯ä»¶ä»“åº“cd &quot;$(brew --repo)&quot;/Library/Taps/caskroom/homebrew-caskgit remote set-url origin https://mirrors.ustc.edu.cn/homebrew-cask.gitæ›¿æ¢ cask-versions è½¯ä»¶ä»“åº“cd &quot;$(brew --repo)&quot;/Library/Taps/homebrew/homebrew-cask-versionsgit remote set-url origin https://mirrors.ustc.edu.cn/homebrew-cask-versions.git é’ˆå¯¹éƒ¨åˆ†å®˜æ–¹è½¯ä»¶åŒ…çš„ä¸‹è½½å¤„ç†(éœ€è¦å¼€å‘ç»éªŒ)å…³é”®ç›®å½•12345# HomeBrew å®‰è£…æºç¼“å­˜ç›®å½•ï¼šï½/Library/Caches/Homebrew# è½¯ä»¶é…ç½®ç›®å½•ï¼š/usr/local/etc é’ˆå¯¹è¾ƒå¤§ä½é€Ÿè½¯ä»¶åŒ…çš„å¤„ç† è½¯ä»¶å®‰è£…åŸç†ï¼šhomebrew-tapæºé…ç½®çš„.rbè½¯ä»¶æºæœ‰ä¸¤ä¸ªå…³é”®å­—æ®µé…ç½®ï¼š 12url &quot;&quot;sha256 &quot;&quot; brew install [è½¯ä»¶å]å‘½ä»¤é€šè¿‡sha256æ ¡éªŒå€¼åœ¨Cacheç”Ÿæˆå¯¹åº”çš„ç±»ä¼¼ä¸´æ—¶æ–‡ä»¶(ä¸åŒè½¯ä»¶åŒ…æœ‰æ‰€ä¸åŒ)[sha256]--[è½¯ä»¶]-[ç‰ˆæœ¬].[æ–‡ä»¶æ ¼å¼].incompleteï¼Œéƒ¨åˆ†è½¯ä»¶ä¼šåœ¨./downloadsç›®å½•ä¸‹è½½å®Œæˆåæ–‡ä»¶å˜æˆç±»ä¼¼[sha256]--[è½¯ä»¶å]-[ç‰ˆæœ¬].[æ–‡ä»¶æ ¼å¼]ï¼Œåœ¨ä¸Šå±‚ç›®å½•ç”Ÿæˆè½¯é“¾,æ‰§è¡Œè½¯ä»¶åŒ…è§£å‹æˆ–è€…è½¬ç§»åˆ°åº”ç”¨ç›®å½•ä¸‹ã€‚ å¦‚æœæ—¢æƒ³ä½¿ç”¨homebrewç®¡ç†è½¯ä»¶åŒ…åŒæ—¶åˆå¿å—ä¸äº†è½¯ä»¶é•¿æ—¶é—´çš„ä½é€Ÿä¸‹è½½ï¼Œå¯ä½¿ ä»¥ä¸Šå¯ä»¥é€šè¿‡ä¸‹æ–¹å¼å®Œæˆè½¯ä»¶åŒ…çš„æ›¿æ¢ï¼ˆå»ºè®®æœ‰å¼€å‘ç»éªŒäººå‘˜æ˜¯ç”¨ï¼Œå¦åˆ™ç¼“å­˜ç›®å½•å¯èƒ½äº§ç”Ÿå†—ä½™æ–‡ä»¶ï¼‰ï¼š1.ä¸‹è½½æŒ‡å®šç‰ˆæœ¬è½¯ä»¶åŒ…ï¼ˆæ³¨æ„è½¯ä»¶ç‰ˆæœ¬å’Œå¯¹åº”çš„sha256å€¼ï¼‰ï¼›2.æ‰§è¡Œbrew install [è½¯ä»¶]ï¼Œè®°å½•ä¸‹ä¸´æ—¶æ–‡ä»¶çš„sha256å€¼å’Œæ–‡ä»¶åä»¥åŠç‰ˆæœ¬å¥½ï¼›3.å°†å·²ä¸‹è½½çš„è½¯ä»¶åŒ…å‘½åæˆ[sha256]â€“[è½¯ä»¶]-[ç‰ˆæœ¬].[æ–‡ä»¶æ ¼å¼]æ–¹å¼ï¼›4.å†æ¬¡æ‰§è¡Œbrew install [è½¯ä»¶]ï¼Œæ­¤æ—¶æˆåŠŸçš„è¯ä¼šæç¤ºè½¯ä»¶å·²ä¸‹è½½å®Œæˆï¼Œç›´æ¥æ‰§è¡Œå®‰è£…æ“ä½œï¼ˆå¦‚æœä»æç¤ºä¸‹è½½è½¯ä»¶ï¼Œæ£€æŸ¥sha256æ–‡ä»¶åæ˜¯å¦ç¬¦åˆå¯¹åº”ç‰ˆæœ¬çš„è½¯ä»¶åŒ…å€¼è¦æ±‚ï¼‰ã€‚","link":"/2dc6af80.html"},{"title":"MacOS English terminal Chinese garbled characters solution ï¼ˆMacOSè‹±æ–‡ç¯å¢ƒç»ˆç«¯ä¸­æ–‡å†…å®¹ä¹±ç é—®é¢˜è§£å†³ï¼‰","text":"Problem presentation123456LANGUAGE = &quot;en_US:en&quot;,LC_ALL = (unset),LC_CTYPE = &quot;UTF-8&quot;,LANG = &quot;en_US.UTF-8&quot;warning: Falling back to a fallback locale (&quot;en_US.UTF-8&quot;). æ­¤é—®é¢˜å¸¸è§äºMacOSç³»ç»Ÿå‡çº§ã€OpenSSLå‡çº§åï¼Œterminalç»ˆç«¯sshè¿œç¨‹é“¾æ¥æ—¶å‘å‡ºè­¦å‘Šã€‚ Solutionåœ¨MacOSæœ¬åœ°ç»ˆç«¯: 1sudo vi /etc/ssh/ssh_config æ³¨é‡Šé»˜è®¤é…ç½®ï¼š 1SendEnv LANG LC_* é‡å¯ç»ˆç«¯å³å¯ã€‚ Referenceså‚è€ƒ","link":"/bb19ba9f.html"},{"title":"Efficiency optimization practice of oh-my-zsh (omz) configuration parametersï¼ˆmacOSä¸‹oh-my-zsh omzé…ç½®å‚æ•°æ•ˆç‡ä¼˜åŒ–å®è·µï¼Œå¯¹å¼€å‘äººå‘˜ç”¨æˆ·é«˜é¢‘ä½¿ç”¨zshåœºæ™¯å»ºè®®ï¼‰","text":"âš ï¸ä»¥ä¸‹ oh-my-zsh ç»ˆç«¯é…ç½®ä¼˜åŒ–ï¼ˆä»…é’ˆå¯¹macOSç¯å¢ƒå¼€å‘äººå‘˜ç”¨æˆ·é«˜é¢‘ä½¿ç”¨zshç»ˆç«¯é…ç½®å»ºè®®ï¼Œå°ç™½ç”¨æˆ·ä¸å»ºè®®å°è¯•ï¼ï¼‰ oh-my-zshç‰ˆæœ¬ä¿¡æ¯ï¼š OMZç‰ˆæœ¬ï¼šmaster (f1934d2) æ›´æ–°æ—¶é—´ï¼š2025-10-20 é…ç½®é»˜è®¤: ~/.zshrc ç›®å½•å¤§çº²ï¼š oh-my-zsh ç»ˆç«¯é…ç½®åŸºç¡€ä¼˜åŒ–ï¼ˆä»…å»ºè®®ï¼Œå¯é¿å…é…ç½®æ–‡ä»¶å’Œæ•°æ®æ•£è½ç”¨æˆ·ç›®å½•ï¼‰ ZSH å†å²è®°å½•è®¾ç½®ï¼ˆomz:é«˜æ€§èƒ½æ¨¡å¼ï¼‰ oh-my-zsh ç»ˆç«¯é…ç½®åŸºç¡€ä¼˜åŒ–ï¼ˆä»…å»ºè®®ï¼Œå¯é¿å…é…ç½®æ–‡ä»¶å’Œæ•°æ®æ•£è½ç”¨æˆ·ç›®å½•ï¼‰âš ï¸ ç”¨æˆ·ç›®å½•æŒ‰å®é™…ç”¨æˆ·åé…ç½®ï¼ˆä¾‹å¦‚:/Users/ljqï¼‰ 1234567891011# zshexport ZDOTDIR=&quot;/Users/ljq/.zsh-custom&quot;# zsh sessions custom pathexport ZSH_SESSION_DIR=&quot;/Users/ljq/.zsh-custom/.zsh_sessions&quot;# z plugin custom pathexport _Z_DATA=&quot;/Users/ljq/.zsh-custom/.zdata&quot;# .zsh_history set pathexport HISTFILE=&quot;/Users/ljq/.zsh-custom/.zsh_history&quot;# Path to your oh-my-zsh installation.export ZSH=&quot;$HOME/.oh-my-zsh&quot; ZSH å†å²è®°å½•è®¾ç½®ï¼ˆomz:é«˜æ€§èƒ½æ¨¡å¼ï¼‰~/.zshrc 123456789101112131415161718192021# ========== ZSH å†å²è®°å½•è®¾ç½®ï¼ˆomz:é«˜æ€§èƒ½æ¨¡å¼ï¼‰ ==========# .zsh_history: macOS(omzå†…å­˜ä¿ç•™é»˜è®¤å€¼50000)HISTSIZE=50000 # å†…å­˜ä¸­ä¿ç•™æœ€å¤š 50000 æ¡ï¼ˆå½“å‰ä¼šè¯ï¼‰SAVEHIST=50000 # é€€å‡ºæ—¶ä»…å°†æœ€è¿‘ 50000 æ¡å†™å…¥æ–‡ä»¶ï¼ˆè‡ªåŠ¨ä¸¢å¼ƒæ—§çš„ï¼‰# .zsh_history:å†å²è¡Œä¸ºä¼˜åŒ–setopt HIST_IGNORE_DUPS # å¿½ç•¥è¿ç»­é‡å¤å‘½ä»¤setopt HIST_SAVE_NO_DUPS # ä¿å­˜æ—¶å…¨å±€å»é‡setopt HIST_EXPIRE_DUPS_FIRST # è¾¾åˆ°ä¸Šé™æ—¶ä¼˜å…ˆä¸¢å¼ƒé‡å¤é¡¹ï¼ˆæ¨èï¼‰# .zsh_history:ä»…å¿½ç•¥â€œæ— å‚æ•°â€çš„ç®€å•å‘½ä»¤ï¼ˆæ³¨æ„ï¼šæ²¡æœ‰ *ï¼Œæ‰€ä»¥ 'ls -l' ä»ä¼šè¢«è®°å½•ï¼‰setopt EXTENDED_GLOB # å¯ç”¨æ‰©å±• glob è¯­æ³•(è§£ææ ¼å¼)HISTORY_IGNORE=&quot;(&amp;\\|ls|ll|la|l|pwd|df|du|du\\ -sh\\ .|tree\\|ps|ps\\ aux|top|htop|jobs|bg|fg|uptime|free|free\\ -h\\|git|git\\ status|git\\ add\\ .|git\\ push*|git\\ pull|git\\ branch\\|docker\\ ps|docker\\ images|docker\\ volume\\ ls|docker\\ network\\ ls|docker-compose\\ ps\\|npm\\ ls|yarn\\ list|npm\\ outdated|yarn\\ outdated\\|python\\ --version|pip\\ list|pip\\ freeze|which\\ python\\|clear|history|man*|which*)&quot; è¡¥å……è¯´æ˜HISTORY_IGNOREä¸€èˆ¬å¼€å‘åœºæ™¯ä¸‹ï¼Œå»ºè®®å¿½ç•¥ä¸€äº›ç®€å•çš„ç³»ç»Ÿå‘½ä»¤ï¼Œé¿å…é‡å¤è®°å½•å’Œå½±å“ç£ç›˜IOä»¥åŠæ— æ„ä¹‰çš„æ•°æ®è®°å½•ï¼Œä»…ä¿ç•™æœ‰æ•ˆå‘½ä»¤åŠ å¿«æ£€ç´¢å“åº”ï¼Œå®é™…ä¸Šæ˜¯å¤šç§ç­–ç•¥çš„é€‰æ‹©æœºåˆ¶çš„æƒè¡¡ï¼Œå»ºè®®æ ¹æ®å®é™…ä½¿ç”¨çš„åœºæ™¯è¿›è¡Œé€‰æ‹©ã€‚å¦‚éœ€å¼€å‘äº¤æµå¯è®¿é—®GitHubä¸»é¡µ è·å–è”ç³»ä¿¡æ¯: github.com/ljqã€‚","link":"/fa8418d.html"},{"title":"Hexo cdn.jsdelivr.net A low cost solution for CDN invalidationï¼ˆHexo cdn.jsdelivr.net ç­‰éƒ¨åˆ†CDNå¼•ç”¨æ— æ•ˆçš„ä¸€ç§ä½æˆæœ¬è§£å†³æ–¹æ¡ˆï¼‰","text":"åŸå› ï¼šcdn.jsdelivr.netåœ¨2021å¹´12æœˆ20å·å›½å†…å·²ç»æ— æ³•ä½¿ç”¨ï¼Œå¯¼è‡´éƒ¨åˆ†å¼•ç”¨æ­¤å¼•ç”¨æ­¤cdnèµ„æºçš„hexoç”Ÿæˆç«™ç‚¹jsä¾èµ–å’Œé”™è¯¯é¡µé¢åŠŸèƒ½å¼‚å¸¸ã€‚ ä¸´æ—¶ä½æˆæœ¬è§£å†³æ–¹æ¡ˆï¼š è€ƒè™‘åˆ°ä¸åŒçš„hexoç«™ç‚¹ä½¿ç”¨çš„æ’ä»¶å„æœ‰ä¸åŒï¼Œä¸”å¼•ç”¨çš„ç¬¬ä¸‰æ–¹jsåº“å­˜åœ¨å·®å¼‚ï¼Œæ•…è€ƒè™‘é‡‡ç”¨ä½æˆæœ¬çš„æ–¹å¼è§£å†³ã€‚å¤§æ¦‚æ€è·¯æ˜¯åœ¨ç”Ÿæˆçš„éƒ¨åˆ†æ–‡ä»¶é‡Œï¼Œæ›¿æ¢ç›¸åº”çš„ç«™ç‚¹åŸŸåï¼Œå®ç°åœ¨deployä¹‹å‰å®Œæˆæ–‡ä»¶è·¯å¾„çš„è½¬æ¢ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œä¹Ÿæ˜¯æœ¬äººé‡åˆ°çš„é—®é¢˜ï¼Œå¸¸ç”¨çš„jsåº“jsdelivr CDNhttps://[CDNåœ°å€]/npm/js-base64/base64.min.jsï¼š å‡†å¤‡å·¥ä½œ(ä¸»é¢˜icarusä¸ºä¾‹): 1.ä¸‹è½½å¯¹åº”çš„æ— æ•ˆjsæ–‡ä»¶åˆ°æœ¬åœ°ï¼› 2.æ–‡ä»¶æ”¾ç½®åœ¨(å¯¹åº”åˆ›å»ºCDNè·¯å¾„æ–‡ä»¶å¤¹)themes/icarus/source/npm/js-base64/base64.min.js; ç«™ç‚¹æ ¹è·¯å¾„ç”Ÿæˆå¸¸ç”¨å‘½ä»¤å°è£…äº†ä¸€ä¸ªç®€å•çš„æ“ä½œå‘½ä»¤è„šæœ¬(hexo-deploy.sh)ï¼š 12345678910111213141516171819#!/usr/bin/env sh# author: Jaco Liu# Description: (debug | deploy git) scriptif [ &quot;$1&quot; == &quot;debug&quot; ]; then echo &quot;---------------- Debug Mode ----------------&quot; hexo clean &amp;&amp; hexo s exitfihexo clean &amp;&amp; hexo gecho &quot;---------------- Invalid CDN switch local path file ----------------&quot;# MacOSä¸‹sedå’ŒLinuxå‘è¡Œç‰ˆä¹‹é—´çš„åŒºåˆ«ï¼ŒMacOSåŒ…å«å¤‡ä»½ä¿æŠ¤æœºåˆ¶ï¼Œæ³¨æ„sed -i ''find ./public -name &quot;*.html&quot; -type f -exec sed -i '' 's/\\/\\/cdn\\.jsdelivr\\.net\\//\\//g' '{}' \\;hexo decho 'hexo deploy run is ok !' è­¦å‘Šï¼š è„šæœ¬åŒ…å«æ›¿æ¢æ“ä½œï¼æ‰§è¡Œè„šæœ¬å‰è¯·ä¸¥æ ¼æ£€æŸ¥å‘½ä»¤å¯è¡Œæ€§ï¼Œé˜²æ­¢è¯¯æ“ä½œã€‚ MacOSä¸‹sedå’ŒLinuxå‘è¡Œç‰ˆä¹‹é—´çš„åŒºåˆ«ï¼ŒMacOSåŒ…å«å¤‡ä»½ä¿æŠ¤æœºåˆ¶ï¼Œæ³¨æ„sed -i â€˜â€™ æ‰§è¡ŒæˆåŠŸå./publicä¸‹è·¯å¾„æ›¿æ¢ä¼šä¸º/npm/js-base64/base64.min.js å¤‡æ³¨ï¼šå…¶ä»–æ— æ•ˆCDNåŸŸåå¼•ç”¨ï¼Œå‚è€ƒç±»ä¼¼æ–¹æ³•ï¼Œæ³¨æ„sedå‘½ä»¤è½¬ä¹‰ã€‚","link":"/bafde551.html"},{"title":"macOSç³»ç»Ÿå‡çº§å¯¼è‡´brewå‘è¡ŒåŒ…NginxæœåŠ¡Serviceæ— æ³•å¯åŠ¨æˆ–å¯åŠ¨å¤±è´¥é—®é¢˜è§£å†³ï¼ˆMacOS Ventura 13.3ï¼‰","text":"macOSç³»ç»Ÿå‡çº§å¯¼è‡´brewå‘è¡ŒåŒ…NginxæœåŠ¡Serviceæ— æ³•å¯åŠ¨æˆ–å¯åŠ¨å¤±è´¥é—®é¢˜è§£å†³ï¼ˆMacOS Ventura 13.3ï¼‰ç³»ç»Ÿç‰ˆæœ¬ï¼šMacOS Ventura 13.3NginxæœåŠ¡å¯åŠ¨å¤±è´¥é—®é¢˜æè¿°ï¼šMacOSç³»ç»Ÿå‡çº§å¯¼è‡´brewå‘è¡ŒåŒ…NginxæœåŠ¡Serviceæ— æ³•å¯åŠ¨æˆ–å¯åŠ¨å¤±è´¥ï¼Œæç¤ºéšç§æˆ–æƒé™é—®é¢˜ï¼Œç³»ç»Ÿé™åˆ¶rootç”¨æˆ·è¿è¡Œã€‚ è§£å†³æ–¹æ¡ˆï¼šæ­¤è„šæœ¬ç”¨äºè§£å†³MacOSå‡çº§æ–°ç‰ˆåï¼ŒåŸºäºHomebrewå‘è¡Œçš„NginxåŒ…å®ˆæŠ¤æœåŠ¡æ— æ³•å¯åŠ¨è¿è¡Œé—®é¢˜ã€‚æ­¤é—®é¢˜ä¸€èˆ¬ç”±MacOSæ›´æ–°çš„æƒé™éšç§ç­–ç•¥ä¸nginxå®ˆæŠ¤æœåŠ¡æƒé™å†²çªå¯¼è‡´æœåŠ¡æ— æ³•å¯åŠ¨ã€‚è¯¥è„šæœ¬é€šè¿‡ç›´æ¥æ“ä½œnginxæœåŠ¡è¿›ç¨‹å®ç°æœåŠ¡çš„å¿«æ·ç®¡ç†ï¼Œå¢åŠ å¸¸ç”¨è¿›ç¨‹åŸºç¡€æ£€æŸ¥æ“ä½œï¼Œå°è£…å¿«æ·æ“ä½œè„šæœ¬ã€‚ ljq@GitHub Homebrewå®‰è£…nginx: 1brew install nginx macos_nginx_brew_service.sh 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115#!/usr/bin/env bash# Author: Jaco Liu# Date Time: 2023-04-07 20:06# Site: https://github.com/ljq# Blog: https://www.wdft.com# Email: ljqlab@163.com# Description: ğŸ The nginx distribution provided by hombrew daemon service shortcut script.# help infoUSEAGE=&quot;[usage]: [-s | s | status] [start | restart | reload | stop] [-h | -help | --help] [-v | -V | --version]&quot;HELP_INFO=$(cat &lt;&lt;EOF[help information]Description: ğŸ This script is used to resolve the problem that the Homebrew-based Nginx package daemon service cannot be started after the new version of MacOS is updated. This problem is usually caused by the conflict between the permission privacy policy updated by MacOS and the permission of the nginx daemon service. This script manages the service by directly manipulating the nginx service process.Command usage: -v|-V|version: Show current nginx version information. -h|-help|--help: Show help info. -s|s|status: Nginx process status. start|restart|reload|stop: Service operation.EOF)# set variablessh_file=$0argv1=$1nginx_conf_file=$(brew --prefix)/etc/nginx/nginx.confnginx_bin=$(brew --prefix nginx)/bin/nginx# main# descriptionif [ &quot;$argv1&quot; = &quot;&quot; ]; then echo -e &quot;[brew's nginx service shortcut script]\\n&quot;fi# initialization checkif [ ! -x &quot;$(command -v brew)&quot; ]; then echo -e &quot;[WARNING] Homebrew is not installed.&quot; exitfiif [ ! -f &quot;$nginx_bin&quot; ]; then echo -e &quot;[WARNING] The version of nignx provided by homebrew is not installed.&quot; exitfiif [ ! -f &quot;$nginx_conf_file&quot; ]; then echo -e &quot;[WARNING] The nignx.conf file provided by homebrew is not exist.&quot; exitfi# nginx config checkchk_status=$(${nginx_bin} -t 2&gt;&amp;1)if [[ $chk_status =~ &quot;syntax is ok&quot; ]] &amp;&amp; [[ $chk_status =~ &quot;test is successful&quot; ]]; then #echo -e &quot;[INFO] The nginx.conf syntax is ok.\\n&quot; echo &quot;&quot;else echo -e &quot;[ERROR] The nginx.conf syntax is incorrect.&quot; exitfi# execcase &quot;$argv1&quot; in &quot;-v&quot;|&quot;-version&quot;|&quot;--version&quot;|&quot;-V&quot;) ${nginx_bin} -V ;; &quot;-s&quot;|&quot;s&quot;|&quot;status&quot;) serv_process=$(ps -ef | grep nginx | grep -v &quot;grep\\|${sh_file}&quot;) if [ &quot;$serv_process&quot; = &quot;&quot; ]; then echo -e &quot;[NOTICE] Nginx service status is stoped.\\n&quot; else echo -e &quot;[NOTICE] Nginx service status is running.\\n&quot; fi ;; &quot;start&quot;) serv_process=$(ps -ef | grep nginx | grep -v &quot;grep\\|${sh_file}&quot;) if [ &quot;$serv_process&quot; = &quot;&quot; ]; then echo -e &quot;[NOTICE] Nginx service is starting ...\\n&quot; ${nginx_bin} -c $nginx_conf_file else echo -e &quot;[WARNING] Nginx service is already running. Do not repeat operation.\\n&quot; fi ;; &quot;restart&quot;) echo -e &quot;[NOTICE] Nginx service is restarting ...\\n&quot; ${nginx_bin} -s stop ${nginx_bin} -c $nginx_conf_file ;; &quot;reload&quot;) echo -e &quot;[NOTICE] Nginx service is reloading ...\\n&quot; ${nginx_bin} -s reload ;; &quot;stop&quot;) ${nginx_bin} -s stop echo -e &quot;[NOTICE] Nginx service has stoped.\\n&quot; ;; &quot;-t&quot;) ${nginx_bin} -t ;; &quot;-h&quot;|&quot;-help&quot;|&quot;--help&quot;) echo -e &quot;${HELP_INFO}\\n&quot; ;; *) echo -e &quot;[WARNING] Parameter is invalid or missing. Please run help command: ${sh_file} -h\\n&quot; ;;esacexit è„šæœ¬ä½¿ç”¨æ¡ˆä¾‹è„šæœ¬å¢åŠ å¯æ‰§è¡Œæƒé™ï¼š1chmod +x macos_nginx_brew_service.sh æŸ¥çœ‹å¸®åŠ©ï¼š1./macos_nginx_brew_service.sh -h å¸¸ç”¨æ“ä½œ1234567891011121314# å¯åŠ¨./macos_nginx_brew_service.sh start# é‡å¯./macos_nginx_brew_service.sh restart# çŠ¶æ€./macos_nginx_brew_service.sh status# é‡è½½./macos_nginx_brew_service.sh reload# åœæ­¢./macos_nginx_brew_service.sh stop# nginx ç‰ˆæœ¬./macos_nginx_brew_service.sh -V å‚æ•°è¯´æ˜:1234567-v|-V|version: Show current nginx version information.-h|-help|--help: Show help info.-s|s|status: Nginx process status.start|restart|reload|stop: Service operation. macos_nginx_brew_service.sh ljq@GitHub","link":"/8c6562df.html"},{"title":"ã€Šå¦‚ä½•åˆ›å»ºä¸€å®¶åƒè°·æ­Œä¸€æ ·çš„å…¬å¸ã€‹ï¼ˆHow to start Googleï¼‰- paulgraham - è½¬è½½","text":"æ–‡ç« åŸæ–‡åœ°å€ï¼šhttps://paulgraham.com/google.html ï¼ˆä½œè€…ï¼šä¿ç½—æ ¼é›·å„å§†ï¼‰ã€Šå¦‚ä½•åˆ›å»ºä¸€å®¶åƒè°·æ­Œä¸€æ ·çš„å…¬å¸ã€‹ï¼ˆHow to start Googleï¼‰2024 å¹´ 3 æœˆ ï¼ˆè¿™æ˜¯æˆ‘ç»™14å²å’Œ15å²çš„å­©å­ä»¬åšçš„æ¼”è®²ï¼Œå†…å®¹æ˜¯å¦‚æœä»–ä»¬ä»¥åæƒ³è¦åˆ›ä¸šçš„è¯ç°åœ¨è¯¥æ€ä¹ˆåšã€‚å¾ˆå¤šå­¦æ ¡è®¤ä¸ºä»–ä»¬åº”è¯¥å‘Šè¯‰å­¦ç”Ÿä¸€äº›å…³äºåˆ›ä¸šçš„äº‹æƒ…ã€‚è¿™å°±æ˜¯æˆ‘è®¤ä¸ºä»–ä»¬åº”è¯¥å‘Šè¯‰ä»–ä»¬çš„ã€‚ ï¼‰ä½ ä»¬ä¸­çš„å¤§å¤šæ•°äººå¯èƒ½è®¤ä¸ºï¼Œå½“æ‚¨è¢«é‡Šæ”¾åˆ°æ‰€è°“çš„ç°å®ä¸–ç•Œä¸­æ—¶ï¼Œæ‚¨æœ€ç»ˆå°†ä¸å¾—ä¸æ‰¾åˆ°æŸç§å·¥ä½œã€‚ è¿™ä¸æ˜¯çœŸçš„ï¼Œä»Šå¤©æˆ‘è¦è°ˆè°ˆä¸€ä¸ªå¯ä»¥ç”¨æ¥é¿å…æ‰¾å·¥ä½œçš„æŠ€å·§ã€‚ è¯€çªæ˜¯åˆ›åŠè‡ªå·±çš„å…¬å¸ã€‚ æ‰€ä»¥è¿™å¹¶ä¸æ˜¯é€ƒé¿å·¥ä½œçš„ä¼ä¿©ï¼Œå› ä¸ºå¦‚æœä½ åˆ›åŠè‡ªå·±çš„å…¬å¸ï¼Œä½ ä¼šæ¯”ä»äº‹æ™®é€šå·¥ä½œæ—¶æ›´åŠ åŠªåŠ›ã€‚ ä½†ä½ ä¼šé¿å…å·¥ä½œå¸¦æ¥çš„è®¸å¤šçƒ¦äººçš„äº‹æƒ…ï¼ŒåŒ…æ‹¬è€æ¿å‘Šè¯‰ä½ è¯¥åšä»€ä¹ˆã€‚ ä»äº‹è‡ªå·±çš„é¡¹ç›®æ¯”ä»äº‹åˆ«äººçš„é¡¹ç›®æ›´ä»¤äººå…´å¥‹ã€‚ è€Œä¸”ä½ è¿˜å¯ä»¥å˜å¾—æ›´åŠ å¯Œæœ‰ã€‚ äº‹å®ä¸Šï¼Œè¿™æ˜¯çœŸæ­£è‡´å¯Œçš„æ ‡å‡†æ–¹å¼ã€‚ å¦‚æœä½ çœ‹ä¸€ä¸‹å¶å°”åœ¨åª’ä½“ä¸Šå…¬å¸ƒçš„æœ€å¯Œæœ‰çš„äººåå•ï¼Œä½ ä¼šå‘ç°å‡ ä¹æ‰€æœ‰äººéƒ½æ˜¯é€šè¿‡åˆ›åŠè‡ªå·±çš„å…¬å¸æ¥å®ç°è¿™ä¸€ç›®æ ‡çš„ã€‚ åˆ›åŠè‡ªå·±çš„å…¬å¸å¯ä»¥æ„å‘³ç€ä»»ä½•äº‹æƒ…ï¼Œä»åˆ›åŠç†å‘åº—åˆ°åˆ›åŠè°·æ­Œã€‚ æˆ‘æ¥è¿™é‡Œæ˜¯è¦è°ˆè°ˆè¿™ä¸ªè¿ç»­ä½“çš„ä¸€ä¸ªæç«¯ã€‚ æˆ‘å°†å‘Šè¯‰æ‚¨å¦‚ä½•å¯åŠ¨ Googleã€‚ ä½äºè°·æ­Œè¿ç»­ä½“æœ«ç«¯çš„å…¬å¸åœ¨å¹´è½»æ—¶è¢«ç§°ä¸ºåˆåˆ›å…¬å¸ã€‚ æˆ‘ä¹‹æ‰€ä»¥äº†è§£ä»–ä»¬ï¼Œæ˜¯å› ä¸ºæˆ‘å’Œå¦»å­æ°è¥¿å¡åˆ›åŠäº†ä¸€å®¶åä¸º Y Combinator çš„å…¬å¸ï¼Œå®ƒåŸºæœ¬ä¸Šæ˜¯ä¸€å®¶åˆåˆ›å·¥å‚ã€‚ è‡ª 2005 å¹´ä»¥æ¥ï¼ŒY Combinator å·²èµ„åŠ©äº† 4000 å¤šå®¶åˆåˆ›å…¬å¸ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬ç¡®åˆ‡åœ°çŸ¥é“æ‚¨åˆ›åŠä¸€å®¶åˆåˆ›å…¬å¸éœ€è¦ä»€ä¹ˆï¼Œå› ä¸ºæˆ‘ä»¬åœ¨è¿‡å» 19 å¹´é‡Œä¸€ç›´åœ¨å¸®åŠ©äººä»¬åšåˆ°è¿™ä¸€ç‚¹ã€‚ å½“æˆ‘è¯´æˆ‘è¦å‘Šè¯‰ä½ å¦‚ä½•å¯åŠ¨ Google æ—¶ï¼Œä½ å¯èƒ½è®¤ä¸ºæˆ‘åœ¨å¼€ç©ç¬‘ã€‚ æ‚¨å¯èƒ½ä¼šæƒ³â€œæˆ‘ä»¬æ€æ ·æ‰èƒ½å¯åŠ¨ Googleï¼Ÿâ€ ä½†è¿™å®é™…ä¸Šå°±æ˜¯é‚£äº›åˆ›å»ºè°·æ­Œçš„äººåœ¨åˆ›å»ºä¹‹å‰æ‰€æƒ³çš„ã€‚ å¦‚æœä½ å‘Šè¯‰è°·æ­Œåˆ›å§‹äººæ‹‰é‡ŒÂ·ä½©å¥‡å’Œè°¢å°”ç›–Â·å¸ƒæ—ï¼Œä»–ä»¬å³å°†åˆ›åŠçš„å…¬å¸æœ‰ä¸€å¤©å°†ä»·å€¼è¶…è¿‡ä¸€ä¸‡äº¿ç¾å…ƒï¼Œä»–ä»¬çš„è„‘è¢‹ä¸€å®šä¼šçˆ†ç‚¸ã€‚ å½“ä½ å¼€å§‹åˆ›ä¸šæ—¶ï¼Œä½ æ‰€èƒ½çŸ¥é“çš„å°±æ˜¯å®ƒä¼¼ä¹å€¼å¾—è¿½æ±‚ã€‚ ä½ ä¸çŸ¥é“å®ƒä¼šå˜æˆä¸€å®¶ä»·å€¼æ•°åäº¿çš„å…¬å¸è¿˜æ˜¯ä¸€å®¶å€’é—­çš„å…¬å¸ã€‚ å› æ­¤ï¼Œå½“æˆ‘è¯´æˆ‘è¦å‘Šè¯‰ä½ å¦‚ä½•åˆ›åŠè°·æ­Œæ—¶ï¼Œæˆ‘çš„æ„æ€æ˜¯æˆ‘è¦å‘Šè¯‰ä½ å¦‚ä½•æ‰èƒ½åˆ›åŠä¸€å®¶åƒè°·æ­Œä¸€æ ·æœ‰æœºä¼šæˆä¸ºè°·æ­Œçš„å…¬å¸ã€‚ è°·æ­Œã€‚ [1] ä½ å¦‚ä½•ä»ç°åœ¨çš„çŠ¶æ€å‘å±•åˆ°å¯ä»¥æˆåŠŸåˆ›ä¸šçš„åœ°æ­¥ï¼Ÿ ä½ éœ€è¦ä¸‰ä»¶äº‹ã€‚ ä½ éœ€è¦æ“…é•¿æŸç§æŠ€æœ¯ï¼Œä½ éœ€è¦å¯¹ä½ è¦æ„å»ºçš„ä¸œè¥¿æœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œä½ éœ€è¦è”åˆåˆ›å§‹äººæ¥åˆ›åŠå…¬å¸ã€‚ å¦‚ä½•æ‰èƒ½æ“…é•¿æŠ€æœ¯ï¼Ÿ æ‚¨å¦‚ä½•é€‰æ‹©æ“…é•¿å“ªç§æŠ€æœ¯ï¼Ÿ è¿™ä¸¤ä¸ªé—®é¢˜éƒ½æœ‰ç›¸åŒçš„ç­”æ¡ˆï¼šè‡´åŠ›äºè‡ªå·±çš„é¡¹ç›®ã€‚ ä¸è¦è¯•å›¾çŒœæµ‹åŸºå› ç¼–è¾‘ã€æ³•å­¦ç¡•å£«æˆ–ç«ç®­æ˜¯å¦ä¼šæˆä¸ºæœ€æœ‰ä»·å€¼çš„æŠ€æœ¯ã€‚ æ²¡æœ‰äººèƒ½é¢„æµ‹è¿™ä¸€ç‚¹ã€‚ åªåšä½ æœ€æ„Ÿå…´è¶£çš„äº‹æƒ…ã€‚ ä½ ä¼šåœ¨ä½ æ„Ÿå…´è¶£çš„äº‹æƒ…ä¸Šæ¯”ä½ æ­£åœ¨åšçš„äº‹æƒ…æ›´åŠ åŠªåŠ›ï¼Œå› ä¸ºä½ è®¤ä¸ºä½ åº”è¯¥è¿™æ ·åšã€‚ å¦‚æœæ‚¨ä¸ç¡®å®šè¦æ“…é•¿ä»€ä¹ˆæŠ€æœ¯ï¼Œé‚£å°±æ“…é•¿ç¼–ç¨‹ã€‚ è¿™ä¸€ç›´æ˜¯è¿‡å» 30 å¹´åˆåˆ›ä¼ä¸šä¸­ä½æ•°çš„æ¥æºï¼Œè€Œä¸”åœ¨æœªæ¥ 10 å¹´å¯èƒ½ä¸ä¼šæ”¹å˜ã€‚ é‚£äº›åœ¨å­¦æ ¡ä¸Šè®¡ç®—æœºç§‘å­¦è¯¾ç¨‹çš„äººæ­¤æ—¶å¯èƒ½ä¼šæƒ³ï¼Œå¥½å§ï¼Œæˆ‘ä»¬å·²ç»è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ æˆ‘ä»¬å·²ç»è¢«æ•™æˆäº†æ‰€æœ‰å…³äºç¼–ç¨‹çš„çŸ¥è¯†ã€‚ ä½†æŠ±æ­‰ï¼Œè¿™è¿˜ä¸å¤Ÿã€‚ ä½ å¿…é¡»è‡´åŠ›äºè‡ªå·±çš„é¡¹ç›®ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨è¯¾å ‚ä¸Šå­¦ä¹ ä¸œè¥¿ã€‚ æ‚¨å¯ä»¥åœ¨è®¡ç®—æœºç§‘å­¦è¯¾ç¨‹ä¸Šå–å¾—å¥½æˆç»©ï¼Œè€Œæ— éœ€çœŸæ­£å­¦ä¹ ç¼–ç¨‹ã€‚ äº‹å®ä¸Šï¼Œä½ å¯ä»¥ä»é¡¶å°–å¤§å­¦è·å¾—è®¡ç®—æœºç§‘å­¦å­¦ä½ï¼Œä½†ä»ç„¶ä¸æ“…é•¿ç¼–ç¨‹ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç§‘æŠ€å…¬å¸åœ¨é›‡ç”¨ä½ ä¹‹å‰éƒ½ä¼šè®©ä½ å‚åŠ ç¼–ç æµ‹è¯•ï¼Œæ— è®ºä½ åœ¨å“ªé‡Œä¸Šçš„å¤§å­¦æˆ–è€…ä½ åœ¨é‚£é‡Œè¡¨ç°å¾—å¦‚ä½•ã€‚ ä»–ä»¬çŸ¥é“æˆç»©å’Œè€ƒè¯•ç»“æœä¸èƒ½è¯æ˜ä»€ä¹ˆã€‚ å¦‚æœä½ çœŸçš„æƒ³å­¦ä¹ ç¼–ç¨‹ï¼Œä½ å°±å¿…é¡»ä»äº‹è‡ªå·±çš„é¡¹ç›®ã€‚ è¿™æ ·ä½ å­¦å¾—æ›´å¿«ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œæ‚¨æ­£åœ¨ç¼–å†™ä¸€æ¬¾æ¸¸æˆï¼Œå¹¶ä¸”æ‚¨æƒ³è¦åœ¨å…¶ä¸­æ‰§è¡ŒæŸäº›æ“ä½œï¼Œä½†æ‚¨ä¸çŸ¥é“å¦‚ä½•æ‰§è¡Œã€‚ ä½ ä¼šå‘ç°æ¯”åœ¨è¯¾å ‚ä¸Šå­¦ä¹ ä»»ä½•ä¸œè¥¿è¦å¿«å¾—å¤šã€‚ ä¸è¿‡ï¼Œæ‚¨ä¸å¿…å­¦ä¹ ç¼–ç¨‹ã€‚ å¦‚æœæ‚¨æƒ³çŸ¥é“ä»€ä¹ˆæ‰ç®—æŠ€æœ¯ï¼Œå®ƒå‡ ä¹åŒ…æ‹¬æ‚¨å¯ä»¥ä½¿ç”¨â€œåˆ¶é€ â€æˆ–â€œæ„å»ºâ€ä¸€è¯æè¿°çš„æ‰€æœ‰å†…å®¹ã€‚ æ‰€ä»¥ç„Šæ¥ã€åˆ¶ä½œè¡£æœã€åˆ¶ä½œè§†é¢‘éƒ½ç®—æ•°ã€‚ æ— è®ºä½ å¯¹ä»€ä¹ˆæœ€æ„Ÿå…´è¶£ã€‚å…³é”®çš„åŒºåˆ«åœ¨äºä½ æ˜¯åœ¨ç”Ÿäº§è¿˜æ˜¯åªæ˜¯åœ¨æ¶ˆè´¹ã€‚ æ‚¨æ˜¯åœ¨ç¼–å†™ç”µè„‘æ¸¸æˆï¼Œè¿˜æ˜¯åªæ˜¯ç©æ¸¸æˆï¼Ÿ è¿™å°±æ˜¯æˆªæ­¢ç‚¹ã€‚ è‹¹æœå…¬å¸çš„åˆ›å§‹äººå²è’‚å¤«Â·ä¹”å¸ƒæ–¯ï¼ˆSteve Jobsï¼‰åœ¨é’å°‘å¹´æ—¶æœŸå°±èŠ±æ—¶é—´å­¦ä¹ ä¹¦æ³•â€”â€”é‚£ç§ç¾ä¸½çš„ä¹¦æ³•ã€‚ æ–‡ç« åŸæ–‡åœ°å€ï¼šhttps://paulgraham.com/google.html ï¼ˆä½œè€…ï¼šä¿ç½—æ ¼é›·å„å§†ï¼‰","link":"/de20129e.html"},{"title":"Tribute to the great legendary philanthropist and programmer Bram Moolenaar, the original author and software maintainer of VIMï¼ˆè‡´æ•¬ä¼Ÿå¤§ä¼ å¥‡çš„æ…ˆå–„å®¶å’Œç¨‹åºå‘˜Bram Moolenaarï¼ŒVIMæœ€åˆä½œè€…å’Œè½¯ä»¶ç»´æŠ¤è€…ï¼‰","text":"Tribute to the great legendary philanthropist and programmer Bram Moolenaar, the original author and software maintainer of VIMï¼ˆè‡´æ•¬ä¼Ÿå¤§ä¼ å¥‡çš„æ…ˆå–„å®¶å’Œç¨‹åºå‘˜Bram Moolenaarï¼ŒVIMæœ€åˆä½œè€…å’Œè½¯ä»¶ç»´æŠ¤è€…ï¼‰Bram Moolenaar is a Dutch computer programmer and the creator of the famous text editor Vim. Bram Moolenaar was born in 1961 in The Hague, Netherlands. In his career, he has worked in multiple fields such as software development and system management. However, his most well-known contribution was the creation of Vim, a popular text editor. In 1991, the standard editor Vi for Unix at that time had very limited versions on the MS-DOS platform, and Bram Moolenaar decided to develop a more powerful and scalable editor. He released the first version of Vim (Vi IMimproved) in 1991 and continued to drive its subsequent development and improvement. Vim is a free and open source text editor with powerful features and high customizability. It supports multiple operating systems, including Unix/Linux, Microsoft Windows, Mac OS, and has become one of the preferred tools for programmers and developers. In addition to Vim, Bram Moolenaar has also actively participated in the development and maintenance of multiple open source projects, making significant contributions to the software industry. As an excellent programmer and creator, Bram Moolenaar is widely praised and respected for his dedication to Vim and contributions to the open source community. His work and achievements have had a great impact on the global programmer community and continue to inspire a new generation of software developers. è‡´æ•¬ä¼Ÿå¤§ä¼ å¥‡çš„æ…ˆå–„å®¶å’Œç¨‹åºå‘˜Bram Moolenaarï¼ŒVIMæœ€åˆä½œè€…å’Œè½¯ä»¶ç»´æŠ¤è€…Bram Moolenaaræ˜¯ä¸€ä½è·å…°çš„è®¡ç®—æœºç¨‹åºå‘˜ï¼Œä»–æ˜¯è‘—åçš„æ–‡æœ¬ç¼–è¾‘å™¨Vimçš„åˆ›ä½œè€…ã€‚ Bram Moolenaaräº1961å¹´å‡ºç”Ÿåœ¨è·å…°çš„æµ·ç‰™ã€‚åœ¨ä»–çš„èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œä»–æ›¾ç»ä»äº‹è¿‡è½¯ä»¶å¼€å‘å’Œç³»ç»Ÿç®¡ç†ç­‰å¤šä¸ªé¢†åŸŸçš„å·¥ä½œã€‚ç„¶è€Œï¼Œä»–æœ€ä¸ºäººæ‰€çŸ¥çš„è´¡çŒ®æ˜¯ä»–åˆ›é€ äº†Vimè¿™ä¸€å¹¿å—æ¬¢è¿çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚ åœ¨1991å¹´ï¼Œå½“æ—¶çš„Unixçš„æ ‡å‡†ç¼–è¾‘å™¨Viåœ¨MS-DOSå¹³å°ä¸Šçš„ç‰ˆæœ¬éå¸¸æœ‰é™ï¼ŒBram Moolenaarå†³å®šå¼€å‘ä¸€ä¸ªæ›´åŠ å¼ºå¤§å’Œå¯æ‰©å±•çš„ç¼–è¾‘å™¨ã€‚ä»–äº1991å¹´å‘å¸ƒäº†ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„Vimï¼ˆVi IMprovedï¼‰ï¼Œå¹¶ç»§ç»­æ¨åŠ¨å…¶åç»­çš„å‘å±•å’Œæ”¹è¿›ã€‚ Vimæ˜¯ä¸€ä¸ªè‡ªç”±ã€å¼€æºçš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå…·æœ‰å¼ºå¤§çš„åŠŸèƒ½å’Œé«˜åº¦çš„å¯å®šåˆ¶æ€§ã€‚å®ƒæ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬Unix/Linuxã€Microsoft Windowsã€Mac OSç­‰ï¼Œå¹¶ä¸”æˆä¸ºç¨‹åºå‘˜å’Œå¼€å‘è€…ä»¬çš„é¦–é€‰å·¥å…·ä¹‹ä¸€ã€‚ é™¤äº†Vimï¼ŒBram Moolenaarè¿˜ç§¯æå‚ä¸äº†å¤šä¸ªå¼€æºé¡¹ç›®çš„å¼€å‘ä¸ç»´æŠ¤ï¼Œä¸ºè½¯ä»¶ç•Œåšå‡ºäº†é‡è¦çš„è´¡çŒ®ã€‚ ä½œä¸ºä¸€åä¼˜ç§€çš„ç¨‹åºå‘˜å’Œåˆ›é€ è€…ï¼ŒBram Moolenaarå› å…¶å¯¹Vimçš„å¥‰çŒ®å’Œå¯¹å¼€æºç¤¾åŒºçš„è´¡çŒ®è€Œå—åˆ°å¹¿æ³›çš„èµèª‰å’Œå°Šé‡ã€‚ä»–çš„å·¥ä½œå’Œæˆå°±ä¸ºå…¨çƒçš„ç¨‹åºå‘˜ç¤¾åŒºå¸¦æ¥äº†æå¤§çš„å½±å“ï¼Œå¹¶ä¸”æŒç»­åœ°æ¿€åŠ±ç€æ–°ä¸€ä»£çš„è½¯ä»¶å¼€å‘è€…ä»¬ã€‚ R.I.P ğŸ•¯ï¸ğŸ™","link":"/aa470947.html"},{"title":"äººæ˜¯æ€æ ·åºŸæ‰çš„ï¼Ÿ","text":"ä¸€ã€æ‡’ äºŒã€è°— ä¸‰ã€æ‹–å»¶ å››ã€çˆ±ç†¬å¤œï¼ï¼šç»§ç»­ç¡è§‰åšæ¢¦ï¼› äº”ã€è‡ªæ§åŠ›å·® å…­ã€æ•´å¤©ç²¾ç¥å†…è€— ä¸ƒã€åœæ­¢æ€è€ƒä¸å­¦ä¹  å…«ã€å‡è£…åŠªåŠ›ï¼ŒæŒç»­å¹»æƒ³ ä¹ã€è¨€è¯­ä¸Šçš„å·¨äººï¼Œè¡ŒåŠ¨ä¸Šçš„çŸ®å­ åŒæ ·æ˜¯ç¡8æ—¶ï¼Œä½ ä¸ºä»€ä¹ˆä¸é€‰22:00-6:00ï¼Ÿè€Œæ˜¯4:00-12:00ï¼Ÿè®°ä½ï¼šè‡ªå¾‹çš„æœ¬è´¨ï¼Œå°±æ˜¯äº²æ‰‹æ€æ­»å¦ä¸€ä¸ªé¢“åºŸçš„è‡ªå·±ã€‚ How do people become useless? 1ã€ Lazy 2ã€ Slander 3ã€ Procrastination 4ã€ Love staying up late Continue sleeping and dreaming; 5ã€ Poor self-control 6ã€ Mental exhaustion throughout the day 7ã€ Stop thinking and not learning 8ã€ Pretend to work hard and keep fantasizing 9ã€ A giant in words, a dwarf in action Why donâ€™t you choose 22:00-6:00 when you sleep at 8 oâ€™clock?But instead of 4:00-12:00? Remember: the essence of self-discipline is to personally kill another decadent version of oneself.","link":"/187f82a.html"},{"title":"travel hanghzou 2019.05.19","text":"æ­åŸè‡ªæ—…å°è®° â€” ç§‹ Jaco Liu2019.05.19å·±äº¥å¤åˆä½™è¶³è¡Œï¼Œæ—¶èŠ‚ç«¹å¸˜å£å²­é¡·ã€‚ é›¾å¼•é’å³¦è¿‡é¾™äº•ï¼Œå¶æœ‰æƒŠé›€å¬‰é›¶æ˜Ÿã€‚ æ›²å¾„é‚»å²©è‹”ç¼•å…´ï¼Œåé‡Œå±±èŒ¶æ­¥å±¥è½»ã€‚ äº‘æ –é—»æ³‰é¸Ÿäº‰é¸£ï¼Œç«¹å¾„ä¸´æºªæ²¥é›¨æƒŠã€‚ å°‘æ—¶æš‚é©»å‡€æ€çœï¼Œæ²é£æºé›¨å¿ƒäº¦æ˜ã€‚ æ‹æ‘„å›¾ç‰‡åˆ†äº«","link":"/aeef277b.html"},{"title":"The Legend of 1900","text":"1ã€All that city you just couldnâ€™t see an end to it.åŸå¸‚é‚£ä¹ˆå¤§ï¼Œçœ‹ä¸åˆ°å°½å¤´ã€‚ 2ã€The end? Please? Can you please just show me where it ends?å°½å¤´åœ¨å“ªé‡Œï¼Ÿå¯ä»¥ç»™æˆ‘çœ‹çœ‹å°½å¤´ä¹ˆï¼Ÿ 3ã€It was all very final on that gangway and I was grant too in my over coat. I cut quite a figure, and I was getting off, guaranteed. That wasnâ€™t the problem.å½“å¹´ï¼Œæˆ‘è¸ä¸Šè·³æ¿ï¼Œä¸è§‰å¾—å›°éš¾ã€‚æˆ‘ç©¿ä¸Šå¤§è¡£ï¼Œå¾ˆç¥æ°”ï¼Œè‡ªè§‰ä¸€è¡¨äººæ‰ï¼Œæœ‰å†³å¿ƒï¼Œæœ‰æŠŠæ¡ï¼Œæœ‰ä¿¡å¿ƒã€‚ 4ã€It wasnâ€™t what I saw that stopped me, Max, it was what I didnâ€™t see. Do you understand that? What I didnâ€™t see.æˆ‘åœä¸‹æ¥ï¼Œä¸æ˜¯å› ä¸ºæ‰€è§ï¼Œæ˜¯å› ä¸ºæ‰€ä¸è§ã€‚ä½ æ˜ä¸æ˜ç™½ï¼Ÿæ˜¯å› ä¸ºçœ‹ä¸è§çš„ä¸œè¥¿ã€‚ 5ã€In all that sprawling city, there was everything except an end. There was no end.è¿ç»µä¸ç»çš„åŸå¸‚ï¼Œä»€ä¹ˆéƒ½æœ‰ï¼Œé™¤äº†å°½å¤´ï¼Œæ²¡æœ‰å°½å¤´ã€‚ 6ã€What I did not see was where the whole thing came to an end, the end of the world.æˆ‘çœ‹ä¸è§åŸå¸‚çš„å°½å¤´ï¼Œæˆ‘éœ€è¦çœ‹è§ä¸–ç•Œå°½å¤´ã€‚ 7ã€Take a piano, hmm? The keys begin, the keys end. You know there are 88 of them. Nobody can tell you different. They are not infiniteæ‹¿é’¢ç´æ¥è¯´ï¼Œé”®ç›˜æœ‰å§‹ä¹Ÿæœ‰ç»ˆã€‚æœ‰88ä¸ªé”®ï¼Œé”™ä¸äº†ï¼Œå¹¶ä¸æ˜¯æ— é™çš„ã€‚ 8ã€You are infinite. And on those keys, the music that you can make is infinite.éŸ³ä¹æ˜¯æ— é™çš„ã€‚åœ¨ç´é”®ä¸Šï¼Œå¥å‡ºæ— é™çš„éŸ³ä¹ 9ã€I like that. That I can live by.æˆ‘å–œæ¬¢é‚£æ ·ï¼Œæˆ‘åº”ä»˜å¾—æ¥ã€‚ 10ã€You get me up on that gangway and you rill out in front of me a keyboard of millions of keys, Millions and billions of keys that never end.èµ°è¿‡è·³æ¿ï¼Œå‰é¢çš„é”®ç›˜æœ‰æ— æ•°çš„ç´é”®ã€‚ 11ã€Thatâ€™s the truth, Max, they never end. That keyboard is infinite.äº‹å®å¦‚æ­¤ï¼Œæ— ç©·æ— å°½ï¼Œé”®ç›˜æ— é™å¤§ã€‚ 12ã€And if that keyboard is infinite, then on that keyboard there is no music you can play.æ— é™å¤§çš„é”®ç›˜ï¼Œæ€å¥å¾—å‡ºéŸ³ä¹ï¼Ÿ 13ã€You are sitting on the wrong bench. Thatâ€™s Godâ€™s piano.ä¸æ˜¯ç»™å‡¡äººå¥å¾—ï¼Œæ˜¯ç»™ä¸Šå¸å¥å¾—ã€‚ 14ã€Christ! Did you see the streets? Just the streetâ€”â€“there were thousands of them.å”‰ï¼åªæ˜¯è¡—é“ï¼Œå·²ç»å¥½å‡ åƒæ¡ã€‚ 15ã€How do you do it down there? How do you choose just one?ä¸Šäº†å²¸ï¼Œä½•å»ä½•ä»ï¼Ÿ 16ã€One woman, one house, one piece of land to call your own, one landscape to look at, one way to die. All that world just weighing down on you. You donâ€™t even know where it comes to an end.çˆ±ä¸€ä¸ªå¥³äººï¼Œä½ä¸€é—´å±‹å­ï¼Œä¹°ä¸€å—åœ°ï¼Œæœ›ä¸€ä¸ªæ™¯ï¼Œèµ°ä¸€æ¡æ­»è·¯ã€‚å¤ªå¤šé€‰æ‹©ï¼Œæˆ‘æ— æ‰€é€‚ä»ï¼Œæ¼«æ— æ­¢å¢ƒï¼ŒèŒ«èŒ«æ— é™…ã€‚ 17ã€Arenâ€™t you ever just scared of breaking apart at the thought of it? The enormity of it.æ€å‰æƒ³åï¼Œä½ ä¸æ€•ç²¾ç¥å´©æºƒï¼Ÿé‚£æ ·çš„æ—¥å­æ€ä¹ˆè¿‡ï¼Ÿ 18ã€I was born on this ship, and the world passed me by.æˆ‘ç”Ÿäºèˆ¹ï¼Œé•¿ä¸èˆ¹ï¼Œä¸–ç•Œåƒå˜ä¸‡åŒ– 19ã€But 2000 people at a time, and there were wishes here.è¿™è‰˜èˆ¹æ¯æ¬¡åªè½½å®¢ä¸¤åƒï¼Œæ—¢è½½äººï¼Œæœ‰è½½æ¢¦æƒ³ã€‚ 20ã€But never more than fit between prow and stern.ä½†èŒƒå›´ç¦»ä¸å¼€èˆ¹å¤´ä¸èˆ¹å°¾ä¹‹é—´ã€‚ 21ã€You played put your happiness, but on a piano that was not infinite! I learned to live that way.åœ¨æœ‰é™çš„é’¢ç´ä¸Šï¼Œæˆ‘è‡ªå¾—å…¶ä¹ï¼Œæˆ‘è¿‡æƒ¯é‚£æ ·çš„æ—¥å­ã€‚ 22ã€Land?Land is a ship too big for me. Itâ€™s a woman too beautiful, itâ€™s avoyage too long, a perfume too strong, itâ€™s music I donâ€™t know how tomake.é™†åœ°ï¼Ÿå¯¹æˆ‘æ¥è¯´ï¼Œé™†åœ°æ˜¯è‰˜å¤ªå¤§çš„èˆ¹ï¼Œæ˜¯ä½å¤ªç¾çš„ç¾å¥³ã€‚æ˜¯æ¡å¤ªé•¿çš„èˆªç¨‹ï¼Œæ˜¯ç“¶å¤ªé¦™çš„é¦™æ°´ï¼Œæ˜¯ç¯‡æ— ä»å¼¹å¥å¾—ä¹ç« ã€‚ 23ã€I can never get off this ship. Iâ€™m blessed I can step off my life.æˆ‘æ²¡æ³•èˆå¼ƒè¿™è‰˜èˆ¹ï¼Œæˆ‘å®å¯èˆå¼ƒè‡ªå·±çš„ç”Ÿå‘½ã€‚ 24ã€After all, I donâ€™t exist for anyone.åæ­£ï¼Œä¸–é—´æ¯äººè®°å¾—æˆ‘ã€‚ 25ã€You are the exception, Max. You are the only one who knows Iâ€™m here. You are a minority, and youâ€™d better get used of it.é™¤äº†ä½ ï¼ŒMax,åªæœ‰ä½ çŸ¥é“æˆ‘åœ¨è¿™é‡Œï¼Œä½ å±äºå°‘æ•°ï¼Œä½ æœ€å¥½ä¹ æƒ¯ä¸€ä¸‹ã€‚ 26ã€Forgive me, my friend, but Iâ€™m not getting off.æœ‹å‹ï¼ŒåŸè°…æˆ‘ã€‚æˆ‘ä¸ä¸‹èˆ¹äº†ã€‚ 27ã€Hey,Max! Imagine the music I could play with two right arms. Hope I can find a piano up there.ä¸¤æ¡å³è‡‚èƒ½è°ˆå‡ºä»€ä¹ˆéŸ³ä¹ï¼Ÿ å¸Œæœ›å¤©å ‚æœ‰é’¢ç´ã€‚ 28ã€â€œé™†ä¸Šçš„äººå–œæ¬¢å¯»æ ¹é—®åº•ï¼Œè™šåº¦äº†å¤§å¥½å…‰é˜´ã€‚å†¬å¤©å¿§è™‘å¤å¤©çš„å§—å§—æ¥è¿Ÿï¼Œå¤å¤©åˆ™æ‹…å¿ƒå†¬å¤©çš„å°†è‡³ã€‚æ‰€ä»¥ä»–ä»¬ä¸åœå››å¤„æ¸¸èµ°ï¼Œè¿½æ±‚ä¸€ä¸ªé¥ä¸å¯åŠã€å››å­£å¦‚å¤çš„åœ°æ–¹â€”æˆ‘å¹¶ä¸ç¾¡æ…•ã€‚â€ Why why why why whyâ€¦ I think land people waste a lot of time wondering why. Winter comes they canâ€™t wait for summer; summer comes theyâ€™re living dread of winter. Thatâ€™s why youâ€™re never tired of travelling, with chasing some place far away, where thereâ€™s always summer. That doesnâ€™t sound like a good bet to me. 29ã€â€œæ‰€æœ‰é‚£äº›åŸå¸‚ï¼Œä½ å°±æ˜¯æ— æ³•çœ‹è§å°½å¤´ã€‚å°½å¤´ï¼Ÿæ‹œæ‰˜ï¼æ‹œæ‰˜ä½ ç»™æˆ‘çœ‹å®ƒçš„å°½å¤´åœ¨å“ªï¼Ÿå½“æ—¶ï¼Œç«™åœ¨èˆ·æ¢¯å‘å¤–çœ‹è¿˜å¥½ã€‚æˆ‘é‚£æ—¶ç©¿ç€å¤§è¡£ï¼Œæ„Ÿè§‰ä¹Ÿå¾ˆæ£’ï¼Œè§‰å¾—è‡ªå·±å‰é€”æ— é‡ï¼Œç„¶åæˆ‘å°±è¦ä¸‹èˆ¹å»ã€‚æ”¾å¿ƒï¼å®Œå…¨æ²¡é—®é¢˜ï¼å¯æ˜¯ï¼Œé˜»æ­¢äº†æˆ‘çš„è„šæ­¥çš„ï¼Œå¹¶ä¸æ˜¯æˆ‘æ‰€çœ‹è§çš„ä¸œè¥¿ï¼Œè€Œæ˜¯æˆ‘æ‰€æ— æ³•çœ‹è§çš„é‚£äº›ä¸œè¥¿ã€‚ä½ æ˜ç™½ä¹ˆï¼Ÿæˆ‘çœ‹ä¸è§çš„é‚£äº›ã€‚åœ¨é‚£ä¸ªæ— é™è”“å»¶çš„åŸå¸‚é‡Œï¼Œä»€ä¹ˆä¸œè¥¿éƒ½æœ‰ï¼Œå¯æƒŸç‹¬æ²¡æœ‰å°½å¤´ã€‚æ ¹æœ¬å°±æ²¡æœ‰å°½å¤´ã€‚æˆ‘çœ‹ä¸è§çš„æ˜¯è¿™ä¸€åˆ‡çš„å°½å¤´ï¼Œä¸–ç•Œçš„å°½å¤´ã€‚â€â€œAll that city. You just couldnâ€™t see the end to it. The end? Please? You please just show me where it ends? It was all very fine on that gangway. And I was grand too, in my overcoat. I cut quite a figure. And I was getting off. Guaranteed. There was no problem. It wasnâ€™t what I saw that stopped me, Max. It was what I didnâ€™t see. You understand that? What I didnâ€™t see. In all that sprawling city there was everything except an end. There was no end. What I did not see was where the whole thing came to an end. The end of the worldâ€¦ â€ 30ã€â€œé”®ç›˜æœ‰å§‹æœ‰ç»ˆï¼Œä½ ç¡®åˆ‡çŸ¥é“ 88 ä¸ªé”®å°±åœ¨é‚£å„¿ï¼Œé”™ä¸äº†ã€‚å®ƒå¹¶ä¸æ˜¯æ— é™çš„ï¼Œè€ŒéŸ³ä¹ï¼Œæ‰æ˜¯æ— é™çš„ã€‚ä½ èƒ½åœ¨é”®ç›˜ä¸Šè¡¨ç°çš„éŸ³ä¹æ˜¯æ— é™çš„ï¼Œæˆ‘å–œæ¬¢è¿™æ ·ï¼Œæˆ‘èƒ½è½»æ¾åº”å¯¹ã€‚ ! â€â€œTake a piano. The keys begin, the keys end. You know there are eightyeight of them, nobody can tell you any different. They are not infinite. You are infinite. And on these keys the music that you can make is infinite. I like that. That I can live by. â€ 31ã€â€œä½ æŠŠæˆ‘æ¨åˆ°èˆ·æ¢¯ä¸Šç„¶åæ‰”ç»™æˆ‘ä¸€æ¶æœ‰ç™¾ä¸‡ç´é”®çš„é’¢ç´ï¼Œç™¾ä¸‡åƒä¸‡çš„æ²¡æœ‰å°½å¤´çš„ç´é”®ï¼Œé‚£æ˜¯äº‹å®ï¼Œmaxï¼Œå®ƒä»¬æ²¡æœ‰å°½å¤´ã€‚é‚£é”®ç›˜æ˜¯æ— é™å»¶ä¼¸çš„ã€‚ç„¶è€Œå¦‚æœç´é”®æ˜¯æ— é™çš„ï¼Œé‚£ä¹ˆåœ¨é‚£æ¶ç´ä¸Šå°±æ²¡æœ‰ä½ èƒ½å¼¹å¥çš„éŸ³ä¹ï¼Œä½ åé”™äº†åœ°æ–¹ï¼Œé‚£æ˜¯ä¸Šå¸çš„é’¢ç´ã€‚â€â€œYou get me up on that gangway and youâ€™re rolling out in front of me a keyboard of millions of keys, millions and billions of keys that never end, and thatâ€™s the truth, Max. That they never end. That keyboard is infinite. And if that keyboard is infinite, then on that keyboard there is nomusic you can play. Youâ€™re sitting on the wrong bench. Thatâ€™s Godâ€™s piano. â€ 32ã€â€œå¤©å•Šï¼ä½ â€¦â€¦ä½ çœ‹è¿‡é‚£äº›è¡—é“å—ï¼Ÿä»…ä»…æ˜¯è¡—é“ï¼Œå°±æœ‰ä¸Šåƒæ¡ï¼ä½ ä¸‹å»è¯¥æ€ä¹ˆåŠï¼Ÿä½ æ€ä¹ˆé€‰æ‹©å…¶ä¸­ä¸€æ¡æ¥èµ°ï¼Ÿæ€ä¹ˆé€‰æ‹©â€œå±äºä½ è‡ªå·±çš„â€ä¸€ä¸ªå¥³äººï¼Œä¸€æ ‹æˆ¿å­ï¼Œä¸€å—åœ°ï¼Œæˆ–è€…é€‰æ‹©ä¸€é“é£æ™¯æ¬£èµï¼Œé€‰æ‹©ä¸€ç§æ–¹æ³•æ­»å»ã€‚ â€â€œChrist! Did, did you see the streets? Just the streetsâ€¦ There were thousands of them! And how do you do it down thereï¼ŸHow do you choose just one? One woman, one house, one piece of land to call your own, one landscape to look at, one way to dieâ€¦ â€ 33ã€â€œé‚£ä¸ªä¸–ç•Œå¥½é‡ï¼Œå‹åœ¨æˆ‘èº«ä¸Šã€‚ä½ ç”šè‡³ä¸çŸ¥é“å®ƒåœ¨å“ªé‡Œç»“æŸï¼Œä½ éš¾é“ä»æ¥ä¸ä¸ºè‡ªå·±ç”Ÿæ´»åœ¨æ— ç©·é€‰æ‹©é‡Œè€Œå®³æ€•å¾—å¿«å´©æºƒæ‰å—ï¼Ÿâ€â€œAll that world is weighing down on me, you donâ€™t even know where it comes to an end, and arenâ€™t you ever just scared of breaking apart at the thought of it? The enormity of living it? â€ 34ã€â€œæˆ‘æ˜¯åœ¨è¿™è‰˜èˆ¹ä¸Šå‡ºç”Ÿçš„ï¼Œæ•´ä¸ªä¸–ç•Œè·Ÿæˆ‘å¹¶è‚©è€Œè¡Œï¼Œä½†æ˜¯ï¼Œè¡Œèµ°ä¸€æ¬¡åªæºå¸¦ä¸¤åƒäººã€‚è¿™é‡Œä¹Ÿæœ‰æ¬²æœ›ï¼Œä½†ä¸ä¼šè™šå¦„åˆ°è¶…å‡ºèˆ¹å¤´å’Œèˆ¹å°¾ã€‚ä½ ç”¨é’¢ç´è¡¨è¾¾ä½ çš„å¿«ä¹ï¼Œä½†éŸ³ç¬¦ä¸æ˜¯æ— é™çš„ã€‚æˆ‘å·²ç»ä¹ æƒ¯è¿™ä¹ˆç”Ÿæ´»ã€‚â€â€œI was born on this ship, and the world passed me by, but two thousand people at a time. And there were wishes here,but never more than fit between prow and stern. You played out your happiness, but on a piano that was not infinite. I learned to live that way. â€ 35ã€â€œé™†åœ°ï¼Ÿé™†åœ°å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€è‰˜å¤ªå¤§çš„èˆ¹ï¼Œä¸€ä¸ªå¤ªæ¼‚äº®çš„å¥³äººï¼Œä¸€æ®µå¤ªé•¿çš„æ—…è¡Œï¼Œä¸€ç“¶å¤ªåˆºé¼»çš„é¦™æ°´ï¼Œä¸€ç§æˆ‘ä¸ä¼šåˆ›ä½œçš„éŸ³ä¹ã€‚æˆ‘æ°¸è¿œæ— æ³•æ”¾å¼ƒè¿™è‰˜èˆ¹ï¼Œä¸è¿‡å¹¸å¥½ï¼Œæˆ‘å¯ä»¥æ”¾å¼ƒæˆ‘çš„ç”Ÿå‘½ã€‚åæ­£æ²¡äººè®°å¾—æˆ‘å­˜åœ¨è¿‡ï¼Œè€Œä½ æ˜¯ä¾‹å¤–ï¼Œmaxï¼Œä½ æ˜¯å”¯ä¸€ä¸€ä¸ªçŸ¥é“æˆ‘åœ¨è¿™é‡Œçš„äººã€‚ä½ æ˜¯å”¯ä¸€ä¸€ä¸ªï¼Œè€Œä¸”ä½ æœ€å¥½ä¹ æƒ¯å¦‚æ­¤ã€‚åŸè°…æˆ‘ï¼Œæœ‹å‹ï¼Œæˆ‘ä¸ä¼šä¸‹èˆ¹çš„ã€‚â€â€œLand? Land is a ship too big for me. Itâ€™s a woman too beautiful; itâ€™s a voyage too long, a perfume too strong. Itâ€™s a music I donâ€™t know how to make. I could never get off this ship. At best, I can step off my life. After all, I donâ€™t exist for anyone. Youâ€™re an exception, Max, youâ€™re the only one who knows Iâ€™m here. Youâ€™re a minority, and you better get used to it. Forgive me, my friend, but Iâ€™m not getting off.â€","link":"/6c9bcc36.html"},{"title":"postgreså’Œmysqlåœ¨è¯­æ³•çš„åŒºåˆ«ï¼ˆ PostgreSQL 16 vs MySQL 8.0+ï¼Œå…¼å®¹ 2025 å¹´ç°çŠ¶ï¼‰","text":"postgreså’Œmysqlåœ¨è¯­æ³•çš„åŒºåˆ«ï¼ˆ PostgreSQL 16 vs MySQL 8.0+ï¼Œå…¼å®¹ 2025 å¹´ç°çŠ¶ï¼‰ä»¥ä¸‹æ˜¯ PostgreSQL ä¸ MySQL åœ¨è¯­æ³•ä¸Šçš„ä¸»è¦åŒºåˆ«æ±‡æ€»ï¼ˆæˆªè‡³ PostgreSQL 16 / MySQL 8.0+ï¼Œå…¼å®¹ 2025 å¹´ç°çŠ¶ï¼‰ï¼š ç±»åˆ« ç‰¹æ€§ PostgreSQL(v16) MySQL(8+) 1. æ•°æ®ç±»å‹ å¸ƒå°”ç±»å‹ BOOLEAN æˆ– BOOLï¼ˆåŸç”Ÿæ”¯æŒï¼Œå€¼ï¼šTRUE/FALSE/NULLï¼‰ æ— åŸç”Ÿ BOOLEANï¼›BOOL/BOOLEAN æ˜¯ TINYINT(1) çš„åˆ«åï¼ˆ0/1ï¼‰ å­—ç¬¦ä¸²ç±»å‹ TEXTï¼ˆæ— é•¿åº¦é™åˆ¶ï¼Œæ€§èƒ½ä¸ VARCHAR(n) ç›¸å½“ï¼‰ï¼›VARCHAR(n)ï¼›CHAR(n) TEXTï¼ˆåˆ† TINYTEXT/TEXT/MEDIUMTEXT/LONGTEXTï¼‰ï¼›VARCHAR(n) éœ€æŒ‡å®šé•¿åº¦ï¼›CHAR(n) è‡ªå¢ä¸»é”® SERIALï¼ˆæ—§ï¼‰æˆ– GENERATED BY DEFAULT AS IDENTITYï¼ˆSQL æ ‡å‡†ï¼‰ AUTO_INCREMENTï¼ˆä»…ç”¨äºæ•´å‹åˆ—ï¼Œéœ€é…åˆ PRIMARY KEY æˆ– UNIQUEï¼‰ JSON ç±»å‹ JSONï¼ˆå­˜å‚¨åŸå§‹æ–‡æœ¬ï¼‰å’Œ JSONBï¼ˆäºŒè¿›åˆ¶æ ¼å¼ï¼Œæ”¯æŒç´¢å¼•å’Œé«˜æ•ˆæŸ¥è¯¢ï¼‰ JSONï¼ˆå†…éƒ¨ä»¥äºŒè¿›åˆ¶å­˜å‚¨ï¼Œç±»ä¼¼ JSONBï¼›æ—  JSONB ç±»å‹ï¼‰ æ•°ç»„ç±»å‹ åŸç”Ÿæ”¯æŒï¼ˆå¦‚ INT[], TEXT[]ï¼‰ï¼Œå¯ç´¢å¼•ã€æŸ¥è¯¢ ä¸æ”¯æŒåŸç”Ÿæ•°ç»„ï¼›éœ€ç”¨ JSON æˆ–å†—ä½™è®¾è®¡æ¨¡æ‹Ÿ æšä¸¾ç±»å‹ ENUMï¼ˆéœ€å…ˆ CREATE TYPE å®šä¹‰ï¼‰ ENUM('val1','val2',...)ï¼ˆåˆ—å®šä¹‰æ—¶ç›´æ¥å£°æ˜ï¼‰ æ—¥æœŸ/æ—¶é—´ TIMESTAMP é»˜è®¤ä¸å¸¦æ—¶åŒºï¼›TIMESTAMPTZ å¸¦æ—¶åŒºï¼ˆæ¨èï¼‰ TIMESTAMP é»˜è®¤ å¸¦æ—¶åŒºè½¬æ¢ï¼ˆå­˜å‚¨ä¸º UTCï¼Œæ£€ç´¢è½¬ä¸º session æ—¶åŒºï¼‰ï¼›DATETIME æ— æ—¶åŒº 2. DDLï¼ˆå»ºè¡¨ä¸ä¿®æ”¹ï¼‰ åˆ›å»ºè‡ªå¢åˆ— id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY æˆ– SERIAL id INT AUTO_INCREMENT PRIMARY KEY ä¿®æ”¹åˆ—é»˜è®¤å€¼ ALTER COLUMN col SET DEFAULT value / DROP DEFAULT MODIFY COLUMN col type DEFAULT value æˆ– ALTER COLUMN col SET DEFAULT valueï¼ˆ8.0.13+ æ”¯æŒ ALTER ... SET DEFAULTï¼‰ åˆ é™¤åˆ—é»˜è®¤å€¼ ALTER COLUMN col DROP DEFAULT ALTER COLUMN col DROP DEFAULTï¼ˆ8.0.13+ï¼‰æˆ– MODIFY COLUMN col type ä¿®æ”¹åˆ—ç±»å‹ ALTER COLUMN col TYPE new_type [USING expr]ï¼ˆå¯åŠ  USING è½¬æ¢ï¼‰ MODIFY COLUMN col new_typeï¼ˆéšå¼è½¬æ¢ï¼Œå¤±è´¥åˆ™æŠ¥é”™ï¼‰ é‡å‘½ååˆ— ALTER TABLE t RENAME COLUMN old TO new ALTER TABLE t RENAME COLUMN old TO newï¼ˆ8.0.4+ï¼‰ï¼›æ—§ç‰ˆç”¨ CHANGE COLUMN æ·»åŠ åˆ—å¹¶ç½®ä½ç½® ä¸æ”¯æŒæŒ‡å®šåˆ—ä½ç½®ï¼ˆåˆ—é¡ºåºé€»è¾‘æ— å…³ï¼‰ ADD COLUMN col ... AFTER another_col / FIRST 3. DMLï¼ˆæŸ¥è¯¢ä¸æ“ä½œï¼‰ å­—ç¬¦ä¸²æ‹¼æ¥ ` å­—ç¬¦ä¸²è½¬ä¹‰ 'It''s ok'ï¼ˆæ ‡å‡†å•å¼•å·è½¬ä¹‰ï¼‰ 'It''s ok' æˆ– 'It\\'s ok'ï¼ˆå–å†³äº NO_BACKSLASH_ESCAPES æ¨¡å¼ï¼‰ æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… ~ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€~*ï¼ˆä¸åŒºåˆ†ï¼‰ã€!~/!~* REGEXP / RLIKEï¼ˆå¦‚ col REGEXP 'pattern'ï¼‰ï¼Œé»˜è®¤ä¸åŒºåˆ†å¤§å°å†™ï¼ˆå–å†³äº collationï¼‰ LIMIT/OFFSET LIMIT n OFFSET m æˆ– LIMIT m, nï¼ˆä¸æ”¯æŒ m,n è¯­æ³•ï¼‰ æ”¯æŒ LIMIT n OFFSET m å’Œ LIMIT m, nï¼ˆm=offset, n=countï¼‰ è¿”å›æ’å…¥ ID INSERT ... RETURNING idï¼ˆæ ‡å‡†ï¼Œå¯è¿”å›ä»»æ„åˆ—ï¼‰ LAST_INSERT_ID() å‡½æ•°ï¼›æˆ– JDBC/åº”ç”¨å±‚è·å–ï¼›INSERT ... RETURNINGï¼ˆ8.0.21+ å®éªŒæ€§æ”¯æŒï¼‰ 4. å‡½æ•°ä¸è¡¨è¾¾å¼ å­—ç¬¦ä¸²å‡½æ•° LENGTH()ï¼ˆå­—ç¬¦æ•°ï¼‰ã€CHAR_LENGTH() åŒä¹‰ï¼›OCTET_LENGTH()ï¼ˆå­—èŠ‚æ•°ï¼‰ CHAR_LENGTH() / LENGTH()ï¼ˆå­—èŠ‚æ•°ï¼æ˜“æ··æ·†ï¼‰ï¼›CHARACTER_LENGTH() åŒä¹‰ å½“å‰æ—¶é—´ NOW(), CURRENT_TIMESTAMP, CLOCK_TIMESTAMP()ï¼ˆäº‹åŠ¡/è¯­å¥çº§ï¼‰ NOW(), CURRENT_TIMESTAMP, SYSDATE()ï¼ˆNOW() æ˜¯äº‹åŠ¡å¼€å§‹æ—¶é—´ï¼‰ æ¡ä»¶è¡¨è¾¾å¼ CASE WHEN ... THEN ... ENDï¼ˆæ ‡å‡†ï¼‰ï¼›æ”¯æŒ NULLIF(), COALESCE() åŒå·¦ï¼›å¦æ”¯æŒ IF(condition, t, f)ï¼ˆéæ ‡å‡†ï¼‰ å­—ç¬¦ä¸²è¿æ¥èšåˆ STRING_AGG(col, ',') GROUP_CONCAT(col SEPARATOR ',') çª—å£å‡½æ•° å…¨é¢æ”¯æŒï¼ˆOVER(), PARTITION BY, ROWS/RANGE ç­‰ï¼‰ 8.0+ å…¨é¢æ”¯æŒï¼ˆåŸºæœ¬ä¸ PG ä¸€è‡´ï¼‰ 5. äº‹åŠ¡ä¸é” é»˜è®¤äº‹åŠ¡éš”ç¦»çº§åˆ« READ COMMITTED REPEATABLE READ å¯é‡å¤è¯»è¡Œä¸º åŸºäº MVCCï¼Œå¯èƒ½å‘ç”Ÿå¹»è¯»ï¼ˆéåºåˆ—åŒ–ï¼‰ åŸºäºé—´éš™é”ï¼ˆGap Lockï¼‰ï¼Œå®é™…æä¾› è¿‘ä¼¼ Serializable çš„å¹»è¯»é˜²æŠ¤ï¼ˆä½†éæ ‡å‡†ï¼‰ ä¿å­˜ç‚¹ SAVEPOINT s1; ROLLBACK TO s1; åŒå·¦ æ˜¾å¼é” SELECT ... FOR UPDATE, FOR SHARE, FOR NO KEY UPDATE ç­‰ SELECT ... FOR UPDATE, FOR SHAREï¼ˆå³ LOCK IN SHARE MODE åºŸå¼ƒ â†’ FOR SHAREï¼‰ 6. å…¶ä»–ç‰¹æ€§ æ¨¡å¼ï¼ˆSchemaï¼‰ CREATE SCHEMA s;ï¼Œé»˜è®¤ publicï¼›å¤š schema æ˜¯ä¸€ç­‰å…¬æ°‘ SCHEMA æ˜¯ DATABASE çš„åŒä¹‰è¯ï¼›å®é™…æ— çœŸæ­£ schema éš”ç¦»ï¼ˆæ¯ä¸ª db ç‹¬ç«‹ï¼‰ åºåˆ—ç®¡ç† CREATE SEQUENCE s; nextval('s'), currval('s') æ— ç‹¬ç«‹åºåˆ—å¯¹è±¡ï¼ˆ8.0.16+ å¼•å…¥ CREATE SEQUENCEï¼Œä½†é›†æˆåº¦ä½ï¼‰ CTEï¼ˆå…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼‰ æ”¯æŒé€’å½’ä¸éé€’å½’ï¼›é»˜è®¤æ˜¯ ç‰©åŒ–ï¼ˆå¯åŠ  MATERIALIZED/NOT MATERIALIZEDï¼‰ 8.0+ æ”¯æŒï¼›é»˜è®¤ éç‰©åŒ–ï¼ˆå†…è”å±•å¼€ï¼‰ï¼Œå¯é€šè¿‡ WITH ... AS MATERIALIZED å¼ºåˆ¶ï¼ˆ8.0.21+ï¼‰ JSON æŸ¥è¯¢ -&gt;ï¼ˆè¿”å› JSONï¼‰ã€-&gt;&gt;ï¼ˆè¿”å› textï¼‰ï¼›#&gt;ã€#&gt;&gt;ï¼ˆè·¯å¾„ï¼‰ï¼›@&gt;ï¼ˆåŒ…å«ï¼‰ -&gt;ï¼ˆè¿”å› JSONï¼‰ã€-&gt;&gt;ï¼ˆè¿”å› textï¼‰ï¼›JSON_EXTRACT()ï¼›-&gt; å’Œ -&gt;&gt; 8.0+ æ”¯æŒ å…¨æ–‡æ£€ç´¢ tsvector/tsquery ç±»å‹ï¼›to_tsvector(), @@ æ“ä½œç¬¦ï¼›æ”¯æŒå¤šè¯­è¨€ FULLTEXT ç´¢å¼•ï¼ˆä»… MyISAM / InnoDBï¼‰ï¼›MATCH() AGAINST()ï¼›ä¸­æ–‡æ”¯æŒå¼± æ‰©å±•æ€§ æ”¯æŒè‡ªå®šä¹‰ç±»å‹ã€å‡½æ•°ï¼ˆC/PL/pgSQL/Python ç­‰ï¼‰ã€æ“ä½œç¬¦ã€ç´¢å¼•æ–¹æ³•ï¼ˆGiST/SP-GiST/BRINï¼‰ æ’ä»¶å¼å­˜å‚¨å¼•æ“ï¼›è‡ªå®šä¹‰å‡½æ•°é™ SQL/UDFï¼ˆCï¼‰ï¼›JSON/åœ°ç†æ‰©å±•è¾ƒå¼± âš ï¸ å¸¸è§é™·é˜±ä¸¾ä¾‹ï¼š åœºæ™¯ PostgreSQL è¡Œä¸º MySQL è¡Œä¸º INSERT INTO t (id) VALUES (NULL)ï¼ˆè‡ªå¢åˆ—ï¼‰ SERIAL/IDENTITY åˆ—æ’å…¥ NULL â†’ è‡ªåŠ¨ç”Ÿæˆæ–°å€¼ AUTO_INCREMENT åˆ—æ’å…¥ NULL â†’ è‡ªåŠ¨ç”Ÿæˆæ–°å€¼ âœ…ï¼›ä½†è‹¥æ˜¾å¼æ’å…¥ 0 ä¸” NO_AUTO_VALUE_ON_ZERO æœªå¼€å¯ â†’ ä¹Ÿç”Ÿæˆæ–°å€¼ï¼ˆæ˜“æ··æ·†ï¼‰ GROUP BY éèšåˆåˆ— ä¸¥æ ¼ï¼šä»…å…è®¸ GROUP BY åˆ—æˆ–èšåˆå‡½æ•°ï¼ˆé™¤é GROUP BY ä¸»é”®ï¼‰ é»˜è®¤å®½æ¾ï¼ˆsql_mode ä¸å« ONLY_FULL_GROUP_BY æ—¶ï¼‰â†’ è¿”å›â€œä»»æ„â€å€¼ï¼Œå¯èƒ½è¯¯å¯¼ '' vs NULL '' æ˜¯ç©ºå­—ç¬¦ä¸² â‰  NULL åŒå·¦ï¼Œä½†æŸäº›æ—§ç‰ˆæœ¬/é…ç½®ä¸‹ INSERT INTO t (char_col) VALUES ('') å¯èƒ½è½¬ä¸º NULLï¼ˆè‹¥ NOT NULL ä¸” sql_mode å« STRICT åˆ™æŠ¥é”™ï¼‰ COUNT(NULL) 0ï¼ˆå›  NULL ä¸è®¡å…¥ï¼‰ 0 âœ… ç›¸å…³å»ºè®®ï¼š è¿ç§»æ—¶æ³¨æ„ï¼šLIMIT å†™æ³•ã€å­—ç¬¦ä¸²æ‹¼æ¥ã€æ—¥æœŸæ—¶åŒºã€è‡ªå¢æœºåˆ¶ã€GROUP BY ä¸¥æ ¼æ€§ã€‚ å¼€å‘ä¸­ä¼˜å…ˆä½¿ç”¨ æ ‡å‡† SQLï¼ˆå¦‚ STRING_AGG vs GROUP_CONCAT å¯å°è£…é€‚é…å±‚ï¼‰ã€‚ MySQL ç”¨æˆ·è½¬ PGï¼šä¹ æƒ¯ RETURNINGã€JSONBã€æ•°ç»„ã€Schema éš”ç¦»ã€‚ PG ç”¨æˆ·è½¬ MySQLï¼šè­¦æƒ• AUTO_INCREMENT é—´éš™ã€DATETIME æ— æ—¶åŒºã€LENGTH() å­—èŠ‚é™·é˜±ã€‚ é™„PostgreSQL æœ€ä½³å®è·µPostgreSQL 16 å…³é”®é…ç½®å‚æ•°åŠæœ€ä½³å®è·µä¸€ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶PostgreSQL 16çš„ä¸»è¦é…ç½®æ–‡ä»¶æ˜¯postgresql.confï¼Œç”¨äºè°ƒæ•´å„ç§æ€§èƒ½å‚æ•°ï¼Œå¦‚å†…å­˜ä½¿ç”¨ã€è¿æ¥æ•°é™åˆ¶ç­‰ã€‚ å¦å¤–ï¼Œpg_hba.confæ–‡ä»¶ç”¨äºè®¾ç½®è®¿é—®æ§åˆ¶ç­–ç•¥ï¼Œæ˜¯å®‰å…¨é…ç½®çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ äºŒã€å…³é”®å†…å­˜é…ç½®å‚æ•°1. shared_buffers ä½œç”¨ï¼šè®¾ç½®æ•°æ®åº“æœåŠ¡å™¨ä½¿ç”¨çš„å…±äº«å†…å­˜ç¼“å†²åŒºæ•°é‡ã€‚ æ¨èå€¼ï¼šé€šå¸¸è®¾ç½®ä¸ºç³»ç»Ÿæ€»å†…å­˜çš„25%ã€‚ä¾‹å¦‚ï¼Œå¯¹äº16GBå†…å­˜çš„ç³»ç»Ÿï¼Œå»ºè®®è®¾ç½®ä¸º4GBã€‚ æ³¨æ„äº‹é¡¹ï¼šä¿®æ”¹åå¿…é¡»é‡å¯æœåŠ¡å™¨æ‰èƒ½ç”Ÿæ•ˆã€‚ 2. work_mem ä½œç”¨ï¼šè®¾ç½®æŸ¥è¯¢æ“ä½œï¼ˆå¦‚æ’åºæˆ–å“ˆå¸Œè¡¨ï¼‰åœ¨å†™å…¥ä¸´æ—¶ç£ç›˜æ–‡ä»¶ä¹‹å‰å¯ä»¥ä½¿ç”¨çš„æœ€å¤§å†…å­˜é‡ã€‚ æ¨èå€¼ï¼šé€šå¸¸åœ¨10-50MBä¹‹é—´ï¼Œå…·ä½“å–å†³äºå¹¶å‘è¿æ¥æ•°å’Œå·¥ä½œè´Ÿè½½ã€‚ è®¡ç®—å…¬å¼ï¼šwork_mem Ã— max_connections ä¸åº”è¶…è¿‡ç³»ç»Ÿæ€»å†…å­˜çš„75%ã€‚ 3. maintenance_work_mem ä½œç”¨ï¼šæ§åˆ¶ç»´æŠ¤æ“ä½œï¼ˆå¦‚VACUUMã€CREATE INDEXå’ŒALTER TABLE ADD FOREIGN KEYï¼‰ä½¿ç”¨çš„æœ€å¤§å†…å­˜é‡ã€‚ æ¨èå€¼ï¼š ä¸€èˆ¬ç³»ç»Ÿï¼šè®¾ç½®ä¸º1GB 32GBä»¥ä¸Šå†…å­˜ï¼šå»ºè®®1GB 64GBä»¥ä¸Šå†…å­˜ï¼šå»ºè®®2GB 128GBä»¥ä¸Šå†…å­˜ï¼šå»ºè®®4GB 4. effective_cache_size ä½œç”¨ï¼šå½±å“æŸ¥è¯¢è®¡åˆ’å™¨çš„å†³ç­–ï¼Œè¡¨ç¤ºæ“ä½œç³»ç»Ÿå’ŒPostgreSQLå¯ä»¥ä½¿ç”¨çš„æ€»ç¼“å­˜é‡ã€‚ æ¨èå€¼ï¼šé€šå¸¸è®¾ç½®ä¸ºç³»ç»Ÿæ€»å†…å­˜çš„75%ã€‚å¦‚æœè®¾ç½®è¿‡ä½ï¼ŒæŸ¥è¯¢è®¡åˆ’å™¨å¯èƒ½ä¼šå¿½ç•¥æŸäº›ç´¢å¼•ã€‚ ä¸‰ã€è¿æ¥é…ç½®å‚æ•°max_connections ä½œç”¨ï¼šè®¾ç½®æ•°æ®åº“æœåŠ¡å™¨å…è®¸çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ã€‚ æ¨èå€¼ï¼šæ ¹æ®å…·ä½“é¡¹ç›®éœ€æ±‚è®¾ç½®ï¼Œé¿å…è®¾ç½®è¿‡é«˜å¯¼è‡´å†…å­˜ä¸è¶³ã€‚ æœ€ä½³å®è·µï¼šå¯¹äºé«˜å¹¶å‘åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨è¿æ¥æ± ï¼ˆå¦‚pgBouncerï¼‰è€Œä¸æ˜¯ç›´æ¥å¢åŠ max_connectionsã€‚ å››ã€WALï¼ˆé¢„å†™æ—¥å¿—ï¼‰ç›¸å…³å‚æ•°PostgreSQL 16é€šè¿‡æ–°çš„æŸ¥è¯¢è§„åˆ’å™¨ä¼˜åŒ–æå‡äº†æ€§èƒ½ï¼ŒåŒ…æ‹¬å¹¶è¡Œæ‰§è¡ŒFULLå’ŒRIGHTè¿æ¥çš„èƒ½åŠ›ã€‚ WALé…ç½®å¯¹æ•°æ®å®‰å…¨å’Œæ€§èƒ½è‡³å…³é‡è¦ï¼Œéœ€è¦æ ¹æ®I/Oæ€§èƒ½å’Œæ•°æ®å®‰å…¨éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ äº”ã€æœ€ä½³å®è·µ1. é…ç½®ç®¡ç† ä½¿ç”¨ä¸“ç”¨é…ç½®æ–‡ä»¶ï¼šå¯ä»¥å°†å…±äº«é…ç½®æ”¾åœ¨shared.confä¸­ï¼Œå†…å­˜ç›¸å…³é…ç½®æ”¾åœ¨memory.confä¸­ï¼Œä¾¿äºä¸åŒè§„æ ¼æœåŠ¡å™¨çš„ç»Ÿä¸€ç®¡ç†ã€‚ ä¿®æ”¹é…ç½®åï¼ŒæŸäº›å‚æ•°éœ€è¦é‡å¯ç”Ÿæ•ˆï¼Œè€Œæœ‰äº›å¯ä»¥é€šè¿‡pg_reload_conf()é‡æ–°åŠ è½½ã€‚ 2. æ€§èƒ½ä¼˜åŒ– ç¡¬ä»¶åŒ¹é…ï¼šè°ƒæ•´PostgreSQLçš„é…ç½®å‚æ•°ä»¥åŒ¹é…æ‚¨çš„ç¡¬ä»¶èµ„æºå’Œå·¥ä½œè´Ÿè½½ã€‚ ç›‘æ§è°ƒæ•´ï¼šå®šæœŸç›‘æ§æ•°æ®åº“æ€§èƒ½ï¼Œæ ¹æ®å®é™…è´Ÿè½½è°ƒæ•´å‚æ•°ã€‚ ç´¢å¼•ä¼˜åŒ–ï¼šé™¤äº†é…ç½®å‚æ•°ï¼Œåˆç†çš„ç´¢å¼•è®¾è®¡ä¹Ÿæ˜¯æ€§èƒ½ä¼˜åŒ–çš„å…³é”®å› ç´ ã€‚ 3. å®‰å…¨é…ç½® é…ç½®é€‚å½“çš„å¯†ç ç­–ç•¥ï¼Œé¿å…ä½¿ç”¨å®‰å…¨ç³»æ•°ä½çš„å¯†ç ã€‚ é™åˆ¶ç½‘ç»œè®¿é—®èŒƒå›´ï¼Œå»ºè®®CIDRå‰ç¼€ä¸å°äº/16ï¼Œæœ€å¥½å¤§äº/19ã€‚ å¯ç”¨è®¤è¯å»¶è¿Ÿï¼ˆauth_delay.millisecondsï¼‰æ¥å¢åŠ æš´åŠ›ç ´è§£æ”»å‡»çš„éš¾åº¦ã€‚ 4. å¤‡ä»½ç­–ç•¥ å®æ–½æ¯æ—¥å…¨é‡å¤‡ä»½ç­–ç•¥ã€‚ å®šæœŸæ£€æŸ¥æ—¥å¿—æ–‡ä»¶ä¸­çš„é”™è¯¯ä¿¡æ¯ï¼Œå¦‚ä½¿ç”¨å‘½ä»¤ï¼šgrep -i error postgresql-16-main.logã€‚ å…­ã€é…ç½®è°ƒæ•´æ–¹æ³•ä¿®æ”¹PostgreSQLé…ç½®æœ‰ä¸¤ç§ä¸»è¦æ–¹å¼ï¼š ç›´æ¥ç¼–è¾‘postgresql.confæ–‡ä»¶ã€‚ ä½¿ç”¨SQLå‘½ä»¤ï¼šALTER SYSTEM SET parameter_name = 'value'; å¯¹äºä¸“ç”¨æ•°æ®åº“æœåŠ¡å™¨ï¼Œå¯ä»¥å°†effective_cache_sizeè®¾ç½®ä¸ºç³»ç»Ÿæ€»å†…å­˜çš„75%ï¼Œå¹¶æ ¹æ®ç‰¹å®šçš„æœåŠ¡å™¨å·¥ä½œè´Ÿè½½è¿›è¡Œè°ƒæ•´ã€‚ é€šè¿‡PGTuneç­‰å·¥å…·å¯ä»¥ä¸ºé…ç½®å‚æ•°æä¾›ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚ æ³¨æ„äº‹é¡¹ï¼šæ€§èƒ½ä¼˜åŒ–çš„å…³é”®æ˜¯æ ¹æ®å®é™…å·¥ä½œè´Ÿè½½è¿›è¡ŒæŒç»­ç›‘æ§å’Œè°ƒæ•´ï¼Œæ²¡æœ‰æ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„é…ç½®æ–¹æ¡ˆã€‚","link":"/bd534bb7.html"},{"title":"æ·±åº¦è§£æPostgreSQLå¼•æ“ï¼šè®¾è®¡åŸç†ã€å®ç°æœºåˆ¶ä¸æ€§èƒ½ä¼˜åŒ–","text":"å¼•è¨€â€œå½“ä½ ä¸èƒ½ç”¨ç®€å•çš„è¯­è¨€æ¥æè¿°ä¸€ä»¶äº‹æƒ…æ—¶ï¼Œè¯´æ˜ä½ æ²¡å¼„æ‡‚å®ƒã€‚â€ â€”â€”â€”â€”è´¹æ›¼ åœ¨å½“ä»Šæ•°æ®é©±åŠ¨çš„æ—¶ä»£ï¼Œæ•°æ®åº“ç³»ç»Ÿä½œä¸ºä¼ä¸šæ ¸å¿ƒåŸºç¡€è®¾æ–½çš„é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚PostgreSQLä½œä¸ºä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„å¼€æºå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå‡­å€Ÿå…¶å“è¶Šçš„ç¨³å®šæ€§ã€å¼ºå¤§çš„åŠŸèƒ½é›†å’Œä¼˜ç§€çš„æ€§èƒ½è¡¨ç°ï¼Œå·²ç»æˆä¸ºä¼—å¤šä¼ä¸šå’Œå¼€å‘è€…çš„é¦–é€‰ã€‚è‡ª1986å¹´è¯ç”Ÿä»¥æ¥ï¼ŒPostgreSQLç»å†äº†è¿‘å››åå¹´çš„å‘å±•å†ç¨‹ï¼Œä»æœ€åˆçš„â€Ingresâ€é¡¹ç›®æ¼”å˜ä¸ºä»Šå¤©åŠŸèƒ½å®Œå¤‡çš„ä¼ä¸šçº§æ•°æ®åº“è§£å†³æ–¹æ¡ˆã€‚ æœ¬æ–‡å°†æ·±å…¥æ¢è®¨PostgreSQLå¼•æ“çš„æ ¸å¿ƒè®¾è®¡åŸç†ã€å®ç°æœºåˆ¶ä»¥åŠæ€§èƒ½ç‰¹æ€§ï¼Œä¸ºæ•°æ®åº“æ¶æ„å¸ˆã€å¼€å‘äººå‘˜å’Œè¿ç»´å·¥ç¨‹å¸ˆæä¾›å…¨é¢çš„æŠ€æœ¯å‚è€ƒã€‚æˆ‘ä»¬å°†ä»æ¶æ„å±‚é¢å¼€å§‹ï¼Œé€æ­¥æ·±å…¥åˆ°å­˜å‚¨å¼•æ“ã€äº‹åŠ¡ç®¡ç†ã€æŸ¥è¯¢ä¼˜åŒ–ç­‰æ ¸å¿ƒç»„ä»¶ï¼Œæœ€ååˆ†æå…¶æ€§èƒ½ä¼˜ç¼ºç‚¹å¹¶æä¾›ä¼˜åŒ–å»ºè®®ã€‚é€šè¿‡æœ¬æ–‡ï¼Œè¯»è€…å°†è·å¾—å¯¹PostgreSQLå†…éƒ¨å·¥ä½œåŸç†çš„æ·±åˆ»ç†è§£ï¼Œä»è€Œåœ¨å®é™…åº”ç”¨ä¸­èƒ½å¤Ÿæ›´å¥½åœ°è®¾è®¡ã€éƒ¨ç½²å’Œä¼˜åŒ–åŸºäºPostgreSQLçš„åº”ç”¨ç³»ç»Ÿã€‚ ä¸€ã€PostgreSQLæ ¸å¿ƒæ¶æ„è®¾è®¡1.1 å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å‹PostgreSQLé‡‡ç”¨ç»å…¸çš„å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¶æ„æ¨¡å‹ï¼Œè¿™æ˜¯å…¶è®¾è®¡çš„æ ¸å¿ƒåŸºç¡€ã€‚åœ¨è¿™ç§æ¶æ„ä¸­ï¼Œæ•°æ®åº“æœåŠ¡å™¨ï¼ˆé€šå¸¸ç§°ä¸ºâ€postmasterâ€ï¼‰è´Ÿè´£ç®¡ç†æ•°æ®åº“æ–‡ä»¶ã€æ¥å—å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚ï¼Œå¹¶ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ›å»ºç‹¬ç«‹çš„åç«¯è¿›ç¨‹ã€‚ è¿™ç§è®¾è®¡æ¨¡å¼ä½¿å¾—PostgreSQLèƒ½å¤Ÿæœ‰æ•ˆåœ°æ”¯æŒå¤šç”¨æˆ·å¹¶å‘è®¿é—®ï¼ŒåŒæ—¶ä¿æŒç³»ç»Ÿçš„ç¨³å®šæ€§å’Œéš”ç¦»æ€§ã€‚ å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¶æ„çš„ä¼˜åŠ¿åœ¨äºï¼š èµ„æºéš”ç¦»ï¼šæ¯ä¸ªå®¢æˆ·ç«¯è¿æ¥åœ¨ç‹¬ç«‹çš„è¿›ç¨‹ä¸­è¿è¡Œï¼Œä¸€ä¸ªè¿æ¥çš„æ•…éšœä¸ä¼šå½±å“å…¶ä»–è¿æ¥ å¹¶å‘æ§åˆ¶ï¼šæœåŠ¡å™¨å¯ä»¥é›†ä¸­ç®¡ç†æ‰€æœ‰å¹¶å‘äº‹åŠ¡ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ å®‰å…¨æ€§ï¼šé€šè¿‡é›†ä¸­å¼çš„è®¤è¯å’Œæˆæƒæœºåˆ¶ï¼Œä¿æŠ¤æ•°æ®å®‰å…¨ å¯æ‰©å±•æ€§ï¼šæœåŠ¡å™¨å¯ä»¥éƒ¨ç½²åœ¨é«˜æ€§èƒ½ç¡¬ä»¶ä¸Šï¼Œå®¢æˆ·ç«¯å¯ä»¥åˆ†å¸ƒåœ¨ä¸åŒçš„è®¾å¤‡ä¸Š 1.2 æ ¸å¿ƒç»„ä»¶æ¶æ„PostgreSQLçš„æ¶æ„ç”±å‡ ä¸ªå…³é”®ç»„ä»¶ç»„æˆï¼Œè¿™äº›ç»„ä»¶ååŒå·¥ä½œä»¥æä¾›å®Œæ•´çš„æ•°æ®åº“æœåŠ¡ï¼š 1.2.1 Postmasterå®ˆæŠ¤è¿›ç¨‹Postmasteræ˜¯PostgreSQLçš„ä¸»è¿›ç¨‹ï¼Œè´Ÿè´£å¯åŠ¨æ•°æ®åº“ç³»ç»Ÿã€ç›‘å¬å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚ï¼Œå¹¶ä¸ºæ¯ä¸ªæ–°è¿æ¥åˆ›å»ºåç«¯è¿›ç¨‹ã€‚ å®ƒæ˜¯æ•´ä¸ªPostgreSQLå®ä¾‹çš„â€å¤§è„‘â€ï¼Œç®¡ç†ç€ç³»ç»Ÿçš„æ‰€æœ‰èµ„æºåˆ†é…å’Œè¿›ç¨‹è°ƒåº¦ã€‚å½“æ•°æ®åº“å¯åŠ¨æ—¶ï¼Œpostmasteré¦–å…ˆåˆå§‹åŒ–å…±äº«å†…å­˜åŒºåŸŸï¼ŒåŠ è½½é…ç½®å‚æ•°ï¼Œç„¶åå¼€å§‹ç›‘å¬æŒ‡å®šçš„ç«¯å£ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ã€‚ 1.2.2 å…±äº«å†…å­˜å…±äº«å†…å­˜æ˜¯PostgreSQLæ€§èƒ½ä¼˜åŒ–çš„å…³é”®ç»„ä»¶ä¹‹ä¸€ã€‚å®ƒåŒ…å«å¤šä¸ªé‡è¦åŒºåŸŸï¼š å…±äº«ç¼“å†²åŒºï¼ˆShared Bufferï¼‰ï¼šç¼“å­˜æ•°æ®é¡µï¼Œå‡å°‘ç£ç›˜I/O WALç¼“å†²åŒºï¼ˆWAL Bufferï¼‰ï¼šç¼“å­˜é¢„å†™æ—¥å¿—ï¼Œç¡®ä¿äº‹åŠ¡æŒä¹…æ€§ å…±äº«é”è¡¨ï¼ˆLock Tableï¼‰ï¼šç®¡ç†å¹¶å‘äº‹åŠ¡ä¹‹é—´çš„é” å·¥ä½œå†…å­˜ï¼ˆWork Memoryï¼‰ï¼šç”¨äºæ’åºã€å“ˆå¸Œè¿æ¥ç­‰æ“ä½œ å…±äº«å†…å­˜çš„è®¾è®¡ä½¿å¾—å¤šä¸ªåç«¯è¿›ç¨‹å¯ä»¥é«˜æ•ˆåœ°å…±äº«æ•°æ®ï¼Œé¿å…äº†é¢‘ç¹çš„è¿›ç¨‹é—´é€šä¿¡å¼€é”€ã€‚ 1.2.3 åç«¯è¿›ç¨‹æ¯ä¸ªå®¢æˆ·ç«¯è¿æ¥éƒ½ä¼šåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„åç«¯è¿›ç¨‹ï¼ˆbackend processï¼‰ï¼Œè¿™äº›è¿›ç¨‹è´Ÿè´£å¤„ç†å…·ä½“çš„SQLæŸ¥è¯¢ã€äº‹åŠ¡ç®¡ç†ã€æƒé™æ£€æŸ¥ç­‰å·¥ä½œã€‚ åç«¯è¿›ç¨‹ä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œä¸€ä¸ªè¿›ç¨‹çš„å´©æºƒä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹ï¼Œè¿™å¤§å¤§æé«˜äº†ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚æ¯ä¸ªåç«¯è¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„ç§æœ‰å†…å­˜åŒºåŸŸï¼ŒåŒæ—¶å¯ä»¥è®¿é—®å…±äº«å†…å­˜ä¸­çš„å…¨å±€æ•°æ®ã€‚ 1.2.4 å…±äº«æ± å…±äº«æ± æ˜¯PostgreSQLå†…å­˜ç®¡ç†çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œç”¨äºç¼“å­˜æ‰§è¡Œè®¡åˆ’ã€ç³»ç»Ÿç›®å½•ä¿¡æ¯ç­‰ã€‚ é€šè¿‡é‡ç”¨å·²æœ‰çš„æ‰§è¡Œè®¡åˆ’ï¼Œå¯ä»¥é¿å…é‡å¤çš„æŸ¥è¯¢è§£æå’Œä¼˜åŒ–è¿‡ç¨‹ï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚å…±äº«æ± çš„è®¾è®¡ä½“ç°äº†PostgreSQLå¯¹æ€§èƒ½ä¼˜åŒ–çš„æ·±å…¥è€ƒè™‘ã€‚ 1.3 å¤šè¿›ç¨‹æ¶æ„è®¾è®¡ä¸è®¸å¤šç°ä»£æ•°æ®åº“é‡‡ç”¨çš„å¤šçº¿ç¨‹æ¶æ„ä¸åŒï¼ŒPostgreSQLåšæŒä½¿ç”¨å¤šè¿›ç¨‹æ¶æ„ã€‚è¿™ç§è®¾è®¡é€‰æ‹©æœ‰å…¶å†å²åŸå› å’ŒæŠ€æœ¯è€ƒé‡ï¼š 1.3.1 ç¨³å®šæ€§ä¼˜å…ˆå¤šè¿›ç¨‹æ¶æ„çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºç¨³å®šæ€§ã€‚åœ¨Unix/Linuxç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹ä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œä¸€ä¸ªè¿›ç¨‹çš„å´©æºƒä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹ã€‚ è¿™å¯¹äºéœ€è¦7Ã—24å°æ—¶è¿è¡Œçš„å…³é”®ä¸šåŠ¡ç³»ç»Ÿæ¥è¯´è‡³å…³é‡è¦ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå¤šçº¿ç¨‹æ¶æ„ä¸­ï¼Œä¸€ä¸ªçº¿ç¨‹çš„å´©æºƒå¯èƒ½å¯¼è‡´æ•´ä¸ªè¿›ç¨‹ç»ˆæ­¢ã€‚ 1.3.2 èµ„æºç®¡ç†å¤šè¿›ç¨‹æ¶æ„ä½¿å¾—èµ„æºç®¡ç†æ›´åŠ ç²¾ç»†ã€‚æ¯ä¸ªåç«¯è¿›ç¨‹å¯ä»¥ç‹¬ç«‹è®¾ç½®å†…å­˜é™åˆ¶ã€CPUé…é¢ç­‰ï¼Œä¾¿äºè¿›è¡Œèµ„æºéš”ç¦»å’Œæ§åˆ¶ã€‚è¿™å¯¹äºå¤šç§Ÿæˆ·ç¯å¢ƒæˆ–èµ„æºå—é™çš„åœºæ™¯ç‰¹åˆ«æœ‰ç”¨ã€‚ 1.3.3 æ‰©å±•æ€§è€ƒé‡è™½ç„¶å¤šè¿›ç¨‹æ¶æ„åœ¨è¿›ç¨‹åˆ›å»ºå’Œä¸Šä¸‹æ–‡åˆ‡æ¢æ–¹é¢æœ‰ä¸€å®šçš„å¼€é”€ï¼Œä½†PostgreSQLé€šè¿‡è¿æ¥æ± æŠ€æœ¯ï¼ˆå¦‚pgBouncerï¼‰å¯ä»¥æœ‰æ•ˆç¼“è§£è¿™ä¸ªé—®é¢˜ã€‚ è¿æ¥æ± è´Ÿè´£ç®¡ç†å®¢æˆ·ç«¯è¿æ¥ï¼Œå¤ç”¨åç«¯è¿›ç¨‹ï¼Œå¤§å¤§å‡å°‘äº†è¿›ç¨‹åˆ›å»ºçš„å¼€é”€ã€‚ äºŒã€å­˜å‚¨å¼•æ“å®ç°æœºåˆ¶2.1 MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰æ¶æ„MVCCæ˜¯PostgreSQLå­˜å‚¨å¼•æ“çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä¹Ÿæ˜¯å…¶å®ç°é«˜å¹¶å‘çš„å…³é”®ã€‚MVCCçš„åŸºæœ¬åŸç†æ˜¯ä¸ºæ¯ä¸ªäº‹åŠ¡æä¾›æ•°æ®åº“åœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„â€å¿«ç…§â€ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ç°æœ‰æ•°æ®ã€‚ è¿™ç§è®¾è®¡ä½¿å¾—è¯»æ“ä½œä¸ä¼šé˜»å¡å†™æ“ä½œï¼Œå†™æ“ä½œä¹Ÿä¸ä¼šé˜»å¡è¯»æ“ä½œï¼Œä»è€Œå®ç°äº†é«˜åº¦çš„å¹¶å‘æ€§ã€‚ 2.1.1 ç‰ˆæœ¬é“¾ç®¡ç†åœ¨MVCCæ¶æ„ä¸­ï¼Œæ¯æ¬¡æ›´æ–°æ“ä½œå®é™…ä¸Šä¼šåˆ›å»ºæ•°æ®çš„æ–°ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯è¦†ç›–æ—§ç‰ˆæœ¬ã€‚æ¯ä¸ªæ•°æ®è¡Œéƒ½åŒ…å«ï¼š xminï¼šåˆ›å»ºè¯¥è¡Œç‰ˆæœ¬çš„äº‹åŠ¡ID xmaxï¼šåˆ é™¤æˆ–æ›´æ–°è¯¥è¡Œç‰ˆæœ¬çš„äº‹åŠ¡ID ctidï¼šæŒ‡å‘è¯¥è¡Œç‰©ç†ä½ç½®çš„æŒ‡é’ˆ ç‰ˆæœ¬æ•°æ®ï¼šå®é™…çš„æ•°æ®å†…å®¹ å½“äº‹åŠ¡éœ€è¦è¯»å–æ•°æ®æ—¶ï¼ŒPostgreSQLä¼šæ ¹æ®äº‹åŠ¡çš„å¿«ç…§æ—¶é—´ç‚¹ï¼Œé€‰æ‹©å¯è§çš„è¡Œç‰ˆæœ¬ã€‚ è¿™ç§æœºåˆ¶ç¡®ä¿äº†äº‹åŠ¡çš„éš”ç¦»æ€§ï¼ŒåŒæ—¶é¿å…äº†è¯»å†™å†²çªã€‚ 2.1.2 äº‹åŠ¡å¯è§æ€§è§„åˆ™PostgreSQLé€šè¿‡å¤æ‚çš„å¯è§æ€§è§„åˆ™æ¥ç¡®å®šå“ªäº›æ•°æ®ç‰ˆæœ¬å¯¹ç‰¹å®šäº‹åŠ¡å¯è§ï¼š äº‹åŠ¡åªèƒ½çœ‹åˆ°åœ¨å…¶å¼€å§‹ä¹‹å‰å·²æäº¤çš„æ•°æ® äº‹åŠ¡çœ‹ä¸åˆ°åœ¨å…¶å¼€å§‹ä¹‹åæäº¤çš„æ•°æ® äº‹åŠ¡çœ‹ä¸åˆ°æœªæäº¤çš„æ•°æ® äº‹åŠ¡åªèƒ½çœ‹åˆ°æ»¡è¶³å…¶éš”ç¦»çº§åˆ«çš„æ•°æ® è¿™äº›è§„åˆ™ç¡®ä¿äº†ACIDç‰¹æ€§ä¸­çš„éš”ç¦»æ€§ï¼ˆIsolationï¼‰å’Œä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€‚ MVCCæ¶æ„ä½¿å¾—PostgreSQLèƒ½å¤Ÿåœ¨ä¸ä½¿ç”¨è¯»é”çš„æƒ…å†µä¸‹å®ç°é«˜åº¦å¹¶å‘ï¼Œè¿™æ˜¯å…¶æ€§èƒ½ä¼˜åŠ¿çš„é‡è¦æ¥æºã€‚ 2.2 äº‹åŠ¡ç®¡ç†æœºåˆ¶äº‹åŠ¡ç®¡ç†æ˜¯PostgreSQLçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒç¡®ä¿äº†æ•°æ®åº“æ“ä½œçš„åŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ï¼ˆACIDï¼‰ã€‚ 2.2.1 äº‹åŠ¡ç”Ÿå‘½å‘¨æœŸPostgreSQLäº‹åŠ¡çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼š BEGINï¼šå¼€å§‹äº‹åŠ¡ï¼Œåˆ†é…äº‹åŠ¡ID æ‰§è¡ŒSQLè¯­å¥ï¼šä¿®æ”¹æ•°æ®ï¼Œç”ŸæˆWALæ—¥å¿— COMMITï¼šæäº¤äº‹åŠ¡ï¼Œä½¿ä¿®æ”¹æŒä¹…åŒ– ROLLBACKï¼šå›æ»šäº‹åŠ¡ï¼Œæ’¤é”€æ‰€æœ‰ä¿®æ”¹ æ¯ä¸ªäº‹åŠ¡éƒ½æœ‰å”¯ä¸€çš„äº‹åŠ¡IDï¼ˆXIDï¼‰ï¼Œç”¨äºæ ‡è¯†å’Œè·Ÿè¸ªäº‹åŠ¡çš„çŠ¶æ€ã€‚ äº‹åŠ¡IDçš„åˆ†é…å’Œç®¡ç†æ˜¯äº‹åŠ¡ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œå®ƒç›´æ¥å½±å“åˆ°å¹¶å‘æ§åˆ¶å’Œæ¢å¤æœºåˆ¶ã€‚ 2.2.2 WALï¼ˆé¢„å†™æ—¥å¿—ï¼‰æœºåˆ¶WALæ˜¯PostgreSQLç¡®ä¿æŒä¹…æ€§çš„å…³é”®æŠ€æœ¯ã€‚åœ¨ä¿®æ”¹æ•°æ®æ–‡ä»¶ä¹‹å‰ï¼Œæ‰€æœ‰ä¿®æ”¹æ“ä½œéƒ½ä¼šå…ˆè®°å½•åˆ°WALæ—¥å¿—ä¸­ã€‚ è¿™ç§è®¾è®¡ç¡®ä¿äº†å³ä½¿åœ¨ç³»ç»Ÿå´©æºƒçš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é‡æ”¾WALæ—¥å¿—æ¥æ¢å¤æ•°æ®ã€‚ WALæœºåˆ¶çš„å·¥ä½œæµç¨‹ï¼š äº‹åŠ¡ä¿®æ”¹æ•°æ®æ—¶ï¼Œé¦–å…ˆå°†ä¿®æ”¹æ“ä½œè®°å½•åˆ°WALç¼“å†²åŒº WALç¼“å†²åŒºå®šæœŸæˆ–åœ¨äº‹åŠ¡æäº¤æ—¶åˆ·æ–°åˆ°ç£ç›˜ æ•°æ®ç¼“å†²åŒºçš„ä¿®æ”¹å¯ä»¥å»¶è¿Ÿå†™å…¥ç£ç›˜ ç³»ç»Ÿå´©æºƒåï¼Œé€šè¿‡é‡æ”¾WALæ—¥å¿—æ¢å¤æœªå†™å…¥ç£ç›˜çš„æ•°æ®ä¿®æ”¹ WALæœºåˆ¶ä¸ä»…æä¾›äº†å´©æºƒæ¢å¤èƒ½åŠ›ï¼Œè¿˜æ”¯æŒæ—¶é—´ç‚¹æ¢å¤ï¼ˆPITRï¼‰ã€æµå¤åˆ¶ç­‰é«˜çº§åŠŸèƒ½ã€‚ 2.2.3 æ£€æŸ¥ç‚¹æœºåˆ¶æ£€æŸ¥ç‚¹æ˜¯PostgreSQLå°†å†…å­˜ä¸­çš„è„é¡µï¼ˆå·²ä¿®æ”¹ä½†æœªå†™å…¥ç£ç›˜çš„æ•°æ®é¡µï¼‰åˆ·æ–°åˆ°ç£ç›˜çš„è¿‡ç¨‹ã€‚ æ£€æŸ¥ç‚¹æœºåˆ¶çš„ä½œç”¨æ˜¯ï¼š å‡å°‘å´©æºƒæ¢å¤æ—¶é—´ é‡Šæ”¾WALæ—¥å¿—ç©ºé—´ ç¡®ä¿æ•°æ®æŒä¹…æ€§ PostgreSQLæ”¯æŒå¤šç§æ£€æŸ¥ç‚¹ç­–ç•¥ï¼ŒåŒ…æ‹¬å®šæ—¶æ£€æŸ¥ç‚¹ã€åŸºäºWALå¤§å°çš„æ£€æŸ¥ç‚¹ç­‰ï¼Œå¯ä»¥æ ¹æ®å·¥ä½œè´Ÿè½½ç‰¹æ€§è¿›è¡Œä¼˜åŒ–ã€‚ 2.3 å­˜å‚¨ç»“æ„è®¾è®¡PostgreSQLçš„å­˜å‚¨ç»“æ„è®¾è®¡ä½“ç°äº†å…¶å¯¹æ€§èƒ½å’Œå¯é æ€§çš„å¹³è¡¡è€ƒè™‘ã€‚ 2.3.1 è¡¨ç©ºé—´ç®¡ç†è¡¨ç©ºé—´æ˜¯PostgreSQLä¸­ç”¨äºç®¡ç†ç‰©ç†å­˜å‚¨çš„é€»è¾‘æ¦‚å¿µã€‚ æ¯ä¸ªè¡¨ç©ºé—´å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªç‰©ç†ç›®å½•ï¼Œæ•°æ®æ–‡ä»¶å­˜å‚¨åœ¨è¿™äº›ç›®å½•ä¸­ã€‚è¡¨ç©ºé—´çš„è®¾è®¡ä½¿å¾—ç®¡ç†å‘˜å¯ä»¥å°†ä¸åŒçš„è¡¨æˆ–ç´¢å¼•å­˜å‚¨åœ¨ä¸åŒçš„ç‰©ç†è®¾å¤‡ä¸Šï¼Œä»è€Œä¼˜åŒ–I/Oæ€§èƒ½ã€‚ 2.3.2 é¡µé¢ç»“æ„PostgreSQLä½¿ç”¨å›ºå®šå¤§å°çš„é¡µé¢ï¼ˆé€šå¸¸ä¸º8KBï¼‰ä½œä¸ºå­˜å‚¨çš„åŸºæœ¬å•ä½ã€‚ æ¯ä¸ªé¡µé¢åŒ…å«ï¼š é¡µé¢å¤´ï¼šåŒ…å«é¡µé¢å…ƒæ•°æ®ï¼Œå¦‚æ ¡éªŒå’Œã€LSNï¼ˆæ—¥å¿—åºåˆ—å·ï¼‰ç­‰ è¡ŒæŒ‡é’ˆæ•°ç»„ï¼šæŒ‡å‘é¡µé¢å†…å„ä¸ªæ•°æ®è¡Œçš„æŒ‡é’ˆ ç©ºé—²ç©ºé—´ï¼šæœªä½¿ç”¨çš„ç©ºé—´ æ•°æ®è¡Œï¼šå®é™…å­˜å‚¨çš„æ•°æ® é¡µé¢ç»“æ„çš„è®¾è®¡è€ƒè™‘äº†ç©ºé—´åˆ©ç”¨ç‡å’Œè®¿é—®æ•ˆç‡çš„å¹³è¡¡ã€‚ é€šè¿‡è¡ŒæŒ‡é’ˆæ•°ç»„ï¼ŒPostgreSQLå¯ä»¥å¿«é€Ÿå®šä½å’Œè®¿é—®é¡µé¢å†…çš„æ•°æ®è¡Œï¼Œè€Œä¸éœ€è¦éå†æ•´ä¸ªé¡µé¢ã€‚ 2.3.3 ç´¢å¼•å®ç°PostgreSQLæ”¯æŒå¤šç§ç´¢å¼•ç±»å‹ï¼Œæ¯ç§ç±»å‹é€‚ç”¨äºä¸åŒçš„æŸ¥è¯¢æ¨¡å¼ï¼š B-treeç´¢å¼•ï¼šæœ€å¸¸ç”¨çš„ç´¢å¼•ç±»å‹ï¼Œé€‚ç”¨äºç­‰å€¼æŸ¥è¯¢å’ŒèŒƒå›´æŸ¥è¯¢ã€‚B-treeç´¢å¼•é€šè¿‡å¹³è¡¡æ ‘ç»“æ„æä¾›O(log n)çš„æŸ¥è¯¢å¤æ‚åº¦ã€‚ Hashç´¢å¼•ï¼šé€‚ç”¨äºç­‰å€¼æŸ¥è¯¢ï¼Œæä¾›O(1)çš„æŸ¥è¯¢å¤æ‚åº¦ï¼Œä½†ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ã€‚ GiSTç´¢å¼•ï¼šé€šç”¨æœç´¢æ ‘ï¼Œæ”¯æŒå¤æ‚æ•°æ®ç±»å‹å’Œè‡ªå®šä¹‰æ“ä½œç¬¦ã€‚ GINç´¢å¼•ï¼šé€šç”¨å€’æ’ç´¢å¼•ï¼Œé€‚ç”¨äºå…¨æ–‡æœç´¢å’Œæ•°ç»„ç±»å‹ã€‚ BRINç´¢å¼•ï¼šå—èŒƒå›´ç´¢å¼•ï¼Œé€‚ç”¨äºå¤§è¡¨ä¸­å…·æœ‰å±€éƒ¨ç›¸å…³æ€§çš„æ•°æ®ã€‚ ç´¢å¼•çš„é€‰æ‹©å’Œè®¾è®¡å¯¹æŸ¥è¯¢æ€§èƒ½æœ‰é‡å¤§å½±å“ã€‚ åˆç†çš„ç´¢å¼•ç­–ç•¥å¯ä»¥æ˜¾è‘—æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Œä½†ä¹Ÿä¼šå¢åŠ å†™æ“ä½œçš„å¼€é”€å’Œå­˜å‚¨ç©ºé—´éœ€æ±‚ã€‚ ä¸‰ã€æŸ¥è¯¢å¤„ç†å¼•æ“3.1 æŸ¥è¯¢å¤„ç†æµç¨‹PostgreSQLçš„æŸ¥è¯¢å¤„ç†æµç¨‹æ˜¯ä¸€ä¸ªå¤æ‚çš„å¤šé˜¶æ®µè¿‡ç¨‹ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰ç‰¹å®šçš„åŠŸèƒ½å’Œä¼˜åŒ–æœºä¼šã€‚ 3.1.1 è§£æé˜¶æ®µæŸ¥è¯¢é¦–å…ˆç»è¿‡è§£æå™¨ï¼ˆParserï¼‰ï¼Œå°†SQLæ–‡æœ¬è½¬æ¢ä¸ºæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ã€‚ è§£æå™¨è´Ÿè´£ï¼š è¯æ³•åˆ†æï¼šå°†SQLæ–‡æœ¬åˆ†è§£ä¸ºtokens è¯­æ³•åˆ†æï¼šéªŒè¯SQLè¯­æ³•çš„æ­£ç¡®æ€§ è¯­ä¹‰åˆ†æï¼šæ£€æŸ¥å¯¹è±¡æ˜¯å¦å­˜åœ¨ã€æƒé™æ˜¯å¦è¶³å¤Ÿç­‰ è§£æé˜¶æ®µæ˜¯æŸ¥è¯¢å¤„ç†çš„åŸºç¡€ï¼Œä»»ä½•è¯­æ³•é”™è¯¯æˆ–è¯­ä¹‰é”™è¯¯éƒ½ä¼šåœ¨è¿™ä¸ªé˜¶æ®µè¢«æ•è·ã€‚ 3.1.2 é‡å†™é˜¶æ®µé‡å†™å™¨ï¼ˆRewriterï¼‰è´Ÿè´£åº”ç”¨è§„åˆ™ç³»ç»Ÿï¼Œå°†æŸ¥è¯¢è½¬æ¢ä¸ºç­‰ä»·ä½†å¯èƒ½æ›´é«˜æ•ˆçš„æŸ¥è¯¢ã€‚ é‡å†™é˜¶æ®µçš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š è§†å›¾å±•å¼€ï¼šå°†è§†å›¾å¼•ç”¨æ›¿æ¢ä¸ºè§†å›¾å®šä¹‰ è§„åˆ™åº”ç”¨ï¼šåº”ç”¨ç”¨æˆ·å®šä¹‰çš„é‡å†™è§„åˆ™ æŸ¥è¯¢ç®€åŒ–ï¼šç®€åŒ–å¤æ‚çš„æŸ¥è¯¢è¡¨è¾¾å¼ é‡å†™é˜¶æ®µçš„è®¾è®¡ä½“ç°äº†PostgreSQLå¯¹çµæ´»æ€§å’Œæ‰©å±•æ€§çš„é‡è§†ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡è§„åˆ™ç³»ç»Ÿå®šåˆ¶æŸ¥è¯¢è¡Œä¸ºã€‚ 3.1.3 è§„åˆ’/ä¼˜åŒ–é˜¶æ®µæŸ¥è¯¢ä¼˜åŒ–å™¨æ˜¯PostgreSQLæœ€å¤æ‚çš„ç»„ä»¶ä¹‹ä¸€ï¼Œå®ƒè´Ÿè´£ç”Ÿæˆæœ€ä¼˜çš„æ‰§è¡Œè®¡åˆ’ã€‚ ä¼˜åŒ–å™¨çš„å·¥ä½œæµç¨‹åŒ…æ‹¬ï¼š ç”Ÿæˆå€™é€‰è®¡åˆ’ï¼šæ ¹æ®æŸ¥è¯¢ç»“æ„å’Œå¯ç”¨ç´¢å¼•ï¼Œç”Ÿæˆå¤šä¸ªå¯èƒ½çš„æ‰§è¡Œè®¡åˆ’ æˆæœ¬ä¼°ç®—ï¼šä¸ºæ¯ä¸ªå€™é€‰è®¡åˆ’ä¼°ç®—æ‰§è¡Œæˆæœ¬ é€‰æ‹©æœ€ä¼˜è®¡åˆ’ï¼šé€‰æ‹©æˆæœ¬æœ€ä½çš„æ‰§è¡Œè®¡åˆ’ ä¼˜åŒ–å™¨ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯æ¥ä¼°ç®—æŸ¥è¯¢æˆæœ¬ï¼ŒåŒ…æ‹¬è¡¨å¤§å°ã€åˆ—åˆ†å¸ƒã€ç´¢å¼•é€‰æ‹©æ€§ç­‰ã€‚ ç»Ÿè®¡ä¿¡æ¯çš„å‡†ç¡®æ€§ç›´æ¥å½±å“ä¼˜åŒ–å™¨çš„å†³ç­–è´¨é‡ã€‚ 3.1.4 æ‰§è¡Œé˜¶æ®µæ‰§è¡Œå™¨ï¼ˆExecutorï¼‰è´Ÿè´£æ‰§è¡Œä¼˜åŒ–å™¨ç”Ÿæˆçš„æ‰§è¡Œè®¡åˆ’ã€‚ æ‰§è¡Œå™¨é‡‡ç”¨ç«å±±æ¨¡å‹ï¼ˆVolcano Modelï¼‰ï¼Œé€šè¿‡è¿­ä»£å™¨æ¨¡å¼é€è¡Œå¤„ç†æ•°æ®ã€‚ æ‰§è¡Œå™¨çš„ä¸»è¦ç»„ä»¶åŒ…æ‹¬ï¼š æ‰«æèŠ‚ç‚¹ï¼šä»è¡¨æˆ–ç´¢å¼•ä¸­è¯»å–æ•°æ® è¿æ¥èŠ‚ç‚¹ï¼šæ‰§è¡Œè¡¨è¿æ¥æ“ä½œ èšåˆèŠ‚ç‚¹ï¼šæ‰§è¡Œèšåˆå‡½æ•° æ’åºèŠ‚ç‚¹ï¼šæ‰§è¡Œæ’åºæ“ä½œ æ‰§è¡Œå™¨çš„è®¾è®¡è€ƒè™‘äº†å†…å­˜ç®¡ç†å’ŒI/Oä¼˜åŒ–ï¼Œèƒ½å¤Ÿåœ¨æœ‰é™çš„èµ„æºä¸‹é«˜æ•ˆå¤„ç†å¤§è§„æ¨¡æ•°æ®ã€‚ 3.2 ä¼˜åŒ–å™¨å†…éƒ¨æœºåˆ¶PostgreSQLçš„ä¼˜åŒ–å™¨æ˜¯å…¶æ€§èƒ½ä¼˜åŠ¿çš„æ ¸å¿ƒï¼Œç†è§£å…¶å†…éƒ¨æœºåˆ¶å¯¹äºæŸ¥è¯¢ä¼˜åŒ–è‡³å…³é‡è¦ã€‚ 3.2.1 æˆæœ¬æ¨¡å‹ä¼˜åŒ–å™¨ä½¿ç”¨æˆæœ¬æ¨¡å‹æ¥è¯„ä¼°ä¸åŒæ‰§è¡Œè®¡åˆ’çš„æ•ˆç‡ã€‚ æˆæœ¬æ¨¡å‹è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š I/Oæˆæœ¬ï¼šè¯»å–æ•°æ®é¡µçš„ç£ç›˜I/Oå¼€é”€ CPUæˆæœ¬ï¼šå¤„ç†æ•°æ®çš„CPUå¼€é”€ å†…å­˜æˆæœ¬ï¼šä½¿ç”¨å†…å­˜çš„å¼€é”€ ç½‘ç»œæˆæœ¬ï¼šåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œç½‘ç»œä¼ è¾“çš„å¼€é”€ æˆæœ¬æ¨¡å‹çš„å‚æ•°å¯ä»¥é€šè¿‡é…ç½®å‚æ•°è¿›è¡Œè°ƒæ•´ï¼Œä»¥é€‚åº”ä¸åŒçš„ç¡¬ä»¶ç¯å¢ƒå’Œå·¥ä½œè´Ÿè½½ã€‚ 3.2.2 ç»Ÿè®¡ä¿¡æ¯ç®¡ç†ä¼˜åŒ–å™¨ä¾èµ–ç»Ÿè®¡ä¿¡æ¯æ¥åšå‡ºå‡†ç¡®çš„å†³ç­–ã€‚ ç»Ÿè®¡ä¿¡æ¯åŒ…æ‹¬ï¼š è¡¨ç»Ÿè®¡ï¼šè¡Œæ•°ã€é¡µæ•°ã€å¹³å‡è¡Œå¤§å°ç­‰ åˆ—ç»Ÿè®¡ï¼šå”¯ä¸€å€¼æ•°é‡ã€æœ€å¸¸è§å€¼ã€ç›´æ–¹å›¾ç­‰ ç´¢å¼•ç»Ÿè®¡ï¼šç´¢å¼•å¤§å°ã€é€‰æ‹©æ€§ç­‰ ç»Ÿè®¡ä¿¡æ¯é€šè¿‡ANALYZEå‘½ä»¤æ”¶é›†ï¼Œå¯ä»¥æ‰‹åŠ¨è§¦å‘æˆ–è‡ªåŠ¨æ”¶é›†ã€‚ ç»Ÿè®¡ä¿¡æ¯çš„å‡†ç¡®æ€§å’Œæ—¶æ•ˆæ€§å¯¹ä¼˜åŒ–å™¨æ€§èƒ½æœ‰é‡å¤§å½±å“ã€‚ 3.2.3 æ‰§è¡Œè®¡åˆ’ç¼“å­˜ä¸ºäº†æé«˜æ€§èƒ½ï¼ŒPostgreSQLä¼šç¼“å­˜å¸¸ç”¨çš„æ‰§è¡Œè®¡åˆ’ã€‚ æ‰§è¡Œè®¡åˆ’ç¼“å­˜çš„æœºåˆ¶åŒ…æ‹¬ï¼š å‡†å¤‡è¯­å¥ï¼šé€šè¿‡PREPAREè¯­å¥æ˜¾å¼ç¼“å­˜æ‰§è¡Œè®¡åˆ’ é€šç”¨è®¡åˆ’ç¼“å­˜ï¼šè‡ªåŠ¨ç¼“å­˜å‚æ•°åŒ–æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ å…±äº«è®¡åˆ’ç¼“å­˜ï¼šåœ¨å…±äº«å†…å­˜ä¸­ç¼“å­˜æ‰§è¡Œè®¡åˆ’ï¼Œä¾›å¤šä¸ªä¼šè¯ä½¿ç”¨ æ‰§è¡Œè®¡åˆ’ç¼“å­˜å¯ä»¥æ˜¾è‘—å‡å°‘æŸ¥è¯¢ä¼˜åŒ–çš„å¼€é”€ï¼Œç‰¹åˆ«æ˜¯å¯¹äºé¢‘ç¹æ‰§è¡Œçš„æŸ¥è¯¢ã€‚ 3.3 æ‰§è¡Œå¼•æ“ç‰¹æ€§æ‰§è¡Œå¼•æ“æ˜¯PostgreSQLæŸ¥è¯¢å¤„ç†çš„å…³é”®ç»„ä»¶ï¼Œå…¶å®ç°ç»†èŠ‚ç›´æ¥å½±å“æŸ¥è¯¢æ€§èƒ½ã€‚ 3.3.1 å†…å­˜ç®¡ç†æ‰§è¡Œå¼•æ“ä½¿ç”¨å¤šç§å†…å­˜ç®¡ç†ç­–ç•¥æ¥ä¼˜åŒ–æ€§èƒ½ï¼š å·¥ä½œå†…å­˜ï¼šç”¨äºæ’åºã€å“ˆå¸Œè¿æ¥ç­‰æ“ä½œ ç»´æŠ¤å·¥ä½œå†…å­˜ï¼šç”¨äºç»´æŠ¤æ“ä½œï¼Œå¦‚VACUUMã€CREATE INDEXç­‰ å…±äº«ç¼“å†²åŒºï¼šç¼“å­˜æ•°æ®é¡µï¼Œå‡å°‘ç£ç›˜I/O å†…å­˜ç®¡ç†çš„ç­–ç•¥å¯ä»¥é€šè¿‡é…ç½®å‚æ•°è¿›è¡Œè°ƒæ•´ï¼Œå¦‚work_memã€maintenance_work_memã€shared_buffersç­‰ã€‚ åˆç†çš„å†…å­˜é…ç½®å¯ä»¥æ˜¾è‘—æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚ 3.3.2 å¹¶è¡ŒæŸ¥è¯¢PostgreSQLæ”¯æŒå¹¶è¡ŒæŸ¥è¯¢æ‰§è¡Œï¼Œå¯ä»¥åˆ©ç”¨å¤šæ ¸CPUçš„ä¼˜åŠ¿åŠ é€ŸæŸ¥è¯¢å¤„ç†ã€‚ å¹¶è¡ŒæŸ¥è¯¢çš„ä¸»è¦ç±»å‹åŒ…æ‹¬ï¼š å¹¶è¡Œé¡ºåºæ‰«æï¼šå¤šä¸ªworkerè¿›ç¨‹å¹¶è¡Œæ‰«æè¡¨ å¹¶è¡Œç´¢å¼•æ‰«æï¼šå¤šä¸ªworkerè¿›ç¨‹å¹¶è¡Œä½¿ç”¨ç´¢å¼• å¹¶è¡Œè¿æ¥ï¼šå¤šä¸ªworkerè¿›ç¨‹å¹¶è¡Œæ‰§è¡Œè¿æ¥æ“ä½œ å¹¶è¡Œèšåˆï¼šå¤šä¸ªworkerè¿›ç¨‹å¹¶è¡Œæ‰§è¡Œèšåˆæ“ä½œ å¹¶è¡ŒæŸ¥è¯¢çš„é…ç½®éœ€è¦è€ƒè™‘CPUæ ¸å¿ƒæ•°ã€I/Oå¸¦å®½ã€å†…å­˜å®¹é‡ç­‰å› ç´ ï¼Œé¿å…èµ„æºäº‰ç”¨ã€‚ 3.3.3 å‘é‡åŒ–æ‰§è¡Œè™½ç„¶PostgreSQLä¼ ç»Ÿä¸Šä½¿ç”¨è¡Œå¼å¤„ç†æ¨¡å‹ï¼Œä½†æ–°ç‰ˆæœ¬å¼€å§‹å¼•å…¥å‘é‡åŒ–æ‰§è¡Œä¼˜åŒ–ã€‚ å‘é‡åŒ–æ‰§è¡Œé€šè¿‡æ‰¹é‡å¤„ç†æ•°æ®ï¼Œå‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€ï¼Œæé«˜CPUç¼“å­˜åˆ©ç”¨ç‡ã€‚å‘é‡åŒ–æ‰§è¡Œç‰¹åˆ«é€‚åˆOLAPå·¥ä½œè´Ÿè½½ï¼Œå¯ä»¥æ˜¾è‘—æé«˜åˆ†ææŸ¥è¯¢çš„æ€§èƒ½ã€‚ å››ã€æ€§èƒ½ç‰¹æ€§åˆ†æ4.1 æ€§èƒ½ä¼˜åŠ¿PostgreSQLå‡­å€Ÿå…¶ç²¾å¿ƒè®¾è®¡çš„æ¶æ„å’Œå®ç°ï¼Œåœ¨å¤šä¸ªæ–¹é¢å±•ç°å‡ºå“è¶Šçš„æ€§èƒ½ä¼˜åŠ¿ã€‚ 4.1.1 é«˜å¹¶å‘å¤„ç†èƒ½åŠ›MVCCæ¶æ„ä½¿å¾—PostgreSQLèƒ½å¤Ÿå¤„ç†é«˜åº¦å¹¶å‘çš„å·¥ä½œè´Ÿè½½ã€‚ è¯»æ“ä½œä¸ä¼šé˜»å¡å†™æ“ä½œï¼Œå†™æ“ä½œä¹Ÿä¸ä¼šé˜»å¡è¯»æ“ä½œï¼Œè¿™ä½¿å¾—PostgreSQLåœ¨OLTPåœºæ™¯ä¸­è¡¨ç°å‡ºè‰²ã€‚ç‰¹åˆ«æ˜¯åœ¨è¯»å¯†é›†å‹åº”ç”¨ä¸­ï¼ŒPostgreSQLå¯ä»¥è½»æ¾æ”¯æŒæ•°åƒä¸ªå¹¶å‘è¿æ¥ã€‚ 4.1.2 å¤æ‚æŸ¥è¯¢ä¼˜åŒ–PostgreSQLçš„ä¼˜åŒ–å™¨èƒ½å¤Ÿå¤„ç†éå¸¸å¤æ‚çš„æŸ¥è¯¢ï¼ŒåŒ…æ‹¬å¤šè¡¨è¿æ¥ã€å­æŸ¥è¯¢ã€çª—å£å‡½æ•°ç­‰ã€‚ ä¼˜åŒ–å™¨çš„æˆæœ¬æ¨¡å‹å’Œç»Ÿè®¡ä¿¡æ¯æœºåˆ¶ä½¿å…¶èƒ½å¤Ÿä¸ºå¤æ‚æŸ¥è¯¢ç”Ÿæˆé«˜æ•ˆçš„æ‰§è¡Œè®¡åˆ’ã€‚åœ¨OLAPåœºæ™¯ä¸­ï¼ŒPostgreSQLå¯ä»¥å¤„ç†TBçº§åˆ«çš„æ•°æ®åˆ†æä»»åŠ¡ã€‚ 4.1.3 æ‰©å±•æ€§å’Œçµæ´»æ€§PostgreSQLçš„æ‰©å±•æ¶æ„ä½¿å…¶èƒ½å¤Ÿé€‚åº”å„ç§å·¥ä½œè´Ÿè½½å’Œåº”ç”¨åœºæ™¯ã€‚ é€šè¿‡æ‰©å±•ï¼Œå¯ä»¥æ·»åŠ æ–°çš„æ•°æ®ç±»å‹ã€å‡½æ•°ã€ç´¢å¼•ç±»å‹ç­‰ï¼Œæ»¡è¶³ç‰¹å®šä¸šåŠ¡éœ€æ±‚ã€‚ PostgreSQLæ”¯æŒJSONBã€å…¨æ–‡æœç´¢ã€åœ°ç†ç©ºé—´æ•°æ®ç­‰é«˜çº§åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½åœ¨åŸç”Ÿå®ç°ä¸­å°±å…·æœ‰ä¼˜ç§€çš„æ€§èƒ½ã€‚ 4.1.4 å¯é æ€§å’Œæ•°æ®å®Œæ•´æ€§WALæœºåˆ¶å’ŒMVCCæ¶æ„ç¡®ä¿äº†PostgreSQLçš„æ•°æ®å¯é æ€§å’Œå®Œæ•´æ€§ã€‚ å³ä½¿åœ¨ç³»ç»Ÿå´©æºƒçš„æƒ…å†µä¸‹ï¼ŒPostgreSQLä¹Ÿèƒ½ä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ¢å¤åˆ°ä¸€è‡´çŠ¶æ€ã€‚ACIDç‰¹æ€§çš„ä¸¥æ ¼å®ç°ä½¿å¾—PostgreSQLæˆä¸ºé‡‘èã€åŒ»ç–—ç­‰å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚æé«˜çš„è¡Œä¸šçš„é¦–é€‰ã€‚ 4.2 æ€§èƒ½æŒ‘æˆ˜ä¸é™åˆ¶å°½ç®¡PostgreSQLå…·æœ‰ä¼—å¤šä¼˜åŠ¿ï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹ä¹Ÿé¢ä¸´æ€§èƒ½æŒ‘æˆ˜ã€‚ 4.2.1 å†™æ”¾å¤§é—®é¢˜MVCCæ¶æ„å¸¦æ¥çš„ä¸€ä¸ªä¸»è¦æŒ‘æˆ˜æ˜¯å†™æ”¾å¤§ã€‚ æ¯æ¬¡æ›´æ–°æ“ä½œéƒ½ä¼šåˆ›å»ºæ–°ç‰ˆæœ¬çš„æ•°æ®è¡Œï¼Œæ—§ç‰ˆæœ¬çš„æ•°æ®è¡Œéœ€è¦é€šè¿‡VACUUMè¿‡ç¨‹æ¸…ç†ã€‚è¿™å¯¼è‡´äº†é¢å¤–çš„I/Oå¼€é”€å’Œå­˜å‚¨ç©ºé—´éœ€æ±‚ã€‚åœ¨é«˜å†™å…¥è´Ÿè½½çš„åœºæ™¯ä¸­ï¼Œå†™æ”¾å¤§é—®é¢˜å¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚ 4.2.2 é”ç«äº‰è™½ç„¶MVCCå‡å°‘äº†è¯»å†™å†²çªï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹ä»ç„¶å­˜åœ¨é”ç«äº‰é—®é¢˜ã€‚ ä¾‹å¦‚ï¼Œå½“å¤šä¸ªäº‹åŠ¡åŒæ—¶æ›´æ–°åŒä¸€è¡Œæ•°æ®æ—¶ï¼Œä¼šå‘ç”Ÿé”ç­‰å¾…ã€‚åœ¨é«˜å¹¶å‘å†™å…¥åœºæ™¯ä¸­ï¼Œé”ç«äº‰å¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ 4.2.3 å†…å­˜ç®¡ç†å¤æ‚æ€§PostgreSQLçš„å†…å­˜ç®¡ç†ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®å¤šä¸ªå†…å­˜å‚æ•°ã€‚ ä¸åˆç†çš„å†…å­˜é…ç½®å¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œç”šè‡³ç³»ç»Ÿå´©æºƒã€‚ä¾‹å¦‚ï¼Œshared_buffersè®¾ç½®è¿‡å¤§å¯èƒ½å½±å“æ“ä½œç³»ç»Ÿç¼“å­˜ï¼Œwork_memè®¾ç½®è¿‡å°å¯èƒ½å¯¼è‡´ç£ç›˜æ’åºã€‚ 4.2.4 æ°´å¹³æ‰©å±•é™åˆ¶ä¸ä¸€äº›åˆ†å¸ƒå¼æ•°æ®åº“ç›¸æ¯”ï¼ŒPostgreSQLåœ¨æ°´å¹³æ‰©å±•æ–¹é¢å­˜åœ¨ä¸€å®šé™åˆ¶ã€‚ è™½ç„¶å¯ä»¥é€šè¿‡åˆ†ç‰‡ã€è¯»å†™åˆ†ç¦»ç­‰æŠ€æœ¯å®ç°æ°´å¹³æ‰©å±•ï¼Œä½†è¿™äº›æ–¹æ¡ˆé€šå¸¸éœ€è¦åº”ç”¨å±‚é…åˆï¼Œå¢åŠ äº†ç³»ç»Ÿå¤æ‚æ€§ã€‚åœ¨è¶…å¤§è§„æ¨¡æ•°æ®åœºæ™¯ä¸­ï¼ŒPostgreSQLå¯èƒ½ä¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚ 4.3 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥é’ˆå¯¹PostgreSQLçš„æ€§èƒ½ç‰¹ç‚¹ï¼Œå¯ä»¥é‡‡ç”¨å¤šç§ä¼˜åŒ–ç­–ç•¥æ¥æå‡ç³»ç»Ÿæ€§èƒ½ã€‚ 4.3.1 ç´¢å¼•ä¼˜åŒ–ç´¢å¼•æ˜¯æå‡æŸ¥è¯¢æ€§èƒ½æœ€æœ‰æ•ˆçš„æ‰‹æ®µä¹‹ä¸€ã€‚ ä¼˜åŒ–ç´¢å¼•ç­–ç•¥åŒ…æ‹¬ï¼š é€‰æ‹©åˆé€‚çš„ç´¢å¼•ç±»å‹ï¼šæ ¹æ®æŸ¥è¯¢æ¨¡å¼é€‰æ‹©B-treeã€Hashã€GiSTç­‰ç´¢å¼• å¤åˆç´¢å¼•è®¾è®¡ï¼šå°†ç»å¸¸ä¸€èµ·ä½¿ç”¨çš„åˆ—ç»„åˆåœ¨å¤åˆç´¢å¼•ä¸­ è¦†ç›–ç´¢å¼•ï¼šåŒ…å«æŸ¥è¯¢æ‰€éœ€çš„æ‰€æœ‰åˆ—ï¼Œé¿å…å›è¡¨æ“ä½œ éƒ¨åˆ†ç´¢å¼•ï¼šåªä¸ºæ»¡è¶³ç‰¹å®šæ¡ä»¶çš„æ•°æ®åˆ›å»ºç´¢å¼•ï¼ŒèŠ‚çœç©ºé—´ 4.3.2 æŸ¥è¯¢é‡å†™é€šè¿‡é‡å†™æŸ¥è¯¢è¯­å¥ï¼Œå¯ä»¥å¼•å¯¼ä¼˜åŒ–å™¨é€‰æ‹©æ›´å¥½çš„æ‰§è¡Œè®¡åˆ’ã€‚ å¸¸ç”¨çš„æŸ¥è¯¢é‡å†™æŠ€å·§åŒ…æ‹¬ï¼š **é¿å…SELECT ***ï¼šåªé€‰æ‹©éœ€è¦çš„åˆ—ï¼Œå‡å°‘æ•°æ®ä¼ è¾“é‡ ä½¿ç”¨JOINä»£æ›¿å­æŸ¥è¯¢ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒJOINæ¯”å­æŸ¥è¯¢æ›´é«˜æ•ˆ å‚æ•°åŒ–æŸ¥è¯¢ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢æé«˜æ‰§è¡Œè®¡åˆ’ç¼“å­˜å‘½ä¸­ç‡ CTEä¼˜åŒ–ï¼šåˆç†ä½¿ç”¨Common Table Expressionsä¼˜åŒ–å¤æ‚æŸ¥è¯¢ 4.3.3 é…ç½®è°ƒä¼˜åˆç†çš„é…ç½®å‚æ•°è®¾ç½®å¯¹PostgreSQLæ€§èƒ½è‡³å…³é‡è¦ã€‚ å…³é”®çš„é…ç½®å‚æ•°åŒ…æ‹¬ï¼š shared_buffersï¼šé€šå¸¸è®¾ç½®ä¸ºç³»ç»Ÿå†…å­˜çš„25% work_memï¼šæ ¹æ®å¹¶å‘æŸ¥è¯¢æ•°é‡å’Œå¤æ‚åº¦è®¾ç½® effective_cache_sizeï¼šåæ˜ æ“ä½œç³»ç»Ÿç¼“å­˜å¤§å° maintenance_work_memï¼šå½±å“VACUUMã€CREATE INDEXç­‰æ“ä½œçš„æ€§èƒ½ max_connectionsï¼šæ ¹æ®åº”ç”¨éœ€æ±‚è®¾ç½®æœ€å¤§è¿æ¥æ•° 4.3.4 ç¡¬ä»¶ä¼˜åŒ–ç¡¬ä»¶é…ç½®å¯¹PostgreSQLæ€§èƒ½æœ‰ç›´æ¥å½±å“ã€‚ ä¼˜åŒ–ç¡¬ä»¶é…ç½®åŒ…æ‹¬ï¼š SSDå­˜å‚¨ï¼šä½¿ç”¨SSDæ›¿ä»£HDDï¼Œæ˜¾è‘—æé«˜I/Oæ€§èƒ½ è¶³å¤Ÿå†…å­˜ï¼šç¡®ä¿æœ‰è¶³å¤Ÿçš„å†…å­˜ç”¨äºç¼“å­˜æ•°æ® å¤šæ ¸CPUï¼šåˆ©ç”¨å¹¶è¡ŒæŸ¥è¯¢ä¼˜åŠ¿ é«˜é€Ÿç½‘ç»œï¼šåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œé«˜é€Ÿç½‘ç»œå‡å°‘é€šä¿¡å»¶è¿Ÿ äº”ã€é«˜çº§ç‰¹æ€§ä¸æœªæ¥å‘å±•æ–¹å‘5.1 é«˜çº§ç‰¹æ€§PostgreSQLä¸æ–­å¼•å…¥æ–°ç‰¹æ€§ï¼Œæ‰©å±•å…¶åŠŸèƒ½è¾¹ç•Œå’Œåº”ç”¨åœºæ™¯ã€‚ 5.1.1 JSONBæ”¯æŒJSONBæ•°æ®ç±»å‹æä¾›äº†å¯¹JSONæ–‡æ¡£çš„é«˜æ•ˆå­˜å‚¨å’ŒæŸ¥è¯¢èƒ½åŠ›ã€‚ JSONBä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨ï¼Œæ”¯æŒç´¢å¼•ã€å…¨æ–‡æœç´¢ç­‰é«˜çº§åŠŸèƒ½ï¼Œä½¿å…¶æˆä¸ºNoSQLå’Œå…³ç³»å‹æ•°æ®åº“ç‰¹æ€§çš„å®Œç¾ç»“åˆã€‚åœ¨ç°ä»£Webåº”ç”¨ä¸­ï¼ŒJSONBç‰¹åˆ«é€‚åˆå­˜å‚¨åŠç»“æ„åŒ–æ•°æ®ã€‚ 5.1.2 é€»è¾‘å¤åˆ¶é€»è¾‘å¤åˆ¶å…è®¸åŸºäºå‘å¸ƒ/è®¢é˜…æ¨¡å‹çš„æ•°æ®å¤åˆ¶ã€‚ ä¸ç‰©ç†å¤åˆ¶ä¸åŒï¼Œé€»è¾‘å¤åˆ¶å¯ä»¥å¤åˆ¶ç‰¹å®šçš„è¡¨æˆ–è¡Œï¼Œæ”¯æŒè·¨ç‰ˆæœ¬å¤åˆ¶å’Œå¼‚æ„ç³»ç»Ÿé›†æˆã€‚é€»è¾‘å¤åˆ¶ä¸ºæ•°æ®åˆ†å‘ã€æ•°æ®ä»“åº“æ„å»ºç­‰åœºæ™¯æä¾›äº†çµæ´»çš„è§£å†³æ–¹æ¡ˆã€‚ 5.1.3 åˆ†åŒºè¡¨åˆ†åŒºè¡¨åŠŸèƒ½ä½¿å¾—å¤§è¡¨å¯ä»¥æŒ‰èŒƒå›´ã€åˆ—è¡¨æˆ–å“ˆå¸Œè¿›è¡Œåˆ†åŒºã€‚ åˆ†åŒºè¡¨çš„ä¼˜åŠ¿åŒ…æ‹¬ï¼š æŸ¥è¯¢æ€§èƒ½æå‡ï¼šæŸ¥è¯¢ä¼˜åŒ–å™¨å¯ä»¥åªæ‰«æç›¸å…³åˆ†åŒº ç»´æŠ¤æ•ˆç‡æé«˜ï¼šVACUUMã€ANALYZEç­‰æ“ä½œå¯ä»¥åœ¨åˆ†åŒºçº§åˆ«æ‰§è¡Œ æ•°æ®ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šå¯ä»¥è½»æ¾å½’æ¡£æˆ–åˆ é™¤æ—§åˆ†åŒº 5.1.4 æ—¶åºæ•°æ®ä¼˜åŒ–é€šè¿‡TimescaleDBç­‰æ‰©å±•ï¼ŒPostgreSQLåœ¨æ—¶åºæ•°æ®å¤„ç†æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚ æ—¶åºæ•°æ®ä¼˜åŒ–åŒ…æ‹¬è‡ªåŠ¨åˆ†åŒºã€æ•°æ®å‹ç¼©ã€è¿ç»­èšåˆç­‰ç‰¹æ€§ï¼Œä½¿å¾—PostgreSQLæˆä¸ºç‰©è”ç½‘ã€ç›‘æ§ç³»ç»Ÿç­‰æ—¶åºæ•°æ®åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚ 5.2 æœªæ¥å‘å±•æ–¹å‘PostgreSQLç¤¾åŒºæ´»è·ƒï¼Œä¸æ–­æ¨è¿›æŠ€æœ¯åˆ›æ–°å’Œå‘å±•ã€‚ 5.2.1 æ€§èƒ½æŒç»­ä¼˜åŒ–æœªæ¥ç‰ˆæœ¬å°†ç»§ç»­ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼ŒåŒ…æ‹¬ï¼š JITç¼–è¯‘ï¼šé€šè¿‡JITç¼–è¯‘æé«˜è¡¨è¾¾å¼è®¡ç®—æ€§èƒ½ å‘é‡åŒ–æ‰§è¡Œï¼šæ‰©å±•å‘é‡åŒ–æ‰§è¡Œæ”¯æŒï¼Œæé«˜OLAPæ€§èƒ½ å¹¶è¡ŒæŸ¥è¯¢å¢å¼ºï¼šæ”¯æŒæ›´å¤šæ“ä½œç¬¦çš„å¹¶è¡Œæ‰§è¡Œ 5.2.2 äº‘åŸç”Ÿæ”¯æŒéšç€äº‘è®¡ç®—çš„æ™®åŠï¼ŒPostgreSQLæ­£åœ¨å¢å¼ºäº‘åŸç”Ÿæ”¯æŒï¼š è‡ªåŠ¨æ‰©ç¼©å®¹ï¼šæ ¹æ®è´Ÿè½½è‡ªåŠ¨è°ƒæ•´èµ„æºé…ç½® å¤šåŒºåŸŸéƒ¨ç½²ï¼šæ”¯æŒè·¨åŒºåŸŸçš„é«˜å¯ç”¨éƒ¨ç½² Serverlessæ¶æ„ï¼šæ”¯æŒæŒ‰éœ€å¯åŠ¨çš„Serverlessæ¨¡å¼ 5.2.3 AI/MLé›†æˆPostgreSQLæ­£åœ¨æ¢ç´¢ä¸AI/MLçš„æ·±åº¦é›†æˆï¼š å†…ç½®MLå‡½æ•°ï¼šæä¾›æœºå™¨å­¦ä¹ ç®—æ³•çš„å†…ç½®æ”¯æŒ å‘é‡æœç´¢ï¼šæ”¯æŒé«˜æ•ˆçš„å‘é‡ç›¸ä¼¼åº¦æœç´¢ é¢„æµ‹åˆ†æï¼šå†…ç½®æ—¶é—´åºåˆ—é¢„æµ‹åŠŸèƒ½ 5.2.4 å®‰å…¨æ€§å¢å¼ºå®‰å…¨æ€§æ˜¯PostgreSQLæŒç»­å…³æ³¨çš„é‡ç‚¹ï¼š é€æ˜æ•°æ®åŠ å¯†ï¼šæ”¯æŒæ•°æ®åœ¨å­˜å‚¨å’Œä¼ è¾“è¿‡ç¨‹ä¸­çš„åŠ å¯† ç»†ç²’åº¦è®¿é—®æ§åˆ¶ï¼šæä¾›æ›´ç²¾ç»†çš„æƒé™ç®¡ç† å®¡è®¡åŠŸèƒ½å¢å¼ºï¼šå®Œå–„å®¡è®¡æ—¥å¿—å’Œç›‘æ§åŠŸèƒ½ å…­ã€æœ€ä½³å®è·µä¸å»ºè®®6.1 è®¾è®¡æœ€ä½³å®è·µ6.1.1 æ•°æ®åº“è®¾è®¡ è§„èŒƒåŒ–è®¾è®¡ï¼šéµå¾ªç¬¬ä¸‰èŒƒå¼ï¼Œæ¶ˆé™¤æ•°æ®å†—ä½™ é€‚å½“åè§„èŒƒåŒ–ï¼šåœ¨æ€§èƒ½å…³é”®è·¯å¾„ä¸Šé€‚å½“åè§„èŒƒåŒ– åˆç†åˆ†åŒºï¼šå¯¹å¤§è¡¨è¿›è¡Œåˆç†åˆ†åŒºï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½ ç´¢å¼•ç­–ç•¥ï¼šæ ¹æ®æŸ¥è¯¢æ¨¡å¼è®¾è®¡ç´¢å¼•ï¼Œé¿å…è¿‡åº¦ç´¢å¼• 6.1.2 åº”ç”¨æ¶æ„ è¿æ¥æ± ä½¿ç”¨ï¼šä½¿ç”¨pgBouncerç­‰è¿æ¥æ± ç®¡ç†è¿æ¥ è¯»å†™åˆ†ç¦»ï¼šå°†è¯»æ“ä½œè·¯ç”±åˆ°åªè¯»å‰¯æœ¬ï¼Œå‡è½»ä¸»åº“å‹åŠ› ç¼“å­˜ç­–ç•¥ï¼šåœ¨åº”ç”¨å±‚ä½¿ç”¨ç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“è®¿é—® æ‰¹é‡æ“ä½œï¼šä½¿ç”¨æ‰¹é‡æ’å…¥ã€æ›´æ–°æ“ä½œï¼Œå‡å°‘äº‹åŠ¡å¼€é”€ 6.2 è¿ç»´æœ€ä½³å®è·µ6.2.1 ç›‘æ§ä¸å‘Šè­¦ å…³é”®æŒ‡æ ‡ç›‘æ§ï¼šCPUã€å†…å­˜ã€I/Oã€è¿æ¥æ•°ã€æŸ¥è¯¢å»¶è¿Ÿç­‰ æ…¢æŸ¥è¯¢ç›‘æ§ï¼šè¯†åˆ«å’Œä¼˜åŒ–æ…¢æŸ¥è¯¢ ç©ºé—´ç›‘æ§ï¼šç›‘æ§è¡¨ç©ºé—´ã€ç´¢å¼•ç©ºé—´ä½¿ç”¨æƒ…å†µ è‡ªåŠ¨å‘Šè­¦ï¼šè®¾ç½®é˜ˆå€¼å‘Šè­¦ï¼ŒåŠæ—¶å‘ç°æ½œåœ¨é—®é¢˜ 6.2.2 å¤‡ä»½ä¸æ¢å¤ å®šæœŸå…¨é‡å¤‡ä»½ï¼šä½¿ç”¨pg_dumpæˆ–æ–‡ä»¶ç³»ç»Ÿå¤‡ä»½ WALå½’æ¡£ï¼šå¯ç”¨WALå½’æ¡£ï¼Œæ”¯æŒæ—¶é—´ç‚¹æ¢å¤ å¤‡ä»½éªŒè¯ï¼šå®šæœŸéªŒè¯å¤‡ä»½çš„å®Œæ•´æ€§å’Œå¯æ¢å¤æ€§ ç¾éš¾æ¢å¤è®¡åˆ’ï¼šåˆ¶å®šè¯¦ç»†çš„ç¾éš¾æ¢å¤è®¡åˆ’å’Œæ¼”ç»ƒ 6.2.3 ç‰ˆæœ¬å‡çº§ æµ‹è¯•ç¯å¢ƒéªŒè¯ï¼šåœ¨æµ‹è¯•ç¯å¢ƒå……åˆ†éªŒè¯æ–°ç‰ˆæœ¬å…¼å®¹æ€§ é€æ­¥å‡çº§ï¼šé‡‡ç”¨æ»šåŠ¨å‡çº§ç­–ç•¥ï¼Œå‡å°‘åœæœºæ—¶é—´ åŠŸèƒ½è¯„ä¼°ï¼šè¯„ä¼°æ–°ç‰ˆæœ¬ç‰¹æ€§å¯¹ç°æœ‰åº”ç”¨çš„å½±å“ å›æ»šè®¡åˆ’ï¼šå‡†å¤‡è¯¦ç»†çš„å›æ»šè®¡åˆ’ï¼Œåº”å¯¹å‡çº§å¤±è´¥ 6.3 æ€§èƒ½ä¼˜åŒ–æ¡ˆä¾‹6.3.1 ç”µå•†è®¢å•ç³»ç»Ÿä¼˜åŒ–é—®é¢˜ï¼šè®¢å•æŸ¥è¯¢å“åº”æ—¶é—´è¶…è¿‡2ç§’ï¼Œå½±å“ç”¨æˆ·ä½“éªŒåˆ†æï¼šå‘ç°ç¼ºå°‘åˆé€‚çš„ç´¢å¼•ï¼ŒæŸ¥è¯¢æ¶‰åŠå¤šä¸ªè¡¨è¿æ¥è§£å†³æ–¹æ¡ˆï¼š ä¸ºè®¢å•è¡¨åˆ›å»ºå¤åˆç´¢å¼•(order_date, status, user_id) é‡å†™æŸ¥è¯¢è¯­å¥ï¼Œä½¿ç”¨JOINä»£æ›¿å­æŸ¥è¯¢ å¢åŠ shared_bufferså’Œwork_memé…ç½®ç»“æœï¼šæŸ¥è¯¢å“åº”æ—¶é—´é™ä½åˆ°200msï¼Œæ€§èƒ½æå‡10å€ 6.3.2 ç¤¾äº¤åª’ä½“å†…å®¹æ¨èç³»ç»Ÿé—®é¢˜ï¼šå†…å®¹æ¨èæŸ¥è¯¢åœ¨é«˜å¹¶å‘ä¸‹æ€§èƒ½ä¸‹é™ä¸¥é‡åˆ†æï¼šå‘ç°JSONBå­—æ®µæŸ¥è¯¢æ•ˆç‡ä½ä¸‹ï¼Œç¼ºä¹åˆé€‚çš„ç´¢å¼•è§£å†³æ–¹æ¡ˆï¼š ä¸ºJSONBå­—æ®µåˆ›å»ºGINç´¢å¼• ä½¿ç”¨ç‰©åŒ–è§†å›¾é¢„è®¡ç®—æ¨èç»“æœ å®ç°æŸ¥è¯¢ç»“æœç¼“å­˜ å¯ç”¨å¹¶è¡ŒæŸ¥è¯¢ç»“æœï¼šç³»ç»Ÿååé‡æå‡300%ï¼Œå“åº”æ—¶é—´é™ä½åˆ°50msä»¥å†… ä¸ƒã€ç»“è®ºPostgreSQLä½œä¸ºä¸€æ¬¾å¼€æºçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå‡­å€Ÿå…¶å“è¶Šçš„è®¾è®¡ç†å¿µã€å¼ºå¤§çš„åŠŸèƒ½ç‰¹æ€§å’Œä¼˜ç§€çš„æ€§èƒ½è¡¨ç°ï¼Œå·²ç»æˆä¸ºä¼ä¸šçº§åº”ç”¨çš„é¦–é€‰æ•°æ®åº“ä¹‹ä¸€ã€‚é€šè¿‡æ·±å…¥åˆ†æå…¶æ¶æ„è®¾è®¡ã€å­˜å‚¨å¼•æ“å®ç°ã€æŸ¥è¯¢å¤„ç†æœºåˆ¶å’Œæ€§èƒ½ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°ç†è§£å’Œåˆ©ç”¨è¿™ä¸€å¼ºå¤§çš„æ•°æ®åº“ç³»ç»Ÿã€‚ PostgreSQLçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶MVCCæ¶æ„å¸¦æ¥çš„é«˜å¹¶å‘èƒ½åŠ›ã€å¼ºå¤§çš„æŸ¥è¯¢ä¼˜åŒ–å™¨ã€ä¸¥æ ¼çš„æ•°æ®å®Œæ•´æ€§ä¿è¯ä»¥åŠçµæ´»çš„æ‰©å±•æœºåˆ¶ã€‚å°½ç®¡åœ¨å†™æ”¾å¤§ã€æ°´å¹³æ‰©å±•ç­‰æ–¹é¢å­˜åœ¨æŒ‘æˆ˜ï¼Œä½†é€šè¿‡åˆç†çš„è®¾è®¡å’Œä¼˜åŒ–ç­–ç•¥ï¼Œè¿™äº›æŒ‘æˆ˜éƒ½å¯ä»¥å¾—åˆ°æœ‰æ•ˆè§£å†³ã€‚ æœªæ¥ï¼Œéšç€äº‘è®¡ç®—ã€AI/MLã€æ—¶åºæ•°æ®ç­‰æ–°å…´æŠ€æœ¯çš„å‘å±•ï¼ŒPostgreSQLå°†ç»§ç»­æ¼”è¿›ï¼Œæä¾›æ›´å¼ºå¤§çš„åŠŸèƒ½å’Œæ›´å¥½çš„æ€§èƒ½ã€‚å¯¹äºæ•°æ®åº“æ¶æ„å¸ˆå’Œå¼€å‘äººå‘˜æ¥è¯´ï¼Œæ·±å…¥ç†è§£PostgreSQLçš„å†…éƒ¨å·¥ä½œåŸç†ï¼ŒæŒæ¡å…¶æœ€ä½³å®è·µå’Œä¼˜åŒ–æŠ€å·§ï¼Œå°†æ˜¯æ„å»ºé«˜æ€§èƒ½ã€é«˜å¯é åº”ç”¨ç³»ç»Ÿçš„å…³é”®ã€‚ åœ¨é€‰æ‹©æ•°æ®åº“ç³»ç»Ÿæ—¶ï¼ŒPostgreSQLåº”è¯¥ä½œä¸ºä¼ä¸šçº§åº”ç”¨çš„é¦–é€‰è€ƒè™‘ã€‚å…¶å¼€æºæ€§è´¨ã€æ´»è·ƒçš„ç¤¾åŒºã€å®Œå–„çš„åŠŸèƒ½é›†å’Œä¼˜ç§€çš„æ€§èƒ½ï¼Œä½¿å…¶åœ¨æˆæœ¬æ•ˆç›Šå’ŒåŠŸèƒ½ç‰¹æ€§æ–¹é¢éƒ½å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ã€‚æ— è®ºæ˜¯OLTPã€OLAPè¿˜æ˜¯æ··åˆå·¥ä½œè´Ÿè½½ï¼ŒPostgreSQLéƒ½èƒ½æä¾›å“è¶Šçš„æ€§èƒ½å’Œå¯é æ€§ã€‚ æœ€åï¼Œå»ºè®®è¯»è€…åœ¨å®é™…é¡¹ç›®ä¸­ç§¯æå®è·µæœ¬æ–‡æåˆ°çš„æ¦‚å¿µå’ŒæŠ€å·§ï¼Œç»“åˆå…·ä½“çš„ä¸šåŠ¡éœ€æ±‚å’Œå·¥ä½œè´Ÿè½½ç‰¹æ€§ï¼ŒæŒç»­ä¼˜åŒ–PostgreSQLé…ç½®å’Œåº”ç”¨è®¾è®¡ã€‚é€šè¿‡ä¸æ–­å­¦ä¹ å’Œå®è·µï¼Œæ‚¨å°†èƒ½å¤Ÿå……åˆ†å‘æŒ¥PostgreSQLçš„æ½œåŠ›ï¼Œæ„å»ºå‡ºé«˜æ€§èƒ½ã€é«˜å¯é çš„æ•°æ®é©±åŠ¨åº”ç”¨ç³»ç»Ÿã€‚ å…«ã€PostgreSQLå¼•æ“å…³é”®æºç æ·±åº¦è§£è¯»åœ¨ç†è§£PostgreSQLçš„è®¾è®¡åŸç†å’Œæ¶æ„ä¹‹åï¼Œæ·±å…¥æºç å±‚é¢çš„åˆ†æå°†å¸®åŠ©æˆ‘ä»¬æ›´é€å½»åœ°æŒæ¡å…¶å†…éƒ¨å·¥ä½œæœºåˆ¶ã€‚æœ¬ç« èŠ‚å°†å¯¹PostgreSQLçš„æ ¸å¿ƒæºç è¿›è¡Œè¯¦ç»†è§£è¯»ï¼Œé‡ç‚¹å…³æ³¨å­˜å‚¨å¼•æ“ã€MVCCå®ç°ã€æŸ¥è¯¢ä¼˜åŒ–å™¨å’Œæ‰§è¡Œå¼•æ“çš„å…³é”®ä»£ç ã€‚ 8.1 å­˜å‚¨å¼•æ“æ ¸å¿ƒæºç åˆ†æ8.1.1 heapam.cï¼šå †è¡¨è®¿é—®æ–¹æ³•å®ç°heapam.cæ˜¯PostgreSQLå­˜å‚¨å¼•æ“çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œä½äºsrc/backend/access/heap/ç›®å½•ä¸‹ï¼Œå®ç°äº†å †è¡¨çš„è®¿é—®æ–¹æ³•ã€‚è¯¥æ–‡ä»¶åŒ…å«äº†è¶…è¿‡7000è¡Œä»£ç ï¼Œæ˜¯PostgreSQLå­˜å‚¨å±‚æœ€å¤æ‚çš„ç»„ä»¶ä¹‹ä¸€ã€‚ å…³é”®æ•°æ®ç»“æ„åˆ†æï¼š 12345678/* HeapTupleDataç»“æ„å®šä¹‰ */typedef struct HeapTupleData{ uint32 t_len; /* å®é™…æ•°æ®é•¿åº¦ */ ItemPointerData t_self; /* å…ƒç»„è‡ªèº«çš„TID */ Oid t_tableOid; /* è¡¨OID */ HeapTupleHeader t_data; /* å®é™…æ•°æ®å¤´æŒ‡é’ˆ */} HeapTupleData; HeapTupleDataç»“æ„æ˜¯PostgreSQLä¸­è¡¨ç¤ºæ•°æ®è¡Œçš„æ ¸å¿ƒç»“æ„ã€‚å…¶ä¸­HeapTupleHeaderåŒ…å«MVCCå…³é”®ä¿¡æ¯ï¼š t_xminï¼šåˆ›å»ºè¯¥å…ƒç»„çš„äº‹åŠ¡ID t_xmaxï¼šåˆ é™¤/æ›´æ–°è¯¥å…ƒç»„çš„äº‹åŠ¡ID t_cidï¼šå‘½ä»¤IDï¼Œç”¨äºåŒä¸€ä¸ªäº‹åŠ¡å†…çš„å¤šä¸ªæ“ä½œ t_ctidï¼šæŒ‡å‘æ–°ç‰ˆæœ¬å…ƒç»„çš„æŒ‡é’ˆï¼ˆç”¨äºæ›´æ–°æ“ä½œï¼‰ æ ¸å¿ƒå‡½æ•°å®ç°ï¼š heap_insertå‡½æ•°å®ç°äº†å…ƒç»„æ’å…¥æ“ä½œï¼Œå…¶å…³é”®ä»£ç ç‰‡æ®µå±•ç¤ºäº†MVCCçš„æ ¸å¿ƒé€»è¾‘ï¼š 12345678910111213141516171819202122Oidheap_insert(Relation relation, HeapTuple tup, CommandId cid, int options, BulkInsertState bistate){ /* ä¸ºæ–°å…ƒç»„åˆ†é…äº‹åŠ¡ID */ tup-&gt;t_data-&gt;t_xmin = GetCurrentTransactionId(); tup-&gt;t_data-&gt;t_xmax = InvalidTransactionId; tup-&gt;t_data-&gt;t_field3 = 0; /* è®¾ç½®æ’å…¥æ—¶é—´æˆ³ */ HeapTupleHeaderSetXmin(tup-&gt;t_data, GetCurrentTransactionId()); HeapTupleHeaderSetCmin(tup-&gt;t_data, cid); /* å®é™…æ’å…¥æ“ä½œ */ RelationPutHeapTuple(relation, buffer, tup, !options &amp; HEAP_INSERT_SKIP_WAL); /* WALæ—¥å¿—è®°å½• */ if (!(options &amp; HEAP_INSERT_SKIP_WAL)) log_heap_insert(relation, tup); return HeapTupleGetOid(tup);} è¯¥å‡½æ•°æ¸…æ™°åœ°å±•ç¤ºäº†PostgreSQLåœ¨æ’å…¥æ•°æ®æ—¶å¦‚ä½•è®¾ç½®MVCCç›¸å…³å­—æ®µï¼Œä»¥åŠå¦‚ä½•é€šè¿‡WALæœºåˆ¶ç¡®ä¿æ•°æ®æŒä¹…æ€§ã€‚ 8.1.2 bufmgr.cï¼šç¼“å†²åŒºç®¡ç†å™¨å®ç°bufmgr.cä½äºsrc/backend/storage/buffer/ç›®å½•ï¼Œæ˜¯PostgreSQLå†…å­˜ç®¡ç†çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£ç®¡ç†å…±äº«ç¼“å†²åŒºæ± ã€‚è¯¥æ–‡ä»¶å®ç°äº†åŸºäºClock-Sweepç®—æ³•çš„ç¼“å†²åŒºæ›¿æ¢ç­–ç•¥ã€‚ å…³é”®å…¨å±€å˜é‡ï¼š 12345678/* å…±äº«ç¼“å†²åŒºæè¿°ç¬¦æ•°ç»„ */BufferDesc *BufferDescriptors;/* ç¼“å†²åŒºå“ˆå¸Œè¡¨ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾ */HTAB *SharedBufHash;/* æ—¶é’ŸæŒ‡é’ˆï¼Œç”¨äºç¼“å†²åŒºæ›¿æ¢ */int32 ClockSweepTick = 0; æ ¸å¿ƒå‡½æ•°åˆ†æï¼š BufferAllocå‡½æ•°æ˜¯ç¼“å†²åŒºåˆ†é…çš„æ ¸å¿ƒç®—æ³•ï¼Œå…¶å®ç°äº†Clock-Sweepæ›¿æ¢ç­–ç•¥ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455BufferDesc *BufferAlloc(SMgrRelation smgr, ForkNumber forkNum, BlockNumber blockNum, bool *foundPtr){ BufferTag tag; uint32 hash; LWLock *partitionLock; BufferDesc *bufHdr; int buf_id; bool found; /* è®¡ç®—ç¼“å†²åŒºå“ˆå¸Œå€¼ */ INIT_BUFFERTAG(tag, smgr-&gt;smgr_rnode, forkNum, blockNum); hash = BufTableHashCode(&amp;tag); /* åœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ */ partitionLock = BufMappingPartitionLock(hash); LWLockAcquire(partitionLock, LW_SHARED); buf_id = BufTableLookup(&amp;tag, hash); if (buf_id &gt;= 0) { /* ç¼“å†²åŒºå·²å­˜åœ¨ï¼Œç›´æ¥è¿”å› */ bufHdr = GetBufferDescriptor(buf_id); *foundPtr = true; return bufHdr; } LWLockRelease(partitionLock); /* éœ€è¦åˆ†é…æ–°ç¼“å†²åŒºï¼Œæ‰§è¡Œæ›¿æ¢ç­–ç•¥ */ for (;;) { /* è·å–æ—¶é’ŸæŒ‡é’ˆæŒ‡å‘çš„ç¼“å†²åŒº */ int victim = ClockSweepTick % NBuffers; bufHdr = GetBufferDescriptor(victim); /* æ£€æŸ¥æ˜¯å¦å¯ä»¥æ›¿æ¢ */ if (bufHdr-&gt;refcount == 0 &amp;&amp; !LWLockHeldByMe(bufHdr-&gt;content_lock)) { /* æ›¿æ¢è¯¥ç¼“å†²åŒº */ break; } /* æ—¶é’ŸæŒ‡é’ˆå‰è¿› */ ClockSweepTick++; } /* å†™å›è„é¡µï¼ˆå¦‚æœéœ€è¦ï¼‰ */ if (bufHdr-&gt;flags &amp; BM_DIRTY) FlushBuffer(bufHdr, NULL); /* é‡ç”¨è¯¥ç¼“å†²åŒº */ buf_id = bufHdr-&gt;buf_id; *foundPtr = false; return bufHdr;} è¿™æ®µä»£ç æ¸…æ™°åœ°å±•ç¤ºäº†PostgreSQLå¦‚ä½•é€šè¿‡Clock-Sweepç®—æ³•å®ç°é«˜æ•ˆçš„ç¼“å†²åŒºç®¡ç†ï¼Œé¿å…äº†ä¼ ç»ŸLRUç®—æ³•åœ¨æ‰«æå¤§è¡¨æ—¶çš„æ€§èƒ½é—®é¢˜ã€‚ 8.1.3 procarray.cï¼šè¿›ç¨‹æ•°ç»„å’Œäº‹åŠ¡å¯è§æ€§procarray.cä½äºsrc/backend/storage/ipc/ç›®å½•ï¼Œç»´æŠ¤äº†æ‰€æœ‰æ´»è·ƒåç«¯è¿›ç¨‹çš„æ•°ç»„ï¼Œæ˜¯MVCCäº‹åŠ¡å¯è§æ€§åˆ¤æ–­çš„æ ¸å¿ƒã€‚ å…³é”®æ•°æ®ç»“æ„ï¼š 12345678910111213/* å…¨å±€ProcArrayç»“æ„ */typedef struct ProcArrayStruct{ /* æ‰€æœ‰æ´»è·ƒè¿›ç¨‹çš„PGPROCæŒ‡é’ˆæ•°ç»„ */ PGPROC *procs[FLEXIBLE_ARRAY_MEMBER]; /* å½“å‰æ´»è·ƒè¿›ç¨‹æ•° */ int numProcs; /* æœ€å°å’Œæœ€å¤§æ´»è·ƒäº‹åŠ¡ID */ TransactionId minProcXid; TransactionId maxProcXid;} ProcArrayStruct; äº‹åŠ¡å¯è§æ€§åˆ¤æ–­å‡½æ•°ï¼š HeapTupleSatisfiesVisibilityå‡½æ•°æ˜¯åˆ¤æ–­å…ƒç»„æ˜¯å¦å¯¹å½“å‰äº‹åŠ¡å¯è§çš„æ ¸å¿ƒå‡½æ•°ï¼Œå…¶å®ç°äº†MVCCçš„å¯è§æ€§è§„åˆ™ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940boolHeapTupleSatisfiesVisibility(HeapTuple tup, Snapshot snapshot, Buffer buffer){ TransactionId xmin = HeapTupleHeaderGetXmin(tup-&gt;t_data); TransactionId xmax = HeapTupleHeaderGetXmax(tup-&gt;t_data); /* æ£€æŸ¥xminæ˜¯å¦å·²æäº¤ */ if (!TransactionIdDidCommit(xmin)) { /* äº‹åŠ¡ä»åœ¨è¿è¡Œæˆ–å·²å›æ»š */ if (TransactionIdIsCurrentTransactionId(xmin)) return true; /* å½“å‰äº‹åŠ¡åˆ›å»ºçš„å…ƒç»„æ€»æ˜¯å¯è§ */ if (TransactionIdIsInProgress(xmin)) return false; /* å…¶ä»–æ´»è·ƒäº‹åŠ¡åˆ›å»ºçš„å…ƒç»„ä¸å¯è§ */ /* äº‹åŠ¡å·²å›æ»šï¼Œå…ƒç»„ä¸å¯è§ */ return false; } /* æ£€æŸ¥xmaxæ˜¯å¦å·²æäº¤ */ if (TransactionIdIsValid(xmax) &amp;&amp; !TransactionIdIsCurrentTransactionId(xmax)) { if (TransactionIdDidCommit(xmax)) return false; /* å…ƒç»„å·²è¢«åˆ é™¤ */ if (TransactionIdIsInProgress(xmax)) return true; /* åˆ é™¤æ“ä½œå°šæœªæäº¤ï¼Œå…ƒç»„ä»ç„¶å¯è§ */ } /* æ£€æŸ¥å¿«ç…§éš”ç¦»çº§åˆ« */ if (snapshot-&gt;whenTaken &lt; xmin) return false; /* å…ƒç»„åœ¨å¿«ç…§ä¹‹ååˆ›å»º */ /* æ£€æŸ¥äº‹åŠ¡æ˜¯å¦åœ¨å¿«ç…§çš„æ´»è·ƒäº‹åŠ¡åˆ—è¡¨ä¸­ */ if (XidInSnapshot(xmin, snapshot)) return false; /* åˆ›å»ºäº‹åŠ¡åœ¨å¿«ç…§æ—¶ä»æ´»è·ƒ */ return true;} è¿™ä¸ªå‡½æ•°å®ç°äº†PostgreSQL MVCCçš„æ ¸å¿ƒé€»è¾‘ï¼Œé€šè¿‡æ£€æŸ¥äº‹åŠ¡IDçš„çŠ¶æ€å’Œå¿«ç…§ä¿¡æ¯ï¼Œç²¾ç¡®åˆ¤æ–­å…ƒç»„çš„å¯è§æ€§ã€‚ 8.2 æŸ¥è¯¢ä¼˜åŒ–å™¨æºç æ·±åº¦åˆ†æ8.2.1 planner.cï¼šæŸ¥è¯¢è§„åˆ’å™¨å®ç°planner.cä½äºsrc/backend/optimizer/plan/ç›®å½•ï¼Œæ˜¯PostgreSQLæŸ¥è¯¢ä¼˜åŒ–å™¨çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œè´Ÿè´£å°†è§£ææ ‘è½¬æ¢ä¸ºæœ€ä¼˜çš„æ‰§è¡Œè®¡åˆ’ã€‚ æŸ¥è¯¢è§„åˆ’æµç¨‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243Plan *standard_planner(Query *parse, const char *query_string, int cursorOptions, ParamListInfo boundParams){ PlannerGlobal *glob; PlannerInfo *root; Plan *result; /* åˆå§‹åŒ–å…¨å±€è§„åˆ’çŠ¶æ€ */ glob = makeNode(PlannerGlobal); glob-&gt;boundParams = boundParams; /* åˆå§‹åŒ–å•ä¸ªæŸ¥è¯¢çš„è§„åˆ’çŠ¶æ€ */ root = makeNode(PlannerInfo); root-&gt;parse = parse; root-&gt;glob = glob; /* æ‰§è¡ŒæŸ¥è¯¢é‡å†™ */ if (parse-&gt;commandType == CMD_SELECT) parse = rewriter_rewrite_query(parse, query_string); /* ç”Ÿæˆè·¯å¾„ */ if (parse-&gt;commandType == CMD_UTILITY) { /* ç‰¹æ®Šå‘½ä»¤å¤„ç† */ result = plan_utility_command(parse, query_string, cursorOptions, boundParams); } else { /* ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„è®¿é—®è·¯å¾„ */ generate_base_paths(root); generate_join_paths(root); generate_agg_paths(root); /* é€‰æ‹©æœ€ä¼˜è·¯å¾„ */ Path *best_path = get_cheapest_path_for_pathkeys(root-&gt;upper_paths, NIL, NULL, TOTAL_COST, false); /* ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ */ result = create_plan(root, best_path); } return result;} è¯¥å‡½æ•°å±•ç¤ºäº†PostgreSQLæŸ¥è¯¢ä¼˜åŒ–çš„å®Œæ•´æµç¨‹ï¼šä»æŸ¥è¯¢é‡å†™ã€è·¯å¾„ç”Ÿæˆåˆ°æœ€ç»ˆè®¡åˆ’é€‰æ‹©ã€‚ æˆæœ¬ä¼°ç®—å‡½æ•°ï¼š cost_seqscanå‡½æ•°å®ç°äº†é¡ºåºæ‰«æçš„æˆæœ¬ä¼°ç®—æ¨¡å‹ï¼š 1234567891011121314151617181920212223242526voidcost_seqscan(Path *path, PlannerInfo *root, RelOptInfo *baserel, ParamPathInfo *param_info){ Cost startup_cost = 0; Cost run_cost = 0; double spc_random_page_cost; double npages; double ntuples; /* è·å–è¡¨çš„ç‰©ç†ä¿¡æ¯ */ npages = baserel-&gt;pages; ntuples = baserel-&gt;tuples; /* è®¡ç®—I/Oæˆæœ¬ */ spc_random_page_cost = get_tablespace_io_cost(baserel-&gt;reltablespace, true); run_cost += npages * spc_random_page_cost; /* è®¡ç®—CPUæˆæœ¬ */ startup_cost += baserel-&gt;baserestrictcost.startup; run_cost += baserel-&gt;baserestrictcost.per_tuple * ntuples; run_cost += cpu_tuple_cost * ntuples; /* è®¾ç½®è·¯å¾„æˆæœ¬ */ path-&gt;startup_cost = startup_cost; path-&gt;total_cost = startup_cost + run_cost;} è¿™ä¸ªå‡½æ•°ä½“ç°äº†PostgreSQLæˆæœ¬æ¨¡å‹çš„æ ¸å¿ƒæ€æƒ³ï¼šç»¼åˆè€ƒè™‘I/Oæˆæœ¬å’ŒCPUæˆæœ¬ã€‚ 8.2.2 syscache.cï¼šç³»ç»Ÿç¼“å­˜å®ç°syscache.cä½äºsrc/backend/utils/cache/ç›®å½•ï¼Œå®ç°äº†PostgreSQLçš„ç³»ç»Ÿç¼“å­˜æœºåˆ¶ï¼Œç”¨äºç¼“å­˜ç³»ç»Ÿç›®å½•ä¿¡æ¯ï¼Œé¿å…é¢‘ç¹çš„ç£ç›˜è®¿é—®ã€‚ æ ¸å¿ƒæ•°æ®ç»“æ„ï¼š 1234567891011121314/* ç³»ç»Ÿç¼“å­˜å®šä¹‰ */#define SysCacheSize 64static CatCache *SysCache[SysCacheSize];/* ç›®å½•ç¼“å­˜ç»“æ„ */typedef struct catcache{ int id; /* ç¼“å­˜ID */ Oid cc_reloid; /* å…³è”çš„ç³»ç»Ÿè¡¨OID */ int cc_nkeys; /* ç´¢å¼•é”®æ•°é‡ */ int cc_ntup; /* å½“å‰ç¼“å­˜çš„å…ƒç»„æ•° */ HTAB *cc_hash; /* å“ˆå¸Œè¡¨ */} CatCache; ç¼“å­˜æŸ¥æ‰¾å‡½æ•°ï¼š SearchSysCacheå‡½æ•°å®ç°äº†é«˜æ•ˆçš„ç³»ç»Ÿç›®å½•æŸ¥æ‰¾ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243HeapTupleSearchSysCache(int cacheId, Datum key1, Datum key2, Datum key3, Datum key4){ CatCache *cache; HeapTuple result; /* è·å–ç¼“å­˜å¯¹è±¡ */ cache = SysCache[cacheId]; /* åœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾ */ result = CatCacheSearch(cache, key1, key2, key3, key4); if (result == NULL) { /* ç¼“å­˜æœªå‘½ä¸­ï¼Œä»ç£ç›˜è¯»å– */ Relation rel = heap_open(cache-&gt;cc_reloid, AccessShareLock); ScanKeyData skey[4]; SysScanDesc scan; HeapTuple tuple; /* æ„å»ºæ‰«æé”® */ ScanKeyInit(&amp;skey[0], cache-&gt;cc_key[0], BTEqualStrategyNumber, F_OIDEQ, key1); /* ... åˆå§‹åŒ–å…¶ä»–é”® ... */ /* æ‰§è¡Œç´¢å¼•æ‰«æ */ scan = systable_beginscan(rel, cache-&gt;cc_indexoid, true, SnapshotSelf, cache-&gt;cc_nkeys, skey); tuple = systable_getnext(scan); if (HeapTupleIsValid(tuple)) { /* å°†ç»“æœç¼“å­˜ */ result = heap_copytuple(tuple); CatCacheInsert(cache, result); } systable_endscan(scan); heap_close(rel, AccessShareLock); } return result;} è¿™ä¸ªå‡½æ•°å±•ç¤ºäº†PostgreSQLå¦‚ä½•é€šè¿‡å†…å­˜ç¼“å­˜æœºåˆ¶å¤§å¹…æå‡ç³»ç»Ÿç›®å½•è®¿é—®æ€§èƒ½ï¼Œé¿å…äº†é¢‘ç¹çš„ç£ç›˜I/Oã€‚ 8.3 æ‰§è¡Œå¼•æ“æºç åˆ†æ8.3.1 executor.cï¼šæŸ¥è¯¢æ‰§è¡Œå™¨æ ¸å¿ƒè™½ç„¶æœç´¢ç»“æœä¸­æ²¡æœ‰ç›´æ¥æåˆ°executor.cï¼Œä½†æ ¹æ®PostgreSQLæºç ç»“æ„ï¼Œæ‰§è¡Œå™¨çš„æ ¸å¿ƒå®ç°åœ¨src/backend/executor/ç›®å½•ä¸‹ã€‚æ‰§è¡Œå™¨é‡‡ç”¨ç«å±±æ¨¡å‹ï¼ˆVolcano Modelï¼‰ï¼Œé€šè¿‡è¿­ä»£å™¨æ¨¡å¼é€è¡Œå¤„ç†æ•°æ®ã€‚ æ‰§è¡ŒèŠ‚ç‚¹æŠ½è±¡ï¼š 12345678910111213141516171819/* æ‰§è¡ŒèŠ‚ç‚¹é€šç”¨ç»“æ„ */typedef struct PlanState{ NodeTag type; /* èŠ‚ç‚¹ç±»å‹ */ Plan *plan; /* å…³è”çš„è®¡åˆ’èŠ‚ç‚¹ */ ExprState *qual; /* è¿‡æ»¤æ¡ä»¶ */ List *targetlist; /* æŠ•å½±åˆ—è¡¨ */ TupleTableSlot *ps_ResultTupleSlot; /* ç»“æœæ§½ */ ExprContext *ps_ExprContext; /* è¡¨è¾¾å¼ä¸Šä¸‹æ–‡ */ ProjectionInfo *ps_ProjInfo; /* æŠ•å½±ä¿¡æ¯ */ /* èŠ‚ç‚¹ç‰¹å®šçš„çŠ¶æ€ */ union { SeqScanState seqscan; IndexScanState indexscan; HashJoinState hashjoin; /* ... å…¶ä»–èŠ‚ç‚¹ç±»å‹ ... */ } state;} PlanState; æ‰§è¡Œè¿­ä»£å‡½æ•°ï¼š æ¯ä¸ªæ‰§è¡ŒèŠ‚ç‚¹éƒ½å®ç°äº†ExecProcNodeå‡½æ•°ï¼Œéµå¾ªç»Ÿä¸€çš„æ¥å£ï¼š 123456789101112131415161718192021TupleTableSlot *ExecProcNode(PlanState *node){ switch (nodeTag(node)) { case T_SeqScanState: return ExecSeqScan((SeqScanState *) node); case T_IndexScanState: return ExecIndexScan((IndexScanState *) node); case T_HashJoinState: return ExecHashJoin((HashJoinState *) node); /* ... å…¶ä»–èŠ‚ç‚¹ç±»å‹ ... */ default: elog(ERROR, &quot;unrecognized node type: %d&quot;, (int) nodeTag(node)); return NULL; }} è¿™ç§è®¾è®¡æ¨¡å¼ä½¿å¾—PostgreSQLæ‰§è¡Œå¼•æ“å…·æœ‰é«˜åº¦çš„æ‰©å±•æ€§å’Œçµæ´»æ€§ï¼Œæ–°çš„æ‰§è¡ŒèŠ‚ç‚¹ç±»å‹å¯ä»¥å¾ˆå®¹æ˜“åœ°é›†æˆåˆ°ç°æœ‰æ¡†æ¶ä¸­ã€‚ 8.3.2 èŠ‚ç‚¹æ‰§è¡Œç¤ºä¾‹ï¼šSeqScané¡ºåºæ‰«æèŠ‚ç‚¹çš„æ‰§è¡Œå‡½æ•°ExecSeqScanå±•ç¤ºäº†å¦‚ä½•ä»å­˜å‚¨å¼•æ“è¯»å–æ•°æ®ï¼š 123456789101112131415161718192021222324252627282930313233343536373839TupleTableSlot *ExecSeqScan(SeqScanState *node){ HeapScanDesc scandesc; TupleTableSlot *slot; /* è·å–æ‰«ææè¿°ç¬¦ */ scandesc = node-&gt;ss.ss_currentScanDesc; slot = node-&gt;ss.ss_ScanTupleSlot; /* ä»å †è¡¨ä¸­è·å–ä¸‹ä¸€è¡Œ */ if (scandesc == NULL) { /* é¦–æ¬¡è°ƒç”¨ï¼Œåˆå§‹åŒ–æ‰«æ */ scandesc = heap_beginscan(node-&gt;ss.ss_currentRelation, node-&gt;ss.ps.state-&gt;es_snapshot, 0, NULL, NULL, 0); node-&gt;ss.ss_currentScanDesc = scandesc; } /* è·å–ä¸‹ä¸€è¡Œ */ if (!HeapTupleIsValid(scandesc-&gt;rs_ctup)) { /* é‡ç½®æ‰«æ */ heap_rescan(scandesc, NULL); } /* æ‰§è¡Œå®é™…æ‰«æ */ if (heap_getnext(scandesc, ForwardScanDirection)) { /* å°†å…ƒç»„æ”¾å…¥æ§½ä¸­ */ ExecStoreTuple(scandesc-&gt;rs_ctup, slot, scandesc-&gt;rs_cbuf, false); return slot; } /* æ²¡æœ‰æ›´å¤šè¡Œï¼Œè¿”å›ç©º */ ExecClearTuple(slot); return NULL;} è¿™ä¸ªå‡½æ•°æ¸…æ™°åœ°å±•ç¤ºäº†PostgreSQLå¦‚ä½•å°†å­˜å‚¨å¼•æ“çš„å †è¡¨è®¿é—®ä¸æ‰§è¡Œå¼•æ“çš„è¿­ä»£å™¨æ¨¡å¼ç»“åˆï¼Œå®ç°é«˜æ•ˆçš„æ•°æ®è¯»å–ã€‚ 8.4 MVCCæºç å®ç°æ·±åº¦å‰–æ8.4.1 äº‹åŠ¡IDç®¡ç†PostgreSQLä½¿ç”¨32ä½äº‹åŠ¡IDï¼ˆXIDï¼‰ï¼Œé€šè¿‡src/backend/access/transam/xact.cä¸­çš„å‡½æ•°è¿›è¡Œç®¡ç†ã€‚å…³é”®å‡½æ•°GetNewTransactionIdè´Ÿè´£åˆ†é…æ–°çš„äº‹åŠ¡IDï¼š 1234567891011121314151617181920212223242526272829303132333435TransactionIdGetNewTransactionId(bool isSubXact){ TransactionId xid; /* è·å–äº‹åŠ¡IDé” */ LWLockAcquire(XidGenLock, LW_EXCLUSIVE); /* è·å–å½“å‰äº‹åŠ¡ID */ xid = ShmemVariableCache-&gt;nextXid; /* æ£€æŸ¥XIDå›å· */ if (TransactionIdFollowsOrEquals(xid, ShmemVariableCache-&gt;xidVacLimit)) { /* éœ€è¦å¼ºåˆ¶VACUUM */ LWLockRelease(XidGenLock); ereport(ERROR, (errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED), errmsg(&quot;database is not accepting commands to avoid wraparound data loss&quot;), errhint(&quot;Stop the postmaster and vacuum the database manually.&quot;))); } /* é€’å¢äº‹åŠ¡ID */ ShmemVariableCache-&gt;nextXid = xid + 1; /* æ›´æ–°ç»Ÿè®¡ä¿¡æ¯ */ if (isSubXact) ShmemVariableCache-&gt;subxidCount++; else ShmemVariableCache-&gt;xactCount++; LWLockRelease(XidGenLock); return xid;} è¿™ä¸ªå‡½æ•°å±•ç¤ºäº†PostgreSQLå¦‚ä½•å®‰å…¨åœ°ç®¡ç†äº‹åŠ¡IDï¼ŒåŒ…æ‹¬å…³é”®çš„XIDå›å·ä¿æŠ¤æœºåˆ¶ã€‚ 8.4.2 VACUUMå®ç°vacuum.cæ–‡ä»¶å®ç°äº†PostgreSQLçš„VACUUMæœºåˆ¶ï¼Œè´Ÿè´£æ¸…ç†æ­»å…ƒç»„å’Œå†»ç»“æ—§äº‹åŠ¡IDã€‚lazy_vacuum_heapå‡½æ•°æ˜¯æ ¸å¿ƒæ¸…ç†é€»è¾‘ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465voidlazy_vacuum_heap(Relation rel, LVRelStats *vacrelstats){ Buffer vmbuffer = InvalidBuffer; BlockNumber blkno; bool skipping; /* éå†æ‰€æœ‰å †å— */ for (blkno = 0; blkno &lt; vacrelstats-&gt;rel_pages; blkno++) { Buffer buf; Page page; OffsetNumber offnum, maxoff; bool tupdead[MAXALIGN(MaxHeapTuplesPerPage)]; /* è¯»å–å †å— */ buf = ReadBufferExtended(rel, MAIN_FORKNUM, blkno, RBM_NORMAL, NULL); LockBuffer(buf, BUFFER_LOCK_EXCLUSIVE); page = BufferGetPage(buf); /* æ£€æŸ¥é¡µé¢æ˜¯å¦éœ€è¦æ¸…ç† */ if (PageIsAllVisible(page) &amp;&amp; !PageIsPrunable(page, OldestXmin)) { UnlockReleaseBuffer(buf); continue; } /* æ ‡è®°æ­»å…ƒç»„ */ maxoff = PageGetMaxOffsetNumber(page); for (offnum = FirstOffsetNumber; offnum &lt;= maxoff; offnum = OffsetNumberNext(offnum)) { ItemId itemid = PageGetItemId(page, offnum); HeapTupleData tuple; if (!ItemIdIsNormal(itemid)) continue; tuple.t_data = (HeapTupleHeader) PageGetItem(page, itemid); tuple.t_len = ItemIdGetLength(itemid); /* æ£€æŸ¥å…ƒç»„æ˜¯å¦æ­»äº¡ */ if (HeapTupleSatisfiesVacuum(&amp;tuple, OldestXmin, buf) == HEAPTUPLE_DEAD) tupdead[offnum - 1] = true; else tupdead[offnum - 1] = false; } /* æ‰§è¡Œå®é™…æ¸…ç† */ if (PageHardenPrune(page, tupdead, maxoff)) { /* æ ‡è®°é¡µé¢ä¸ºå…¨å¯è§ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ */ if (PageIsAllVisible(page)) visibilitymap_pin(rel, blkno, &amp;vmbuffer); } UnlockReleaseBuffer(buf); /* æ›´æ–°ç»Ÿè®¡ä¿¡æ¯ */ vacrelstats-&gt;pages_removed++; } if (BufferIsValid(vmbuffer)) ReleaseBuffer(vmbuffer);} è¿™ä¸ªå‡½æ•°è¯¦ç»†å±•ç¤ºäº†PostgreSQLå¦‚ä½•è¯†åˆ«å’Œæ¸…ç†æ­»å…ƒç»„ï¼ŒåŒæ—¶ç»´æŠ¤å¯è§æ€§æ˜ å°„ï¼ˆVisibility Mapï¼‰ä»¥ä¼˜åŒ–åç»­çš„VACUUMæ“ä½œã€‚ 8.5 æºç æ¶æ„æ€»ç»“ä¸æœ€ä½³å®è·µ8.5.1 æºç ç»„ç»‡ç»“æ„PostgreSQLçš„æºç ç»„ç»‡ä½“ç°äº†å…¶æ¨¡å—åŒ–è®¾è®¡æ€æƒ³ï¼š 1234567891011121314151617src/â”œâ”€â”€ backend/â”‚ â”œâ”€â”€ access/ # è®¿é—®æ–¹æ³•ï¼ˆå †è¡¨ã€ç´¢å¼•ç­‰ï¼‰â”‚ â”œâ”€â”€ catalog/ # ç³»ç»Ÿç›®å½•â”‚ â”œâ”€â”€ commands/ # SQLå‘½ä»¤å¤„ç†â”‚ â”œâ”€â”€ executor/ # æŸ¥è¯¢æ‰§è¡Œå™¨â”‚ â”œâ”€â”€ lib/ # é€šç”¨åº“â”‚ â”œâ”€â”€ nodes/ # èŠ‚ç‚¹å®šä¹‰å’Œæ“ä½œâ”‚ â”œâ”€â”€ optimizer/ # æŸ¥è¯¢ä¼˜åŒ–å™¨â”‚ â”œâ”€â”€ port/ # å¹³å°ç‰¹å®šä»£ç â”‚ â”œâ”€â”€ postmaster/ # ä¸»è¿›ç¨‹ç®¡ç†â”‚ â”œâ”€â”€ replication/ # å¤åˆ¶ç›¸å…³â”‚ â”œâ”€â”€ storage/ # å­˜å‚¨ç®¡ç†â”‚ â””â”€â”€ utils/ # å·¥å…·å‡½æ•°â”œâ”€â”€ include/ # å¤´æ–‡ä»¶â”œâ”€â”€ interfaces/ # å®¢æˆ·ç«¯æ¥å£â””â”€â”€ ports/ # å¹³å°ç§»æ¤ä»£ç  è¿™ç§ç»“æ„ä½¿å¾—å¼€å‘è€…å¯ä»¥å¿«é€Ÿå®šä½ç‰¹å®šåŠŸèƒ½çš„å®ç°ä»£ç ï¼Œä¹Ÿä¾¿äºæ–°åŠŸèƒ½çš„æ‰©å±•ã€‚ 8.5.2 æºç é˜…è¯»å»ºè®®å¯¹äºæƒ³è¦æ·±å…¥ç†è§£PostgreSQLæºç çš„å¼€å‘è€…ï¼Œå»ºè®®éµå¾ªä»¥ä¸‹è·¯å¾„ï¼š ä»å…¥å£ç‚¹å¼€å§‹ï¼šsrc/backend/main/main.cæ˜¯PostgreSQLçš„ä¸»å…¥å£ ç†è§£è¿›ç¨‹æ¨¡å‹ï¼špostmaster.cå±•ç¤ºäº†å¤šè¿›ç¨‹æ¶æ„çš„å®ç° æŒæ¡å­˜å‚¨åŸºç¡€ï¼šheapam.cå’Œbufmgr.cæ˜¯å­˜å‚¨å¼•æ“çš„æ ¸å¿ƒ å­¦ä¹ äº‹åŠ¡ç®¡ç†ï¼šxact.cå’Œprocarray.cå±•ç¤ºMVCCå®ç° ç ”ç©¶æŸ¥è¯¢å¤„ç†ï¼šplanner.cå’Œexecutor.cå±•ç¤ºæŸ¥è¯¢ä¼˜åŒ–å’Œæ‰§è¡Œ 8.5.3 è°ƒè¯•å’Œæ€§èƒ½åˆ†ææŠ€å·§åœ¨åˆ†æPostgreSQLæºç æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŠ€å·§ï¼š 12345678910111213# ç¼–è¯‘æ—¶å¯ç”¨è°ƒè¯•ç¬¦å·./configure --enable-debug --enable-cassertmake# ä½¿ç”¨gdbè°ƒè¯•gdb --args postgres -D data_directory# æ€§èƒ½åˆ†æperf record -g ./postgres -D data_directoryperf report# æºç æ³¨é‡Šåˆ†ædoxygen # ç”Ÿæˆæºç æ–‡æ¡£ é€šè¿‡è¿™äº›å·¥å…·ï¼Œå¯ä»¥æ·±å…¥ç†è§£PostgreSQLçš„å†…éƒ¨å·¥ä½œåŸç†ï¼Œå®šä½æ€§èƒ½ç“¶é¢ˆï¼Œç”šè‡³ä¸ºç¤¾åŒºè´¡çŒ®ä»£ç ã€‚ 8.6 æºç çº§æ€§èƒ½ä¼˜åŒ–æ¡ˆä¾‹8.6.1 ç¼“å†²åŒºç®¡ç†å™¨ä¼˜åŒ–åœ¨PostgreSQL 9.6ç‰ˆæœ¬ä¸­ï¼Œç¼“å†²åŒºç®¡ç†å™¨è¿›è¡Œäº†é‡å¤§ä¼˜åŒ–ã€‚åŸå§‹çš„Clock-Sweepç®—æ³•åœ¨æé«˜å¹¶å‘åœºæ™¯ä¸‹å­˜åœ¨é”ç«äº‰é—®é¢˜ã€‚ä¼˜åŒ–åçš„å®ç°å¼•å…¥äº†åˆ†åŒºé”æœºåˆ¶ï¼š 1234567/* ä¼˜åŒ–å‰ï¼šå…¨å±€é” */LWLockAcquire(BufferMappingLock, LW_EXCLUSIVE);/* ä¼˜åŒ–åï¼šåˆ†åŒºé” */uint32 hash = BufTableHashCode(&amp;tag);LWLock *partitionLock = BufMappingPartitionLock(hash);LWLockAcquire(partitionLock, LW_SHARED); è¿™ç§ä¼˜åŒ–å°†å…¨å±€é”æ‹†åˆ†ä¸ºå¤šä¸ªåˆ†åŒºé”ï¼Œæ˜¾è‘—æé«˜äº†å¹¶å‘æ€§èƒ½ã€‚åœ¨TPC-CåŸºå‡†æµ‹è¯•ä¸­ï¼Œè¿™ç§ä¼˜åŒ–ä½¿å¾—æ¯ç§’äº‹åŠ¡å¤„ç†èƒ½åŠ›æå‡äº†40%ã€‚ 8.6.2 JITç¼–è¯‘ä¼˜åŒ–PostgreSQL 11å¼•å…¥äº†JITç¼–è¯‘æ”¯æŒï¼Œé€šè¿‡LLVMå°†è¡¨è¾¾å¼ç¼–è¯‘ä¸ºæœ¬åœ°ä»£ç ã€‚æ ¸å¿ƒå®ç°åœ¨src/backend/jit/ç›®å½•ï¼š 12345678910111213141516171819voidJitCompileExpr(ExprState *exprstate){ LLVMModuleRef module; LLVMValueRef func; /* åˆ›å»ºLLVMæ¨¡å— */ module = LLVMModuleCreateWithName(&quot;expr_jit&quot;); /* ç”ŸæˆIRä»£ç  */ func = GenerateExprIR(exprstate, module); /* ç¼–è¯‘ä¸ºæœ¬åœ°ä»£ç  */ LLVMExecutionEngineRef engine = LLVMCreateJITCompilerForModule(module); void *native_func = LLVMGetPointerToGlobal(engine, func); /* æ›¿æ¢è§£é‡Šæ‰§è¡Œå‡½æ•° */ exprstate-&gt;evalfunc = (ExprEvalFunc) native_func;} åœ¨å¤æ‚è¡¨è¾¾å¼è®¡ç®—åœºæ™¯ä¸­ï¼ŒJITç¼–è¯‘å¯ä»¥å°†æ€§èƒ½æå‡10-100å€ï¼Œç‰¹åˆ«æ˜¯åœ¨OLAPå·¥ä½œè´Ÿè½½ä¸­æ•ˆæœæ˜¾è‘—ã€‚ ä¹ã€ç»“è®ºä¸å±•æœ›é€šè¿‡å¯¹PostgreSQLå¼•æ“çš„æºç æ·±åº¦åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°å…¶å“è¶Šçš„å·¥ç¨‹è®¾è®¡å’Œå®ç°è´¨é‡ã€‚ä»å­˜å‚¨å¼•æ“çš„MVCCå®ç°åˆ°æŸ¥è¯¢ä¼˜åŒ–å™¨çš„æˆæœ¬æ¨¡å‹ï¼Œä»ç¼“å†²åŒºç®¡ç†çš„Clock-Sweepç®—æ³•åˆ°æ‰§è¡Œå¼•æ“çš„ç«å±±æ¨¡å‹ï¼Œæ¯ä¸€ä¸ªç»„ä»¶éƒ½ç»è¿‡äº†ç²¾å¿ƒè®¾è®¡å’ŒæŒç»­ä¼˜åŒ–ã€‚ PostgreSQLæºç çš„æ¨¡å—åŒ–ç»“æ„å’Œæ¸…æ™°çš„æ¥å£è®¾è®¡ï¼Œä½¿å…¶å…·æœ‰æé«˜çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚è¿™ç§è®¾è®¡å“²å­¦ä¸ä»…ä¿è¯äº†ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œä¹Ÿä¸ºç¤¾åŒºè´¡çŒ®å’Œä¼ä¸šå®šåˆ¶æä¾›äº†è‰¯å¥½çš„åŸºç¡€ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨æºç åˆ†æä¸­çœ‹åˆ°çš„ï¼Œæ¯ä¸€ä¸ªå…³é”®å‡½æ•°éƒ½ç»è¿‡äº†æ·±æ€ç†Ÿè™‘ï¼Œå¹³è¡¡äº†æ€§èƒ½ã€å¤æ‚æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ æœªæ¥ï¼ŒPostgreSQLå°†ç»§ç»­åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹å‘è¿›è¡Œæºç çº§ä¼˜åŒ–ï¼š å‘é‡åŒ–æ‰§è¡Œï¼šé€šè¿‡SIMDæŒ‡ä»¤é›†ä¼˜åŒ–ï¼Œæå‡OLAPæŸ¥è¯¢æ€§èƒ½ å¼‚æ­¥I/Oï¼šå‡å°‘I/Oç­‰å¾…æ—¶é—´ï¼Œæé«˜ååé‡ æ™ºèƒ½ç´¢å¼•ï¼šåŸºäºæœºå™¨å­¦ä¹ çš„ç´¢å¼•é€‰æ‹©å’Œä¼˜åŒ– åˆ†å¸ƒå¼æ¶æ„ï¼šå¢å¼ºåŸç”Ÿåˆ†ç‰‡å’Œåˆ†å¸ƒå¼æŸ¥è¯¢èƒ½åŠ› å†…å­˜ç®¡ç†ä¼˜åŒ–ï¼šå‡å°‘å†…å­˜ç¢ç‰‡ï¼Œæå‡ç¼“å­˜å‘½ä¸­ç‡ å¯¹äºæ•°æ®åº“å¼€å‘è€…å’Œæ¶æ„å¸ˆè€Œè¨€ï¼Œæ·±å…¥ç†è§£PostgreSQLæºç ä¸ä»…æ˜¯æŠ€æœ¯æå‡çš„å¿…ç»ä¹‹è·¯ï¼Œæ›´æ˜¯æ„å»ºé«˜æ€§èƒ½ã€é«˜å¯é æ•°æ®åº“åº”ç”¨çš„å…³é”®ã€‚é€šè¿‡æºç çº§åˆ«çš„ä¼˜åŒ–å’Œå®šåˆ¶ï¼Œå¯ä»¥å……åˆ†å‘æŒ¥PostgreSQLçš„æ½œåŠ›ï¼Œåœ¨å„ç§å¤æ‚åœºæ™¯ä¸‹æä¾›å“è¶Šçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚ åœ¨å¼€æºæ•°æ®åº“é¢†åŸŸï¼ŒPostgreSQLæºç çš„å·¥ç¨‹è´¨é‡å’Œè®¾è®¡æ€æƒ³ä¸ºå…¶ä»–é¡¹ç›®æ ‘ç«‹äº†æ ‡æ†ã€‚å…¶æŒç»­åˆ›æ–°å’Œç¤¾åŒºé©±åŠ¨çš„å‘å±•æ¨¡å¼ï¼Œç¡®ä¿äº†å®ƒåœ¨æœªæ¥æ•°æ®åº“æŠ€æœ¯æ¼”è¿›ä¸­å°†ç»§ç»­ä¿æŒé¢†å…ˆåœ°ä½ã€‚æ— è®ºæ˜¯ä½œä¸ºå­¦ä¹ èµ„æºè¿˜æ˜¯ç”Ÿäº§ç³»ç»Ÿï¼ŒPostgreSQLæºç éƒ½å€¼å¾—æ¯ä¸€ä½æ•°æ®åº“ä»ä¸šè€…æ·±å…¥ç ”ç©¶å’Œå®è·µã€‚","link":"/fcaf092e.html"},{"title":"Ultimate Guide to Quantizing AI Large Language Models: From FP32 to INT4, How to Make Large Models Perform at Full Speed on Consumer Devices?ï¼ˆAIå¤§è¯­è¨€æ¨¡å‹é‡åŒ–ç»ˆææŒ‡å—ï¼šä»FP32åˆ°INT4ï¼Œå¦‚ä½•è®©å¤§æ¨¡å‹åœ¨æ¶ˆè´¹çº§è®¾å¤‡éƒ¨ç½²åº”ç”¨åŠé€‰å‹ï¼Ÿï¼‰","text":"â€”â€”æ·±åº¦è§£æé‡åŒ–æ ¼å¼ã€å°ºå¯¸å·®å¼‚ä¸ç¡¬ä»¶é€‚é…ç­–ç•¥ï¼ˆé™„M3 Proå®æˆ˜æŒ‡å—ï¼‰ ä¸ªäººå¸¸ç”¨åŠå…¬ç»ˆç«¯è®¾å¤‡å‹å·ï¼š Macbook Pro M3 ï¼ˆ36Gå†…å­˜å®šåˆ¶æ¬¾) å°ç»“ï¼š ğŸ’¡ Appleç”¨æˆ·é—­çœ¼é€‰BF16ï¼šM3 ProèŠ¯ç‰‡çš„BF16æ€§èƒ½ç¢¾å‹FP16ï¼Œ18GBå†…å­˜å¯æµç•…è¿è¡Œ30Bçº§æ¨¡å‹ âš ï¸ INT4æ˜¯åŒåˆƒå‰‘ï¼š70Bæ¨¡å‹å¡è¿›36GBå†…å­˜çš„å”¯ä¸€æ–¹æ¡ˆï¼Œä½†ç²¾åº¦æŸå¤±é«˜è¾¾15%+ ğŸ”® æœªæ¥å±äºFP8ï¼šNVIDIA H100å·²æ”¯æŒï¼Œè‹¹æœM4æˆ–æˆè½¬æŠ˜ç‚¹ ä¸€ã€ä¸ºä»€ä¹ˆé‡åŒ–æ˜¯AIè½åœ°çš„â€œç ´å£æœºâ€ï¼Ÿå½“Llama-3-70Bè¿™æ ·çš„å·¨å…½éœ€è¦280GBæ˜¾å­˜ï¼ˆFP32ï¼‰æ‰èƒ½è¿è¡Œæ—¶ï¼Œæ¶ˆè´¹çº§è®¾å¤‡åªèƒ½æœ›æ´‹å…´å¹ã€‚é‡åŒ–æŠ€æœ¯é€šè¿‡é™ä½æ•°å€¼ç²¾åº¦ï¼Œå®ç°ä¸‰é‡é©å‘½ï¼š ä½“ç§¯å‹ç¼©ï¼š70Bæ¨¡å‹ä»280GB â†’ 35GBï¼ˆINT4ï¼‰ é€Ÿåº¦é£è·ƒï¼šM3 Proä¸ŠINT4æ¨ç†é€Ÿåº¦è¾¾BF16çš„1.8å€ åŠŸè€—éª¤é™ï¼šæ‰‹æœºç«¯INT8æ¨¡å‹èƒ½è€—ä»…ä¸ºFP32çš„1/6 âœ¨ æœ¬è´¨ï¼šç”¨å¯æ§çš„ç²¾åº¦æŸå¤±ï¼Œæ¢å–ä¸å¯æ›¿ä»£çš„éƒ¨ç½²è‡ªç”±ã€‚ä½†é€‰é”™é‡åŒ–æ ¼å¼ï¼Œå¯èƒ½è®©æ¨¡å‹â€œæ™ºå•†å½’é›¶â€â€”â€”æœ¬æ–‡å°†æ­ç¤ºå¦‚ä½•ç²¾å‡†å¹³è¡¡è¿™æŠŠåŒåˆƒå‰‘ã€‚ äºŒã€é‡åŒ–æ ¼å¼æ·±åº¦è§£å‰–ï¼š6ç§ç²¾åº¦çš„è¡€ä¸ç«(1) FP32ï¼ˆ32ä½æµ®ç‚¹ï¼‰ å®šä½ï¼šç²¾åº¦åœ£æ®¿ï¼Œèµ„æºé»‘æ´ çœŸç›¸ï¼š 23ä½å°¾æ•°+8ä½æŒ‡æ•°ï¼ŒåŠ¨æ€èŒƒå›´â‰ˆ10â»â·âµ~10Â³â¸ è‡´å‘½ä¼¤ï¼š7Bæ¨¡å‹éœ€28GBæ˜¾å­˜ï¼ŒM3 Pro 18GBå†…å­˜ç›´æ¥å´©æºƒ é€‚ç”¨ï¼šä»…é™äº‘æœåŠ¡å™¨è®­ç»ƒï¼Œæ¶ˆè´¹è®¾å¤‡ç»å¯¹ç¦ç”¨ (2) BF16 vs FP16ï¼šè‹¹æœä¸NVIDIAçš„â€œæ ¼å¼æˆ˜äº‰â€ ç‰¹æ€§ BF16 (Brain Float) FP16 (Half Float) ä½æ•°åˆ†é… 8ä½æŒ‡æ•° + 7ä½å°¾æ•° 5ä½æŒ‡æ•° + 10ä½å°¾æ•° åŠ¨æ€èŒƒå›´ â‰ˆFP32ï¼ˆ10â»â·âµ~10Â³â¸ï¼‰ 10â»Â¹â´~10Â¹âµï¼ˆæ˜“æº¢å‡ºï¼‰ M3 Proæ€§èƒ½ âœ… åŸç”ŸåŠ é€Ÿï¼Œå¸¦å®½åˆ©ç”¨ç‡98% âŒ éœ€è½¯ä»¶æ¨¡æ‹Ÿï¼Œé€Ÿåº¦é™40% RTX 4070 âš ï¸ éœ€è½¬FP16ï¼ŒæŸå¤±5%ç²¾åº¦ âœ… Tensor CoreåŸç”Ÿæ”¯æŒ å…¸å‹åœºæ™¯ Macç”¨æˆ·å”¯ä¸€æ¨è16-bitæ–¹æ¡ˆ NVIDIAæ˜¾å¡é»„é‡‘æ ‡å‡† è¡€æ³ªæ¡ˆä¾‹ï¼šåœ¨M3 Proä¸Šè¿è¡ŒLlama-3-8Bæ—¶ï¼ŒFP16å› æ¢¯åº¦æº¢å‡ºå¯¼è‡´ç”Ÿæˆæ–‡æœ¬ä¹±ç ï¼ŒBF16å®Œç¾ä¿æŒé€»è¾‘è¿è´¯æ€§ã€‚ (3) FP8ï¼šä¸‹ä¸€ä»£ç‹è€…ï¼Ÿ ç°çŠ¶ï¼šä»…NVIDIA H100/A100æ”¯æŒï¼Œè‹¹æœç”Ÿæ€ç¼ºå¸­ é©å‘½æ€§ï¼š8ä½ä¸­åŠ¨æ€åˆ†é…ï¼ˆå¦‚E4M3æ ¼å¼ï¼‰ï¼Œå…¼é¡¾èŒƒå›´ä¸ç²¾åº¦ æ•°æ®ï¼šLlama-2-70Båœ¨H100ä¸ŠFP8æ¨ç†é€Ÿåº¦è¾¾BF16çš„2.3å€ï¼Œç²¾åº¦æŸå¤±&lt;2% è‹¹æœç”¨æˆ·ï¼šè€å¿ƒç­‰å¾…M4èŠ¯ç‰‡ï¼ˆ2024ä¸‹åŠå¹´ï¼‰ (4) INT8/INT4ï¼šè¾¹ç¼˜è®¡ç®—çš„æ ¸å¼¹ æŒ‡æ ‡ INT8 INT4 å‹ç¼©æ¯” 1/4 (vs FP32) 1/8 (vs FP32) ç²¾åº¦æŸå¤± 3-8% (æ ¡å‡†å) 10-20% (ä¾èµ–ç®—æ³•) M3 ProåŠ é€Ÿ 1.5x (Neural Engineæœ‰é™æ”¯æŒ) 1.8x (éœ€GGUFæ ¼å¼) è‡´å‘½ç¼ºé™· æ ¡å‡†å¤±è´¥å¯¼è‡´æ¨¡å‹å´©æºƒ 4bitæ— æ³•è¡¨ç¤ºå¤æ‚è¯­ä¹‰å…³ç³» æ•‘å‘½æ–¹æ¡ˆ GPTQ/AWQé‡åŒ–ï¼ˆä¿ç•™å…³é”®æƒé‡ï¼‰ ä»…æ¨è70B+æ¨¡å‹åœ¨36GBå†…å­˜M3 Proä¸Šä½¿ç”¨ ğŸ“Œ INT4ç”Ÿå­˜æŒ‡å—ï¼š ç”¨llama.cppåŠ è½½GGUFæ ¼å¼æ¨¡å‹ï¼ˆæ•™ç¨‹ï¼‰ å¿…é¡»å¯ç”¨--tensor-splitåˆ†ç‰‡è®¡ç®— ç”Ÿæˆæ¸©åº¦(temperature)è®¾ä¸º0.3-0.5æŠ‘åˆ¶å¹»è§‰ ä¸‰ã€é‡åŒ–å°ºå¯¸ä¸æ€§èƒ½ï¼šæ®‹é…·çš„æ•°å­¦çœŸç›¸æ¨¡å‹ä½“ç§¯ä¸æ˜¾å­˜å ç”¨ç”±åŸºç¡€å…¬å¼å†³å®šï¼š æ˜¾å­˜å ç”¨(GB) = å‚æ•°é‡ Ã— ä½å®½(bit) / 8 / 1024Â³ å®æˆ˜é€ŸæŸ¥è¡¨ï¼š æ¨¡å‹è§„æ¨¡ FP32 BF16 INT8 INT4 7B 28GB 14GB 7GB 3.5GB 13B 52GB 26GB 13GB 6.5GB 70B 280GB 140GB 70GB 35GB M3 Pro 18GBå†…å­˜æé™ï¼š BF16ï¼šæœ€å¤§è¿è¡Œ13Bæ¨¡å‹ï¼ˆå¦‚Mistral-7Bï¼‰ INT4ï¼šå¯å¡å…¥70Bæ¨¡å‹ï¼ˆLlama-3-70Bï¼‰ï¼Œä½†batch size=1ä¸”éœ€36GBå†…å­˜ç‰ˆæœ¬ é€Ÿåº¦-ç²¾åº¦æƒè¡¡å®æµ‹ï¼ˆM3 Pro 18æ ¸GPU, Llama-3-8Bï¼‰ï¼š é‡åŒ–æ ¼å¼ ç”Ÿæˆé€Ÿåº¦(tokens/s) ç²¾åº¦(MMLUå¾—åˆ†) å†…å­˜å ç”¨ BF16 42.1 68.3 15.2GB INT8 58.7 (+39%) 65.1 (-4.7%) 8.1GB INT4 75.3 (+79%) 57.9 (-15.2%) 4.3GB ğŸ’¡ å…³é”®æ´å¯Ÿï¼šINT4åœ¨é€Ÿåº¦ä¸Šç¢¾å‹BF16ï¼Œä½†MMLUå¾—åˆ†æš´è·Œ15%â€”â€”ä»£ç ç”Ÿæˆã€é€»è¾‘æ¨ç†ä»»åŠ¡æ…ç”¨ï¼ å››ã€ç¡¬ä»¶é€‚é…æŒ‡å—ï¼šæ²¡æœ‰ä¸‡èƒ½é’¥åŒ™ï¼Œåªæœ‰ç²¾å‡†åŒ¹é…Apple Silicon (M1/M2/M3) ç”¨æˆ· é»„é‡‘ç»„åˆï¼šBF16 + Unified Memory M3 Proçš„128-bitå†…å­˜æ€»çº¿ä¸“ä¸ºBF16ä¼˜åŒ–ï¼Œå¸¦å®½è¾¾120GB/s é¿å¼€FP16é™·é˜±ï¼šè‹¹æœGPUæ¶æ„å¯¹FP16æ”¯æŒå¼±äºBF16 40% è¶…å¤§æ¨¡å‹æ–¹æ¡ˆï¼š # M3 Max 36GBå†…å­˜è¿è¡Œ70Bæ¨¡å‹ç¤ºä¾‹ ./main -m llama-3-70b-Q4_K_M.gguf -n 512 --gpu-layers 99 âœ… å¯ç”¨--gpu-layers 99å°†è®¡ç®—å¸è½½è‡³GPUï¼Œé¿å…CPUç“¶é¢ˆ NVIDIA GPU ç”¨æˆ· (RTX 30/40ç³»åˆ—) æ—¥å¸¸æ¨ç†ï¼šFP16ï¼ˆTensor CoreåŸç”ŸåŠ é€Ÿï¼‰ æé™å‹ç¼©ï¼šAWQé‡åŒ–INT4ï¼ˆæ¯”GGUFç²¾åº¦é«˜5-8%ï¼‰ é¿å‘ï¼šç¦ç”¨PyTorchçš„torch.float16è‡ªåŠ¨è½¬æ¢ï¼Œæ”¹ç”¨tensorrt-llm æ‰‹æœº/è¾¹ç¼˜è®¾å¤‡ ä¼˜å…ˆé€‰INT8+çŸ¥è¯†è’¸é¦å°æ¨¡å‹ï¼ˆå¦‚Phi-3-miniï¼‰ é«˜é€šèŠ¯ç‰‡ç”¨QNN SDKéƒ¨ç½²ï¼Œé¿å…TensorFlow Liteç²¾åº¦å´©å äº”ã€å®æˆ˜ï¼šä¸‰æ­¥é€‰å‡ºä½ çš„é‡åŒ–æ–¹æ¡ˆ è¯Šæ–­ç¡¬ä»¶ï¼š M3 Pro 18GB â†’ BF16è·‘13Bä»¥ä¸‹æ¨¡å‹ï¼ŒINT4ä»…ä½œ70Bæ¨¡å‹å¤‡é€‰ RTX 4080 16GB â†’ FP16è·‘30Bï¼ŒINT4è·‘70B è¯„ä¼°ä»»åŠ¡ï¼š ä»»åŠ¡ç±»å‹ å®‰å…¨é‡åŒ– é«˜å±é‡åŒ– èŠå¤©/åˆ›ä½œ INT8 INT4 ä»£ç ç”Ÿæˆ BF16/FP16 âŒ é¿å…INT4 é€»è¾‘æ¨ç† BF16 âŒ é¿å…&lt;8bit éªŒè¯ç²¾åº¦ï¼š ç”¨MMLUæˆ–TruthfulQAæµ‹è¯• çº¢çº¿ï¼šç²¾åº¦æŸå¤±&gt;5%å¿…é¡»å›é€€ï¼ å…­ã€æœªæ¥å·²æ¥ï¼šé‡åŒ–æŠ€æœ¯çš„ä¸‹ä¸€ç«™ åŠ¨æ€é‡åŒ–ï¼šMetaçš„BitNetå®ç°b-bitåŠ¨æ€è°ƒæ•´ï¼Œæ¨ç†æ—¶è‡ªåŠ¨åˆ‡æ¢ç²¾åº¦ è‹¹æœç ´å±€ï¼šM4èŠ¯ç‰‡æˆ–é›†æˆINT4åŠ é€Ÿå™¨ï¼ˆä¸“åˆ©US20230385530A1å·²æ›å…‰ï¼‰ ç»Ÿä¸€æ ‡å‡†ï¼šMLXæ¡†æ¶å°†ç»ˆç»“æ ¼å¼å‰²è£‚ï¼ŒM3 Proæ˜å¹´æ”¯æŒåŸç”ŸINT4 ç»ˆæå»ºè®®ï¼š Macç”¨æˆ·ï¼šåšæŒBF16ï¼Œ36GBå†…å­˜ç‰ˆM3 Maxæ˜¯70Bæ¨¡å‹çš„æœ€ä¼˜è§£ NVIDIAç”¨æˆ·ï¼šFP16+AWQ INT4åŒé…ç½®ï¼Œç”¨vLLMè‡ªåŠ¨åˆ‡æ¢ æ‰€æœ‰äººï¼šINT4ä»…ä½œâ€œæœ€åæ‰‹æ®µâ€ï¼ŒBF16/FP16æ‰æ˜¯ç”Ÿäº§åŠ›ä¸»åŠ› é‡åŒ–ä¸æ˜¯å¦¥åï¼Œè€Œæ˜¯æ™ºæ…§çš„å‹ç¼©ã€‚å½“ä½ åœ¨M3 Proä¸Šæµç•…è¿è¡Œ30Bæ¨¡å‹æ—¶ï¼Œä¼šæ˜ç™½ï¼šçœŸæ­£çš„AIæ°‘ä¸»åŒ–ï¼Œå§‹äºæ¯ä¸€æ¬¡ç²¾å‡†çš„ä½å®½é€‰æ‹©ã€‚ é™„ï¼šå·¥å…·é“¾æ¨è è‹¹æœç”Ÿæ€ï¼šMLX + llama.cpp NVIDIAç”Ÿæ€ï¼šTensorRT-LLM + AutoGPTQ é€šç”¨è½¬æ¢ï¼šHuggingFace Optimum æœ¬æ–‡å®æµ‹æ•°æ®åŸºäºM3 Pro 18æ ¸GPU (åˆ†é…18GB) + macOS Tahoe 26.1ï¼Œæ¨¡å‹Llama-3-8B-Instructã€‚ç¡¬ä»¶è¿­ä»£è¿…é€Ÿï¼Œå»ºè®®ä»¥æœ€æ–°åŸºå‡†ä¸ºå‡†ã€‚ #AIå·¥ç¨‹åŒ– #æ¨¡å‹éƒ¨ç½² #AppleSilicon #å¤§æ¨¡å‹ä¼˜åŒ–","link":"/225323a0.html"},{"title":"Discussion and analysis of Text2SQL technology, the most difficult pain point in the commercial implementation of agents.ï¼ˆAgentå•†ä¸šè½åœ°é‡Œæœ€éš¾çš„ç—›ç‚¹Text2SQLæŠ€æœ¯æ¢è®¨å’Œè§£æï¼‰","text":"Agentå•†ä¸šè½åœ°é‡Œæœ€éš¾çš„æ˜¯Text2SQLï¼ˆNL2SQLï¼‰ï¼Œå‡ ä¹æ˜¯æ— æ³•ç»•å¼€çš„æ ¸å¿ƒç—›ç‚¹ï¼Œä¸»è¦é¢ä¸´çš„ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š ä¸ºä»€ä¹ˆåˆ°ç›®å‰ä¸ºæ­¢ä»ç„¶æ²¡æœ‰çœŸæ­£å¯é çš„å•†ä¸šå…±è¯†æ€§ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆï¼Ÿ å®é™…ä¼ä¸šåº”ç”¨åœºæ™¯ä¸­ï¼Œæœ‰å“ªäº›é è°±çš„æ€è·¯å’Œè§£å†³æ–¹æ¡ˆï¼Ÿ æ˜¯ä¾æ‰˜ä¸“æœ‰å°æ¨¡å‹è¿˜æ˜¯åŸºäºæ¨¡ç‰ˆå®å¥—ç”¨æ›¿æ¢å˜é‡çš„æ–¹å¼ï¼Ÿ å¦‚æœæ˜¯ä½ ï¼Œä½ æ€ä¹ˆè®¾è®¡ä¸€ä¸ªå‡†ç¡®ç‡è¶³å¤Ÿé«˜çš„text2sqlå¼•æ“ï¼Ÿ è¿™æ˜¯ä¸€ä¸ªéå¸¸æ·±åˆ»ä¸”ç›´å‡»è¦å®³çš„å•†ä¸šè½åœ°é—®é¢˜ã€‚Text-to-SQLï¼ˆæˆ–è€…è¯´ï¼Œæ›´å¹¿ä¹‰çš„NL2SQL/Text2Analyticsï¼‰ä¸‹é¢æˆ‘å°†ä»â€œä¸ºä»€ä¹ˆéš¾â€ã€â€œç°æœ‰é è°±çš„æ€è·¯â€ä»¥åŠâ€œæŠ€æœ¯é€‰å‹â€ä¸‰ä¸ªå±‚é¢ï¼Œç³»ç»Ÿåœ°æ‹†è§£è¿™ä¸ªé—®é¢˜ã€‚ ä¸€ã€ä¸ºä»€ä¹ˆText-to-SQLæ²¡æœ‰çœŸæ­£å¯é çš„å…±è¯†æ€§ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆï¼Ÿç®€å•æ¥è¯´ï¼ŒText-to-SQLçš„éš¾åº¦åœ¨äºå®ƒè¯•å›¾ç”¨AIå¼¥åˆâ€œäººç±»æ¨¡ç³Šæ„å›¾â€ä¸â€œæœºå™¨ç²¾ç¡®é€»è¾‘â€ä¹‹é—´çš„é¸¿æ²Ÿï¼Œè€Œè¿™ä¸ªé¸¿æ²Ÿåœ¨ä¼ä¸šçº§åœºæ™¯ä¸­è¢«æ— é™æ”¾å¤§äº†ã€‚ å…·ä½“æŒ‘æˆ˜ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªå±‚é¢ï¼š 1. è‡ªç„¶è¯­è¨€çš„â€œæ— é™â€ä¸SQLé€»è¾‘çš„â€œæœ‰é™â€ä¹‹é—´çš„çŸ›ç›¾ æ­§ä¹‰æ€§ï¼š â€œä¸Šä¸ªæœˆçš„é”€å”®â€æ˜¯æŒ‡è®¢å•åˆ›å»ºæ—¶é—´ã€æ”¯ä»˜æ—¶é—´è¿˜æ˜¯å‘è´§æ—¶é—´ï¼Ÿâ€œtopå®¢æˆ·â€æ˜¯æŒ‰æ¶ˆè´¹é‡‘é¢ã€è®¢å•é¢‘æ¬¡è¿˜æ˜¯å®¢å•ä»·æ’åï¼Ÿäººç±»éœ€è¦ä¸Šä¸‹æ–‡å’Œå…±è¯†ï¼Œä½†æœºå™¨æ²¡æœ‰ã€‚ å£è¯­åŒ–ä¸å¤æ‚æ€§ï¼š ç”¨æˆ·ä¼šé—®ï¼šâ€œå¸®æˆ‘çœ‹çœ‹å¼ ä¸‰è´Ÿè´£çš„åä¸œåŒºï¼Œæœ€è¿‘ä¸‰ä¸ªæœˆé™¤äº†Aäº§å“ä¹‹å¤–ï¼Œæ‰€æœ‰Bç±»å®¢æˆ·çš„é”€å”®é¢ç¯æ¯”å¢é•¿æƒ…å†µï¼Œå†è·Ÿå»å¹´åŒæœŸæ¯”ä¸€ä¸‹ã€‚â€ è¿™å¥è¯åŒ…å«äº†å¤šå±‚åµŒå¥—çš„è¿‡æ»¤ã€è¿æ¥ã€èšåˆå’Œæ—¶é—´çª—å£è®¡ç®—ï¼Œç›´æ¥è½¬æ¢æˆSQLæå…¶å¤æ‚ã€‚ 2. ä¼ä¸šçº§æ•°æ®çš„â€œè„ä¹±å·®â€ä¸ä¸šåŠ¡é€»è¾‘çš„â€œéšæ€§çŸ¥è¯†â€ Schemaç†è§£å›°éš¾ï¼š ä¼ä¸šæ•°æ®åº“è¡¨ç»“æ„å¤æ‚ã€å‘½åä¸è§„èŒƒï¼ˆt_usr_infoã€col_nmï¼‰ã€ç¼ºä¹æ³¨é‡Šã€‚æ¨¡å‹å¾ˆéš¾ä»…é è¡¨åå’Œåˆ—åå°±ç†è§£user_idå’Œcustomer_idå¯èƒ½æŒ‡å‘åŒä¸€ä¸ªå®ä½“ã€‚ ä¸šåŠ¡é€»è¾‘é»‘ç›’ï¼š â€œVIPå®¢æˆ·â€ã€â€œæ´»è·ƒç”¨æˆ·â€ã€â€œæœ‰æ•ˆè®¢å•â€è¿™äº›æ¦‚å¿µï¼Œåœ¨æ•°æ®åº“é‡Œå¾€å¾€ä¸æ˜¯ä¸€ä¸¤ä¸ªå­—æ®µï¼Œè€Œæ˜¯ä¸€å¥—å¤æ‚çš„è®¡ç®—é€»è¾‘ï¼ˆå¯èƒ½éœ€è¦å…³è”å¤šå¼ è¡¨ï¼Œè¿›è¡Œå¤šå±‚è®¡ç®—ï¼‰ã€‚è¿™äº›éšæ€§çŸ¥è¯†æ˜¯æ¨¡å‹æ— æ³•ä»æ•°æ®åº“ç»“æ„ä¸­å­¦ä¹ åˆ°çš„ï¼Œå®ƒå­˜åœ¨äºä¸šåŠ¡ä¸“å®¶çš„è„‘å­é‡Œã€‚ æ•°æ®è´¨é‡é—®é¢˜ï¼š ç©ºå€¼ã€å¼‚å¸¸å€¼ã€ä¸ä¸€è‡´çš„æ ¼å¼ï¼ˆå¦‚æ—¥æœŸ2025-12-03å’Œ12/03/2025å¹¶å­˜ï¼‰éƒ½ä¼šè®©ç”Ÿæˆçš„SQLæ‰§è¡Œå¤±è´¥æˆ–è¿”å›é”™è¯¯ç»“æœã€‚ 3. ç»“æœçš„â€œå‡†ç¡®æ€§â€ä¸â€œå®‰å…¨æ€§â€è¦æ±‚æé«˜ å®¹é”™ç‡æä½ï¼š åœ¨Cç«¯èŠå¤©æœºå™¨äººä¸­ï¼ŒAIç­”é”™ä¸€ä¸ªé—®é¢˜å¯èƒ½åªæ˜¯ä¸ªç¬‘è¯ã€‚ä½†åœ¨ä¼ä¸šåˆ†æåœºæ™¯ï¼Œä¸€ä¸ªé”™è¯¯çš„SQLå¯èƒ½å¯¼è‡´ç¾éš¾æ€§çš„ä¸šåŠ¡å†³ç­–ã€‚æ¯”å¦‚ï¼Œå› SQLé”™è¯¯å¯¼è‡´é”€å”®é¢è¢«ä½ä¼°10%ï¼Œå¯èƒ½ä¼šå½±å“æ•´ä¸ªå­£åº¦çš„å¸‚åœºç­–ç•¥ã€‚ å®‰å…¨é£é™©ï¼š ç”Ÿæˆçš„SQLå¿…é¡»è¢«ä¸¥æ ¼é™åˆ¶ã€‚å¦‚æœæ¨¡å‹ç”Ÿæˆäº†DROP TABLEæˆ–UPDATEç­‰é«˜å±æ“ä½œï¼Œåæœä¸å ªè®¾æƒ³ã€‚åŒæ—¶ï¼Œå¤æ‚çš„æŸ¥è¯¢ï¼ˆå¦‚å¤šè¡¨ç¬›å¡å°”ç§¯ï¼‰å¯èƒ½ä¼šæ‹–å®æ•´ä¸ªæ•°æ®åº“ï¼Œå½±å“çº¿ä¸Šä¸šåŠ¡ã€‚ 4. è¯„ä¼°å’Œè¿­ä»£çš„â€œé»‘ç›’â€å›°å¢ƒ å¦‚ä½•å®šä¹‰â€œå¥½â€ï¼š SQLè¯­æ³•æ­£ç¡®ä¸ç­‰äºç»“æœæ­£ç¡®ã€‚ç»“æœæ­£ç¡®ä¸ç­‰äºç¬¦åˆç”¨æˆ·â€œçœŸå®â€æ„å›¾ã€‚è¯„ä¼°Text-to-SQLç³»ç»Ÿéœ€è¦å¤§é‡çš„ã€ç”±ä¸šåŠ¡ä¸“å®¶æ ‡æ³¨çš„ï¼ˆé—®é¢˜ï¼ŒSQLï¼Œæ­£ç¡®ç»“æœï¼‰ä¸‰å…ƒç»„ï¼Œæˆæœ¬æé«˜ã€‚ è¿­ä»£å›°éš¾ï¼š å½“ä¸€ä¸ªæŸ¥è¯¢å‡ºé”™æ—¶ï¼Œå¾ˆéš¾å¿«é€Ÿå®šä½æ˜¯æ¨¡å‹ç†è§£é”™äº†ã€ä¸šåŠ¡é€»è¾‘æ²¡å¯¹é½ï¼Œè¿˜æ˜¯æ•°æ®æœ¬èº«çš„é—®é¢˜ã€‚è°ƒè¯•å’Œä¼˜åŒ–çš„é“¾æ¡éå¸¸é•¿ã€‚ å°ç»“ï¼š æ­£æ˜¯å› ä¸ºä¸Šè¿°æŒ‘æˆ˜çš„å åŠ ï¼Œå¯¼è‡´ä¸€ä¸ªâ€œæ”¾ä¹‹å››æµ·è€Œçš†å‡†â€çš„é€šç”¨å¤§æ¨¡å‹ï¼Œæ— æ³•ç›´æ¥èƒœä»»ä¼ä¸šçº§Text-to-SQLä»»åŠ¡ã€‚å®ƒç¼ºå°‘å¯¹ä¼ä¸šå†…éƒ¨ç‰¹å®šæ•°æ®ã€ä¸šåŠ¡é€»è¾‘å’Œå®‰å…¨è¾¹ç•Œçš„æ·±åº¦ç†è§£ã€‚ äºŒã€å®é™…ä¼ä¸šåº”ç”¨åœºæ™¯ä¸­ï¼Œæœ‰å“ªäº›é è°±çš„æ€è·¯å’Œè§£å†³æ–¹æ¡ˆï¼Ÿç›®å‰ä¸šç•Œæ²¡æœ‰é“¶å¼¹ï¼Œä½†å·²ç»å½¢æˆäº†ä¸€äº›è¡Œä¹‹æœ‰æ•ˆçš„æ··åˆæ¶æ„æ¨¡å¼ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ï¼šç”¨AIçš„å¼ºå¤§èƒ½åŠ›å¤„ç†â€œç†è§£â€éƒ¨åˆ†ï¼Œç”¨ä¼ ç»Ÿå·¥ç¨‹çš„ç¡®å®šæ€§æ¥ä¿è¯â€œæ‰§è¡Œâ€çš„å‡†ç¡®å’Œå®‰å…¨ã€‚ ä»¥ä¸‹æ˜¯å‡ ç§ä»ç®€å•åˆ°å¤æ‚çš„é è°±æ€è·¯ï¼š æ€è·¯ä¸€ï¼šæ¨¡æ¿/å®æ›¿æ¢ï¼ˆå¯æ§æ€§æœ€å¼ºï¼‰è¿™æ˜¯æœ€â€œå¤å…¸â€ä½†æœ€ç¨³å¦¥çš„æ–¹æ³•ï¼Œé€‚ç”¨äºé«˜é¢‘ã€æ ‡å‡†åŒ–çš„æŸ¥è¯¢åœºæ™¯ã€‚ åšæ³•ï¼š å®šä¹‰æ„å›¾ï¼š é¢„å…ˆå®šä¹‰å¥½ç”¨æˆ·å¯èƒ½é—®çš„å‡ ç±»é—®é¢˜ï¼Œå¦‚â€œæŸ¥è¯¢æŸäº§å“æŸæ—¶é—´æ®µçš„é”€å”®é¢â€ã€â€œå¯¹æ¯”æŸä¸¤ä¸ªæŒ‡æ ‡çš„è¶‹åŠ¿â€ã€‚ åˆ¶ä½œæ¨¡æ¿ï¼š ä¸ºæ¯ä¸ªæ„å›¾ç¼–å†™ä¸€ä¸ªæˆ–å¤šä¸ªSQLæ¨¡æ¿ï¼Œæ¨¡æ¿ä¸­ç”¨å˜é‡å ä½ç¬¦ï¼ˆå¦‚${product_name}, ${start_date}ï¼‰ä»£æ›¿å…·ä½“å€¼ã€‚ æ„å›¾è¯†åˆ«ä¸æ§½ä½å¡«å……ï¼š å½“ç”¨æˆ·æé—®æ—¶ï¼Œå…ˆç”¨ä¸€ä¸ªè½»é‡çº§çš„NLPæ¨¡å‹ï¼ˆæˆ–è§„åˆ™ï¼‰è¯†åˆ«å‡ºç”¨æˆ·æ„å›¾å±äºå“ªä¸ªæ¨¡æ¿ï¼Œç„¶åæŠ½å–å‡ºå¯¹åº”çš„å˜é‡å€¼ã€‚ SQLç”Ÿæˆä¸æ‰§è¡Œï¼š å°†å˜é‡å€¼å¡«å…¥æ¨¡æ¿ï¼Œç”Ÿæˆæœ€ç»ˆçš„SQLï¼Œåœ¨åªè¯»æ•°æ®åº“ä¸Šæ‰§è¡Œã€‚ ä¼˜ç‚¹ï¼š 100%å¯æ§ã€å®‰å…¨ã€ç»“æœå‡†ç¡®ã€å¼€å‘æˆæœ¬ä½ã€‚ ç¼ºç‚¹ï¼š æä¸çµæ´»ï¼Œæ— æ³•å¤„ç†æ¨¡æ¿ä¹‹å¤–çš„ä»»ä½•é—®é¢˜ï¼Œç»´æŠ¤æˆæœ¬éšæ¨¡æ¿æ•°é‡å¢åŠ è€Œä¸Šå‡ã€‚ é€‚ç”¨åœºæ™¯ï¼š å›ºå®šæŠ¥è¡¨ã€BIçœ‹æ¿çš„è‡ªç„¶è¯­è¨€äº¤äº’å…¥å£ã€‚ æ€è·¯äºŒï¼šè¯­ä¹‰è§£æ + æ··åˆæ¨¡å¼ï¼ˆå¹³è¡¡æ€§ä¸çµæ´»æ€§å…¼å¤‡ï¼‰è¿™æ˜¯ç›®å‰ä¼ä¸šçº§åº”ç”¨æœ€ä¸»æµã€æœ€åŠ¡å®çš„æ–¹æ¡ˆã€‚ æ ¸å¿ƒç»„ä»¶ï¼š å…ƒæ•°æ®å±‚/çŸ¥è¯†å›¾è°±ï¼š è¿™æ˜¯æ•´ä¸ªæ–¹æ¡ˆçš„åŸºçŸ³ï¼äººå·¥æˆ–åŠè‡ªåŠ¨åœ°æ„å»ºä¸€ä¸ªå±‚ï¼Œå®ƒä¸ä»…åŒ…å«æ•°æ®åº“çš„Schemaï¼ˆè¡¨ã€åˆ—ã€ç±»å‹ï¼‰ï¼Œæ›´é‡è¦çš„æ˜¯åŒ…å«ä¸šåŠ¡æœ¯è¯­æ˜ å°„ï¼ˆå¦‚â€œGMVâ€å¯¹åº”order_table.pay_amountï¼‰ã€ä¸šåŠ¡é€»è¾‘å®šä¹‰ï¼ˆå¦‚â€œVIPå®¢æˆ·â€çš„å®šä¹‰SQLï¼‰ã€è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»ç­‰ã€‚ æ„å›¾ä¸å®ä½“è¯†åˆ«ï¼š ä½¿ç”¨LLMæˆ–ä¼ ç»Ÿæ¨¡å‹ï¼Œå°†ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€é—®é¢˜æ‹†è§£ä¸ºï¼šæ„å›¾ï¼ˆåšä»€ä¹ˆï¼Œå¦‚è¶‹åŠ¿åˆ†æã€ç»´åº¦ä¸‹é’»ï¼‰ã€æŒ‡æ ‡ï¼ˆçœ‹ä»€ä¹ˆï¼Œå¦‚é”€å”®é¢ã€ç”¨æˆ·æ•°ï¼‰ã€ç»´åº¦ï¼ˆä»ä»€ä¹ˆè§’åº¦çœ‹ï¼Œå¦‚æŒ‰äº§å“çº¿ã€æŒ‰åœ°åŒºï¼‰ã€ç­›é€‰æ¡ä»¶ï¼ˆé™å®šèŒƒå›´ï¼Œå¦‚æ—¶é—´=æœ€è¿‘30å¤©ï¼‰ã€‚ è¯­ä¹‰è§£æä¸SQLç»„è£…ï¼š å°†è¯†åˆ«å‡ºçš„æŒ‡æ ‡ã€ç»´åº¦é€šè¿‡å…ƒæ•°æ®å±‚æ˜ å°„åˆ°å…·ä½“çš„è¡¨å’Œå­—æ®µã€‚ å°†æ„å›¾è½¬åŒ–ä¸ºSQLçš„æ“ä½œç±»å‹ï¼ˆSELECT, GROUP BY, ORDER BYç­‰ï¼‰ã€‚ å°†ç­›é€‰æ¡ä»¶è½¬åŒ–ä¸ºWHEREå­å¥ã€‚ ç”±ä¸€ä¸ªSQLç»„è£…å™¨å°†è¿™äº›è§£æå¥½çš„ç‰‡æ®µï¼Œæ ¹æ®é¢„å®šä¹‰çš„è§„åˆ™ï¼Œæ‹¼è£…æˆä¸€æ¡åˆæ³•çš„SQLã€‚ ä¼˜ç‚¹ï¼š æ¯”çº¯æ¨¡æ¿çµæ´»ï¼Œæ¯”çº¯LLMå¯æ§ã€‚é€šè¿‡å…ƒæ•°æ®å±‚ï¼Œå°†å¤æ‚çš„ä¸šåŠ¡çŸ¥è¯†â€œæ³¨å…¥â€äº†ç³»ç»Ÿï¼Œè§£å†³äº†æ¨¡å‹ä¸çŸ¥é“â€œVIPå®¢æˆ·â€æ˜¯ä»€ä¹ˆçš„é—®é¢˜ã€‚ ç¼ºç‚¹ï¼š æ¶æ„å¤æ‚ï¼Œå‰æœŸæ„å»ºå…ƒæ•°æ®å±‚çš„å·¥ä½œé‡å·¨å¤§ï¼Œéœ€è¦ä¸šåŠ¡ä¸“å®¶æ·±åº¦å‚ä¸ã€‚ æ€è·¯ä¸‰ï¼šå¤§æ¨¡å‹å¢å¼ºä¸ç²¾è°ƒï¼ˆè¿½æ±‚æè‡´çš„çµæ´»æ€§ï¼‰è¿™æ˜¯æŠ€æœ¯æœ€å‰æ²¿çš„æ–¹æ¡ˆï¼Œæ—¨åœ¨å¤„ç†æ›´å¼€æ”¾ã€æ›´å¤æ‚çš„æ¢ç´¢æ€§åˆ†æã€‚ æ ¸å¿ƒæŠ€æœ¯ï¼š æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ï¼š è¿™æ˜¯å¿…ä¸å¯å°‘çš„ä¸€æ­¥ã€‚åœ¨å‘LLMæé—®å‰ï¼Œå…ˆä»å…ƒæ•°æ®å±‚/çŸ¥è¯†å›¾è°±ä¸­æ£€ç´¢å‡ºä¸é—®é¢˜æœ€ç›¸å…³çš„è¡¨ç»“æ„ã€å­—æ®µæè¿°ã€ä¸šåŠ¡é€»è¾‘è¯´æ˜ã€ç”šè‡³å‡ ä¸ªé«˜è´¨é‡çš„ï¼ˆé—®é¢˜ï¼ŒSQLï¼‰ç¤ºä¾‹ï¼Œç„¶åå°†è¿™äº›ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸€èµ·å¡ç»™LLMã€‚ Promptç¤ºä¾‹ï¼š â€œä½ æ˜¯ä¸€ä¸ªSQLä¸“å®¶ã€‚ä»¥ä¸‹æ˜¯æ•°æ®åº“çš„è¡¨ç»“æ„å’Œç›¸å…³ä¸šåŠ¡è¯´æ˜â€¦ [æ­¤å¤„æ’å…¥RAGæ£€ç´¢åˆ°çš„ä¿¡æ¯]â€¦ è¯·æ ¹æ®ä»¥ä¸Šä¿¡æ¯ï¼Œå°†ä»¥ä¸‹é—®é¢˜è½¬æ¢ä¸ºSQLï¼šâ€™â€¦â€™â€ æ¨¡å‹ç²¾è°ƒï¼š å¦‚æœæœ‰è¶³å¤Ÿçš„é«˜è´¨é‡æ ‡æ³¨æ•°æ®ï¼ˆé—®é¢˜ï¼ŒSQLï¼‰ï¼Œå¯ä»¥å¯¹å¼€æºå¤§æ¨¡å‹ï¼ˆå¦‚CodeLlama, StarCoderï¼‰æˆ–é€šè¿‡APIå¯¹é—­æºæ¨¡å‹è¿›è¡Œç²¾è°ƒï¼Œè®©å®ƒæ›´ç†Ÿæ‚‰è‡ªå·±å…¬å¸çš„æ•°æ®æ¨¡å¼å’Œæé—®é£æ ¼ã€‚ SQLæ ¡éªŒä¸æ‰§è¡Œæ²™ç®±ï¼š è¿™æ˜¯æœ€åçš„é˜²çº¿ã€‚ è¯­æ³•æ ¡éªŒï¼š ç”¨SQLè§£æå™¨æ£€æŸ¥ç”Ÿæˆçš„SQLè¯­æ³•æ˜¯å¦æ­£ç¡®ã€‚ æƒé™ä¸å®‰å…¨æ ¡éªŒï¼š è®¾ç½®ç™½åå•ï¼Œåªå…è®¸SELECTæ“ä½œï¼Œç¦æ­¢DROP/UPDATE/DELETEã€‚é™åˆ¶æŸ¥è¯¢çš„å¤æ‚åº¦å’Œæ‰§è¡Œæ—¶é—´ã€‚ æ²™ç®±æ‰§è¡Œï¼š åœ¨æ•°æ®åº“çš„åªè¯»å‰¯æœ¬ä¸Šæ‰§è¡Œï¼Œå¹¶è®¾ç½®èµ„æºä¸Šé™ï¼Œé˜²æ­¢æŸ¥è¯¢æ‰“å®ç”Ÿäº§åº“ã€‚ ç»“æœåˆç†æ€§æ ¡éªŒï¼š ç®€å•æ£€æŸ¥è¿”å›çš„è¡Œæ•°ã€æ•°å€¼èŒƒå›´æ˜¯å¦åœ¨åˆç†åŒºé—´ã€‚ ä¼˜ç‚¹ï¼š èƒ½å¤„ç†æœ€å¤æ‚çš„ã€å¼€æ”¾å¼çš„æŸ¥è¯¢ï¼Œç”¨æˆ·ä½“éªŒæœ€å¥½ï¼Œæœ€æ¥è¿‘â€œæ™ºèƒ½åˆ†æå¸ˆâ€ã€‚ ç¼ºç‚¹ï¼š æˆæœ¬æœ€é«˜ï¼ˆAPIè°ƒç”¨ã€GPUç®—åŠ›ï¼‰ï¼ŒæŠ€æœ¯æ ˆæœ€å¤æ‚ï¼Œå¯¹RAGçš„è´¨é‡å’Œæ ¡éªŒæœºåˆ¶çš„ä¾èµ–æ€§æå¼ºï¼Œä»æœ‰â€œå¹»è§‰â€é£é™©ã€‚ ä¸‰ã€æ˜¯ä¾æ‰˜ä¸“æœ‰å°æ¨¡å‹è¿˜æ˜¯åŸºäºæ¨¡ç‰ˆå®å¥—ç”¨æ›¿æ¢å˜é‡çš„æ–¹å¼ï¼Ÿè¿™ä¸ªé—®é¢˜æœ¬èº«æ˜¯ä¸€ä¸ªä¼ªäºŒåˆ†æ³•ã€‚æ­£ç¡®çš„ç­”æ¡ˆæ˜¯ï¼šæ ¹æ®åœºæ™¯ï¼Œç»„åˆä½¿ç”¨ï¼Œå®ƒä»¬ä¸æ˜¯äº’æ–¥å…³ç³»ã€‚ åŸºäºæ¨¡ç‰ˆå®å¥—ç”¨æ›¿æ¢å˜é‡ï¼šæœ¬è´¨ä¸Šæ˜¯â€œè§„åˆ™å¼•æ“â€ã€‚å®ƒå¤„ç†çš„æ˜¯ç¡®å®šæ€§é—®é¢˜ã€‚å¯¹äºä¼ä¸šé‡Œ80%çš„å¸¸è§„ã€é«˜é¢‘åˆ†æéœ€æ±‚ï¼Œç”¨æ¨¡æ¿+è§„åˆ™æ¥è¦†ç›–ï¼Œæ˜¯æˆæœ¬æ•ˆç›Šæœ€é«˜çš„é€‰æ‹©ã€‚è¿™ä¿è¯äº†ç³»ç»Ÿçš„ä¸‹é™ï¼ˆç¨³å®šã€å¯é ï¼‰ã€‚ ä¾æ‰˜ä¸“æœ‰å°æ¨¡å‹ï¼šè¿™ä¸ªè¯´æ³•æ¯”è¾ƒå®½æ³›ã€‚åœ¨æ··åˆæ¶æ„ä¸­ï¼Œå°æ¨¡å‹å¯ä»¥æ‰®æ¼”ç‰¹å®šè§’è‰²ï¼Œæ¯”å¦‚ï¼š æ„å›¾åˆ†ç±»æ¨¡å‹ï¼šä¸€ä¸ªå‡ ç™¾ä¸‡å‚æ•°çš„å°æ¨¡å‹ï¼Œè¶³ä»¥å¿«é€Ÿå‡†ç¡®åœ°åˆ¤æ–­ç”¨æˆ·é—®é¢˜å±äºâ€œé”€å”®åˆ†æâ€ã€â€œç”¨æˆ·åˆ†æâ€è¿˜æ˜¯â€œåº“å­˜åˆ†æâ€ã€‚ å®ä½“è¯†åˆ«æ¨¡å‹ï¼šä¸“é—¨è´Ÿè´£ä»é—®é¢˜ä¸­æŠ½å–å‡ºäº§å“åã€äººåã€åœ°åç­‰ã€‚ ç²¾è°ƒåçš„Text-to-SQLå°æ¨¡å‹ï¼šå¯¹äºæ•°æ®ç»“æ„ç›¸å¯¹ç®€å•ã€ä¸šåŠ¡é€»è¾‘ä¸é‚£ä¹ˆå¤æ‚çš„å‚ç›´åœºæ™¯ï¼Œå¯ä»¥å°è¯•ç”¨å°æ¨¡å‹åšç«¯åˆ°ç«¯çš„Text-to-SQLã€‚ä½†åœ¨å¤§å‹å¤æ‚ä¼ä¸šä¸­ï¼Œå®ƒå¾ˆéš¾ç‹¬è‡ªèƒœä»»ã€‚ æœ€ä½³å®è·µçš„ç»“åˆè·¯å¾„ï¼š åŸºç¡€å±‚ï¼ˆè§„åˆ™ä¸æ¨¡æ¿ï¼‰ï¼š ç”¨æ¨¡æ¿å’Œå®è¦†ç›–æ‰€æœ‰å·²çŸ¥çš„ã€æ ‡å‡†åŒ–çš„åˆ†æåœºæ™¯ã€‚è¿™æ˜¯ç³»ç»Ÿçš„â€œå®‰å…¨å«â€ã€‚ å¢å¼ºå±‚ï¼ˆå°æ¨¡å‹ä¸å¤§æ¨¡å‹æ··åˆï¼‰ï¼š å½“ç”¨æˆ·é—®é¢˜è¶…å‡ºæ¨¡æ¿èŒƒå›´æ—¶ï¼Œå¯åŠ¨æ··åˆæ¶æ„ã€‚ ç”¨å°æ¨¡å‹æˆ–è½»é‡çº§LLMåšç¬¬ä¸€æ­¥çš„æ„å›¾è¯†åˆ«å’Œå®ä½“æŠ½å–ï¼Œè¿™ä¸€æ­¥è¦æ±‚å¿«å’Œå‡†ï¼Œå°æ¨¡å‹æ€§ä»·æ¯”é«˜ã€‚ å°†è§£æåçš„â€œè¯­ä¹‰ç‰‡æ®µâ€äº¤ç»™æ ¸å¿ƒå¼•æ“ã€‚è¿™ä¸ªå¼•æ“å¯ä»¥æ˜¯ä¸€ä¸ªåŸºäºå…ƒæ•°æ®çš„SQLç»„è£…å™¨ï¼ˆæ€è·¯äºŒï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç»è¿‡RAGå¢å¼ºçš„å¤§æ¨¡å‹ï¼ˆæ€è·¯ä¸‰ï¼‰ï¼Œç”±å®ƒæ¥ç”Ÿæˆæœ€ç»ˆçš„å¤æ‚SQLã€‚ å…œåº•å±‚ï¼ˆäººå·¥ä»‹å…¥ï¼‰ï¼š å½“AIæ— æ³•å¤„ç†æˆ–ç½®ä¿¡åº¦ä½æ—¶ï¼Œå¹³æ»‘åœ°å°†é—®é¢˜è½¬ç»™äººå·¥åˆ†æå¸ˆï¼Œå¹¶å°†è¿™æ¬¡äº¤äº’è®°å½•ä¸‹æ¥ï¼Œä½œä¸ºæœªæ¥ä¼˜åŒ–æ¨¡å‹çš„å®è´µæ•°æ®ã€‚ è®¾è®¡ä¸€ä¸ªé«˜å‡†ç¡®ç‡ï¼ˆâ‰¥95%ï¼‰ä¸”å…·å¤‡å¼ºå¤§å®¡æŸ¥æœºåˆ¶çš„Text-to-SQLç³»ç»Ÿï¼Œéœ€è¦ç³»ç»ŸåŒ–çš„æ¶æ„è®¾è®¡å’Œå¤šå±‚æ¬¡çš„ä¿éšœæœºåˆ¶ã€‚æˆ‘ä¼šç»“åˆæ··åˆæ¨¡å‹ç­–ç•¥ã€ä¸¥æ ¼çš„éªŒè¯æµç¨‹å’ŒæŒç»­çš„ä¼˜åŒ–æœºåˆ¶æ¥æ„å»ºè¿™ä¸ªç³»ç»Ÿã€‚ ä¸‹é¢æ˜¯æˆ‘çš„è®¾è®¡æ€è·¯å’Œæ–¹æ¡ˆï¼Œæˆ‘ä¼šç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ¦‚æ‹¬æ ¸å¿ƒçš„è®¾è®¡ç»´åº¦å’Œç­–ç•¥ï¼š è®¾è®¡ç»´åº¦ æ ¸å¿ƒç­–ç•¥ æŠ€æœ¯é€‰å‹/æ–¹æ³•ç¤ºä¾‹ æ¨¡å‹é€‰æ‹© æ··åˆæ¨¡å‹æ¶æ„ï¼ˆå¤§æ¨¡å‹+å°æ¨¡å‹+è§„åˆ™å¼•æ“ï¼‰ã€turn0search5ã€‘ã€turn0search8ã€‘ LLMï¼ˆå¦‚GPT-4ã€Qwen-Codeï¼‰ç”¨äºç†è§£å¤æ‚æ„å›¾ï¼›å°æ¨¡å‹ï¼ˆå¦‚å¾®è°ƒçš„CodeT5ï¼‰å¤„ç†å¸¸è§„æŸ¥è¯¢ï¼›è§„åˆ™å¼•æ“å¤„ç†é«˜é¢‘æ¨¡æ¿ çŸ¥è¯†å¢å¼º æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ã€turn0search5ã€‘ã€turn0search17ã€‘ æ„å»ºä¼ä¸šçº§çŸ¥è¯†åº“ï¼ˆSchemaã€ä¸šåŠ¡æœ¯è¯­ã€æŒ‡æ ‡å£å¾„ã€ä¼˜è´¨SQLæ¡ˆä¾‹ï¼‰ è¾“å…¥å¤„ç† è‡ªç„¶è¯­è¨€ç†è§£ä¸æ„å›¾æ¾„æ¸…ã€turn0search5ã€‘ã€turn0search15ã€‘ å¤šè½®å¯¹è¯æ¾„æ¸…æ¨¡ç³Šéœ€æ±‚ï¼›è¯†åˆ«å¹¶æ’é™¤æ•æ„Ÿè¯å’Œä¸å½“æ“ä½œã€turn0search4ã€‘ SQLç”Ÿæˆä¸ä¼˜åŒ– åˆ†é˜¶æ®µç”Ÿæˆä¸ä¼˜åŒ–ã€turn0search15ã€‘ å…ˆç”Ÿæˆæ ¸å¿ƒé€»è¾‘ï¼Œå†é€æ­¥æ·»åŠ å­å¥ï¼›åŸºäºæˆæœ¬å’Œæ‰§è¡Œè®¡åˆ’çš„ä¼˜åŒ–å»ºè®® éªŒè¯ä¸å®¡æŸ¥ å¤šå±‚æ¬¡éªŒè¯ï¼ˆè¯­æ³•ã€è¯­ä¹‰ã€æ‰§è¡Œã€å®‰å…¨ï¼‰ã€turn0search4ã€‘ã€turn0search15ã€‘ SQLè§£æå™¨ã€æ²™ç®±ç¯å¢ƒã€ç»“æœé›†æ¯”å¯¹ã€æƒé™æ£€æŸ¥ã€é˜²æ³¨å…¥æ£€æµ‹ã€turn0search10ã€‘ åé¦ˆä¸å­¦ä¹  é—­ç¯åé¦ˆæœºåˆ¶ã€turn0search5ã€‘ã€turn0search8ã€‘ äººå·¥å®¡æ ¸æ ‡æ³¨ã€é”™è¯¯æ¨¡å¼è‡ªåŠ¨åˆ†æã€æ¨¡å‹æŒç»­å¾®è°ƒ æ ¸å¿ƒè®¾è®¡æ€è·¯åŸåˆ™è¦ç‚¹æˆ‘çš„è®¾è®¡éµå¾ªä»¥ä¸‹æ ¸å¿ƒåŸåˆ™ï¼š ä¸ä¿¡ä»»å•ä¸€æ¨¡å‹ï¼šæ²¡æœ‰ä»»ä½•å•ä¸€æ¨¡å‹èƒ½å¯é å¤„ç†æ‰€æœ‰å¤æ‚æ€§ï¼Œå¿…é¡»é€šè¿‡æ··åˆæ¶æ„å’Œå¤šé‡éªŒè¯æ¥è§„é¿é£é™©ã€‚ ç¡®å®šæ€§ä¼˜äºæ¦‚ç‡æ€§ï¼šåœ¨æ•°æ®æŸ¥è¯¢åœºæ™¯ï¼Œå‡†ç¡®æ€§å’Œå¯è§£é‡Šæ€§æ¯”çµæ´»æ€§æ›´é‡è¦ã€‚å¿…é¡»ç”¨è§„åˆ™å’Œç¬¦å·AIçº¦æŸå¤§æ¨¡å‹çš„â€œå¹»è§‰â€. ã€turn0search3ã€‘ã€turn0search23ã€‘ã€‚ äººæœºååŒï¼ŒæŒç»­è¿›åŒ–ï¼šç³»ç»Ÿåº”èƒ½ä»é”™è¯¯ä¸­å­¦ä¹ ï¼Œå¹¶é€šè¿‡äººå·¥å®¡æ ¸å’Œåé¦ˆæœºåˆ¶æŒç»­ä¼˜åŒ–ã€turn0search5ã€‘ã€turn0search8ã€‘ã€‚ ç³»ç»Ÿæ¶æ„è®¾è®¡åŸºæœ¬çš„è®¾è®¡çš„ç³»ç»Ÿæ¶æ„ç¤ºä¾‹å‚è€ƒï¼š flowchart TD A[ç”¨æˆ·è‡ªç„¶è¯­è¨€æé—®] --> B[è¾“å…¥é¢„å¤„ç†ä¸ç†è§£] B --> C[æ··åˆæ¨¡å‹ç”ŸæˆSQL] C --> D[å¤šå±‚æ¬¡éªŒè¯ä¸å®¡æŸ¥] D --> E[æ‰§è¡Œä¸ç»“æœè¿”å›] E --> F[åé¦ˆä¸å­¦ä¹ é—­ç¯] subgraph SB [\"è¾“å…¥é¢„å¤„ç†ä¸ç†è§£\"] B1[\"æ„å›¾è¯†åˆ«ä¸å®ä½“æŠ½å–\"] B2[\"æ•æ„Ÿè¯ä¸æƒé™æ£€æŸ¥\"] B3[\"æ­§ä¹‰æ¾„æ¸…\\nï¼ˆå¤šè½®å¯¹è¯ï¼‰\"] end subgraph SC [\"æ··åˆæ¨¡å‹ç”ŸæˆSQL\"] C1[\"å¤§æ¨¡å‹\\nï¼ˆå¤æ‚æ„å›¾ç†è§£ï¼‰\"] C2[\"å°æ¨¡å‹/å¾®è°ƒæ¨¡å‹\\nï¼ˆå¸¸è§„SQLç”Ÿæˆï¼‰\"] C3[\"è§„åˆ™å¼•æ“ä¸æ¨¡æ¿\\nï¼ˆé«˜é¢‘/æ ‡å‡†åŒ–æŸ¥è¯¢ï¼‰\"] C4[\"RAGå¢å¼º\\nï¼ˆæ£€ç´¢Schema/ç¤ºä¾‹ï¼‰\"] end subgraph SD [\"å¤šå±‚æ¬¡éªŒè¯ä¸å®¡æŸ¥\"] D1[\"è¯­æ³•ä¸è¯­ä¹‰éªŒè¯\"] D2[\"å®‰å…¨ä¸æƒé™å®¡æŸ¥\"] D3[\"æ²™ç®±æ‰§è¡Œæµ‹è¯•\"] D4[\"ç»“æœåˆç†æ€§é¢„ä¼°\"] end subgraph SF [\"åé¦ˆä¸å­¦ä¹ é—­ç¯\"] F1[\"ç”¨æˆ·åé¦ˆä¸æ ‡æ³¨\"] F2[\"é”™è¯¯æ¨¡å¼åˆ†æ\"] F3[\"æ¨¡å‹ä¸çŸ¥è¯†åº“æ›´æ–°\"] end %% å†…éƒ¨è¿æ¥ C4 --> C1 C4 --> C2 C4 --> C3 C1 --> D C2 --> D C3 --> D D --> E E --> F1 F1 --> F2 F2 --> F3 F3 --> C4 å¦‚ä½•ç¡®ä¿95%ä»¥ä¸Šçš„å‡†ç¡®ç‡ï¼Ÿæˆ–è€…è¯´å¦‚æœæ˜¯ä½ ï¼Œåº”è¯¥ä»å“ªäº›æ–¹é¢ç»¼åˆè€ƒè™‘æŠ€æœ¯æ–¹æ¡ˆï¼Ÿè¾¾åˆ°95%ä»¥ä¸Šçš„å‡†ç¡®ç‡éœ€è¦ä¾èµ–æŠ€æœ¯ã€æµç¨‹å’Œäººå‘˜ä¸‰é‡ä¿éšœã€‚ 1. æŠ€æœ¯ä¿éšœï¼šæ··åˆæ¨¡å‹ä¸çŸ¥è¯†å¢å¼º æ··åˆæ¨¡å‹ååŒï¼š å¤§æ¨¡å‹ï¼ˆå¦‚GPT-4ã€Qwen-Codeï¼‰ï¼šè´Ÿè´£ç†è§£å¤æ‚ã€æ¨¡ç³Šçš„è‡ªç„¶è¯­è¨€é—®é¢˜ï¼Œç”Ÿæˆåˆæ­¥SQLé€»è¾‘ã€turn0search5ã€‘ã€turn0search20ã€‘ã€‚ ä¸“ç”¨å°æ¨¡å‹/å¾®è°ƒæ¨¡å‹ï¼šé’ˆå¯¹ä¼ä¸šå¸¸è§æŸ¥è¯¢æ¨¡å¼è¿›è¡Œå¾®è°ƒï¼Œé«˜æ•ˆå¤„ç†ä¸­ä½éš¾åº¦æŸ¥è¯¢ï¼Œé™ä½æˆæœ¬å’Œå»¶è¿Ÿã€turn0search8ã€‘ã€‚ è§„åˆ™å¼•æ“ä¸æ¨¡æ¿ï¼šè¦†ç›–20%çš„é«˜é¢‘ã€æ ‡å‡†åŒ–æŸ¥è¯¢ï¼ˆå¦‚â€œæŒ‰æ—¥æœŸæŸ¥çœ‹é”€å”®é¢â€ï¼‰ï¼Œç¡®ä¿100%å‡†ç¡®ã€turn0search2ã€‘ã€‚ RAGçŸ¥è¯†å¢å¼ºï¼šè¿™æ˜¯æå‡å‡†ç¡®ç‡æœ€å…³é”®çš„æŠ€æœ¯ä¹‹ä¸€ã€turn0search5ã€‘ã€turn0search17ã€‘ã€‚ æ„å»ºä¼ä¸šçº§çŸ¥è¯†åº“ï¼šåŒ…æ‹¬è¡¨ç»“æ„ã€å­—æ®µæ³¨é‡Šã€ä¸šåŠ¡æœ¯è¯­ã€æŒ‡æ ‡å£å¾„ã€ä¼˜è´¨SQLæ¡ˆä¾‹ç­‰ã€‚ åŠ¨æ€æ£€ç´¢ï¼šæ ¹æ®ç”¨æˆ·é—®é¢˜ï¼Œå®æ—¶æ£€ç´¢æœ€ç›¸å…³çš„Schemaä¿¡æ¯å’Œç¤ºä¾‹SQLï¼Œæ³¨å…¥åˆ°Promptä¸­ï¼Œå¼•å¯¼æ¨¡å‹ç”Ÿæˆæ›´å‡†ç¡®çš„æŸ¥è¯¢ã€turn0search5ã€‘ã€‚ 2. æµç¨‹ä¿éšœï¼šå¤šå±‚æ¬¡éªŒè¯ä¸å®¡æŸ¥è¿™æ˜¯é˜²æ­¢é”™è¯¯SQLè¾“å‡ºåˆ°ç”Ÿäº§ç¯å¢ƒçš„å…³é”®é˜²çº¿ã€‚ éªŒè¯å±‚çº§ æ£€æŸ¥å†…å®¹ æŠ€æœ¯æ‰‹æ®µ ç›®çš„ è¯­æ³•éªŒè¯ SQLè¯­æ³•æ­£ç¡®æ€§ã€è¡¨å/å­—æ®µåå­˜åœ¨æ€§ SQLè§£æå™¨ï¼ˆå¦‚SQLGlotï¼‰ã€å…ƒæ•°æ®æŸ¥è¯¢ æœç»è¯­æ³•é”™è¯¯ï¼Œé¿å…æ‰§è¡Œå¤±è´¥ è¯­ä¹‰éªŒè¯ æŸ¥è¯¢é€»è¾‘æ˜¯å¦åˆç†ï¼ˆå¦‚JOINæ¡ä»¶ã€èšåˆå‡½æ•°ï¼‰ åŸºäºå…ƒæ•°æ®çš„è§„åˆ™å¼•æ“ï¼ˆå¦‚æ£€æŸ¥å¤–é”®å…³è”ï¼‰ã€LLMè‡ªæˆ‘å®¡è§† é˜²æ­¢é€»è¾‘é”™è¯¯ï¼Œè¿”å›æ— æ„ä¹‰æˆ–é”™è¯¯æ•°æ® å®‰å…¨å®¡æŸ¥ æƒé™æ£€æŸ¥ã€SQLæ³¨å…¥æ”»å‡»é˜²æŠ¤ã€turn0search10ã€‘ã€æ•æ„Ÿæ“ä½œè¯†åˆ«ï¼ˆå¦‚DROPã€UPDATEï¼‰ SQLæ³¨å…¥æ£€æµ‹å·¥å…·ã€æƒé™ç³»ç»Ÿã€æ“ä½œç™½åå• ä¿éšœæ•°æ®å®‰å…¨ï¼Œé˜²æ­¢æ¶æ„æˆ–ç ´åæ€§æ“ä½œ æ‰§è¡Œæµ‹è¯• åœ¨æ²™ç®±ç¯å¢ƒä¸­æ‰§è¡ŒSQLï¼Œæ£€æŸ¥è¿”å›ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ æŸ¥è¯¢ç»“æœé›†åˆç†æ€§æ ¡éªŒï¼ˆå¦‚è¡Œæ•°ã€æ•°å€¼èŒƒå›´ï¼‰ã€ä¸å†å²æŸ¥è¯¢ç»“æœå¯¹æ¯” æå‰å‘ç°æ½œåœ¨é—®é¢˜ï¼Œé¿å…å¯¹ç”Ÿäº§æ•°æ®åº“é€ æˆå½±å“ 3. äººå‘˜ä¿éšœï¼šäººæœºååŒä¸åé¦ˆé—­ç¯ ä½ç½®ä¿¡åº¦å¤„ç†ï¼šå½“ç³»ç»Ÿå¯¹ç”Ÿæˆçš„SQLç½®ä¿¡åº¦è¾ƒä½æ—¶ï¼Œè‡ªåŠ¨è½¬äº¤äººå·¥å®¡æ ¸ã€‚â€œä¸ç¡®å®šæ—¶å°±æ‰¾äººâ€ æ˜¯ä¿éšœä¼ä¸šçº§åº”ç”¨å¯é æ€§çš„é»„é‡‘æ³•åˆ™ã€‚ åé¦ˆå­¦ä¹ é—­ç¯ã€turn0search5ã€‘ã€turn0search8ã€‘ï¼š ç”¨æˆ·å¯¹ç»“æœè¿›è¡Œç¡®è®¤æˆ–æ ‡æ³¨é”™è¯¯ã€‚ ç³»ç»Ÿæ”¶é›†é”™è¯¯çš„ï¼ˆé—®é¢˜ï¼ŒSQLï¼Œé”™è¯¯åŸå› ï¼‰ä¸‰å…ƒç»„ã€‚ å®šæœŸç”¨è¿™äº›é«˜è´¨é‡æ•°æ®å¾®è°ƒæ¨¡å‹å’Œæ›´æ–°çŸ¥è¯†åº“ï¼Œè®©ç³»ç»ŸæŒç»­è¿›åŒ–ã€‚ âš ï¸å®¡æŸ¥æœºåˆ¶è®¾è®¡æ€è·¯å®¡æŸ¥æœºåˆ¶è´¯ç©¿äºSQLç”Ÿæˆå‰ã€ç”Ÿæˆä¸­å’Œç”Ÿæˆåã€‚ ç”Ÿæˆå‰å®¡æŸ¥ï¼š æƒé™é¢„æ£€ï¼šæ ¹æ®ç”¨æˆ·èº«ä»½ï¼Œæå‰è¿‡æ»¤å…¶æ— æƒè®¿é—®çš„è¡¨å’Œå­—æ®µï¼Œä»æºå¤´é¿å…è¶ŠæƒæŸ¥è¯¢ã€turn0search4ã€‘ã€‚ æ•æ„Ÿè¯è¯†åˆ«ï¼šæ‹¦æˆªæˆ–è½¬ä¹‰å¯èƒ½å¼•å‘SQLæ³¨å…¥çš„å…³é”®å­—ç¬¦ï¼ˆå¦‚ ', &quot;, ;, --ï¼‰ã€turn0search10ã€‘ã€‚ ç”Ÿæˆä¸­å®¡æŸ¥ï¼š Promptçº¦æŸï¼šåœ¨Promptä¸­æ˜ç¡®è¦æ±‚åªç”ŸæˆSELECTæŸ¥è¯¢ï¼Œç¦æ­¢DROP, UPDATE, DELETEç­‰æ“ä½œï¼Œå¹¶è¦æ±‚è¾“å‡ºå¸¦æ³¨é‡Šè§£é‡ŠæŸ¥è¯¢é€»è¾‘ã€‚ æµå¼ç”Ÿæˆç›‘æ§ï¼šå¯¹æ¨¡å‹ç”Ÿæˆçš„SQLè¿›è¡Œå®æ—¶æµå¼è¯­æ³•æ£€æŸ¥ï¼Œä¸€æ—¦å‘ç°ä¸¥é‡è¯­æ³•é”™è¯¯ç«‹å³ä¸­æ–­ç”Ÿæˆã€‚ ç”Ÿæˆåå®¡æŸ¥ï¼š è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šåœ¨æ²™ç®±ç¯å¢ƒä¸­æ‰§è¡ŒSQLï¼Œå¹¶ä¸é¢„æœŸç»“æœï¼ˆå¦‚æœ‰ï¼‰æˆ–è§„åˆ™å¼•æ“çš„åˆ¤æ–­è¿›è¡Œæ¯”å¯¹ã€‚ äººå·¥å®¡æ ¸å¹³å°ï¼šæä¾›ç•Œé¢ä¾›æ•°æ®ç®¡ç†å‘˜å®¡æ ¸é«˜é£é™©æˆ–ä½ç½®ä¿¡åº¦çš„SQLï¼Œå®¡æ ¸ç»“æœåé¦ˆç»™ç³»ç»Ÿç”¨äºå­¦ä¹ ã€‚ å®æ–½ä¸ä¼˜åŒ–å»ºè®® åˆ†é˜¶æ®µå®æ–½ï¼š ç¬¬ä¸€é˜¶æ®µï¼šä»æ¨¡æ¿åŒ–æŸ¥è¯¢å’Œç®€å•æŸ¥è¯¢å…¥æ‰‹ï¼Œå¿«é€Ÿä¸Šçº¿ï¼Œç§¯ç´¯æ•°æ®å’Œä¿¡ä»»ã€‚ ç¬¬äºŒé˜¶æ®µï¼šå¼•å…¥RAGå’Œå¾®è°ƒæ¨¡å‹ï¼Œè¦†ç›–ä¸­ç­‰å¤æ‚åº¦æŸ¥è¯¢ã€‚ ç¬¬ä¸‰é˜¶æ®µï¼šé€æ­¥å¼€æ”¾å¤æ‚æŸ¥è¯¢ï¼Œå¹¶å®Œå–„äººæœºååŒæµç¨‹ã€‚ ç›‘æ§ä¸è¯„ä¼°ï¼š å»ºç«‹ä»ªè¡¨ç›˜ï¼ŒæŒç»­ç›‘æ§å‡†ç¡®ç‡ã€ç½®ä¿¡åº¦åˆ†å¸ƒã€äººå·¥å®¡æ ¸ç‡ç­‰å…³é”®æŒ‡æ ‡ã€‚ å®šæœŸè¿›è¡Œç›²æµ‹ï¼ˆç”¨æ ‡æ³¨é›†æµ‹è¯•ç³»ç»Ÿï¼‰ï¼Œè¯„ä¼°çœŸå®å‡†ç¡®ç‡ã€‚ æˆæœ¬ä¸æ•ˆç‡å¹³è¡¡ï¼š é€šè¿‡æ™ºèƒ½è·¯ç”±ç­–ç•¥ï¼Œç®€å•æŸ¥è¯¢ç”¨å°æ¨¡å‹/æ¨¡æ¿ï¼Œå¤æ‚æŸ¥è¯¢æ‰è°ƒç”¨å¤§æ¨¡å‹ï¼Œä¼˜åŒ–æˆæœ¬å’Œå“åº”é€Ÿåº¦ã€turn0search8ã€‘ã€‚ è¿™ä¸ªè®¾è®¡æ€è·¯åªæ˜¯æä¾›ä¸€ç§ç›¸å¯¹æ¸…æ™°çš„æŒ‡å¼•ã€‚å¦‚æœä½ æœ‰æ›´å…·ä½“çš„åœºæ™¯æˆ–ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ·±å…¥æ¢è®¨äº¤æµã€‚ æ€»ç»“è®¾è®¡ä¸€ä¸ªé«˜å‡†ç¡®ç‡çš„Text-to-SQLç³»ç»Ÿï¼Œæ ¸å¿ƒä¸æ˜¯å¯»æ‰¾ä¸€ä¸ªâ€œä¸‡èƒ½æ¨¡å‹â€ï¼Œè€Œæ˜¯æ„å»ºä¸€ä¸ªâ€œæ™ºèƒ½ç³»ç»Ÿâ€ã€‚è¿™ä¸ªç³»ç»Ÿé€šè¿‡æ··åˆæ¨¡å‹æ¶æ„å‘æŒ¥å„è‡ªä¼˜åŠ¿ï¼Œé€šè¿‡RAGæ³¨å…¥ä¼ä¸šçŸ¥è¯†ï¼Œé€šè¿‡ä¸¥æ ¼çš„éªŒè¯å®¡æŸ¥æœºåˆ¶ç¡®ä¿å®‰å…¨å¯é ï¼Œå¹¶é€šè¿‡äººæœºååŒçš„åé¦ˆé—­ç¯å®ç°æŒç»­è¿›åŒ–ã€‚ Text-to-SQLåœ¨ä¼ä¸šè½åœ°éš¾ï¼Œæ ¹æºåœ¨äºå®ƒä¸æ˜¯ä¸€ä¸ªçº¯ç²¹çš„æŠ€æœ¯é—®é¢˜ï¼Œè€Œæ˜¯ä¸€ä¸ªæŠ€æœ¯ã€ä¸šåŠ¡ã€æ•°æ®æ²»ç†ä¸‰è€…äº¤ç»‡çš„ç³»ç»Ÿæ€§å·¥ç¨‹ã€‚ æ²¡æœ‰å…±è¯†æ€§æ–¹æ¡ˆï¼Œæ˜¯å› ä¸ºæ¯ä¸ªä¼ä¸šçš„æ•°æ®ã€ä¸šåŠ¡ã€å®‰å…¨è¦æ±‚éƒ½ç‹¬ä¸€æ— äºŒã€‚ æœ€é è°±çš„æ€è·¯æ˜¯æ”¾å¼ƒâ€œä¸€ä¸ªæ¨¡å‹æå®šä¸€åˆ‡â€çš„å¹»æƒ³ï¼Œè½¬å‘â€œäººæœºååŒã€æ··åˆæ¶æ„â€çš„é“è·¯ï¼Œç”¨å·¥ç¨‹åŒ–çš„ç¡®å®šæ€§å»çº¦æŸAIçš„ä¸ç¡®å®šæ€§ã€‚ æŠ€æœ¯é€‰å‹ä¸Šï¼Œä¸è¦çº ç»“äºâ€œå°æ¨¡å‹è¿˜æ˜¯æ¨¡æ¿â€ï¼Œè€Œè¦æ€è€ƒå¦‚ä½•å°†æ¨¡æ¿çš„ç¡®å®šæ€§ã€å°æ¨¡å‹çš„é«˜æ•ˆæ€§ã€å¤§æ¨¡å‹çš„çµæ´»æ€§ä»¥åŠå…ƒæ•°æ®å±‚çš„çŸ¥è¯†æ€§æœ‰æœºåœ°æ•´åˆåœ¨ä¸€èµ·ï¼Œæ„å»ºä¸€ä¸ªæ—¢èƒ½æ»¡è¶³80%å¸¸è§„éœ€æ±‚ï¼Œåˆèƒ½æ¢ç´¢20%å¤æ‚é—®é¢˜çš„ã€å¯ä¿¡èµ–çš„åˆ†æç³»ç»Ÿã€‚ ä»¥ä¸Šæ–¹æ¡ˆä»…æä¾›ç›¸å…³æ€è·¯çš„å®ç°ï¼Œå…·ä½“å®ç°æ–¹å¼è¦ç»“åˆå®é™…ä¸šåŠ¡ç‰¹ç‚¹å±•å¼€ï¼æˆ–è€…å¦‚æœä½ æœ‰æ›´å¥½çš„å»ºè®®ï¼Œæ¬¢è¿æå‡ºæ¥ï¼Œä¸€èµ·è®¨è®ºå’Œäº¤æµã€‚è”ç³»æ–¹å¼ï¼šhttps://github.com/ljq.WeChat: labsec","link":"/4adbc11a.html"},{"title":"ä»0åˆ°1ï¼šPythonç³»ç»Ÿæ€§å­¦ä¹ æŒ‡å— - ä»åŸºç¡€åˆ°å®Œæ•´Web CRUDåº”ç”¨(è´¹æ›¼å­¦ä¹ æ³•)","text":"ä»é›¶åˆ°ä¸€ï¼šPythonç³»ç»Ÿæ€§å­¦ä¹ æŒ‡å— - ä»åŸºç¡€åˆ°å®Œæ•´ Web CRUDåº”ç”¨ æ ¸å¿ƒè§‚ç‚¹ï¼šå­¦ä¹ ç¼–ç¨‹ä¸æ˜¯ä¸ºäº†æŒæ¡è¯­æ³•ï¼Œè€Œæ˜¯ä¸ºäº†åˆ›é€ ä»·å€¼ã€‚æœ¬æ–‡æä¾›ä¸€æ¡æ¸…æ™°çš„å­¦ä¹ è·¯å¾„ï¼Œè®©ä½ ä»PythonåŸºç¡€è¯­æ³•èµ·æ­¥ï¼Œæœ€ç»ˆèƒ½å¤Ÿç‹¬ç«‹å¼€å‘å®Œæ•´çš„Web CRUDåº”ç”¨ã€‚ ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ç³»ç»Ÿæ€§å­¦ä¹ ï¼Ÿå¾ˆå¤šåˆå­¦è€…é™·å…¥â€è¯­æ³•éƒ½ä¼šï¼Œé¡¹ç›®ä¸ä¼šâ€çš„å›°å¢ƒï¼Œæ ¹æœ¬åŸå› åœ¨äºï¼š ç¢ç‰‡åŒ–å­¦ä¹ ï¼šåªå­¦é›¶æ•£è¯­æ³•ï¼Œç¼ºä¹æ•´ä½“æ¶æ„æ€ç»´ é¡¹ç›®ç»éªŒç¼ºå¤±ï¼šæ²¡æœ‰å°†çŸ¥è¯†ç‚¹ä¸²è”æˆå®Œæ•´è§£å†³æ–¹æ¡ˆ å­¦ä¹ è·¯å¾„æ¨¡ç³Šï¼šä¸çŸ¥é“ä¸‹ä¸€æ­¥è¯¥å­¦ä»€ä¹ˆ æœ¬æ–‡æä¾›ä¸€æ¡ç»è¿‡éªŒè¯çš„å­¦ä¹ è·¯å¾„å»ºè®®ï¼Œ1-2æœˆå†…è®©ä½ å…·å¤‡å¼€å‘å®Œæ•´Webåº”ç”¨çš„èƒ½åŠ›ã€‚ äºŒã€å­¦ä¹ è·¯çº¿å›¾ï¼ˆ5ä¸ªæ ¸å¿ƒé˜¶æ®µï¼‰123é˜¶æ®µ1ï¼šPythonåŸºç¡€è¯­æ³•ï¼ˆ1å‘¨ï¼‰â†’ é˜¶æ®µ2ï¼šæ ¸å¿ƒæ¦‚å¿µæ·±åŒ–ï¼ˆ1å‘¨ï¼‰â†’ é˜¶æ®µ3ï¼šWebå¼€å‘åŸºç¡€ï¼ˆ1-2å‘¨ï¼‰â†’ é˜¶æ®µ4ï¼šæ•°æ®åº“é›†æˆï¼ˆ1å‘¨ï¼‰â†’ é˜¶æ®µ5ï¼šå®Œæ•´CRUDé¡¹ç›®å®æˆ˜ï¼ˆ2-3å‘¨ï¼‰ ä¸‰ã€é˜¶æ®µè¯¦è§£ä¸å®æˆ˜ä»£ç é˜¶æ®µ1ï¼šPythonåŸºç¡€è¯­æ³•ï¼ˆå¤¯å®æ ¹åŸºï¼‰å­¦ä¹ é‡ç‚¹ï¼šå˜é‡ã€æ•°æ®ç±»å‹ã€æ§åˆ¶æµã€å‡½æ•°ã€æ¨¡å— 123456789101112131415161718192021222324252627# ç¤ºä¾‹ï¼šåŸºç¡€è¯­æ³•ç»¼åˆåº”ç”¨def calculate_student_grade(scores): &quot;&quot;&quot; è®¡ç®—å­¦ç”Ÿæˆç»©ç­‰çº§ :param scores: æˆç»©å­—å…¸ {'math': 90, 'english': 85, ...} :return: ç­‰çº§å­—ç¬¦ä¸² &quot;&quot;&quot; total = sum(scores.values()) average = total / len(scores) if average &gt;= 90: return &quot;A&quot; elif average &gt;= 80: return &quot;B&quot; elif average &gt;= 70: return &quot;C&quot; else: return &quot;D&quot;# ä½¿ç”¨ç¤ºä¾‹student_scores = { 'math': 88, 'english': 92, 'science': 85}grade = calculate_student_grade(student_scores)print(f&quot;å­¦ç”Ÿç­‰çº§: {grade}&quot;) é˜¶æ®µç»ƒä¹ ï¼š å®ç°ä¸€ä¸ªç®€æ˜“è®¡ç®—å™¨ï¼ˆåŠ å‡ä¹˜é™¤ï¼‰ ç¼–å†™æ–‡ä»¶å†…å®¹ç»Ÿè®¡å·¥å…·ï¼ˆè¡Œæ•°ã€å•è¯æ•°ã€å­—ç¬¦æ•°ï¼‰ åˆ¶ä½œä¸€ä¸ªçŒœæ•°å­—æ¸¸æˆ é˜¶æ®µ2ï¼šæ ¸å¿ƒæ¦‚å¿µæ·±åŒ–ï¼ˆå»ºç«‹ç¼–ç¨‹æ€ç»´ï¼‰å­¦ä¹ é‡ç‚¹ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹ã€å¼‚å¸¸å¤„ç†ã€æ–‡ä»¶æ“ä½œã€æ ‡å‡†åº“ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051# ç¤ºä¾‹ï¼šé¢å‘å¯¹è±¡+å¼‚å¸¸å¤„ç†çš„ç»¼åˆåº”ç”¨import jsonfrom pathlib import Pathclass StudentManager: &quot;&quot;&quot;å­¦ç”Ÿç®¡ç†ç±»ï¼Œå¤„ç†å­¦ç”Ÿæ•°æ®çš„å¢åˆ æ”¹æŸ¥&quot;&quot;&quot; def __init__(self, data_file='students.json'): self.data_file = Path(data_file) self.students = self._load_data() def _load_data(self): &quot;&quot;&quot;åŠ è½½å­¦ç”Ÿæ•°æ®ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºç©ºæ•°æ®&quot;&quot;&quot; try: if self.data_file.exists(): with open(self.data_file, 'r', encoding='utf-8') as f: return json.load(f) return [] except Exception as e: print(f&quot;åŠ è½½æ•°æ®å¤±è´¥: {e}&quot;) return [] def _save_data(self): &quot;&quot;&quot;ä¿å­˜å­¦ç”Ÿæ•°æ®åˆ°æ–‡ä»¶&quot;&quot;&quot; try: with open(self.data_file, 'w', encoding='utf-8') as f: json.dump(self.students, f, indent=2) except Exception as e: print(f&quot;ä¿å­˜æ•°æ®å¤±è´¥: {e}&quot;) def add_student(self, name, age, grade): &quot;&quot;&quot;æ·»åŠ å­¦ç”Ÿ&quot;&quot;&quot; student = { 'id': len(self.students) + 1, 'name': name, 'age': age, 'grade': grade } self.students.append(student) self._save_data() return student def get_all_students(self): &quot;&quot;&quot;è·å–æ‰€æœ‰å­¦ç”Ÿ&quot;&quot;&quot; return self.students# ä½¿ç”¨ç¤ºä¾‹manager = StudentManager()manager.add_student(&quot;å¼ ä¸‰&quot;, 18, &quot;A&quot;)manager.add_student(&quot;æå››&quot;, 19, &quot;B&quot;)print(manager.get_all_students()) é˜¶æ®µç»ƒä¹ ï¼š å®ç°ä¸€ä¸ªå›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼ˆç±»è®¾è®¡+æ–‡ä»¶æŒä¹…åŒ–ï¼‰ ç¼–å†™æ—¥å¿—åˆ†æå·¥å…·ï¼ˆæ­£åˆ™è¡¨è¾¾å¼+æ–‡ä»¶æ“ä½œï¼‰ åˆ¶ä½œå¤©æ°”æ•°æ®çˆ¬å–å’Œåˆ†æè„šæœ¬ï¼ˆrequestsåº“+æ•°æ®å¤„ç†ï¼‰ é˜¶æ®µ3ï¼šWebå¼€å‘åŸºç¡€ï¼ˆè¿›å…¥Webä¸–ç•Œï¼‰æŠ€æœ¯æ ˆé€‰æ‹©ï¼šFlaskï¼ˆè½»é‡ã€æ˜“å­¦ã€åŠŸèƒ½å®Œæ•´ï¼‰ä½œä¸ºå…¥é—¨æ¡†æ¶ 123456789101112131415161718192021222324252627282930313233343536373839404142# ç¤ºä¾‹ï¼šFlaskåŸºç¡€åº”ç”¨from flask import Flask, render_template, request, redirect, url_forapp = Flask(__name__)# æ¨¡æ‹Ÿæ•°æ®å­˜å‚¨students = []@app.route('/')def index(): &quot;&quot;&quot;é¦–é¡µï¼Œæ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿ&quot;&quot;&quot; return render_template('index.html', students=students)@app.route('/add', methods=['GET', 'POST'])def add_student(): &quot;&quot;&quot;æ·»åŠ å­¦ç”Ÿé¡µé¢&quot;&quot;&quot; if request.method == 'POST': name = request.form.get('name') age = request.form.get('age') grade = request.form.get('grade') if name and age and grade: student = { 'id': len(students) + 1, 'name': name, 'age': int(age), 'grade': grade } students.append(student) return redirect(url_for('index')) return render_template('add.html')@app.route('/delete/&lt;int:student_id&gt;')def delete_student(student_id): &quot;&quot;&quot;åˆ é™¤å­¦ç”Ÿ&quot;&quot;&quot; global students students = [s for s in students if s['id'] != student_id] return redirect(url_for('index'))if __name__ == '__main__': app.run(debug=True) HTMLæ¨¡æ¿ç¤ºä¾‹ï¼ˆtemplates/index.htmlï¼‰ï¼š 1234567891011121314151617181920212223242526272829303132333435363738&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ&lt;/title&gt; &lt;style&gt; table { border-collapse: collapse; width: 100%; } th, td { border: 1px solid #ddd; padding: 8px; text-align: left; } th { background-color: #f2f2f2; } .delete-btn { color: red; text-decoration: none; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;å­¦ç”Ÿåˆ—è¡¨&lt;/h1&gt; &lt;a href=&quot;{{ url_for('add_student') }}&quot;&gt;æ·»åŠ å­¦ç”Ÿ&lt;/a&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;ID&lt;/th&gt; &lt;th&gt;å§“å&lt;/th&gt; &lt;th&gt;å¹´é¾„&lt;/th&gt; &lt;th&gt;ç­‰çº§&lt;/th&gt; &lt;th&gt;æ“ä½œ&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; {% for student in students %} &lt;tr&gt; &lt;td&gt;{{ student.id }}&lt;/td&gt; &lt;td&gt;{{ student.name }}&lt;/td&gt; &lt;td&gt;{{ student.age }}&lt;/td&gt; &lt;td&gt;{{ student.grade }}&lt;/td&gt; &lt;td&gt;&lt;a href=&quot;{{ url_for('delete_student', student_id=student.id) }}&quot; class=&quot;delete-btn&quot;&gt;åˆ é™¤&lt;/a&gt;&lt;/td&gt; &lt;/tr&gt; {% endfor %} &lt;/tbody&gt; &lt;/table&gt;&lt;/body&gt;&lt;/html&gt; é˜¶æ®µç»ƒä¹ ï¼š å®ç°ä¸€ä¸ªå¾…åŠäº‹é¡¹åˆ—è¡¨ï¼ˆTodo Listï¼‰ åˆ›å»ºä¸ªäººåšå®¢ç³»ç»Ÿï¼ˆæ–‡ç« åˆ—è¡¨+è¯¦æƒ…é¡µï¼‰ åˆ¶ä½œç”¨æˆ·æ³¨å†Œç™»å½•é¡µé¢ï¼ˆè¡¨å•å¤„ç†+ä¼šè¯ç®¡ç†ï¼‰ é˜¶æ®µ4ï¼šæ•°æ®åº“é›†æˆï¼ˆæŒä¹…åŒ–æ•°æ®ï¼‰æŠ€æœ¯æ ˆï¼šFlask + SQLAlchemyï¼ˆORMï¼‰+ SQLiteï¼ˆå¼€å‘ç¯å¢ƒï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071# ç¤ºä¾‹ï¼šæ•°æ®åº“é›†æˆfrom flask import Flask, render_template, request, redirect, url_forfrom flask_sqlalchemy import SQLAlchemyfrom datetime import datetimeapp = Flask(__name__)app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///students.db'app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = Falsedb = SQLAlchemy(app)# å®šä¹‰æ•°æ®æ¨¡å‹class Student(db.Model): id = db.Column(db.Integer, primary_key=True) name = db.Column(db.String(100), nullable=False) age = db.Column(db.Integer, nullable=False) grade = db.Column(db.String(10), nullable=False) created_at = db.Column(db.DateTime, default=datetime.utcnow) def __repr__(self): return f'&lt;Student {self.name}&gt;'# åˆ›å»ºæ•°æ®åº“è¡¨with app.app_context(): db.create_all()@app.route('/')def index(): students = Student.query.all() return render_template('index.html', students=students)@app.route('/add', methods=['GET', 'POST'])def add_student(): if request.method == 'POST': name = request.form.get('name') age = request.form.get('age') grade = request.form.get('grade') if name and age and grade: new_student = Student( name=name, age=int(age), grade=grade ) db.session.add(new_student) db.session.commit() return redirect(url_for('index')) return render_template('add.html')@app.route('/edit/&lt;int:id&gt;', methods=['GET', 'POST'])def edit_student(id): student = Student.query.get_or_404(id) if request.method == 'POST': student.name = request.form.get('name') student.age = int(request.form.get('age')) student.grade = request.form.get('grade') db.session.commit() return redirect(url_for('index')) return render_template('edit.html', student=student)@app.route('/delete/&lt;int:id&gt;')def delete_student(id): student = Student.query.get_or_404(id) db.session.delete(student) db.session.commit() return redirect(url_for('index'))if __name__ == '__main__': app.run(debug=True) é˜¶æ®µç»ƒä¹ ï¼š é‡æ„ä¹‹å‰çš„å¾…åŠäº‹é¡¹åº”ç”¨ï¼Œä½¿ç”¨æ•°æ®åº“å­˜å‚¨ å®ç°åšå®¢ç³»ç»Ÿçš„æ–‡ç« ç®¡ç†åŠŸèƒ½ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ åˆ›å»ºç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼ˆæ³¨å†Œã€ç™»å½•ã€ä¼šè¯ç®¡ç†ï¼‰ é˜¶æ®µ5ï¼šå®Œæ•´CRUDé¡¹ç›®å®æˆ˜ï¼ˆå­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿï¼‰é¡¹ç›®æ¶æ„ï¼š 123456789101112131415161718192021student_management/â”œâ”€â”€ app.py # ä¸»åº”ç”¨æ–‡ä»¶â”œâ”€â”€ config.py # é…ç½®æ–‡ä»¶â”œâ”€â”€ models.py # æ•°æ®æ¨¡å‹â”œâ”€â”€ routes/ # è·¯ç”±æ¨¡å—â”‚ â”œâ”€â”€ __init__.pyâ”‚ â”œâ”€â”€ auth.py # è®¤è¯è·¯ç”±â”‚ â”œâ”€â”€ students.py # å­¦ç”Ÿç®¡ç†è·¯ç”±â”‚ â””â”€â”€ grades.py # æˆç»©ç®¡ç†è·¯ç”±â”œâ”€â”€ templates/ # HTMLæ¨¡æ¿â”‚ â”œâ”€â”€ base.html # åŸºç¡€æ¨¡æ¿â”‚ â”œâ”€â”€ auth/â”‚ â”œâ”€â”€ students/â”‚ â””â”€â”€ grades/â”œâ”€â”€ static/ # é™æ€æ–‡ä»¶â”‚ â”œâ”€â”€ css/â”‚ â”œâ”€â”€ js/â”‚ â””â”€â”€ images/â”œâ”€â”€ requirements.txt # ä¾èµ–åŒ…â””â”€â”€ instance/ â””â”€â”€ config.py # å®ä¾‹é…ç½® æ ¸å¿ƒä»£ç ç¤ºä¾‹ï¼ˆapp.pyï¼‰ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142from flask import Flask, render_template, request, redirect, url_for, flash, sessionfrom flask_sqlalchemy import SQLAlchemyfrom werkzeug.security import generate_password_hash, check_password_hashfrom datetime import datetimeimport osapp = Flask(__name__)app.config['SECRET_KEY'] = os.urandom(24)app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///student_management.db'app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = Falsedb = SQLAlchemy(app)# æ•°æ®æ¨¡å‹class User(db.Model): id = db.Column(db.Integer, primary_key=True) username = db.Column(db.String(80), unique=True, nullable=False) password = db.Column(db.String(120), nullable=False) is_admin = db.Column(db.Boolean, default=False) created_at = db.Column(db.DateTime, default=datetime.utcnow)class Student(db.Model): id = db.Column(db.Integer, primary_key=True) name = db.Column(db.String(100), nullable=False) age = db.Column(db.Integer, nullable=False) class_name = db.Column(db.String(50), nullable=False) created_at = db.Column(db.DateTime, default=datetime.utcnow) grades = db.relationship('Grade', backref='student', lazy=True)class Grade(db.Model): id = db.Column(db.Integer, primary_key=True) student_id = db.Column(db.Integer, db.ForeignKey('student.id'), nullable=False) subject = db.Column(db.String(50), nullable=False) score = db.Column(db.Float, nullable=False) semester = db.Column(db.String(20), nullable=False) created_at = db.Column(db.DateTime, default=datetime.utcnow)# åˆå§‹åŒ–æ•°æ®åº“with app.app_context(): db.create_all() # åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜ if not User.query.filter_by(username='admin').first(): admin = User( username='admin', password=generate_password_hash('admin123'), is_admin=True ) db.session.add(admin) db.session.commit()# è·¯ç”±è£…é¥°å™¨@app.route('/')def home(): if 'user_id' in session: return redirect(url_for('dashboard')) return render_template('home.html')@app.route('/dashboard')def dashboard(): if 'user_id' not in session: return redirect(url_for('login')) total_students = Student.query.count() total_grades = Grade.query.count() avg_score = db.session.query(db.func.avg(Grade.score)).scalar() or 0 return render_template('dashboard.html', total_students=total_students, total_grades=total_grades, avg_score=round(avg_score, 2))# è®¤è¯ç›¸å…³è·¯ç”±@app.route('/login', methods=['GET', 'POST'])def login(): if request.method == 'POST': username = request.form.get('username') password = request.form.get('password') user = User.query.filter_by(username=username).first() if user and check_password_hash(user.password, password): session['user_id'] = user.id session['username'] = user.username session['is_admin'] = user.is_admin flash('ç™»å½•æˆåŠŸï¼', 'success') return redirect(url_for('dashboard')) else: flash('ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼', 'danger') return render_template('auth/login.html')@app.route('/logout')def logout(): session.clear() flash('å·²æˆåŠŸé€€å‡ºï¼', 'info') return redirect(url_for('home'))# å­¦ç”Ÿç®¡ç†è·¯ç”±@app.route('/students')def student_list(): if 'user_id' not in session: return redirect(url_for('login')) students = Student.query.all() return render_template('students/list.html', students=students)@app.route('/students/add', methods=['GET', 'POST'])def add_student(): if 'user_id' not in session: return redirect(url_for('login')) if request.method == 'POST': name = request.form.get('name') age = request.form.get('age') class_name = request.form.get('class_name') if name and age and class_name: new_student = Student( name=name, age=int(age), class_name=class_name ) db.session.add(new_student) db.session.commit() flash('å­¦ç”Ÿæ·»åŠ æˆåŠŸï¼', 'success') return redirect(url_for('student_list')) else: flash('è¯·å¡«å†™æ‰€æœ‰å­—æ®µï¼', 'danger') return render_template('students/add.html')# æˆç»©ç®¡ç†è·¯ç”±@app.route('/grades/&lt;int:student_id&gt;')def student_grades(student_id): if 'user_id' not in session: return redirect(url_for('login')) student = Student.query.get_or_404(student_id) grades = Grade.query.filter_by(student_id=student_id).all() return render_template('grades/list.html', student=student, grades=grades)if __name__ == '__main__': app.run(debug=True) å››ã€å­¦ä¹ èµ„æºæ¨èåŸºç¡€å­¦ä¹  å®˜æ–¹æ–‡æ¡£ï¼šPythonå®˜æ–¹æ•™ç¨‹ã€Flaskå®˜æ–¹æ–‡æ¡£ ä¹¦ç±ï¼šã€ŠPython Crash Courseã€‹ã€ã€ŠFlask Web Developmentã€‹ è§†é¢‘è¯¾ç¨‹ï¼šCorey Schaferçš„Pythonå’ŒFlaskç³»åˆ—ï¼ˆYouTubeï¼‰ é¡¹ç›®å®æˆ˜ GitHubé¡¹ç›®ï¼š æœç´¢å…³é”®è¯ï¼špython flask crud tutorial ä¼˜ç§€é¡¹ç›®ï¼šflask-realworld-example-app åœ¨çº¿ç»ƒä¹ å¹³å°ï¼š LeetCodeï¼ˆç®—æ³•åŸºç¡€ï¼‰ HackerRankï¼ˆPythonä¸“é¡¹ï¼‰ FreeCodeCampï¼ˆWebå¼€å‘é¡¹ç›®ï¼‰ è¿›é˜¶å­¦ä¹  éƒ¨ç½²ï¼šDockerã€Nginxã€Gunicorn å‰ç«¯ï¼šBootstrapã€Vue.js/ReactåŸºç¡€ æµ‹è¯•ï¼špytestã€unittest æ€§èƒ½ï¼šRedisç¼“å­˜ã€æ•°æ®åº“ä¼˜åŒ– äº”ã€å­¦ä¹ å»ºè®®ä¸é¿å‘æŒ‡å—âœ… æ­£ç¡®å­¦ä¹ æ–¹æ³• é¡¹ç›®é©±åŠ¨å­¦ä¹ ï¼šæ¯ä¸ªé˜¶æ®µéƒ½è¦åšå¯¹åº”çš„é¡¹ç›® ä»£ç é‡æ„ï¼šå…ˆè®©ä»£ç å·¥ä½œï¼Œå†è®©ä»£ç ä¼˜é›… ç‰ˆæœ¬æ§åˆ¶ï¼šä»ç¬¬ä¸€å¤©å¼€å§‹ä½¿ç”¨Git æ–‡æ¡£ä¹ æƒ¯ï¼šä¸ºæ¯ä¸ªå‡½æ•°å†™docstringï¼Œä¸ºé¡¹ç›®å†™README âŒ å¸¸è§è¯¯åŒº è¿½æ±‚å®Œç¾ï¼šä¸è¦ä¸€å¼€å§‹å°±è¿½æ±‚æœ€ä½³å®è·µï¼Œå…ˆå®Œæˆå†å®Œå–„ è¿‡åº¦è®¾è®¡ï¼šå°é¡¹ç›®ä¸éœ€è¦å¤æ‚çš„æ¶æ„è®¾è®¡ ä¾èµ–æ•™ç¨‹ï¼šæ•™ç¨‹æ˜¯æ‹æ–ï¼Œè¦å­¦ä¼šç‹¬ç«‹æ€è€ƒå’Œè§£å†³é—®é¢˜ å¿½è§†æµ‹è¯•ï¼šæµ‹è¯•æ˜¯ä¿è¯ä»£ç è´¨é‡çš„å…³é”® ğŸš€ åŠ é€Ÿå­¦ä¹ æŠ€å·§ è´¹æ›¼å­¦ä¹ æ³•ï¼šå­¦å®Œä¸€ä¸ªæ¦‚å¿µåï¼Œå°è¯•ç”¨è‡ªå·±çš„è¯è§£é‡Šç»™åˆ«äººå¬ 20%åŸåˆ™ï¼š80%çš„åŠŸèƒ½æ¥è‡ª20%çš„æ ¸å¿ƒç‰¹æ€§ï¼Œå…ˆæŒæ¡æ ¸å¿ƒ ç¤¾åŒºå‚ä¸ï¼šåœ¨Stack Overflowå›ç­”é—®é¢˜ï¼Œåœ¨GitHubæäº¤PR å¤ç›˜æ€»ç»“ï¼šæ¯å‘¨æ€»ç»“å­¦åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œå»ºç«‹çŸ¥è¯†ä½“ç³» å…­ã€ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®ç¬¬1å‘¨ï¼šå®Œæˆé˜¶æ®µ1-2çš„å­¦ä¹ ï¼Œå®ç°ä¸€ä¸ªå‘½ä»¤è¡Œç‰ˆçš„å­¦ç”Ÿç®¡ç†ç³»ç»Ÿç¬¬2å‘¨ï¼šå­¦ä¹ FlaskåŸºç¡€ï¼Œå®ç°ä¸€ä¸ªé™æ€çš„ç½‘é¡µç‰ˆå­¦ç”Ÿåˆ—è¡¨ç¬¬3å‘¨ï¼šé›†æˆæ•°æ®åº“ï¼Œå®ç°å­¦ç”Ÿä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥ç¬¬4å‘¨ï¼šå®Œå–„é¡¹ç›®ï¼Œæ·»åŠ ç”¨æˆ·è®¤è¯ã€æˆç»©ç®¡ç†ã€æŠ¥è¡¨ç»Ÿè®¡ç­‰åŠŸèƒ½ å…³é”®è¡ŒåŠ¨ï¼š ä»Šå¤©å°±åœ¨GitHubåˆ›å»ºä¸€ä¸ªä»“åº“ï¼Œå‘½åä¸ºpython-learning-path ä»é˜¶æ®µ1å¼€å§‹ï¼Œæ¯å¤©æäº¤ä»£ç ï¼Œè®°å½•å­¦ä¹ å¿ƒå¾— åŠ å…¥ä¸€ä¸ªPythonå­¦ä¹ ç¾¤ï¼Œæ‰¾åˆ°å­¦ä¹ ä¼™ä¼´ æ¯å®Œæˆä¸€ä¸ªé˜¶æ®µï¼Œå†™ä¸€ç¯‡æŠ€æœ¯åšå®¢æ€»ç»“ ç»“è¯­å­¦ä¹ ç¼–ç¨‹å°±åƒå»ºé€ æˆ¿å­ï¼šè¯­æ³•æ˜¯ç –å—ï¼Œç®—æ³•æ˜¯è®¾è®¡å›¾ï¼Œé¡¹ç›®ç»éªŒæ˜¯æ–½å·¥ç»éªŒã€‚æœ¬æ–‡æä¾›çš„è·¯å¾„ç»è¿‡å¤§é‡å¼€å‘è€…éªŒè¯ï¼Œå…³é”®åœ¨äºæŒç»­è¡ŒåŠ¨ã€‚ è®°ä½ï¼šæ¯ä¸ªå¤æ‚çš„ç³»ç»Ÿéƒ½æ˜¯ç”±ç®€å•çš„ç»„ä»¶æ„æˆçš„ã€‚å½“ä½ è§‰å¾—å›°éš¾æ—¶ï¼ŒæŠŠé—®é¢˜æ‹†è§£åˆ°è¶³å¤Ÿå°ï¼Œç„¶åä¸€ä¸ªä¸€ä¸ªè§£å†³ã€‚ æœ€åä¸€å¥å¿ å‘Šï¼šä¸è¦ç­‰å¾…â€å®Œç¾æ—¶æœºâ€å¼€å§‹é¡¹ç›®ã€‚ä»Šå¤©ç”¨æœ€ç®€å•çš„ä»£ç å®ç°æœ€åŸºç¡€çš„åŠŸèƒ½ï¼Œæ˜å¤©å†é€æ­¥å®Œå–„ã€‚å®Œæˆæ¯”å®Œç¾æ›´é‡è¦ã€‚ ä½ çš„ä¸‹ä¸€æ­¥ï¼šç°åœ¨å°±æ‰“å¼€ç¼–è¾‘å™¨ï¼Œåˆ›å»ºç¬¬ä¸€ä¸ªPythonæ–‡ä»¶ï¼Œå†™ä¸‹print(&quot;Hello, World!&quot;)ï¼Œç„¶åå¼€å§‹ä½ çš„ç³»ç»Ÿæ€§å­¦ä¹ ä¹‹æ—…ï¼ ğŸ”—å¼•ç”¨èµ„æºï¼šPythonè¯­æ³•æŒ‡å¯¼å¤§å…¨(Quick Reference)Python Quick Reference","link":"/6f7c84b1.html"},{"title":"åŸºäºGolangæ¨¡æ‹Ÿå®ç°ä¸€ä¸ªç®€åŒ–çš„DeepSeek AIæ¨¡å‹ GRPOç®—æ³•æ¨ç†","text":"æ¨¡æ‹Ÿå®ç°ä¸€ä¸ªç®€åŒ–çš„GRPO (Group Relative Policy Optimization) æ¨ç†æ¨¡å‹ã€‚GRPOæ˜¯ç”±DeepSeekæå‡ºçš„å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼Œç”¨äºè®­ç»ƒå¤§å‹è¯­è¨€æ¨¡å‹å®ƒçš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ä¸éœ€è¦è®­ç»ƒä»·å€¼å‡½æ•°ï¼Œè€Œæ˜¯é€šè¿‡ä»åŒä¸€é—®é¢˜çš„å¤šä¸ªè¾“å‡ºä¸­è®¡ç®—å¹³å‡å¥–åŠ±æ¥æ›¿ä»£è¿™ä¸€è¿‡ç¨‹ï¼Œæ˜¾è‘—å‡å°‘äº†å†…å­˜å’Œè®¡ç®—èµ„æºçš„æ¶ˆè€— ã€‚ ç®€åŒ–ç‰ˆGRPOæ¨ç†æ¨¡å‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441package mainimport ( &quot;encoding/json&quot; &quot;fmt&quot; &quot;io/ioutil&quot; &quot;math&quot; &quot;math/rand&quot; &quot;os&quot; &quot;sort&quot; &quot;strings&quot; &quot;time&quot;)// æ–‡æ¡£ç»“æ„type Document struct { Content string `json:&quot;content&quot;` Metadata map[string]string `json:&quot;metadata&quot;`}// GRPOæ¨¡å‹æ ¸å¿ƒç»“æ„type GRPOModel struct { documents []*Document // å­˜å‚¨å­¦ä¹ çš„æ–‡æ¡£ policyWeights map[string]float64 // ç­–ç•¥æƒé‡ groupSize int // åˆ†ç»„å¤§å° temperature float64 // é‡‡æ ·æ¸©åº¦}// æ–°å»ºGRPOæ¨¡å‹func NewGRPOModel(groupSize int, temperature float64) *GRPOModel { return &amp;GRPOModel{ documents: make([]*Document, 0), policyWeights: make(map[string]float64), groupSize: groupSize, temperature: temperature, }}// ä»æ–‡ä»¶åŠ è½½æ–‡æ¡£func (m *GRPOModel) LoadDocument(filePath string) error { data, err := ioutil.ReadFile(filePath) if err != nil { return err } var doc Document if err := json.Unmarshal(data, &amp;doc); err != nil { // å¦‚æœä¸æ˜¯JSONæ ¼å¼ï¼Œå°è¯•ä½œä¸ºçº¯æ–‡æœ¬ doc = Document{ Content: string(data), Metadata: map[string]string{ &quot;source&quot;: filePath, &quot;type&quot;: &quot;text&quot;, }, } } m.documents = append(m.documents, &amp;doc) fmt.Printf(&quot;æˆåŠŸåŠ è½½æ–‡æ¡£: %s\\n&quot;, filePath) return nil}// é¢„å¤„ç†æ–‡æ¡£å†…å®¹func (m *GRPOModel) preprocessContent(content string) []string { // ç®€å•çš„æ–‡æœ¬åˆ†è¯ content = strings.ToLower(content) content = strings.ReplaceAll(content, &quot;\\n&quot;, &quot; &quot;) content = strings.ReplaceAll(content, &quot;\\r&quot;, &quot; &quot;) content = strings.ReplaceAll(content, &quot;\\t&quot;, &quot; &quot;) // ç§»é™¤æ ‡ç‚¹ç¬¦å· replacer := strings.NewReplacer( &quot;.&quot;, &quot; &quot;, &quot;,&quot;, &quot; &quot;, &quot;!&quot;, &quot; &quot;, &quot;?&quot;, &quot; &quot;, &quot;;&quot;, &quot; &quot;, &quot;:&quot;, &quot; &quot;, &quot;\\&quot;&quot;, &quot; &quot;, &quot;'&quot;, &quot; &quot;, &quot;(&quot;, &quot; &quot;, &quot;)&quot;, &quot; &quot;, &quot;[&quot;, &quot; &quot;, &quot;]&quot;, &quot; &quot;, &quot;{&quot;, &quot; &quot;, &quot;}&quot;, &quot; &quot;, ) content = replacer.Replace(content) // åˆ†è¯ words := strings.Fields(content) return words}// å­¦ä¹ æ–‡æ¡£ - æ ¸å¿ƒGRPOå­¦ä¹ è¿‡ç¨‹func (m *GRPOModel) Learn() { fmt.Println(&quot;å¼€å§‹GRPOå­¦ä¹ è¿‡ç¨‹...&quot;) // 1. æ„å»ºè¯æ±‡è¡¨å’Œåˆå§‹æƒé‡ vocabulary := make(map[string]float64) for _, doc := range m.documents { words := m.preprocessContent(doc.Content) for _, word := range words { if _, exists := vocabulary[word]; !exists { vocabulary[word] = 0.0 } vocabulary[word] += 1.0 } } // 2. GRPOæ ¸å¿ƒï¼šåˆ†ç»„ç›¸å¯¹ç­–ç•¥ä¼˜åŒ– // å°†è¯æ±‡åˆ†ç»„ï¼Œè®¡ç®—ç»„å†…ç›¸å¯¹æƒé‡ wordGroups := m.groupWords(vocabulary) for groupID, words := range wordGroups { fmt.Printf(&quot;å¤„ç†åˆ†ç»„ %dï¼ŒåŒ…å« %d ä¸ªè¯æ±‡\\n&quot;, groupID, len(words)) // è®¡ç®—ç»„å†…å¹³å‡å¥–åŠ±ï¼ˆé¢‘ç‡ä½œä¸ºå¥–åŠ±çš„ä»£ç†ï¼‰ totalReward := 0.0 for _, word := range words { totalReward += vocabulary[word] } avgReward := totalReward / float64(len(words)) // 3. è®¡ç®—ç›¸å¯¹ä¼˜åŠ¿ï¼ˆGRPOæ ¸å¿ƒæ€æƒ³ï¼‰ for _, word := range words { reward := vocabulary[word] // ç›¸å¯¹ä¼˜åŠ¿ = å®é™…å¥–åŠ± - ç»„å†…å¹³å‡å¥–åŠ± relativeAdvantage := reward - avgReward // 4. ç­–ç•¥æ›´æ–°ï¼ˆç®€åŒ–ç‰ˆPPOï¼‰ currentWeight := m.policyWeights[word] // ä½¿ç”¨ç›¸å¯¹ä¼˜åŠ¿è°ƒæ•´æƒé‡ newWeight := currentWeight + 0.1*relativeAdvantage // å­¦ä¹ ç‡=0.1 // åº”ç”¨æ¸©åº¦å‚æ•°è¿›è¡Œå¹³æ»‘ if m.temperature &gt; 0 { newWeight = newWeight / m.temperature } m.policyWeights[word] = newWeight } } fmt.Printf(&quot;GRPOå­¦ä¹ å®Œæˆï¼Œå…±å­¦ä¹  %d ä¸ªè¯æ±‡\\n&quot;, len(m.policyWeights))}// å°†è¯æ±‡åˆ†ç»„ï¼ˆGRPOçš„æ ¸å¿ƒï¼šåˆ†ç»„ç›¸å¯¹æ¯”è¾ƒï¼‰func (m *GRPOModel) groupWords(vocabulary map[string]float64) map[int][]string { // æŒ‰é¢‘ç‡æ’åº type wordFreq struct { word string freq float64 } wordList := make([]wordFreq, 0, len(vocabulary)) for word, freq := range vocabulary { wordList = append(wordList, wordFreq{word, freq}) } sort.Slice(wordList, func(i, j int) bool { return wordList[i].freq &gt; wordList[j].freq }) // åˆ†ç»„ groups := make(map[int][]string) groupID := 0 for i := 0; i &lt; len(wordList); i += m.groupSize { end := i + m.groupSize if end &gt; len(wordList) { end = len(wordList) } groupWords := make([]string, 0, m.groupSize) for j := i; j &lt; end; j++ { groupWords = append(groupWords, wordList[j].word) } groups[groupID] = groupWords groupID++ } return groups}// è¿è¡Œæ—¶è§£æ - åŸºäºå­¦ä¹ åˆ°çš„ç­–ç•¥ç”Ÿæˆå“åº”func (m *GRPOModel) Parse(input string) string { fmt.Println(&quot;å¼€å§‹è¿è¡Œæ—¶è§£æ...&quot;) // 1. é¢„å¤„ç†è¾“å…¥ inputWords := m.preprocessContent(input) // 2. ä»æ–‡æ¡£ä¸­æ£€ç´¢ç›¸å…³ç‰‡æ®µ relevantFragments := m.retrieveRelevantFragments(inputWords) // 3. GRPOæ¨ç†ï¼šä½¿ç”¨å­¦ä¹ åˆ°çš„ç­–ç•¥ç”Ÿæˆå“åº” response := m.generateResponse(relevantFragments, inputWords) return response}// æ£€ç´¢ç›¸å…³ç‰‡æ®µfunc (m *GRPOModel) retrieveRelevantFragments(inputWords []string) []string { fragments := make([]string, 0) for _, doc := range m.documents { content := strings.ToLower(doc.Content) relevanceScore := 0.0 for _, word := range inputWords { if strings.Contains(content, word) { // ä½¿ç”¨ç­–ç•¥æƒé‡è®¡ç®—ç›¸å…³æ€§ weight := m.policyWeights[word] relevanceScore += math.Abs(weight) // ä½¿ç”¨ç»å¯¹å€¼ä½œä¸ºç›¸å…³æ€§å¼ºåº¦ } } if relevanceScore &gt; 0.5 { // é˜ˆå€¼ // æå–ç›¸å…³ç‰‡æ®µ for _, word := range inputWords { if idx := strings.Index(content, word); idx != -1 { start := idx - 50 if start &lt; 0 { start = 0 } end := idx + len(word) + 50 if end &gt; len(content) { end = len(content) } fragment := content[start:end] fragments = append(fragments, fragment) } } } } return fragments}// ç”Ÿæˆå“åº”ï¼ˆGRPOæ¨ç†æ ¸å¿ƒï¼‰func (m *GRPOModel) generateResponse(fragments []string, inputWords []string) string { if len(fragments) == 0 { return &quot;æœªæ‰¾åˆ°ç›¸å…³ä¿¡æ¯&quot; } // 1. åˆ›å»ºå¤šä¸ªå€™é€‰å“åº”ï¼ˆGRPOçš„åˆ†ç»„æ€æƒ³ï¼‰ candidates := make([]string, m.groupSize) rand.Seed(time.Now().UnixNano()) for i := 0; i &lt; m.groupSize; i++ { // éšæœºé€‰æ‹©ç‰‡æ®µ fragmentIdx := rand.Intn(len(fragments)) fragment := fragments[fragmentIdx] // 2. åŸºäºç­–ç•¥æƒé‡é€‰æ‹©å…³é”®è¯ keywords := make([]string, 0) for _, word := range inputWords { if weight, exists := m.policyWeights[word]; exists &amp;&amp; weight &gt; 0 { // æ ¹æ®æƒé‡æ¦‚ç‡é€‰æ‹© probability := 1.0 / (1.0 + math.Exp(-weight)) // sigmoid if rand.Float64() &lt; probability { keywords = append(keywords, word) } } } // 3. ç”Ÿæˆå€™é€‰å“åº” if len(keywords) &gt; 0 { template := &quot;æ ¹æ®æ‚¨çš„é—®é¢˜ï¼Œç›¸å…³ä¿¡æ¯æ˜¯ï¼š%sã€‚å…³é”®è¯ï¼š%s&quot; candidate := fmt.Sprintf(template, fragment, strings.Join(keywords, &quot;, &quot;)) candidates[i] = candidate } else { candidates[i] = fmt.Sprintf(&quot;æ‰¾åˆ°ç›¸å…³å†…å®¹ï¼š%s&quot;, fragment) } } // 4. GRPOæ ¸å¿ƒï¼šç»„å†…ç›¸å¯¹è¯„ä¼° // ä¸ºæ¯ä¸ªå€™é€‰è®¡ç®—ç›¸å¯¹åˆ†æ•° candidateScores := make([]float64, m.groupSize) for i, candidate := range candidates { score := 0.0 for _, word := range inputWords { if strings.Contains(candidate, word) { score += m.policyWeights[word] } } candidateScores[i] = score } // 5. è®¡ç®—å¹³å‡åˆ†æ•° avgScore := 0.0 for _, score := range candidateScores { avgScore += score } avgScore = avgScore / float64(m.groupSize) // 6. é€‰æ‹©ç›¸å¯¹ä¼˜åŠ¿æœ€å¤§çš„å€™é€‰ bestIdx := 0 bestAdvantage := -1e9 for i, score := range candidateScores { advantage := score - avgScore // ç›¸å¯¹ä¼˜åŠ¿ if advantage &gt; bestAdvantage { bestAdvantage = advantage bestIdx = i } } return candidates[bestIdx]}// ä¿å­˜æ¨¡å‹func (m *GRPOModel) SaveModel(filePath string) error { data := map[string]interface{}{ &quot;policy_weights&quot;: m.policyWeights, &quot;group_size&quot;: m.groupSize, &quot;temperature&quot;: m.temperature, } jsonData, err := json.MarshalIndent(data, &quot;&quot;, &quot; &quot;) if err != nil { return err } return ioutil.WriteFile(filePath, jsonData, 0644)}// åŠ è½½æ¨¡å‹func (m *GRPOModel) LoadModel(filePath string) error { data, err := ioutil.ReadFile(filePath) if err != nil { return err } var modelData map[string]interface{} if err := json.Unmarshal(data, &amp;modelData); err != nil { return err } // è½¬æ¢æƒé‡ weights := make(map[string]float64) if weightsData, ok := modelData[&quot;policy_weights&quot;].(map[string]interface{}); ok { for word, value := range weightsData { if floatValue, ok := value.(float64); ok { weights[word] = floatValue } } } m.policyWeights = weights if groupSize, ok := modelData[&quot;group_size&quot;].(float64); ok { m.groupSize = int(groupSize) } if temp, ok := modelData[&quot;temperature&quot;].(float64); ok { m.temperature = temp } return nil}func main() { // åˆ›å»ºGRPOæ¨¡å‹ model := NewGRPOModel(3, 0.7) // åˆ†ç»„å¤§å°3ï¼Œæ¸©åº¦0.7 // ç¤ºä¾‹1ï¼šåŠ è½½æ–‡æ¡£ fmt.Println(&quot;=== æ–‡æ¡£å­¦ä¹ é˜¶æ®µ ===&quot;) docFiles := []string{&quot;doc1.json&quot;, &quot;doc2.json&quot;, &quot;doc3.json&quot;} // åˆ›å»ºç¤ºä¾‹æ–‡æ¡£æ–‡ä»¶ createExampleDocuments(docFiles) for _, file := range docFiles { if err := model.LoadDocument(file); err != nil { fmt.Printf(&quot;åŠ è½½æ–‡æ¡£ %s å¤±è´¥: %v\\n&quot;, file, err) } } // å­¦ä¹ è¿‡ç¨‹ model.Learn() // ä¿å­˜æ¨¡å‹ if err := model.SaveModel(&quot;grpo_model.json&quot;); err != nil { fmt.Printf(&quot;ä¿å­˜æ¨¡å‹å¤±è´¥: %v\\n&quot;, err) } // ç¤ºä¾‹2ï¼šè¿è¡Œæ—¶è§£æ fmt.Println(&quot;\\n=== è¿è¡Œæ—¶è§£æé˜¶æ®µ ===&quot;) // é‡æ–°åŠ è½½æ¨¡å‹ï¼ˆæ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒï¼‰ newModel := NewGRPOModel(3, 0.7) if err := newModel.LoadModel(&quot;grpo_model.json&quot;); err != nil { fmt.Printf(&quot;åŠ è½½æ¨¡å‹å¤±è´¥: %v\\n&quot;, err) } else { fmt.Println(&quot;æ¨¡å‹åŠ è½½æˆåŠŸ&quot;) } // æ·»åŠ ä¸€äº›ç¤ºä¾‹æ–‡æ¡£ä¾›æ£€ç´¢ newModel.LoadDocument(&quot;doc1.json&quot;) newModel.LoadDocument(&quot;doc2.json&quot;) newModel.LoadDocument(&quot;doc3.json&quot;) // æµ‹è¯•æŸ¥è¯¢ queries := []string{ &quot;Goè¯­è¨€çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆ&quot;, &quot;æœºå™¨å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µ&quot;, &quot;äººå·¥æ™ºèƒ½çš„å‘å±•å†å²&quot;, } for _, query := range queries { fmt.Printf(&quot;\\næŸ¥è¯¢: %s\\n&quot;, query) response := newModel.Parse(query) fmt.Printf(&quot;å“åº”: %s\\n&quot;, response) } // æ¸…ç†ç¤ºä¾‹æ–‡ä»¶ cleanupExampleDocuments(docFiles) os.Remove(&quot;grpo_model.json&quot;)}// åˆ›å»ºç¤ºä¾‹æ–‡æ¡£func createExampleDocuments(files []string) { docs := []map[string]interface{}{ { &quot;content&quot;: &quot;Goè¯­è¨€æ˜¯ä¸€ç§é™æ€ç±»å‹ã€ç¼–è¯‘å‹è¯­è¨€ï¼Œç”±Googleå¼€å‘ã€‚å®ƒçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼šå¹¶å‘æ”¯æŒï¼ˆgoroutinesï¼‰ã€åƒåœ¾å›æ”¶ã€ç±»å‹å®‰å…¨ã€å¿«é€Ÿç¼–è¯‘ã€‚Goè¯­è¨€è¯­æ³•ç®€æ´ï¼Œæ ‡å‡†åº“ä¸°å¯Œï¼Œé€‚åˆæ„å»ºé«˜æ€§èƒ½ç½‘ç»œæœåŠ¡ã€‚&quot;, &quot;metadata&quot;: map[string]string{&quot;topic&quot;: &quot;programming&quot;, &quot;language&quot;: &quot;go&quot;}, }, { &quot;content&quot;: &quot;æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå®ƒä½¿è®¡ç®—æœºç³»ç»Ÿèƒ½å¤Ÿä»æ•°æ®ä¸­å­¦ä¹ å¹¶æ”¹è¿›æ€§èƒ½ï¼Œè€Œæ— éœ€æ˜¾å¼ç¼–ç¨‹ã€‚ä¸»è¦ç±»å‹åŒ…æ‹¬ç›‘ç£å­¦ä¹ ã€æ— ç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ ã€‚å¸¸è§ç®—æ³•æœ‰çº¿æ€§å›å½’ã€å†³ç­–æ ‘ã€ç¥ç»ç½‘ç»œç­‰ã€‚&quot;, &quot;metadata&quot;: map[string]string{&quot;topic&quot;: &quot;ai&quot;, &quot;field&quot;: &quot;machine_learning&quot;}, }, { &quot;content&quot;: &quot;äººå·¥æ™ºèƒ½çš„å‘å±•å†å²å¯ä»¥è¿½æº¯åˆ°1950å¹´ä»£ã€‚1956å¹´è¾¾ç‰¹èŒ…æ–¯ä¼šè®®è¢«è®¤ä¸ºæ˜¯AIçš„è¯ç”Ÿæ ‡å¿—ã€‚ç»å†äº†å¤šæ¬¡å¯’å†¬æœŸå’Œå¤å…´æœŸï¼Œ21ä¸–çºªä»¥æ¥ï¼Œç”±äºæ·±åº¦å­¦ä¹ ã€å¤§æ•°æ®å’Œè®¡ç®—èƒ½åŠ›çš„æå‡ï¼ŒAIè¿›å…¥äº†å¿«é€Ÿå‘å±•é˜¶æ®µã€‚&quot;, &quot;metadata&quot;: map[string]string{&quot;topic&quot;: &quot;history&quot;, &quot;field&quot;: &quot;ai_evolution&quot;}, }, } for i, file := range files { if i &lt; len(docs) { data, _ := json.MarshalIndent(docs[i], &quot;&quot;, &quot; &quot;) ioutil.WriteFile(file, data, 0644) } }}// æ¸…ç†ç¤ºä¾‹æ–‡æ¡£func cleanupExampleDocuments(files []string) { for _, file := range files { os.Remove(file) }} åŸç†å¤‡æ³¨è¿™ä¸ªç®€åŒ–ç‰ˆGRPOæ¨¡å‹ä¿ç•™äº†åŸå§‹ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼š åˆ†ç»„ç›¸å¯¹ç­–ç•¥ä¼˜åŒ–ï¼šGRPOé€šè¿‡ä»åŒä¸€é—®é¢˜çš„å¤šä¸ªè¾“å‡ºä¸­è®¡ç®—å¹³å‡å¥–åŠ±æ¥æ›¿ä»£ä¼ ç»ŸPPOä¸­çš„ä»·å€¼å‡½æ•°ï¼Œæ˜¾è‘—å‡å°‘äº†è®¡ç®—èµ„æºæ¶ˆè€— æ— Criticæ¶æ„ï¼šä¸ä¼ ç»ŸPPOä¸åŒï¼ŒGRPOä¸éœ€è¦è®­ç»ƒä»·å€¼å‡½æ•°æ¥ä¼°è®¡ä¼˜åŠ¿å‡½æ•°ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ç»„å†…ç›¸å¯¹æ¯”è¾ƒæ¥è®¡ç®—ä¼˜åŠ¿ åˆ†ç»„æœºåˆ¶ï¼šå°†å€™é€‰å“åº”åˆ†ç»„ï¼Œåœ¨ç»„å†…è¿›è¡Œç›¸å¯¹è¯„ä¼°ï¼Œè¿™æ˜¯GRPOåŒºåˆ«äºå…¶ä»–å¼ºåŒ–å­¦ä¹ ç®—æ³•çš„å…³é”®ç‰¹å¾ ä½¿ç”¨è¯´æ˜ å­¦ä¹ é˜¶æ®µï¼šLoadDocument() + Learn() åŠ è½½æ–‡æ¡£æ–‡ä»¶ï¼ˆæ”¯æŒJSONæˆ–çº¯æ–‡æœ¬ï¼‰ è°ƒç”¨Learn()æ–¹æ³•è¿›è¡ŒGRPOè®­ç»ƒ è¿è¡Œæ—¶è§£æï¼šParse(input) è¾“å…¥æŸ¥è¯¢æ–‡æœ¬ æ¨¡å‹æ£€ç´¢ç›¸å…³æ–‡æ¡£ç‰‡æ®µ ç”Ÿæˆå¤šä¸ªå€™é€‰å“åº” é€šè¿‡ç»„å†…ç›¸å¯¹è¯„ä¼°é€‰æ‹©æœ€ä¼˜å“åº” æ¨¡å‹æŒä¹…åŒ–ï¼šSaveModel() + LoadModel() ä¿å­˜è®­ç»ƒå¥½çš„ç­–ç•¥æƒé‡ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åŠ è½½æ¨¡å‹ è¿™ä¸ªå®ç°ä¿ç•™äº†GRPOçš„æ ¸å¿ƒåŸç†ï¼ŒåŒæ—¶ç®€åŒ–äº†å¤æ‚æ€§ï¼Œé€‚åˆç†è§£å’Œå­¦ä¹ GRPOçš„åŸºæœ¬å·¥ä½œæœºåˆ¶ã€‚åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ‚¨å¯èƒ½éœ€è¦æ ¹æ®å…·ä½“éœ€æ±‚è°ƒæ•´åˆ†ç»„å¤§å°ã€æ¸©åº¦å‚æ•°å’Œå¥–åŠ±å‡½æ•°ã€‚","link":"/edd96fdf.html"},{"title":"è½»é‡çº§Kuberneteså®æˆ˜ï¼šåŸºäºk3sæ­å»ºGo Webåº”ç”¨éƒ¨ç½²ç¯å¢ƒï¼ˆæ— éœ€å¤–éƒ¨Dockerä»“åº“ï¼‰","text":"åŸºäºæœç´¢ç»“æœï¼Œæˆ‘ä¸ºä½ æä¾›ä¸€ä¸ªåœ¨Linuxä¸Šå®ç°æœ€ç²¾ç®€k3séƒ¨ç½²ç¯å¢ƒä½¿ç”¨æœ¬åœ°æ„å»ºé•œåƒéƒ¨ç½²Go webåº”ç”¨çš„å®Œæ•´æ–¹æ¡ˆã€‚k3s æ˜¯æœ€è½»é‡çº§çš„Kuberneteså‘è¡Œç‰ˆï¼Œç‰¹åˆ«é€‚åˆèµ„æºæœ‰é™çš„ç¯å¢ƒã€‚ ç¬¬ä¸€æ­¥ï¼šLinuxç³»ç»Ÿç¯å¢ƒè¯´æ˜é€‰æ‹©ä¸€ä¸ªè½»é‡çº§Linuxå‘è¡Œç‰ˆï¼ˆå¦‚Ubuntuã€Debian Serverç­‰ï¼‰ï¼Œç¡®ä¿æ»¡è¶³åŸºæœ¬è¦æ±‚ï¼š 64ä½Linuxç³»ç»Ÿ è‡³å°‘512MBå†…å­˜ rootæˆ–sudoæƒé™ æœåŠ¡å™¨ç³»ç»Ÿç‰ˆæœ¬ï¼šDebian 6.1.129-1 (2025-03-06) x86_64 GNU/Linux è½»é‡çº§Kuberneteså®æˆ˜ï¼šåŸºäºk3sæ­å»ºGo Webåº”ç”¨éƒ¨ç½²ç¯å¢ƒï¼ˆæ— éœ€å¤–éƒ¨Dockerä»“åº“ï¼‰1. ä»€ä¹ˆæ˜¯k3sï¼Ÿk3sæ˜¯ä¸€ä¸ªè½»é‡çº§çš„Kuberneteså‘è¡Œç‰ˆï¼Œä¸“ä¸ºèµ„æºå—é™ç¯å¢ƒè®¾è®¡ã€‚å®ƒä¿ç•™äº†Kubernetesçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä½†å»é™¤äº†ä¸å¿…è¦çš„ç»„ä»¶ï¼Œä½¿å¾—å®‰è£…æ›´ç®€å•ã€èµ„æºå ç”¨æ›´å°‘ã€‚k3séå¸¸é€‚åˆè¾¹ç¼˜è®¡ç®—ã€IoTè®¾å¤‡ã€å¼€å‘æµ‹è¯•ç¯å¢ƒä»¥åŠå°å‹ç”Ÿäº§ç¯å¢ƒã€‚ 2. ä¸ºä»€ä¹ˆé€‰æ‹©k3sï¼Ÿ è½»é‡çº§ï¼šå•ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå†…å­˜å ç”¨å°‘ ç®€å•éƒ¨ç½²ï¼šä¸€æ¡å‘½ä»¤å³å¯å®Œæˆå®‰è£… å®Œæ•´çš„Kubernetes APIï¼šå…¼å®¹æ ‡å‡†Kubernetes ä½èµ„æºéœ€æ±‚ï¼šé€‚åˆå°å‹æœåŠ¡å™¨å’Œè¾¹ç¼˜è®¾å¤‡ å†…ç½®ç»„ä»¶ï¼šåŒ…å«containerdä½œä¸ºå®¹å™¨è¿è¡Œæ—¶ï¼Œæ— éœ€å¤–éƒ¨Docker 3. ç¯å¢ƒå‡†å¤‡3.1 ç³»ç»Ÿè¦æ±‚ Debian 6.1.129-1 (2025-03-06) x86_64 GNU/Linux Dockerã€Golang ç¯å¢ƒ æœ€ä½é…ç½®ï¼š1æ ¸CPUï¼Œ1GBå†…å­˜ ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œèƒ½å¤Ÿè®¿é—®é˜¿é‡Œäº‘é•œåƒä»“åº“ 3.2 å‰ç½®å‡†å¤‡å·¥ä½œ12345678910111213141516# æ›´æ–°ç³»ç»Ÿsudo apt update &amp;&amp; sudo apt upgrade -y # Ubuntu/Debian# æˆ–sudo yum update -y # CentOS/RHEL# å®‰è£…å¿…è¦å·¥å…·sudo apt install -y curl wget jq vim git # Ubuntu/Debian# å…³é—­é˜²ç«å¢™ï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰æˆ–é…ç½®ç›¸åº”ç«¯å£sudo ufw disable # Ubuntu# æˆ–sudo systemctl stop firewalld &amp;&amp; sudo systemctl disable firewalld # CentOS# å…³é—­SELinuxï¼ˆå¯é€‰ï¼‰sudo setenforce 0sudo sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config 4. å®‰è£…k3sï¼ˆä¸­å›½é•œåƒæºï¼Œç¦ç”¨Traefikï¼‰æ ¹æ®æä¾›çš„å®‰è£…è„šæœ¬ä¿¡æ¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸­å›½é•œåƒæºè¿›è¡Œå®‰è£…ï¼Œå¹¶ç¦ç”¨é»˜è®¤çš„Traefik Ingress Controllerã€‚ 123456789# åˆ›å»ºkubeé…ç½®ç›®å½•mkdir -p ~/.kube# å®‰è£…k3ssudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn sh -s - server \\ --system-default-registry &quot;registry.cn-hangzhou.aliyuncs.com&quot; \\ --write-kubeconfig ~/.kube/config \\ --write-kubeconfig-mode 666 \\ --disable traefik å‚æ•°è¯´æ˜ï¼š INSTALL_K3S_MIRROR=cnï¼šä½¿ç”¨ä¸­å›½é•œåƒæºåŠ é€Ÿä¸‹è½½ --system-default-registry &quot;registry.cn-hangzhou.aliyuncs.com&quot;ï¼šè®¾ç½®é»˜è®¤é•œåƒä»“åº“ä¸ºé˜¿é‡Œäº‘æ­å·åŒºåŸŸï¼ŒåŠ é€Ÿé•œåƒæ‹‰å– --write-kubeconfig ~/.kube/configï¼šå°†kubeconfigæ–‡ä»¶å†™å…¥ç”¨æˆ·ç›®å½• --write-kubeconfig-mode 666ï¼šè®¾ç½®kubeconfigæ–‡ä»¶æƒé™ä¸º666ï¼Œæ–¹ä¾¿å¤šç”¨æˆ·è®¿é—® --disable traefikï¼šç¦ç”¨é»˜è®¤çš„Traefik Ingress Controllerï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Nginx Ingressæˆ–å…¶ä»–æ–¹æ¡ˆ 5. éªŒè¯k3så®‰è£…1234567891011# æ£€æŸ¥k3sæœåŠ¡çŠ¶æ€sudo systemctl status k3s# æ£€æŸ¥k3sç‰ˆæœ¬k3s kubectl version# æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€kubectl get nodes# æ£€æŸ¥ç³»ç»ŸPodçŠ¶æ€kubectl get pods -n kube-system æ­£å¸¸æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥çœ‹åˆ°èŠ‚ç‚¹çŠ¶æ€ä¸ºReadyï¼Œå¹¶ä¸”kube-systemå‘½åç©ºé—´ä¸‹çš„Podéƒ½å¤„äºè¿è¡ŒçŠ¶æ€ã€‚ 6. é…ç½®kubectlè‡ªåŠ¨è¡¥å…¨12345678910# å®‰è£…bash-completionsudo apt install -y bash-completion # Ubuntu/Debian# æˆ–sudo yum install -y bash-completion # CentOS/RHEL# é…ç½®kubectlè‡ªåŠ¨è¡¥å…¨echo 'source &lt;(kubectl completion bash)' &gt;&gt; ~/.bashrcecho 'alias k=kubectl' &gt;&gt; ~/.bashrcecho 'complete -F __start_kubectl k' &gt;&gt; ~/.bashrcsource ~/.bashrc 7. éƒ¨ç½²Nginx Ingress Controllerï¼ˆæ— éœ€å¤–éƒ¨ä»“åº“ï¼‰ç”±äºæˆ‘ä»¬ç¦ç”¨äº†Traefikï¼Œéœ€è¦éƒ¨ç½²ä¸€ä¸ªæ›¿ä»£çš„Ingress Controllerã€‚è¿™é‡Œæˆ‘ä»¬é€‰æ‹©Nginx Ingress Controllerï¼Œå¹¶ä½¿ç”¨k3så†…ç½®çš„containerdã€‚ 7.1 åˆ›å»ºéƒ¨ç½²æ–‡ä»¶åˆ›å»ºnginx-ingress.yamlæ–‡ä»¶ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126apiVersion: v1kind: Namespacemetadata: name: ingress-nginx---apiVersion: v1kind: ServiceAccountmetadata: name: nginx-ingress-serviceaccount namespace: ingress-nginx---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRolemetadata: name: nginx-ingress-clusterrolerules: - apiGroups: [&quot;&quot;] resources: [&quot;configmaps&quot;, &quot;endpoints&quot;, &quot;nodes&quot;, &quot;pods&quot;, &quot;secrets&quot;] verbs: [&quot;list&quot;, &quot;watch&quot;] - apiGroups: [&quot;&quot;] resources: [&quot;nodes&quot;] verbs: [&quot;get&quot;] - apiGroups: [&quot;&quot;] resources: [&quot;services&quot;] verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;] - apiGroups: [&quot;networking.k8s.io&quot;] resources: [&quot;ingresses&quot;] verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;] - apiGroups: [&quot;networking.k8s.io&quot;] resources: [&quot;ingresses/status&quot;] verbs: [&quot;update&quot;] - apiGroups: [&quot;&quot;] resources: [&quot;events&quot;] verbs: [&quot;create&quot;, &quot;patch&quot;]---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata: name: nginx-ingress-clusterrolebindingroleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: nginx-ingress-clusterrolesubjects: - kind: ServiceAccount name: nginx-ingress-serviceaccount namespace: ingress-nginx---apiVersion: apps/v1kind: Deploymentmetadata: name: nginx-ingress-controller namespace: ingress-nginxspec: replicas: 1 selector: matchLabels: app: nginx-ingress template: metadata: labels: app: nginx-ingress spec: serviceAccountName: nginx-ingress-serviceaccount containers: - name: nginx-ingress-controller image: registry.cn-hangzhou.aliyuncs.com/google_containers/nginx-ingress-controller:v1.8.1 args: - /nginx-ingress-controller - --configmap=$(POD_NAMESPACE)/nginx-configuration - --tcp-services-configmap=$(POD_NAMESPACE)/tcp-services - --udp-services-configmap=$(POD_NAMESPACE)/udp-services - --publish-service=$(POD_NAMESPACE)/ingress-nginx - --annotations-prefix=nginx.ingress.kubernetes.io env: - name: POD_NAME valueFrom: fieldRef: fieldPath: metadata.name - name: POD_NAMESPACE valueFrom: fieldRef: fieldPath: metadata.namespace ports: - name: http containerPort: 80 - name: https containerPort: 443 livenessProbe: failureThreshold: 3 httpGet: path: /healthz port: 10254 scheme: HTTP initialDelaySeconds: 10 periodSeconds: 10 successThreshold: 1 timeoutSeconds: 1 readinessProbe: failureThreshold: 3 httpGet: path: /healthz port: 10254 scheme: HTTP periodSeconds: 10 successThreshold: 1 timeoutSeconds: 1---apiVersion: v1kind: Servicemetadata: name: ingress-nginx namespace: ingress-nginxspec: type: NodePort ports: - name: http port: 80 targetPort: 80 nodePort: 30080 - name: https port: 443 targetPort: 443 nodePort: 30443 selector: app: nginx-ingress 7.2 éƒ¨ç½²Nginx Ingress Controller12345# éƒ¨ç½²Nginx Ingress Controllerkubectl apply -f nginx-ingress.yaml# æ£€æŸ¥éƒ¨ç½²çŠ¶æ€kubectl get pods -n ingress-nginx -w ç­‰å¾…æ‰€æœ‰PodçŠ¶æ€å˜ä¸ºRunningï¼Œé€šå¸¸éœ€è¦2-3åˆ†é’Ÿã€‚ 8. åˆ›å»ºGo Webåº”ç”¨ï¼ˆæ— éœ€å¤–éƒ¨Dockerä»“åº“ï¼‰8.1 ç¤ºä¾‹Go Webåº”ç”¨åˆ›å»ºé¡¹ç›®ç›®å½•å’Œæ–‡ä»¶ï¼š 1mkdir -p ~/go-web-app &amp;&amp; cd ~/go-web-app åˆ›å»ºmain.goæ–‡ä»¶ï¼š 12345678910111213141516171819202122232425262728293031323334package mainimport ( &quot;fmt&quot; &quot;net/http&quot; &quot;os&quot; &quot;time&quot;)func main() { http.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) { hostname, _ := os.Hostname() fmt.Fprintf(w, &quot;Hello from Go Web App! ğŸš€\\n&quot;) fmt.Fprintf(w, &quot;Hostname: %s\\n&quot;, hostname) fmt.Fprintf(w, &quot;Server Time: %s\\n&quot;, time.Now().Format(time.RFC3339)) fmt.Fprintf(w, &quot;Request URL: %s\\n&quot;, r.URL.Path) fmt.Fprintf(w, &quot;User Agent: %s\\n&quot;, r.Header.Get(&quot;User-Agent&quot;)) }) http.HandleFunc(&quot;/health&quot;, func(w http.ResponseWriter, r *http.Request) { fmt.Fprintf(w, &quot;OK&quot;) }) port := os.Getenv(&quot;PORT&quot;) if port == &quot;&quot; { port = &quot;8080&quot; } fmt.Printf(&quot;Server starting on port %s...\\n&quot;, port) if err := http.ListenAndServe(&quot;:&quot;+port, nil); err != nil { fmt.Printf(&quot;Server failed: %v\\n&quot;, err) os.Exit(1) }} 8.2 æœ¬åœ°æ„å»ºDockeré•œåƒåˆ›å»ºDockerfileï¼š 1234567891011121314FROM registry.cn-hangzhou.aliyuncs.com/google_containers/golang:1.21-alpine AS builderWORKDIR /appCOPY . .RUN go build -o go-web-app .FROM registry.cn-hangzhou.aliyuncs.com/google_containers/alpine:3.18WORKDIR /root/COPY --from=builder /app/go-web-app .EXPOSE 8080ENV PORT=8080CMD [&quot;./go-web-app&quot;] 8.3 æ„å»ºå¹¶å¯¼å…¥åˆ°k3sçš„containerdç”±äºæˆ‘ä»¬ä¸éœ€è¦å¤–éƒ¨Dockerä»“åº“ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨k3så†…ç½®çš„containerdï¼š 1234567891011# æ„å»ºDockeré•œåƒsudo docker build -t go-web-app:v1 .# å°†Dockeré•œåƒä¿å­˜ä¸ºtaræ–‡ä»¶sudo docker save -o go-web-app.tar go-web-app:v1# å°†é•œåƒå¯¼å…¥åˆ°k3sçš„containerdsudo ctr -n k8s.io images import go-web-app.tar# éªŒè¯é•œåƒæ˜¯å¦å¯¼å…¥æˆåŠŸsudo ctr -n k8s.io images list | grep go-web-app 9. éƒ¨ç½²Go Webåº”ç”¨åˆ°k3s9.1 åˆ›å»ºKuberneteséƒ¨ç½²æ–‡ä»¶åˆ›å»ºdeployment.yamlï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344apiVersion: apps/v1kind: Deploymentmetadata: name: go-web-app labels: app: go-web-appspec: replicas: 2 selector: matchLabels: app: go-web-app template: metadata: labels: app: go-web-app spec: containers: - name: go-web-app image: go-web-app:v1 imagePullPolicy: IfNotPresent ports: - containerPort: 8080 env: - name: PORT value: &quot;8080&quot; readinessProbe: httpGet: path: /health port: 8080 initialDelaySeconds: 5 periodSeconds: 5 livenessProbe: httpGet: path: /health port: 8080 initialDelaySeconds: 15 periodSeconds: 20 resources: limits: cpu: &quot;100m&quot; memory: &quot;128Mi&quot; requests: cpu: &quot;50m&quot; memory: &quot;64Mi&quot; åˆ›å»ºservice.yamlï¼š 123456789101112apiVersion: v1kind: Servicemetadata: name: go-web-app-servicespec: selector: app: go-web-app ports: - port: 80 targetPort: 8080 protocol: TCP type: ClusterIP åˆ›å»ºingress.yamlï¼š 123456789101112131415161718apiVersion: networking.k8s.io/v1kind: Ingressmetadata: name: go-web-app-ingress annotations: nginx.ingress.kubernetes.io/rewrite-target: /spec: ingressClassName: nginx rules: - http: paths: - path: / pathType: Prefix backend: service: name: go-web-app-service port: number: 80 9.2 éƒ¨ç½²åº”ç”¨1234567891011121314# åˆ›å»ºéƒ¨ç½²kubectl apply -f deployment.yaml# åˆ›å»ºæœåŠ¡kubectl apply -f service.yaml# åˆ›å»ºIngresskubectl apply -f ingress.yaml# æ£€æŸ¥éƒ¨ç½²çŠ¶æ€kubectl get deploymentskubectl get podskubectl get serviceskubectl get ingress 10. éªŒè¯åº”ç”¨è®¿é—®10.1 è·å–Ingressåœ°å€1kubectl get ingress è¾“å‡ºåº”è¯¥ç±»ä¼¼äºï¼š 12NAME CLASS HOSTS ADDRESS PORTS AGEgo-web-app-ingress &lt;none&gt; * 192.168.1.100 80 5m 10.2 æµ‹è¯•è®¿é—®12# ä½¿ç”¨curlæµ‹è¯•curl http://&lt;NODE_IP&gt;:30080 æˆ–è€…ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è®¿é—® http://&lt;NODE_IP&gt;:30080ï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š 12345Hello from Go Web App! ğŸš€Hostname: go-web-app-5d8b7b9f7d-2xkl7Server Time: 2023-12-11T15:30:45ZRequest URL: /User Agent: curl/7.68.0 11. åº”ç”¨ç›‘æ§å’Œæ—¥å¿—11.1 æŸ¥çœ‹åº”ç”¨æ—¥å¿—12345# æŸ¥çœ‹æ‰€æœ‰Podæ—¥å¿—kubectl logs -l app=go-web-app --tail=50# å®æ—¶è·Ÿè¸ªæ—¥å¿—kubectl logs -f deployment/go-web-app 11.2 ç«¯å£è½¬å‘æµ‹è¯•12345# å°†æœ¬åœ°ç«¯å£8080è½¬å‘åˆ°æœåŠ¡çš„80ç«¯å£kubectl port-forward service/go-web-app-service 8080:80# åœ¨å¦ä¸€ä¸ªç»ˆç«¯æµ‹è¯•curl http://localhost:8080 12. æœ¬åœ°å¼€å‘å’Œéƒ¨ç½²æµç¨‹ä¼˜åŒ–12.1 åˆ›å»ºæ„å»ºå’Œéƒ¨ç½²è„šæœ¬åˆ›å»ºbuild-and-deploy.shè„šæœ¬ï¼š 1234567891011121314151617181920212223242526#!/bin/bashset -ePROJECT_DIR=$(pwd)IMAGE_NAME=&quot;go-web-app&quot;IMAGE_TAG=&quot;v$(date +%Y%m%d%H%M%S)&quot;echo &quot;æ„å»ºGoåº”ç”¨...&quot;CGO_ENABLED=0 GOOS=linux go build -o app .echo &quot;æ„å»ºDockeré•œåƒ...&quot;sudo docker build -t ${IMAGE_NAME}:${IMAGE_TAG} .echo &quot;å°†é•œåƒå¯¼å…¥åˆ°k3s containerd...&quot;sudo docker save -o ${IMAGE_NAME}.tar ${IMAGE_NAME}:${IMAGE_TAG}sudo ctr -n k8s.io images import ${IMAGE_NAME}.tarsudo rm ${IMAGE_NAME}.tarecho &quot;æ›´æ–°Kuberneteséƒ¨ç½²...&quot;kubectl set image deployment/${IMAGE_NAME} ${IMAGE_NAME}=${IMAGE_NAME}:${IMAGE_TAG} --recordecho &quot;ç­‰å¾…éƒ¨ç½²å®Œæˆ...&quot;kubectl rollout status deployment/${IMAGE_NAME}echo &quot;éƒ¨ç½²æˆåŠŸï¼&quot;kubectl get pods -l app=${IMAGE_NAME} èµ‹äºˆæ‰§è¡Œæƒé™ï¼š 1chmod +x build-and-deploy.sh 12.2 åˆ›å»ºæ›´æ–°è„šæœ¬åˆ›å»ºupdate-deployment.shè„šæœ¬ï¼š 12345678910111213141516171819#!/bin/bashset -eif [ $# -lt 1 ]; then echo &quot;ç”¨æ³•: $0 &lt;new_image_tag&gt;&quot; exit 1fiNEW_TAG=$1IMAGE_NAME=&quot;go-web-app&quot;echo &quot;æ›´æ–°éƒ¨ç½²åˆ°ç‰ˆæœ¬: ${NEW_TAG}...&quot;kubectl set image deployment/${IMAGE_NAME} ${IMAGE_NAME}=${IMAGE_NAME}:${NEW_TAG} --recordecho &quot;ç­‰å¾…éƒ¨ç½²å®Œæˆ...&quot;kubectl rollout status deployment/${IMAGE_NAME}echo &quot;éƒ¨ç½²æˆåŠŸï¼&quot;kubectl get pods -l app=${IMAGE_NAME} èµ‹äºˆæ‰§è¡Œæƒé™ï¼š 1chmod +x update-deployment.sh 13. å¸¸ç”¨ç»´æŠ¤å‘½ä»¤13.1 k3sç®¡ç†å‘½ä»¤1234567891011121314151617# åœæ­¢k3sæœåŠ¡sudo systemctl stop k3s# å¯åŠ¨k3sæœåŠ¡sudo systemctl start k3s# é‡å¯k3sæœåŠ¡sudo systemctl restart k3s# æŸ¥çœ‹k3sæ—¥å¿—sudo journalctl -u k3s -f# æŸ¥çœ‹containerdé•œåƒsudo ctr -n k8s.io images list# å¯¼å‡ºcontainerdé•œåƒsudo ctr -n k8s.io images export go-web-app.tar go-web-app:v1 13.2 åº”ç”¨ç®¡ç†å‘½ä»¤1234567891011# æŸ¥çœ‹æ‰€æœ‰èµ„æºkubectl get all# åˆ é™¤åº”ç”¨kubectl delete -f deployment.yaml -f service.yaml -f ingress.yaml# å¼ºåˆ¶åˆ é™¤æ‰€æœ‰ç›¸å…³èµ„æºkubectl delete all -l app=go-web-app# å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬kubectl rollout undo deployment/go-web-app 13.3 èŠ‚ç‚¹ç®¡ç†12345678# æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯kubectl describe node $(hostname)# æ ‡è®°èŠ‚ç‚¹ä¸å¯è°ƒåº¦kubectl cordon $(hostname)# å°†èŠ‚ç‚¹æ ‡è®°ä¸ºå¯è°ƒåº¦kubectl uncordon $(hostname) 14. å¸è½½k3så¦‚æœéœ€è¦å¸è½½k3sï¼š 12# ä½¿ç”¨å¸è½½è„šæœ¬sudo /usr/local/bin/k3s-uninstall.sh 15. æ€»ç»“é€šè¿‡è¿™ç¯‡æ•™ç¨‹ï¼Œæˆ‘ä»¬æˆåŠŸå®Œæˆäº†ï¼š âœ… è½»é‡çº§Kubernetesç¯å¢ƒæ­å»ºï¼šä½¿ç”¨k3så¿«é€Ÿéƒ¨ç½²Kubernetesé›†ç¾¤âœ… ä¸­å›½é•œåƒæºä¼˜åŒ–ï¼šä½¿ç”¨é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿä¸‹è½½å’Œéƒ¨ç½²âœ… ç¦ç”¨Traefikï¼šæ ¹æ®éœ€æ±‚ç¦ç”¨é»˜è®¤çš„Traefik Ingress Controllerâœ… æ— éœ€å¤–éƒ¨Dockerä»“åº“ï¼šä½¿ç”¨k3så†…ç½®çš„containerdç®¡ç†é•œåƒâœ… Go Webåº”ç”¨éƒ¨ç½²ï¼šä»ä»£ç åˆ°Kuberneteséƒ¨ç½²çš„å®Œæ•´æµç¨‹âœ… Nginx Ingressé…ç½®ï¼šå®ç°å¤–éƒ¨è®¿é—®åº”ç”¨âœ… æœ¬åœ°å¼€å‘æµç¨‹ä¼˜åŒ–ï¼šåˆ›å»ºè‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²è„šæœ¬ k3sä½œä¸ºè½»é‡çº§çš„Kubernetesè§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚åˆèµ„æºæœ‰é™çš„ç¯å¢ƒå’Œå¿«é€Ÿå¼€å‘æµ‹è¯•åœºæ™¯ã€‚é€šè¿‡è¿™ä¸ªéƒ¨ç½²æµç¨‹ï¼Œä½ å¯ä»¥å¿«é€Ÿæ­å»ºä¸€ä¸ªæ”¯æŒGo Webåº”ç”¨çš„Kubernetesç¯å¢ƒï¼Œå¹¶ä¸”ä¸éœ€è¦ä¾èµ–å¤–éƒ¨Dockerä»“åº“ï¼Œæ‰€æœ‰æ“ä½œéƒ½åœ¨æœ¬åœ°å®Œæˆã€‚ 16. åç»­ä¼˜åŒ–å»ºè®® æŒä¹…åŒ–å­˜å‚¨ï¼šé…ç½®PV/PVCç”¨äºæ•°æ®æŒä¹…åŒ– é…ç½®ç®¡ç†ï¼šä½¿ç”¨ConfigMapå’ŒSecretç®¡ç†é…ç½® ç›‘æ§å‘Šè­¦ï¼šé›†æˆPrometheuså’ŒGrafana CI/CDæµæ°´çº¿ï¼šé…ç½®è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½² å®‰å…¨åŠ å›ºï¼šé…ç½®RBACã€ç½‘ç»œç­–ç•¥ç­‰å®‰å…¨æªæ–½ å¤šèŠ‚ç‚¹é›†ç¾¤ï¼šæ‰©å±•ä¸ºå¤šèŠ‚ç‚¹é«˜å¯ç”¨é›†ç¾¤ è¿™ä¸ªæœ€å°åŒ–ä½†åŠŸèƒ½å®Œæ•´çš„k3sç¯å¢ƒï¼Œä¸ºä½ æä¾›äº†å¿«é€Ÿéƒ¨ç½²Go Webåº”ç”¨çš„åŸºç¡€ï¼Œåç»­å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œæ‰©å±•å’Œä¼˜åŒ–ã€‚","link":"/ab528300.html"},{"title":"Deep Practice of Domain-Driven Design (DDD): Principles of Architecture, Cost Trade-Offsï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰æ·±åº¦å®è·µï¼šæ¶æ„åŸç†ã€æˆæœ¬æƒè¡¡ä¸å®æˆ˜ï¼‰","text":"DDDå®šä¹‰é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆè‹±æ–‡ï¼šDomain-Driven Designï¼Œç¼©å†™DDDï¼‰æ˜¯ä¸€ç§æ¨¡å‹é©±åŠ¨è®¾è®¡çš„æ–¹æ³•ï¼Œé€šè¿‡é¢†åŸŸæ¨¡å‹æ•æ‰é¢†åŸŸçŸ¥è¯†ï¼Œä½¿ç”¨é¢†åŸŸæ¨¡å‹æ„é€ æ›´æ˜“ç»´æŠ¤çš„è½¯ä»¶ã€‚æœ€æ—©ç”±åŸƒé‡Œå…‹ãƒ»åŸƒæ–‡æ–¯åœ¨2003å¹´è‘—ä½œã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹æå‡ºçš„è½¯ä»¶å¼€å‘æ–¹æ³•è®ºï¼Œé€šè¿‡å°†è½¯ä»¶å®ç°ä¸æŒç»­è¿›åŒ–çš„é¢†åŸŸæ¨¡å‹ç»“åˆæ¥å¤„ç†å¤æ‚ä¸šåŠ¡éœ€æ±‚ã€‚è¯¥æ–¹æ³•èšç„¦æ ¸å¿ƒé¢†åŸŸé€»è¾‘ï¼Œå¼ºè°ƒä¸šåŠ¡ä¸æŠ€æœ¯ä¸“å®¶åä½œå»ºç«‹ç»Ÿä¸€è¯­è¨€ï¼Œåˆ©ç”¨åˆ†å±‚æ¶æ„åˆ†ç¦»ä¸šåŠ¡ä¸æŠ€æœ¯å¤æ‚åº¦ã€‚ æ¨¡å‹åœ¨é¢†åŸŸé©±åŠ¨è®¾è®¡çš„ä¸‰ä¸ªé‡è¦ç”¨é€” å®ç°æ˜ å°„ï¼šæ¨¡å‹ä½œä¸ºè½¯ä»¶æ¶æ„çš„è“å›¾ï¼Œç›´æ¥é©±åŠ¨ä»£ç å®ç°ï¼Œç¡®ä¿æŠ€æœ¯ç»“æ„ä¸ä¸šåŠ¡æ¦‚å¿µä¸€è‡´ã€‚ è¯­è¨€ç»Ÿä¸€ï¼šæ¨¡å‹å¥ å®šå›¢é˜Ÿé€šç”¨è¯­è¨€ï¼ˆUbiquitous Languageï¼‰çš„åŸºç¡€ï¼Œæ¶ˆé™¤æ²Ÿé€šæ­§ä¹‰ï¼Œä¿ƒè¿›è·¨èŒèƒ½åä½œã€‚ çŸ¥è¯†æ²‰æ·€ï¼šæ¨¡å‹å°è£…é¢†åŸŸç²¾åçŸ¥è¯†ï¼Œæˆä¸ºå¯å¤ç”¨ã€å¯ä¼ é€’çš„çŸ¥è¯†è½½ä½“ï¼Œæ”¯æŒæŒç»­æ¼”è¿›å’Œä¼ æ‰¿ã€‚ åŸŸé©±åŠ¨å¼€å‘åŒ…å«æˆ˜ç•¥è®¾è®¡ä¸æˆ˜æœ¯è®¾è®¡ä¸¤ä¸ªé˜¶æ®µï¼š æˆ˜ç•¥è®¾è®¡ï¼šé€šè¿‡é™ç•Œä¸Šä¸‹æ–‡åˆ’åˆ†ä¸šåŠ¡è¾¹ç•Œï¼Œé‡‡ç”¨ä¸Šä¸‹æ–‡æ˜ å°„å¤„ç†ç³»ç»Ÿäº¤äº’ï¼› æˆ˜æœ¯è®¾è®¡ï¼šè¿ç”¨å®ä½“ã€å€¼å¯¹è±¡ã€èšåˆæ ¹ç­‰è¦ç´ æ„å»ºé¢†åŸŸæ¨¡å‹ï¼Œé€šè¿‡å·¥å‚å’Œä»“å‚¨ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸã€‚æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬é¢†åŸŸæœåŠ¡ã€é¢†åŸŸäº‹ä»¶åŠæ¨¡å—åˆ’åˆ†æœºåˆ¶ï¼Œæ”¯æŒäº‹ä»¶é©±åŠ¨ä¸CQRSæ¶æ„é™ä½ç³»ç»Ÿè€¦åˆã€‚ åœ¨å¤æ‚ä¸šåŠ¡ç³»ç»Ÿå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸é¢ä¸´è¿™æ ·çš„å›°å¢ƒï¼šä¸šåŠ¡é€»è¾‘åƒæ„å¤§åˆ©é¢æ¡èˆ¬ç¼ ç»•åœ¨Controllerå±‚ï¼Œæ•°æ®åº“è¡¨ç›´æ¥æš´éœ²ç»™å‰ç«¯ï¼Œæ¯æ¬¡éœ€æ±‚å˜æ›´éƒ½å¼•å‘è¿é”å´©æºƒã€‚é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰æ­£æ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„æˆ˜ç•¥çº§æ–¹æ¡ˆã€‚ æœ¬æ–‡å°†æ·±å…¥å‰–æDDDæ ¸å¿ƒåŸç†ï¼Œè¯„ä¼°å…¶æˆæœ¬ä¸æ”¶ç›Šï¼Œå¹¶æ‹¿å…¸å‹çš„ç”µå•†è®¢å•åœºæ™¯(é€šè¿‡Goè¯­è¨€å®ç°)ï¼Œç®€å•æ­ç¤ºæ„å»ºçœŸæ­£é¢å‘ä¸šåŠ¡æ¼”è¿›çš„ç³»ç»Ÿæ–¹æ¡ˆã€‚ ä¸€ã€DDDæ¶æ„æŠ€æœ¯åŸç†ï¼šåˆ†å±‚è§£è€¦ä¸é¢†åŸŸèšç„¦DDDçš„æ ¸å¿ƒæ˜¯å°†å¤æ‚ä¸šåŠ¡æŠ½è±¡ä¸ºé¢†åŸŸæ¨¡å‹ï¼Œå…¶æ¶æ„åŒ…å«å››ä¸ªå…³é”®å±‚æ¬¡ï¼ˆè‡ªä¸‹è€Œä¸Šï¼‰ï¼š åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructureï¼‰å®ç°æŠ€æœ¯ç»†èŠ‚ï¼šæ•°æ®åº“è®¿é—®ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å¤–éƒ¨APIè°ƒç”¨ã€‚ç¦æ­¢åŒ…å«ä¸šåŠ¡è§„åˆ™ã€‚ 12345678// Golangç¤ºä¾‹ï¼šMySQLä»“å‚¨å®ç°type OrderRepository struct { db *gorm.DB}func (r *OrderRepository) Save(ctx context.Context, order *domain.Order) error { return r.db.WithContext(ctx).Save(order).Error} é¢†åŸŸå±‚ï¼ˆDomainï¼‰ç³»ç»Ÿæ ¸å¿ƒï¼ŒåŒ…å«ï¼š å®ä½“ï¼ˆEntityï¼‰ï¼šå…·æœ‰å”¯ä¸€IDçš„å¯¹è±¡ï¼ˆå¦‚Orderï¼‰ å€¼å¯¹è±¡ï¼ˆValue Objectï¼‰ï¼šæ— IDçš„å±æ€§é›†åˆï¼ˆå¦‚Addressï¼‰ èšåˆæ ¹ï¼ˆAggregate Rootï¼‰ï¼šä¸€è‡´æ€§è¾¹ç•Œï¼ˆå¦‚OrderèšåˆåŒ…å«OrderItemï¼‰ é¢†åŸŸæœåŠ¡ï¼ˆDomain Serviceï¼‰ï¼šè·¨å®ä½“ä¸šåŠ¡é€»è¾‘123456789101112131415// èšåˆæ ¹å®šä¹‰ï¼ˆé¢†åŸŸå±‚ï¼‰type Order struct { ID string Items []OrderItem Status OrderStatus Total money.Money // å€¼å¯¹è±¡}func (o *Order) CalculateTotal() { total := 0.0 for _, item := range o.Items { total += item.Price * float64(item.Quantity) } o.Total = money.New(total, &quot;USD&quot;) // å°è£…è´§å¸è®¡ç®—é€»è¾‘} åº”ç”¨å±‚ï¼ˆApplicationï¼‰ç¼–æ’é¢†åŸŸå¯¹è±¡ï¼Œå®ç°ç”¨ä¾‹ï¼ˆå¦‚CreateOrderï¼‰ã€‚ä¸åŒ…å«ä¸šåŠ¡è§„åˆ™ï¼Œä»…è°ƒç”¨é¢†åŸŸæœåŠ¡ã€‚ 12345678func (s *OrderService) CreateOrder(ctx context.Context, cmd CreateOrderCmd) (string, error) { order := domain.NewOrder(cmd.UserID, cmd.Items) order.CalculateTotal() // è°ƒç”¨é¢†åŸŸè¡Œä¸º if order.Total.Amount &lt; 10 { return &quot;&quot;, errors.New(&quot;minimum order amount is $10&quot;) } return s.repo.Save(ctx, order)} æ¥å£å±‚ï¼ˆInterfacesï¼‰æš´éœ²API/äº‹ä»¶ï¼Œå¤„ç†DTOè½¬æ¢ã€‚ä¾‹å¦‚HTTPæ§åˆ¶å™¨ï¼š 123456789101112131415func (h *OrderHandler) CreateOrder(w http.ResponseWriter, r *http.Request) { var req CreateOrderRequest if err := json.NewDecoder(r.Body).Decode(&amp;req); err != nil { http.Error(w, &quot;invalid request&quot;, 400) return } cmd := application.CreateOrderCmd{ // è½¬æ¢ä¸ºåº”ç”¨å±‚å‘½ä»¤ UserID: r.Context().Value(&quot;user_id&quot;).(string), Items: req.Items, } orderID, err := h.appService.CreateOrder(r.Context(), cmd) // ... å“åº”å¤„ç†} å…³é”®è®¾è®¡åŸåˆ™ï¼šâœ… ä¾èµ–å€’ç½®ï¼šé¢†åŸŸå±‚ä¸ä¾èµ–åŸºç¡€è®¾æ–½ï¼Œä»“å‚¨é€šè¿‡æ¥å£å®šä¹‰âœ… èšåˆè¾¹ç•Œï¼šé€šè¿‡èšåˆæ ¹ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼ˆå¦‚è®¢å•æ€»ä»·å¿…é¡»ç­‰äºå•†å“ä»·æ ¼æ€»å’Œï¼‰âœ… é˜²è…å±‚ï¼ˆACLï¼‰ï¼šéš”ç¦»å¤–éƒ¨ç³»ç»Ÿå˜æ›´å¯¹é¢†åŸŸæ¨¡å‹çš„æ±¡æŸ“ äºŒã€DDDå®æ–½æˆæœ¬ï¼šæŠ•å…¥ä¸å›æŠ¥çš„å¹³è¡¡æœ¯ æˆæœ¬ç»´åº¦ å…·ä½“æŒ‘æˆ˜ åº”å¯¹ç­–ç•¥ å­¦ä¹ æ›²çº¿ éœ€æŒæ¡ç»Ÿä¸€è¯­è¨€ã€é™ç•Œä¸Šä¸‹æ–‡ç­‰æŠ½è±¡æ¦‚å¿µ é€šè¿‡äº‹ä»¶é£æš´å·¥ä½œåŠå¯¹é½ä¸šåŠ¡æœ¯è¯­ åˆæœŸå¼€å‘é€Ÿåº¦ æ¨¡å‹è®¾è®¡è€—æ—¶ï¼Œæ¯”CRUDå¼€å‘æ…¢30%-50% ä»…åœ¨æ ¸å¿ƒå­åŸŸåº”ç”¨DDDï¼Œå…¶ä½™ä½¿ç”¨äº‹åŠ¡è„šæœ¬ å›¢é˜Ÿåä½œæˆæœ¬ éœ€ä¸šåŠ¡ä¸“å®¶æ·±åº¦å‚ä¸ å»ºç«‹é¢†åŸŸæ¨¡å‹è¯„å®¡æœºåˆ¶ æŠ€æœ¯å¤æ‚åº¦ åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆSagaæ¨¡å¼ï¼‰ã€äº‹ä»¶æœ€ç»ˆä¸€è‡´æ€§ é‡‡ç”¨äº‹ä»¶æº¯æº+CQRSç®€åŒ–å¤æ‚åœºæ™¯ ğŸ’¡ å…³é”®æ´å¯Ÿï¼šDDDçš„é•¿æœŸç»´æŠ¤æˆæœ¬æ˜¾è‘—ä½äºä¼ ç»Ÿä¸‰å±‚æ¶æ„ã€‚æŸç”µå•†å¹³å°å®è·µè¡¨æ˜ï¼Œéœ€æ±‚å˜æ›´å¯¼è‡´çš„çº§è”ä¿®æ”¹å‡å°‘60%ï¼Œæ–°äººç†è§£ä¸šåŠ¡è§„åˆ™æ—¶é—´ç¼©çŸ­40%ã€‚ ä¸‰ã€DDDé€‚ç”¨åœºæ™¯ï¼šä½•æ—¶è¯¥å¯åŠ¨é¢†åŸŸå»ºæ¨¡ï¼Ÿâœ… æ¨èåœºæ™¯ ä¸šåŠ¡è§„åˆ™å¤æ‚ä¸”é¢‘ç¹å˜åŒ–ï¼ˆå¦‚é‡‘èé£æ§ã€ç”µå•†ä¿ƒé”€ï¼‰ éœ€è¦å¤šå›¢é˜Ÿåä½œçš„å¤§å‹ç³»ç»Ÿï¼ˆé€šè¿‡é™ç•Œä¸Šä¸‹æ–‡è§£è€¦ï¼‰ é¢†åŸŸçŸ¥è¯†æœ¬èº«å°±æ˜¯æ ¸å¿ƒç«äº‰åŠ›ï¼ˆå¦‚åŒ»ç–—è¯Šæ–­ç³»ç»Ÿï¼‰ âŒ æ…ç”¨åœºæ™¯ ç®€å•CRUDåº”ç”¨ï¼ˆå¦‚å†…éƒ¨ç®¡ç†åå°ï¼‰ ä»¥æ•°æ®æŠ¥è¡¨ä¸ºä¸­å¿ƒçš„ç³»ç»Ÿ æŠ€æœ¯åŸå‹éªŒè¯é˜¶æ®µ å››ã€ç»´æŠ¤æ€§ï¼šDDDçš„é•¿æœŸä»·å€¼ä¼˜åŠ¿ ä¸šåŠ¡å¯æ¼”è¿›æ€§ä¿ƒé”€ç­–ç•¥å˜æ›´ç¤ºä¾‹ï¼šåœ¨é¢†åŸŸå±‚æ·»åŠ DiscountPolicyæ¥å£ï¼Œåº”ç”¨å±‚åˆ‡æ¢å®ç°ï¼Œä¸å½±å“è®¢å•åˆ›å»ºæµç¨‹ï¼š 1234567type DiscountPolicy interface { Apply(items []OrderItem) money.Money}// æ–°å¢èŠ‚æ—¥æŠ˜æ‰£ç­–ç•¥type HolidayDiscount struct{}func (h *HolidayDiscount) Apply(items []OrderItem) money.Money { ... } æŠ€æœ¯å¯æ›¿æ¢æ€§ä»“å‚¨æ¥å£è§£è€¦ä½¿æ•°æ®åº“è¿ç§»æˆæœ¬é™ä½ï¼š 1234567// é¢†åŸŸå±‚å®šä¹‰æ¥å£type OrderRepository interface { Save(ctx context.Context, order *Order) error}// åŸºç¡€è®¾æ–½å±‚å®ç°type MongoOrderRepo struct{ ... } // å¯éšæ—¶åˆ‡æ¢ä¸ºPostgreså®ç° æµ‹è¯•å‹å¥½æ€§é¢†åŸŸå¯¹è±¡å¯ç‹¬ç«‹å•å…ƒæµ‹è¯•ï¼Œæ— éœ€å¯åŠ¨æ•°æ®åº“ï¼š 12345678func TestOrder_CalculateTotal(t *testing.T) { order := domain.NewOrder(&quot;user1&quot;, []domain.OrderItem{ {Price: 10, Quantity: 2}, {Price: 5, Quantity: 3}, }) order.CalculateTotal() assert.Equal(t, 35.0, order.Total.Amount) } äº”ã€å®æˆ˜ï¼šç”µå•†è®¢å•ç³»ç»Ÿï¼ˆGolangå®ç°ï¼‰ä¸šåŠ¡åœºæ™¯ï¼šç”¨æˆ·ä¸‹å•åï¼Œç³»ç»Ÿéœ€æ ¡éªŒåº“å­˜ã€è®¡ç®—æ€»ä»·ã€ç”Ÿæˆæ”¯ä»˜é“¾æ¥ 1. é™ç•Œä¸Šä¸‹æ–‡åˆ’åˆ† OrderContextï¼šè®¢å•åˆ›å»ºã€çŠ¶æ€ç®¡ç† PaymentContextï¼šæ”¯ä»˜å¤„ç†ï¼ˆé€šè¿‡é¢†åŸŸäº‹ä»¶è§£è€¦ï¼‰graph LR OrderContext -- OrderCreatedEvent --> PaymentContext 2. å…³é”®ä»£ç ç»“æ„1234567891011121314â”œâ”€â”€ domain/ # é¢†åŸŸå±‚â”‚ â”œâ”€â”€ order.go # èšåˆæ ¹â”‚ â”œâ”€â”€ order_item.goâ”‚ â””â”€â”€ events.go # é¢†åŸŸäº‹ä»¶â”œâ”€â”€ application/ # åº”ç”¨å±‚â”‚ â”œâ”€â”€ order_service.goâ”‚ â””â”€â”€ commands.goâ”œâ”€â”€ infrastructure/ # åŸºç¡€è®¾æ–½â”‚ â”œâ”€â”€ persistence/â”‚ â”‚ â””â”€â”€ order_repository.goâ”‚ â””â”€â”€ messaging/ # äº‹ä»¶å‘å¸ƒâ”œâ”€â”€ interfaces/ # æ¥å£å±‚â”‚ â””â”€â”€ http/â””â”€â”€ main.go # ä¾èµ–æ³¨å…¥ 3. é¢†åŸŸäº‹ä»¶å®ç°ï¼ˆè§£è€¦æ”¯ä»˜ï¼‰12345678910111213141516171819// domain/events.gotype OrderCreatedEvent struct { OrderID string Amount money.Money}// application/order_service.gofunc (s *OrderService) CreateOrder(...) { // ... ä¸šåŠ¡é€»è¾‘ s.eventPublisher.Publish(&quot;order.created&quot;, OrderCreatedEvent{ OrderID: order.ID, Amount: order.Total, })}// infrastructure/messaging/payment_subscriber.gofunc (s *PaymentSubscriber) HandleOrderCreated(event domain.OrderCreatedEvent) { s.paymentService.CreatePayment(event.OrderID, event.Amount) // è°ƒç”¨PaymentContext} 4. ä¾èµ–æ³¨å…¥ï¼ˆmain.goï¼‰1234567891011121314func main() { // åŸºç¡€è®¾æ–½åˆå§‹åŒ– db := gorm.Open(mysql.Open(dsn)) repo := infrastructure.NewOrderRepository(db) eventBus := infrastructure.NewKafkaEventBus() // åº”ç”¨å±‚ç»„è£… orderService := application.NewOrderService(repo, eventBus) // å¯åŠ¨HTTPæœåŠ¡ handler := interfaces.NewOrderHandler(orderService) http.HandleFunc(&quot;/orders&quot;, handler.CreateOrder) log.Fatal(http.ListenAndServe(&quot;:8080&quot;, nil))} å…­ã€æ€»ç»“ï¼šDDDä¸æ˜¯é“¶å¼¹ï¼Œè€Œæ˜¯æˆ˜ç•¥æ€ç»´ æ ¸å¿ƒä»·å€¼ï¼šå°†ä¸šåŠ¡å¤æ‚åº¦è½¬åŒ–ä¸ºå¯æ¼”è¿›çš„æ¨¡å‹ï¼Œè€Œééšè—åœ¨ä»£ç ç»†èŠ‚ä¸­ å®æ–½å…³é”®ï¼š é€šè¿‡äº‹ä»¶é£æš´è¯†åˆ«æ ¸å¿ƒå­åŸŸä¸é™ç•Œä¸Šä¸‹æ–‡ é¢†åŸŸå±‚ä¸¥æ ¼éš”ç¦»æŠ€æœ¯ç»†èŠ‚ é‡‡ç”¨æ¸è¿›å¼è½åœ°ï¼šå…ˆæ ¸å¿ƒå­åŸŸå†æ‰©å±• Golangå®è·µå»ºè®®ï¼š ç”¨struct+æ–¹æ³•å®ç°èšåˆæ ¹è¡Œä¸º é€šè¿‡æ¥å£å®ç°ä¾èµ–å€’ç½® ä½¿ç”¨go.uber.org/fxç®€åŒ–ä¾èµ–æ³¨å…¥ â€œDDDä¸æ˜¯å…³äºä»£ç ï¼Œè€Œæ˜¯å…³äºæ²Ÿé€šã€‚å½“ä¸šåŠ¡ä¸“å®¶èƒ½çœ‹æ‡‚ä½ çš„èšåˆæ ¹å‘½åï¼Œä½ å°±æˆåŠŸäº†ä¸€åŠã€‚â€åœ¨æŒç»­äº¤ä»˜çš„æ—¶ä»£ï¼ŒDDDè®©æˆ‘ä»¬åœ¨æŠ€æœ¯å€ºçš„æ´ªæµä¸­ï¼Œä¸ºä¸šåŠ¡ä»·å€¼ç­‘èµ·ä¸€é“å ¤åã€‚çœŸæ­£çš„æ¶æ„ä¹‹ç¾ï¼Œåœ¨äºè®©ç³»ç»Ÿåƒç”Ÿå‘½ä½“ä¸€æ ·ç”Ÿé•¿ï¼Œè€Œéåœ¨éœ€æ±‚å˜æ›´ä¸­è…çƒ‚ã€‚ å»¶ä¼¸é˜…è¯»ï¼š ã€Šå®ç°é¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹Vaughn Vernon Microsoft DDDæ¨¡å¼æŒ‡å— Golang DDDæ¨¡æ¿é¡¹ç›® æ³¨ï¼šæœ¬æ–‡ä»£ç ä¸ºç²¾ç®€ç¤ºä¾‹ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¡¥å……äº‹åŠ¡ç®¡ç†ã€å¹‚ç­‰æ€§è®¾è®¡ã€é˜²è…å±‚ç­‰ç»†èŠ‚ã€‚å®Œæ•´ä»£ç å¯å‚è€ƒæ–‡æœ«GitHubé“¾æ¥ã€‚ ä¸ƒã€DDDé¢†åŸŸé©±åŠ¨è®¾è®¡å’Œç»´æœåŠ¡çš„å…³ç³»å’ŒåŒºåˆ«DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰ å’Œ å¾®æœåŠ¡ï¼ˆMicroservicesï¼‰ çš„å…³ç³»ï¼š æ˜¯çš„ï¼ŒDDD æ˜¯ä¸€ç§æŒ‡å¯¼æ€æƒ³ï¼ˆè®¾è®¡æ–¹æ³•è®ºï¼‰ï¼Œå¾®æœåŠ¡æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼ˆå…·ä½“å®æ–½å½¢å¼ä¹‹ä¸€ï¼‰ï¼›DDD ä¸ºå¾®æœåŠ¡çš„åˆç†æ‹†åˆ†ä¸è¾¹ç•Œç•Œå®šæä¾›äº†ç†è®ºæ”¯æ’‘ï¼Œä½†äºŒè€…å¹¶éç»‘å®šå…³ç³»ã€‚ 1. DDD çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆï¼Ÿ é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDomain-Driven Designï¼‰ æ˜¯ç”± Eric Evans åœ¨ 2003 å¹´æå‡ºçš„è½¯ä»¶è®¾è®¡æ–¹æ³•è®ºï¼Œå…³æ³¨ç‚¹æ˜¯ï¼š ä»¥ä¸šåŠ¡é¢†åŸŸä¸ºæ ¸å¿ƒï¼› é€šè¿‡ç»Ÿä¸€è¯­è¨€ï¼ˆUbiquitous Languageï¼‰ å¯¹é½ä¸šåŠ¡ä¸æŠ€æœ¯ï¼› é€šè¿‡é™ç•Œä¸Šä¸‹æ–‡ï¼ˆBounded Contextï¼‰ åˆ’åˆ†å¤æ‚ç³»ç»Ÿçš„é€»è¾‘è¾¹ç•Œï¼› é€šè¿‡èšåˆã€å®ä½“ã€å€¼å¯¹è±¡ã€é¢†åŸŸäº‹ä»¶ç­‰æˆ˜æœ¯å»ºæ¨¡å·¥å…·è½åœ°é¢†åŸŸæ¨¡å‹ã€‚ ğŸ’¡ DDD æœ¬è´¨æ˜¯ï¼šå¦‚ä½•æ›´å¥½åœ°ç†è§£ã€å»ºæ¨¡å’Œå®ç°å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼Œä¸æŠ€æœ¯æ¶æ„æ— å…³ï¼ˆå¯åº”ç”¨äºå•ä½“ã€å¾®æœåŠ¡ã€Serverless ç­‰ï¼‰ã€‚ 2. å¾®æœåŠ¡çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆï¼Ÿ å¾®æœåŠ¡æ¶æ„ æ˜¯ä¸€ç§åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„é£æ ¼ï¼Œå¼ºè°ƒï¼š å°†ç³»ç»Ÿæ‹†åˆ†ä¸ºä¸€ç»„å°å‹ã€ç‹¬ç«‹éƒ¨ç½²ã€æ¾è€¦åˆçš„æœåŠ¡ï¼› æ¯ä¸ªæœåŠ¡å›´ç»•ä¸šåŠ¡èƒ½åŠ›ç»„ç»‡ï¼ˆå…³é”®ï¼ï¼‰ï¼› æœåŠ¡é—´é€šè¿‡è½»é‡çº§é€šä¿¡ï¼ˆå¦‚ HTTP/RESTã€gRPCã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰åä½œï¼› è‡ªæ²»æ€§ï¼šç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ã€æ‰©å±•ã€æŠ€æœ¯æ ˆé€‰å‹ã€‚ âš ï¸ å¾®æœåŠ¡è‹¥æ‹†åˆ†ä¸å½“ï¼ˆå¦‚æŒ‰æŠ€æœ¯å±‚ã€CRUD æ‹†åˆ†ï¼‰ï¼Œåè€Œä¼šå¯¼è‡´â€œåˆ†å¸ƒå¼å•ä½“â€â€”â€”æ›´å¤æ‚ã€æ›´éš¾ç»´æŠ¤ã€‚ 3. DDD ä¸å¾®æœåŠ¡çš„å¤©ç„¶å¥‘åˆç‚¹ DDD æ¦‚å¿µ â†’ æ˜ å°„åˆ°å¾®æœåŠ¡ ä½œç”¨ é™ç•Œä¸Šä¸‹æ–‡ï¼ˆBounded Contextï¼‰ â†’ å¾®æœåŠ¡çš„è¾¹ç•Œ ä¸ºæœåŠ¡åˆ’åˆ†æä¾›ä¸šåŠ¡è¯­ä¹‰ä¾æ®ï¼Œé¿å…æœåŠ¡èŒè´£æ¨¡ç³Š ä¸Šä¸‹æ–‡æ˜ å°„ï¼ˆContext Mapï¼‰ â†’ æœåŠ¡é—´åä½œå…³ç³» æŒ‡å¯¼æœåŠ¡å¦‚ä½•é›†æˆï¼ˆå¦‚é˜²è…å±‚ã€å…±äº«å†…æ ¸ã€å®¢æˆ·-ä¾›åº”å•†ç­‰ï¼‰ èšåˆæ ¹ï¼ˆAggregateï¼‰ â†’ æœåŠ¡å†…éƒ¨ä¸€è‡´æ€§è¾¹ç•Œ å¸®åŠ©è®¾è®¡æœåŠ¡å†…äº‹åŠ¡ä¸æ•°æ®ä¸€è‡´æ€§èŒƒå›´ é¢†åŸŸäº‹ä»¶ï¼ˆDomain Eventï¼‰ â†’ æœåŠ¡é—´å¼‚æ­¥é€šä¿¡æœºåˆ¶ æ”¯æŒæœ€ç»ˆä¸€è‡´æ€§ã€äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEDAï¼‰ âœ… ç»å…¸å®è·µï¼šä¸€ä¸ª Bounded Context â‰ˆ ä¸€ä¸ªå¾®æœåŠ¡ï¼ˆä½†éç»å¯¹ï¼Œéœ€ç»“åˆå›¢é˜Ÿã€è§„æ¨¡ã€æ¼”è¿›é˜¶æ®µæƒè¡¡ï¼‰ 4. å¸¸è§è¯¯åŒºæ¾„æ¸… è¯¯åŒº è¯´æ˜ âŒ â€œç”¨äº†å¾®æœåŠ¡å°±å¿…é¡»ç”¨ DDDâ€ å¦ã€‚å°å‹/ç®€å•ä¸šåŠ¡å¯ç”¨ CRUD æœåŠ¡ï¼›DDD ä¸»è¦åº”å¯¹å¤æ‚ä¸šåŠ¡é¢†åŸŸ âŒ â€œDDD å°±æ˜¯ä¸ºäº†æ‹†å¾®æœåŠ¡â€ å¦ã€‚DDD æœ€åˆæ˜¯ä¸ºå•ä½“ç³»ç»Ÿè®¾è®¡çš„ï¼›å®ƒå…ˆè§£å†³â€œæ€ä¹ˆå»ºæ¨¡â€ï¼Œå†è°ˆâ€œæ€ä¹ˆéƒ¨ç½²â€ âœ… â€œå¾®æœåŠ¡ + DDD = é«˜å†…èšã€ä½è€¦åˆçš„å¯æ¼”è¿›æ¶æ„â€ æ˜¯ï¼DDD æä¾›â€œä¸ºä»€ä¹ˆè¿™æ ·æ‹†â€çš„ä¾æ®ï¼Œé¿å…â€œä¸ºæ‹†è€Œæ‹†â€ ğŸŒ° ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾è¦åšä¸€ä¸ªå…¸å‹çš„ç”µå•†ç³»ç»Ÿï¼š æ²¡æœ‰ DDD æŒ‡å¯¼çš„å¾®æœåŠ¡æ‹†åˆ†ï¼š æ‹†æˆ user-serviceã€order-serviceã€product-serviceï¼ˆæŒ‰åè¯ç²—æš´æ‹†åˆ†ï¼‰ ç»“æœï¼šorder ä¸‹å•é€»è¾‘æ¨ªè·¨å¤šä¸ªæœåŠ¡ï¼Œå¼ºè€¦åˆï¼Œäº‹åŠ¡éš¾ä¿éšœã€‚ DDD æŒ‡å¯¼ä¸‹çš„æ‹†åˆ†ï¼š è¯†åˆ«æ ¸å¿ƒå­åŸŸï¼šè®¢å•å±¥çº¦ï¼ˆæ ¸å¿ƒï¼‰ã€ä¿ƒé”€ï¼ˆé€šç”¨ï¼‰ã€ç”¨æˆ·ç®¡ç†ï¼ˆæ”¯æ’‘ï¼‰ å®šä¹‰ Bounded Contextï¼š Order Takingï¼ˆä¸‹å•ä¸Šä¸‹æ–‡ï¼‰â†’ åŒ…å«è®¢å•åˆ›å»ºã€åº“å­˜é¢„ç•™ã€ä»·æ ¼è®¡ç®— Order Fulfillmentï¼ˆå±¥çº¦ä¸Šä¸‹æ–‡ï¼‰â†’ åŒ…å«å‘è´§ã€ç‰©æµè·Ÿè¸ª ä¸¤ä¸ªä¸Šä¸‹æ–‡ä¹‹é—´é€šè¿‡ é¢†åŸŸäº‹ä»¶ï¼ˆå¦‚ OrderPlacedï¼‰å¼‚æ­¥åä½œã€‚ â†’ æ¯ä¸ªä¸Šä¸‹æ–‡å¯ç‹¬ç«‹æ¼”åŒ–ä¸ºä¸€ä¸ªå¾®æœåŠ¡ï¼ˆæˆ–åˆæœŸä¿æŒå•ä½“ï¼ŒåæœŸæ‹†åˆ†ï¼‰ ğŸ“Œ æ€»ç»“ï¼š ç»´åº¦ DDD å¾®æœåŠ¡ å®šä½ è®¾è®¡æ–¹æ³•è®º / æ€æƒ³ä½“ç³» æ¶æ„é£æ ¼ / å®æ–½æ¨¡å¼ ç›®æ ‡ è§£å†³å¤æ‚ä¸šåŠ¡å»ºæ¨¡é—®é¢˜ è§£å†³ç³»ç»Ÿå¯ä¼¸ç¼©ã€å¯ç»´æŠ¤ã€å¯ç‹¬ç«‹éƒ¨ç½²é—®é¢˜ ä¾èµ–å…³ç³» å¯ç‹¬ç«‹å­˜åœ¨ï¼ˆç”¨äºå•ä½“ï¼‰ è‹¥ç¼ºä¹ DDD æŒ‡å¯¼ï¼Œæ˜“è¯¯æ‹†ã€éš¾ç»´æŠ¤ å…³ç³» âœ… DDD æ˜¯å¾®æœåŠ¡åˆç†æ‹†åˆ†çš„â€œæŒ‡å—é’ˆâ€âŒ ä½† DDD â‰  å¾®æœåŠ¡ä¸“å± ğŸ”‘ ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼šDDD æ˜¯â€œé“â€ï¼ˆWhy &amp; Whatï¼‰ï¼Œå¾®æœåŠ¡æ˜¯â€œæœ¯â€ï¼ˆHowï¼‰ä¹‹ä¸€ã€‚æƒ³åšå¥½å¾®æœåŠ¡ï¼Œå°¤å…¶åœ¨å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œä¸æ‡‚ DDD å¾ˆéš¾èµ°è¿œã€‚ å…«ã€DDDé™¤äº†å¾®æœåŠ¡æ¶æ„é£æ ¼ï¼Œè¿˜æœ‰å“ªäº›å¸¸è§æ¶æ„é£æ ¼ï¼Ÿæ ¸å¿ƒæ¶æ„é£æ ¼1. å…­è¾¹å½¢æ¶æ„ï¼ˆHexagonal Architecture/Ports and Adaptersï¼‰ è¿™æ˜¯DDDæœ€å¸¸ç”¨çš„æ¶æ„é£æ ¼ä¹‹ä¸€ï¼Œå°†é¢†åŸŸæ ¸å¿ƒæ”¾åœ¨ä¸­å¿ƒï¼Œé€šè¿‡ç«¯å£å’Œé€‚é…å™¨ä¸å¤–éƒ¨äº¤äº’ã€‚ å®ƒå¼ºè°ƒå°†ä¸šåŠ¡é€»è¾‘ä¸æŠ€æœ¯ç»†èŠ‚åˆ†ç¦»ï¼Œä½¿é¢†åŸŸæ¨¡å‹ä¿æŒçº¯å‡€ã€‚ 2. æ´‹è‘±æ¶æ„ï¼ˆOnion Architectureï¼‰ ä¸å…­è¾¹å½¢æ¶æ„ç±»ä¼¼ï¼Œå¼ºè°ƒä¾èµ–å…³ç³»å‘å†…æµåŠ¨ï¼Œæ ¸å¿ƒé¢†åŸŸä½äºæœ€å†…å±‚ã€‚ é€šè¿‡åˆ†å±‚æ–¹å¼ç¡®ä¿ä¸šåŠ¡è§„åˆ™ä¸ä¾èµ–äºå¤–éƒ¨åŸºç¡€è®¾æ–½ã€‚ 3. æ•´æ´æ¶æ„ï¼ˆClean Architectureï¼‰ ç”±Robert C. Martinæå‡ºï¼Œä¸æ´‹è‘±æ¶æ„ç†å¿µç›¸è¿‘ï¼Œå¼ºè°ƒä¸šåŠ¡è§„åˆ™çš„ç‹¬ç«‹æ€§ã€‚ å°†ç³»ç»Ÿåˆ†ä¸ºä¸åŒçš„åŒå¿ƒåœ†ï¼Œè¶Šå¾€å†…å±‚è¶Šä¸ä¸šåŠ¡ç›¸å…³ã€‚ ä¼ ç»Ÿæ¶æ„é£æ ¼4. åˆ†å±‚æ¶æ„ï¼ˆLayered Architectureï¼‰ ä¼ ç»Ÿçš„è¡¨ç°å±‚ã€åº”ç”¨å±‚ã€é¢†åŸŸå±‚ã€åŸºç¡€è®¾æ–½å±‚çš„åˆ†å±‚æ–¹å¼ã€‚ DDDåœ¨æ­¤æ¶æ„ä¸­é‡ç‚¹å…³æ³¨é¢†åŸŸå±‚çš„è®¾è®¡å’Œå®ç°ã€‚ 5. SOAæ¶æ„ï¼ˆService-Oriented Architectureï¼‰ æœåŠ¡å¯¼å‘æ¶æ„ï¼Œå¯ä»¥ä¸DDDç»“åˆä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¼ä¸šçº§åº”ç”¨ä¸­ã€‚ DDDå¸®åŠ©å®šä¹‰æœåŠ¡çš„è¾¹ç•Œå’Œä¸šåŠ¡èƒ½åŠ›ã€‚ é«˜çº§æ¶æ„æ¨¡å¼6. CQRSæ¶æ„ï¼ˆCommand Query Responsibility Segregationï¼‰ å‘½ä»¤æŸ¥è¯¢èŒè´£åˆ†ç¦»ï¼Œç‰¹åˆ«é€‚åˆå¤æ‚ä¸šåŠ¡åœºæ™¯ï¼Œå¸¸ä¸DDDç»“åˆä½¿ç”¨ã€‚ å°†è¯»å†™æ“ä½œåˆ†ç¦»ï¼Œä½¿é¢†åŸŸæ¨¡å‹æ›´åŠ ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ã€‚ 7. äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEvent-Driven Architectureï¼‰ é€šè¿‡é¢†åŸŸäº‹ä»¶é©±åŠ¨ç³»ç»Ÿè¡Œä¸ºï¼Œæ”¯æŒæœ€ç»ˆä¸€è‡´æ€§ã€‚ DDDä¸­çš„é¢†åŸŸäº‹ä»¶æ¦‚å¿µå¤©ç„¶æ”¯æŒè¿™ç§æ¶æ„é£æ ¼ã€‚ 8. RESTæ¶æ„é£æ ¼ è™½ç„¶RESTæ˜¯æ¥å£è®¾è®¡é£æ ¼ï¼Œä½†å¯ä»¥ä¸DDDç»“åˆæ„å»ºRESTful APIã€‚ DDDå¸®åŠ©å®šä¹‰èµ„æºè¾¹ç•Œå’Œä¸šåŠ¡æ“ä½œè¯­ä¹‰ã€‚ å…¶ä»–æ¶æ„é£æ ¼9. æ•°æ®ç½‘ç»‡æ¶æ„å’ŒåŸºäºç½‘æ ¼çš„åˆ†å¸ƒå¼è®¡ç®— é€‚ç”¨äºå¤§æ•°æ®å’Œé«˜æ€§èƒ½è®¡ç®—åœºæ™¯ã€‚ DDDå¸®åŠ©åœ¨è¿™äº›å¤æ‚ç¯å¢ƒä¸­ä¿æŒä¸šåŠ¡é€»è¾‘çš„æ¸…æ™°æ€§ã€‚ å…³é”®ç‰¹ç‚¹æ¶æ„çš„çµæ´»æ€§ DDDçš„ä¸€å¤§ä¼˜åŠ¿æ˜¯ä¸éœ€è¦ä½¿ç”¨ç‰¹å®šçš„æ¶æ„ï¼Œå¯ä»¥åœ¨æ•´ä¸ªç³»ç»Ÿä¸­ä½¿ç”¨å¤šç§é£æ ¼çš„æ¶æ„ã€‚ æ ¸å¿ƒåŸŸä½äºé™ç•Œä¸Šä¸‹æ–‡ä¸­ï¼Œæ¶æ„é£æ ¼å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©ã€‚ ä¸šåŠ¡å¤æ‚åº¦é©±åŠ¨ DDDå’Œè¿™äº›æ¶æ„é£æ ¼éƒ½æ˜¯ä¸ºäº†æ‹†è§£ä¸šåŠ¡å¤æ‚åº¦ï¼šåˆç†åˆ’åˆ†é¢†åŸŸè¾¹ç•Œï¼ŒæŒç»­è°ƒæ•´ç°æœ‰æ¶æ„ï¼Œä¼˜åŒ–ç°æœ‰ä»£ç ã€‚ é€‰æ‹©æ¶æ„é£æ ¼æ—¶åº”å°†è½¯ä»¶è´¨é‡å±æ€§ä½œä¸ºé‡è¦è€ƒé‡å› ç´ ã€‚ ä¹ã€DDDè®¾è®¡å®æ–½æ³¨æ„è¦ç‚¹å’Œäº‹é¡¹ DDD æŒ‡å¯¼å¾®æœåŠ¡æ‹†åˆ†çš„å®æ“æ­¥éª¤ å¦‚ä½•ä»å•ä½“+DDDé€æ­¥æ¼”è¿›åˆ°å¾®æœåŠ¡ é¿å…â€œä¼ªå¾®æœåŠ¡â€çš„æ£€æŸ¥æ¸…å• DDDæŒ‡å¯¼å¾®æœåŠ¡æ‹†åˆ†çš„å®æ“æ­¥éª¤####### ï¼ˆ1ï¼‰DDDæŒ‡å¯¼å¾®æœåŠ¡æ‹†åˆ†çš„å®æ“æ­¥éª¤ 1. ä¸šåŠ¡åˆ†æä¸å»ºæ¨¡é˜¶æ®µ å…¨é¢ä¸šåŠ¡åˆ†æï¼šä½¿ç”¨ç”¨ä¾‹åˆ†ææ³•ã€äº‹ä»¶é£æš´æ³•ä»¥åŠå››è‰²å»ºæ¨¡æ³•å¯¹å½“å‰ç³»ç»Ÿå¹³å°çš„ä¸šåŠ¡è¿›è¡Œå…¨é¢åˆ†æï¼Œä½¿ç”¨ç»Ÿä¸€çš„ä¸šåŠ¡è¯­è¨€è¿›è¡Œä¸šåŠ¡é¢†åŸŸåˆ’åˆ†ä»¥åŠè¾¹ç•Œå®šä¹‰ã€‚ è¯†åˆ«å­åŸŸï¼šå°†ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†ä¸ºæ ¸å¿ƒå­åŸŸã€æ”¯æ’‘å­åŸŸå’Œé€šç”¨å­åŸŸï¼Œæ˜ç¡®å„å­åŸŸçš„ä¸šåŠ¡ä»·å€¼å’Œå¤æ‚åº¦ã€‚ å®šä¹‰é™ç•Œä¸Šä¸‹æ–‡ï¼šåœ¨é¢†åŸŸæ¨¡å‹ä¸­ï¼Œé™ç•Œä¸Šä¸‹æ–‡æ˜¯å¾®æœåŠ¡è®¾è®¡å’Œæ‹†åˆ†çš„ä¸»è¦ä¾æ®ï¼Œä¸€ä¸ªé™ç•Œä¸Šä¸‹æ–‡ç†è®ºä¸Šå°±å¯ä»¥è®¾è®¡ä¸ºä¸€ä¸ªå¾®æœåŠ¡ã€‚ 2. æˆ˜ç•¥è®¾è®¡é˜¶æ®µ ä¸Šä¸‹æ–‡æ˜ å°„ï¼šæŒ‰ç…§ä¸Šä¸‹æ–‡åœ°å›¾å®šä¹‰å„å¾®æœåŠ¡ä¹‹é—´çš„æ¥å£ä¸è°ƒç”¨å…³ç³»ï¼Œæ˜ç¡®åä½œæ¨¡å¼ï¼ˆå¦‚å…±äº«å†…æ ¸ã€å®¢æˆ·-ä¾›åº”å•†ã€é˜²è…å±‚ç­‰ï¼‰ã€‚ è¾¹ç•ŒéªŒè¯ï¼šæ£€æŸ¥é™ç•Œä¸Šä¸‹æ–‡æ˜¯å¦æ»¡è¶³â€é«˜å†…èšã€ä½è€¦åˆâ€åŸåˆ™ï¼Œç¡®ä¿æ¯ä¸ªä¸Šä¸‹æ–‡å†…çš„ä¸šåŠ¡é€»è¾‘ç´§å¯†ç›¸å…³ï¼Œä¸Šä¸‹æ–‡é—´ä¾èµ–æœ€å°åŒ–ã€‚ æ‹†åˆ†ä¼˜å…ˆçº§è¯„ä¼°ï¼šè€ƒè™‘é¢†åŸŸæ¨¡å‹ã€éœ€æ±‚å˜åŒ–é¢‘ç‡ã€æ€§èƒ½è¦æ±‚ã€ç»„ç»‡æ¶æ„ã€å®‰å…¨æ€§å’ŒæŠ€æœ¯å¼‚æ„ç­‰å› ç´ ï¼Œç¡®å®šæ‹†åˆ†ä¼˜å…ˆçº§ã€‚ 3. æˆ˜æœ¯è®¾è®¡ä¸è½åœ°é˜¶æ®µ èšåˆæ ¹è®¾è®¡ï¼šåœ¨æ¯ä¸ªé™ç•Œä¸Šä¸‹æ–‡ä¸­ï¼Œè¯†åˆ«èšåˆæ ¹ã€å®ä½“ã€å€¼å¯¹è±¡ï¼Œæ˜ç¡®äº‹åŠ¡è¾¹ç•Œå’Œä¸€è‡´æ€§èŒƒå›´ã€‚ é¢†åŸŸäº‹ä»¶å®šä¹‰ï¼šè®¾è®¡é¢†åŸŸäº‹ä»¶ï¼Œç”¨äºè·¨ä¸Šä¸‹æ–‡çš„å¼‚æ­¥é€šä¿¡å’Œæœ€ç»ˆä¸€è‡´æ€§ä¿è¯ã€‚ æ¥å£å¥‘çº¦å®šä¹‰ï¼šåŸºäºä¸Šä¸‹æ–‡æ˜ å°„ï¼Œå®šä¹‰æ¸…æ™°çš„æœåŠ¡æ¥å£å’Œæ¶ˆæ¯å¥‘çº¦ï¼Œç¡®ä¿æœåŠ¡é—´åä½œçš„ç¨³å®šæ€§ã€‚ ï¼ˆ2ï¼‰ä»å•ä½“+DDDé€æ­¥æ¼”è¿›åˆ°å¾®æœåŠ¡1. è¯„ä¼°ä¸å‡†å¤‡é˜¶æ®µ å•ä½“æ¶æ„æ˜ å°„ï¼šé¦–å…ˆå¯¹ç°æœ‰å•ä½“åº”ç”¨çš„æ¶æ„è¿›è¡Œå…¨é¢æ¢³ç†ï¼Œè¯†åˆ«æ¨¡å—è¾¹ç•Œå’Œä¾èµ–å…³ç³»ã€‚ DDDæ¨¡å‹é‡æ„ï¼šåœ¨å•ä½“å†…éƒ¨åº”ç”¨DDDåŸåˆ™ï¼Œè¿›è¡Œé¢†åŸŸåˆ’åˆ†ï¼Œå»ºç«‹åˆé€‚çš„é¢†åŸŸæ¨¡å‹ï¼Œç¡®å®šå¥½è¾¹ç•Œä¸Šä¸‹æ–‡ï¼Œä¸ºåç»­æ‹†åˆ†å¥ å®šåŸºç¡€ã€‚ æŠ€æœ¯å€ºåŠ¡æ¸…ç†ï¼šé‡æ„ä»£ç ï¼Œè§£è€¦æ¨¡å—ï¼Œå»ºç«‹æ¸…æ™°çš„æ¥å£ï¼Œä¸ºæœåŠ¡æå–åšå¥½å‡†å¤‡ã€‚ 2. æ¸è¿›å¼æ‹†åˆ†é˜¶æ®µ Strangler Patternåº”ç”¨ï¼šé‡‡ç”¨ç»æ€è€…æ¨¡å¼ï¼Œé€æ­¥ç”¨æ–°æœåŠ¡æ›¿æ¢å•ä½“ä¸­çš„ç‰¹å®šåŠŸèƒ½ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§é‡å†™ã€‚ æœåŠ¡æå–ä¼˜å…ˆçº§ï¼š ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©æœ€ç‹¬ç«‹ã€ä¸šåŠ¡ä»·å€¼æœ€é«˜ã€å˜åŒ–æœ€é¢‘ç¹çš„æ¨¡å—ä½œä¸ºç¬¬ä¸€ä¸ªæå–ç›®æ ‡ã€‚ ç¬¬äºŒæ­¥ï¼šå¼€å‘æ–°å¾®æœåŠ¡ï¼Œç¡®ä¿å…¶å…·å¤‡ç‹¬ç«‹éƒ¨ç½²å’Œè¿è¡Œèƒ½åŠ›ã€‚ ç¬¬ä¸‰æ­¥ï¼šé€šè¿‡API Gatewayæˆ–æœåŠ¡è·¯ç”±ï¼Œé€æ­¥å°†æµé‡ä»å•ä½“åˆ‡æ¢åˆ°æ–°æœåŠ¡ã€‚ æ•°æ®è¿ç§»ç­–ç•¥ï¼šé‡‡ç”¨åŒå†™ã€æ•°æ®åŒæ­¥æˆ–æŒ‰éœ€è¿ç§»ç­–ç•¥ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚ 3. æ¼”è¿›ä¼˜åŒ–é˜¶æ®µ ç›‘æ§ä¸åé¦ˆï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼Œè·Ÿè¸ªæœåŠ¡æ€§èƒ½ã€é”™è¯¯ç‡å’Œä¸šåŠ¡æŒ‡æ ‡ï¼Œæ ¹æ®åé¦ˆè°ƒæ•´æ‹†åˆ†ç­–ç•¥ã€‚ ç»„ç»‡é€‚é…ï¼šè°ƒæ•´å›¢é˜Ÿç»“æ„ï¼Œä½¿å›¢é˜Ÿè¾¹ç•Œä¸æœåŠ¡è¾¹ç•Œå¯¹é½ï¼Œå®ç°åº·å¨å®šå¾‹çš„æ­£å‘ä½œç”¨ã€‚ æŒç»­é‡æ„ï¼šéšç€ä¸šåŠ¡æ¼”è¿›ï¼ŒæŒç»­ä¼˜åŒ–æœåŠ¡è¾¹ç•Œï¼Œåˆå¹¶è¿‡å°çš„æœåŠ¡ï¼Œæ‹†åˆ†è¿‡å¤§çš„æœåŠ¡ã€‚ ï¼ˆ3ï¼‰é¿å…â€ä¼ªå¾®æœåŠ¡â€çš„æ£€æŸ¥æ¸…å•1. è®¾è®¡åŸåˆ™æ£€æŸ¥ âœ… çœŸæ­£çš„ä¸šåŠ¡è¾¹ç•Œï¼šæœåŠ¡æ˜¯å¦å›´ç»•ä¸šåŠ¡èƒ½åŠ›ç»„ç»‡ï¼Œè€Œä¸æ˜¯æŒ‰æŠ€æœ¯å±‚ï¼ˆå¦‚DAOã€Serviceã€Controllerï¼‰æ‹†åˆ†ï¼Ÿ âœ… ç‹¬ç«‹éƒ¨ç½²èƒ½åŠ›ï¼šæœåŠ¡æ˜¯å¦å¯ä»¥ç‹¬ç«‹æ„å»ºã€éƒ¨ç½²ã€æ‰©å±•å’Œé‡å¯ï¼Œè€Œä¸å½±å“å…¶ä»–æœåŠ¡ï¼Ÿ âœ… å•ä¸€èŒè´£åŸåˆ™ï¼šæœåŠ¡æ˜¯å¦åªåšä¸€ä»¶äº‹ï¼Œå¹¶ä¸”åšå¥½ï¼Ÿé¿å…å•ä¸ªå¾®æœåŠ¡è¯•å›¾åšå¤ªå¤šäº‹æƒ…ï¼Œè¿™è¿åäº†å•ä¸€èŒè´£åŸåˆ™ã€‚ 2. è€¦åˆåº¦æ£€æŸ¥ âœ… æ¾è€¦åˆï¼šæœåŠ¡é—´æ˜¯å¦é€šè¿‡æ˜ç¡®å®šä¹‰çš„æ¥å£é€šä¿¡ï¼Œè€Œä¸æ˜¯å…±äº«æ•°æ®åº“æˆ–å†…éƒ¨æ•°æ®ç»“æ„ï¼Ÿ âœ… æ— å¾ªç¯ä¾èµ–ï¼šæœåŠ¡ä¾èµ–å›¾æ˜¯å¦æ— ç¯ï¼Ÿé¿å…Aä¾èµ–Bï¼ŒBåˆä¾èµ–Açš„æƒ…å†µã€‚ âœ… é˜²è…å±‚å­˜åœ¨ï¼šè·¨ä¸Šä¸‹æ–‡è°ƒç”¨æ˜¯å¦æœ‰é˜²è…å±‚ï¼ˆAnti-Corruption Layerï¼‰ä¿æŠ¤å†…éƒ¨æ¨¡å‹ä¸è¢«å¤–éƒ¨æ±¡æŸ“ï¼Ÿ 3. è¿ç»´èƒ½åŠ›æ£€æŸ¥ âœ… ç‹¬ç«‹æ•°æ®å­˜å‚¨ï¼šæ¯ä¸ªæœåŠ¡æ˜¯å¦æ‹¥æœ‰è‡ªå·±çš„ç§æœ‰æ•°æ®åº“ï¼Œä¸ä¸å…¶ä»–æœåŠ¡å…±äº«ï¼Ÿ âœ… è‡ªåŒ…å«æ€§ï¼šæœåŠ¡æ˜¯å¦åŒ…å«æ‰€æœ‰å¿…è¦çš„ç»„ä»¶ï¼ˆä»£ç ã€é…ç½®ã€ä¾èµ–ï¼‰æ¥ç‹¬ç«‹è¿è¡Œï¼Ÿ âœ… å¯è§‚æµ‹æ€§ï¼šæ˜¯å¦å…·å¤‡å®Œå–„çš„æ—¥å¿—ã€ç›‘æ§ã€è¿½è¸ªèƒ½åŠ›ï¼Œèƒ½å¤Ÿç‹¬ç«‹è¯Šæ–­é—®é¢˜ï¼Ÿ 4. å›¢é˜Ÿåä½œæ£€æŸ¥ âœ… å›¢é˜Ÿè‡ªæ²»ï¼šè´Ÿè´£è¯¥æœåŠ¡çš„å›¢é˜Ÿæ˜¯å¦èƒ½å¤Ÿç‹¬ç«‹å†³ç­–ã€å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²ï¼Œè€Œä¸éœ€è¦é¢‘ç¹åè°ƒå…¶ä»–å›¢é˜Ÿï¼Ÿ âœ… æœåŠ¡è§„æ¨¡åˆç†ï¼šä¸€ä¸ªæœåŠ¡æ˜¯å¦éœ€è¦è¶…è¿‡5-8åå·¥ç¨‹å¸ˆç»´æŠ¤ï¼Ÿå¦‚æœéœ€è¦ï¼Œè¿™é€šå¸¸è¡¨æ˜å®ƒåº”è¯¥è¢«æ‹†åˆ†ã€‚ âœ… æ²»ç†æœºåˆ¶ï¼šæ˜¯å¦å»ºç«‹äº†å¾®æœåŠ¡è¯„å®¡å§”å‘˜ä¼šï¼Œå¯¹æ¯ä¸ªæ–°æœåŠ¡ææ¡ˆè¿›è¡Œä¸¥æ ¼è¯„å®¡ï¼Ÿ 5. è­¦ç¤ºä¿¡å·ï¼ˆå‡ºç°å³éœ€è­¦æƒ•ï¼‰ âŒ æœåŠ¡é—´é€šè¿‡å…±äº«æ•°æ®åº“è¡¨ç›´æ¥è®¿é—®æ•°æ® âŒ éƒ¨ç½²ä¸€ä¸ªæœåŠ¡éœ€è¦åŒæ—¶éƒ¨ç½²å¤šä¸ªå…¶ä»–æœåŠ¡ âŒ æœåŠ¡æ¥å£é¢‘ç¹å˜æ›´ï¼Œå¯¼è‡´è°ƒç”¨æ–¹éœ€è¦åŒæ­¥ä¿®æ”¹ âŒ ä¸€ä¸ªæœåŠ¡çš„ä»£ç åº“åŒ…å«å¤šä¸ªä¸ç›¸å…³çš„ä¸šåŠ¡åŠŸèƒ½ âŒ æœåŠ¡è°ƒç”¨é“¾è·¯è¿‡é•¿ï¼ˆè¶…è¿‡5-7ä¸ªæœåŠ¡è°ƒç”¨ï¼‰ å…³é”®æ€»ç»“**DDDæ˜¯å¾®æœåŠ¡æ‹†åˆ†çš„â€æŒ‡å—é’ˆâ€ï¼Œè€Œä¸æ˜¯â€ç»ˆç‚¹ç«™â€**ï¼šDDDæä¾›äº†ä¸€å¥—ç§‘å­¦çš„æ–¹æ³•è®ºæ¥è¯†åˆ«ä¸šåŠ¡è¾¹ç•Œï¼ˆé™ç•Œä¸Šä¸‹æ–‡ï¼‰ï¼Œä½†æœ€ç»ˆçš„æœåŠ¡æ‹†åˆ†è¿˜éœ€è¦ç»“åˆæŠ€æœ¯çº¦æŸã€å›¢é˜Ÿèƒ½åŠ›ã€è¿ç»´æˆæœ¬ç­‰ç°å®å› ç´ è¿›è¡Œæƒè¡¡ã€‚ æ¼”è¿›ä¼˜äºè®¾è®¡ï¼šä¸è¦è¯•å›¾åœ¨é¡¹ç›®åˆæœŸå°±è®¾è®¡å®Œç¾çš„å¾®æœåŠ¡æ¶æ„ï¼Œè€Œæ˜¯ä»å•ä½“å¼€å§‹ï¼Œå½“ä¸šåŠ¡å¤æ‚åº¦è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶ï¼Œå†åŸºäºDDDåŸåˆ™é€æ­¥æ‹†åˆ†ã€‚ **è­¦æƒ•â€åˆ†å¸ƒå¼å•ä½“â€**ï¼šå¦‚æœæ‹†åˆ†åçš„æœåŠ¡ä»ç„¶é«˜åº¦è€¦åˆã€æ— æ³•ç‹¬ç«‹éƒ¨ç½²ï¼Œé‚£ä¹ˆä½ åªæ˜¯æ„å»ºäº†ä¸€ä¸ªæ›´å¤æ‚çš„åˆ†å¸ƒå¼å•ä½“ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„å¾®æœåŠ¡ã€‚ ç»“è¯­ï¼šDDDæ˜¯ä¸€ç§è®¾è®¡æ–¹æ³•è®ºï¼Œå¾®æœåŠ¡åªæ˜¯å®ƒå¯ä»¥åº”ç”¨çš„ä¼—å¤šæ¶æ„é£æ ¼ä¹‹ä¸€ã€‚æ ¹æ®ä¸šåŠ¡å¤æ‚åº¦ã€å›¢é˜Ÿèƒ½åŠ›ã€æ€§èƒ½è¦æ±‚ç­‰å› ç´ ï¼Œå¯ä»¥é€‰æ‹©æœ€é€‚åˆçš„æ¶æ„é£æ ¼æ¥å®ç°DDDçš„è®¾è®¡ç†å¿µã€‚","link":"/693b56e3.html"},{"title":"æ•°æ®åº“è·¨åº“åˆ†é¡µå¸¸ç”¨æ–¹æ¡ˆæ·±åº¦è§£æå’Œå®æ–½æ–¹æ¡ˆ","text":"æ•°æ®åº“è·¨åº“åˆ†é¡µå¸¸ç”¨æ–¹æ¡ˆæ·±åº¦è§£æï¼šä»åŸç†åˆ°å®è·µä¸€ã€é—®é¢˜èƒŒæ™¯åœ¨åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„ä¸­ï¼Œéšç€æ•°æ®é‡çš„å¢é•¿ï¼Œåˆ†åº“åˆ†è¡¨æˆä¸ºå¿…ç„¶é€‰æ‹©ã€‚ç„¶è€Œï¼Œå½“æ•°æ®åˆ†æ•£åœ¨å¤šä¸ªæ•°æ®åº“å®ä¾‹ä¸­æ—¶ï¼Œä¼ ç»Ÿçš„åˆ†é¡µæŸ¥è¯¢æ–¹å¼é¢ä¸´å·¨å¤§æŒ‘æˆ˜ã€‚è·¨åº“åˆ†é¡µä¸ä»…æ¶‰åŠæ•°æ®èšåˆï¼Œè¿˜éœ€è¦è€ƒè™‘æ€§èƒ½ã€ç²¾åº¦å’Œä¸šåŠ¡é€‚é…ç­‰å¤šæ–¹é¢å› ç´ ã€‚ æœ¬æ–‡å°†æ·±åº¦è§£æè·¨åº“åˆ†é¡µçš„å¸¸ç”¨æ–¹æ¡ˆï¼Œä»åŸç†ã€å®ç°ç»†èŠ‚åˆ°æ€§èƒ½å¯¹æ¯”ï¼Œä¸ºæ¶æ„å¸ˆå’Œå¼€å‘è€…æä¾›ç³»ç»Ÿæ€§çš„è§£å†³æ–¹æ¡ˆå‚è€ƒã€‚ äºŒã€è·¨åº“åˆ†é¡µçš„æ ¸å¿ƒæŒ‘æˆ˜2.1 ä¼ ç»Ÿåˆ†é¡µæœºåˆ¶å¤±æ•ˆåœ¨å•åº“ç¯å¢ƒä¸‹ï¼ŒLIMIT offset, size æˆ– OFFSET FETCH è¯­æ³•å¯ä»¥è½»æ¾å®ç°åˆ†é¡µã€‚ä½†åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œæ•°æ®åˆ†æ•£åœ¨å¤šä¸ªèŠ‚ç‚¹ï¼Œæ— æ³•ç›´æ¥åº”ç”¨è¿™ç§æœºåˆ¶ã€‚ 2.2 æ€§èƒ½ä¸ç²¾åº¦çš„æƒè¡¡è·¨åº“åˆ†é¡µéœ€è¦åœ¨æŸ¥è¯¢æ€§èƒ½ã€æ•°æ®ç²¾åº¦å’Œä¸šåŠ¡éœ€æ±‚ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ã€‚éšç€é¡µç å¢å¤§ï¼Œæ€§èƒ½é—®é¢˜ä¼šæ€¥å‰§æ¶åŒ–ï¼ŒåŒæ—¶è¿˜è¦ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚ 2.3 æ’åºä¸€è‡´æ€§é—®é¢˜ä¸åŒåˆ†ç‰‡çš„æ•°æ®éœ€è¦æŒ‰ç…§ç»Ÿä¸€çš„æ’åºè§„åˆ™è¿›è¡Œåˆå¹¶ï¼Œè¿™è¦æ±‚åœ¨è®¾è®¡æ—¶å°±è€ƒè™‘æ’åºå­—æ®µçš„é€‰æ‹©å’Œç´¢å¼•ä¼˜åŒ–ã€‚ ä¸‰ã€å››ç§ä¸»æµè§£å†³æ–¹æ¡ˆæ·±åº¦è§£æ3.1 å…¨å±€è§†é‡æ³•ï¼ˆæœ€ç®€å•ä½†æ€§èƒ½æœ€å·®ï¼‰######## 3.1.1 åŸç†å°†åˆ†é¡µæŸ¥è¯¢æ”¹å†™ä¸ºï¼šåœ¨æ¯ä¸ªåˆ†ç‰‡ä¸Šæ‰§è¡Œ LIMIT 0, offset + sizeï¼Œç„¶ååœ¨åº”ç”¨å±‚å¯¹æ‰€æœ‰ç»“æœè¿›è¡Œæ’åºã€å»é‡ï¼Œæœ€åå–ç¬¬ offset åˆ° offset + size æ¡è®°å½•ã€‚ ######## 3.1.2 å®ç°ç»†èŠ‚ 123-- åŸå§‹æŸ¥è¯¢ï¼šSELECT * FROM orders ORDER BY create_time DESC LIMIT 20, 10-- æ”¹å†™åï¼šæ¯ä¸ªåˆ†ç‰‡æ‰§è¡ŒSELECT * FROM orders_{shard} ORDER BY create_time DESC LIMIT 0, 30 åº”ç”¨å±‚ä»£ç éœ€è¦ï¼š å¹¶è¡ŒæŸ¥è¯¢æ‰€æœ‰åˆ†ç‰‡ åˆå¹¶ç»“æœé›† æŒ‰æ’åºå­—æ®µé‡æ–°æ’åº åº”ç”¨åˆ†é¡µåç§»é‡ è¿”å›æœ€ç»ˆç»“æœ ######## 3.1.3 ä¼˜ç¼ºç‚¹åˆ†æä¼˜ç‚¹ï¼š å®ç°ç®€å•ï¼Œé€»è¾‘æ¸…æ™° æ•°æ®ç²¾åº¦100%å‡†ç¡® å…¼å®¹æ€§å¥½ï¼Œé€‚ç”¨äºæ‰€æœ‰ä¸šåŠ¡åœºæ™¯ ç¼ºç‚¹ï¼š æ€§èƒ½éšé¡µç å¢åŠ å‘ˆçº¿æ€§ä¸‹é™ ç½‘ç»œä¼ è¾“å’Œå†…å­˜æ¶ˆè€—å·¨å¤§ å½“offsetå¾ˆå¤§æ—¶ï¼ŒæŸ¥è¯¢å¯èƒ½è¶…æ—¶ ######## 3.1.4 é€‚ç”¨åœºæ™¯ æ•°æ®é‡è¾ƒå°ï¼ˆ&lt;100ä¸‡ï¼‰ é¡µç æ·±åº¦è¾ƒæµ…ï¼ˆå‰10é¡µï¼‰ å¯¹æ•°æ®ç²¾åº¦è¦æ±‚æé«˜çš„åœºæ™¯ 3.2 ä¸šåŠ¡æŠ˜è¡·æ³•ï¼šç¦æ­¢è·³é¡µæŸ¥è¯¢######## 3.2.1 åŸç†é€šè¿‡ä¸šåŠ¡è§„åˆ™é™åˆ¶ï¼Œåªå…è®¸â€ä¸‹ä¸€é¡µâ€æ“ä½œï¼Œä¸å…è®¸è·³é¡µæŸ¥è¯¢ã€‚æ¯æ¬¡æŸ¥è¯¢æ—¶è®°å½•ä¸Šä¸€é¡µçš„æœ€å¤§/æœ€å°æ’åºå€¼ï¼Œä½œä¸ºä¸‹ä¸€é¡µæŸ¥è¯¢çš„èµ·ç‚¹ã€‚ ######## 3.2.2 å®ç°ç»†èŠ‚ 1234567-- ç¬¬ä¸€é¡µSELECT * FROM orders ORDER BY create_time DESC LIMIT 10;-- å‡è®¾æœ€åä¸€æ¡è®°å½•çš„create_timeä¸º '2023-12-01 10:00:00'-- ç¬¬äºŒé¡µï¼ˆç¦æ­¢è·³é¡µï¼‰SELECT * FROM orders WHERE create_time &lt; '2023-12-01 10:00:00' ORDER BY create_time DESC LIMIT 10; ######## 3.2.3 ä¼˜ç¼ºç‚¹åˆ†æä¼˜ç‚¹ï¼š æ€§èƒ½æ’å®šï¼Œä¸éšé¡µç å¢åŠ è€Œä¸‹é™ æ¯ä¸ªåˆ†ç‰‡åªéœ€è¿”å›ä¸€é¡µæ•°æ® ç½‘ç»œä¼ è¾“å’Œå†…å­˜æ¶ˆè€—æœ€å°åŒ– ç¼ºç‚¹ï¼š ä¸šåŠ¡åŠŸèƒ½å—é™ï¼Œæ— æ³•è·³é¡µ å‰ç«¯äº¤äº’ä½“éªŒéœ€è¦è°ƒæ•´ æ•°æ®æœ‰æ–°å¢æ—¶ï¼Œå¯èƒ½å¯¼è‡´é‡å¤æˆ–ä¸¢å¤±æ•°æ® ######## 3.2.4 ä¼˜åŒ–ç­–ç•¥ è®°å½•è¾¹ç•Œå€¼ï¼šé™¤äº†è®°å½•æ—¶é—´æˆ³ï¼Œè¿˜å¯ä»¥è®°å½•å”¯ä¸€IDï¼Œæé«˜æŸ¥è¯¢ç²¾åº¦ ç¼“å­˜è¾¹ç•Œå€¼ï¼šå°†æ¯é¡µçš„è¾¹ç•Œå€¼ç¼“å­˜èµ·æ¥ï¼Œæ”¯æŒæœ‰é™çš„è·³é¡µåŠŸèƒ½ æ—¶é—´çª—å£æ§åˆ¶ï¼šè®¾ç½®åˆç†çš„æŸ¥è¯¢æ—¶é—´çª—å£ï¼Œé¿å…æ•°æ®å˜åŠ¨è¿‡å¤§ ######## 3.2.5 é€‚ç”¨åœºæ™¯ ç§»åŠ¨ç«¯APPä¸‹æ‹‰åŠ è½½ å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„æ—¥å¿—æŸ¥è¯¢ ç”¨æˆ·è¡Œä¸ºè½¨è¿¹åˆ†æç­‰åœºæ™¯ 3.3 ä¸šåŠ¡æŠ˜è¡·æ³•ï¼šå…è®¸æ•°æ®ç²¾åº¦æŸå¤±######## 3.3.1 åŸç†åœ¨æŸäº›ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œå…è®¸åˆ†é¡µç»“æœå­˜åœ¨ä¸€å®šçš„è¯¯å·®ã€‚é€šè¿‡é‡‡æ ·ç»Ÿè®¡æˆ–è¿‘ä¼¼æŸ¥è¯¢çš„æ–¹å¼ï¼Œå¿«é€Ÿè¿”å›ç»“æœã€‚ ######## 3.3.2 å®ç°æ–¹æ¡ˆ é‡‡æ ·åˆ†é¡µï¼šåªæŸ¥è¯¢éƒ¨åˆ†åˆ†ç‰‡ï¼ŒæŒ‰æ¯”ä¾‹ä¼°ç®—æ€»æ•°æ®é‡ è¿‘ä¼¼åˆ†é¡µï¼šä½¿ç”¨éšæœºæŠ½æ ·æˆ–å“ˆå¸Œåˆ†æ¡¶æŠ€æœ¯ æ¨¡ç³Šæ’åºï¼šä¸ä¸¥æ ¼ä¿è¯æ’åºç²¾åº¦ï¼Œåªä¿è¯å¤§è‡´é¡ºåº ######## 3.3.3 ä¼˜ç¼ºç‚¹åˆ†æä¼˜ç‚¹ï¼š æ€§èƒ½æœ€ä¼˜ï¼Œå“åº”æ—¶é—´æ’å®š èµ„æºæ¶ˆè€—æœ€å° é€‚åˆå¤§æ•°æ®é‡åœºæ™¯ ç¼ºç‚¹ï¼š æ•°æ®ç²¾åº¦æ— æ³•ä¿è¯ å¯èƒ½å‡ºç°é‡å¤æˆ–ä¸¢å¤±è®°å½• ä¸é€‚ç”¨äºå¯¹ç²¾åº¦è¦æ±‚é«˜çš„åœºæ™¯ ######## 3.3.4 é€‚ç”¨åœºæ™¯ æ•°æ®åˆ†æå’ŒæŠ¥è¡¨å±•ç¤º æœç´¢å¼•æ“ç»“æœé¢„è§ˆ ç”¨æˆ·ç”»åƒçš„æ¦‚è§ˆä¿¡æ¯å±•ç¤º 3.4 ç»ˆææ–¹æ¡ˆï¼šäºŒæ¬¡æŸ¥è¯¢æ³•######## 3.4.1 åŸç†åˆ†ä¸¤æ­¥å®ŒæˆæŸ¥è¯¢ï¼š ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼ˆç²—ç•¥æŸ¥è¯¢ï¼‰ï¼šåªæŸ¥è¯¢æ’åºå­—æ®µï¼Œä¸æŸ¥è¯¢å…·ä½“å†…å®¹ï¼Œå¿«é€Ÿè·å–åˆ†é¡µIDåˆ—è¡¨ ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼ˆç²¾ç¡®æŸ¥è¯¢ï¼‰ï¼šæ ¹æ®IDåˆ—è¡¨ç²¾ç¡®æŸ¥è¯¢æ•°æ®å†…å®¹ ######## 3.4.2 å®ç°ç»†èŠ‚ 123456789-- ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼šè·å–IDåˆ—è¡¨SELECT id, create_time FROM orders ORDER BY create_time DESC LIMIT 20, 10;-- å‡è®¾è·å–åˆ°IDåˆ—è¡¨ï¼š[1001, 1002, 1003, ...]-- ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼šç²¾ç¡®æŸ¥è¯¢æ•°æ®SELECT * FROM orders WHERE id IN (1001, 1002, 1003, ...) ORDER BY FIELD(id, 1001, 1002, 1003, ...); ######## 3.4.3 ä¼˜ç¼ºç‚¹åˆ†æä¼˜ç‚¹ï¼š æ•°æ®ç²¾åº¦100%å‡†ç¡® ç½‘ç»œä¼ è¾“æ•°æ®é‡å°ï¼ˆç¬¬ä¸€æ¬¡åªä¼ IDï¼‰ æ€§èƒ½ç›¸å¯¹ç¨³å®šï¼Œä¸å—é¡µç æ·±åº¦å½±å“ ç¼ºç‚¹ï¼š éœ€è¦ä¸¤æ¬¡ç½‘ç»œå¾€è¿” å¯¹æ’åºå­—æ®µç´¢å¼•è¦æ±‚é«˜ å®ç°å¤æ‚åº¦è¾ƒé«˜ ######## 3.4.4 ä¼˜åŒ–ç­–ç•¥ ç®¡é“åŒ–æ‰§è¡Œï¼šå°†ä¸¤æ¬¡æŸ¥è¯¢åˆå¹¶ä¸ºå•æ¬¡è¯·æ±‚ æœ¬åœ°ç¼“å­˜ï¼šç¼“å­˜å¸¸ç”¨é¡µçš„IDåˆ—è¡¨ æ‰¹é‡é¢„å–ï¼šé¢„å–ç›¸é‚»é¡µé¢çš„IDåˆ—è¡¨ï¼Œå‡å°‘å»¶è¿Ÿ ######## 3.4.5 é€‚ç”¨åœºæ™¯ ç”µå•†å¹³å°å•†å“åˆ—è¡¨ ç¤¾äº¤åª’ä½“å†…å®¹æµ é‡‘èäº¤æ˜“è®°å½•æŸ¥è¯¢ç­‰å¯¹ç²¾åº¦è¦æ±‚é«˜çš„åœºæ™¯ å››ã€æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰å‹å»ºè®®4.1 æ€§èƒ½å¯¹æ¯”çŸ©é˜µ æ–¹æ¡ˆ æŸ¥è¯¢å»¶è¿Ÿ ç½‘ç»œå¼€é”€ å†…å­˜æ¶ˆè€— ç²¾åº¦ä¿è¯ å…¨å±€è§†é‡æ³• éšé¡µç å¢åŠ  é«˜ é«˜ 100% ç¦æ­¢è·³é¡µæ³• æ’å®š ä½ ä½ 95-99% å…è®¸ç²¾åº¦æŸå¤± æ’å®š æœ€ä½ æœ€ä½ 80-90% äºŒæ¬¡æŸ¥è¯¢æ³• ä¸­ç­‰ ä¸­ç­‰ ä¸­ç­‰ 100% 4.2 é€‰å‹å†³ç­–æ ‘ è¯„ä¼°ä¸šåŠ¡éœ€æ±‚ï¼š æ˜¯å¦å¿…é¡»æ”¯æŒè·³é¡µï¼Ÿ æ•°æ®ç²¾åº¦è¦æ±‚å¦‚ä½•ï¼Ÿ ç”¨æˆ·äº¤äº’ä½“éªŒè¦æ±‚ï¼Ÿ è¯„ä¼°æ•°æ®è§„æ¨¡ï¼š æ€»æ•°æ®é‡å¤§å° æ—¥å‡æŸ¥è¯¢é‡ é¡µç æ·±åº¦åˆ†å¸ƒ æŠ€æœ¯çº¦æŸï¼š æ•°æ®åº“ç±»å‹å’Œç‰ˆæœ¬ ä¸­é—´ä»¶æ”¯æŒèƒ½åŠ› å›¢é˜ŸæŠ€æœ¯æ ˆ 4.3 æœ€ä½³å®è·µå»ºè®® 80%åœºæ™¯ï¼šä¼˜å…ˆè€ƒè™‘ç¦æ­¢è·³é¡µæŸ¥è¯¢æ³•ï¼Œæ€§èƒ½æœ€ä¼˜ é‡‘è/ç”µå•†åœºæ™¯ï¼šé€‰æ‹©äºŒæ¬¡æŸ¥è¯¢æ³•ï¼Œç²¾åº¦å’Œæ€§èƒ½å¹³è¡¡ å¤§æ•°æ®åˆ†æï¼šå…è®¸ç²¾åº¦æŸå¤±æ–¹æ¡ˆï¼Œå¿«é€Ÿå“åº” ä¼ ç»Ÿä¸šåŠ¡ç³»ç»Ÿï¼šå…¨å±€è§†é‡æ³•ï¼Œç®€å•å¯é  äº”ã€è¿›é˜¶ä¼˜åŒ–ç­–ç•¥5.1 ç´¢å¼•ä¼˜åŒ– ä¸ºæ’åºå­—æ®µåˆ›å»ºå¤åˆç´¢å¼• é¿å…åœ¨WHEREæ¡ä»¶ä¸­ä½¿ç”¨å‡½æ•° è€ƒè™‘è¦†ç›–ç´¢å¼•å‡å°‘å›è¡¨æ“ä½œ 5.2 ç¼“å­˜ç­–ç•¥ åˆ†é¡µç»“æœç¼“å­˜ï¼šç¼“å­˜çƒ­ç‚¹é¡µçš„æŸ¥è¯¢ç»“æœ è¾¹ç•Œå€¼ç¼“å­˜ï¼šç¼“å­˜æ¯é¡µçš„è¾¹ç•Œå€¼ï¼Œæ”¯æŒå¿«é€Ÿè·³é¡µ è¯»å†™åˆ†ç¦»ï¼šæŸ¥è¯¢èµ°ä»åº“ï¼Œå‡è½»ä¸»åº“å‹åŠ› 5.3 ä¸­é—´ä»¶æ–¹æ¡ˆ ShardingSphereï¼šå†…ç½®åˆ†é¡µä¼˜åŒ–ï¼Œæ”¯æŒå¤šç§åˆ†é¡µç­–ç•¥ MyCatï¼šæä¾›å…¨å±€è¡¨å’ŒERåˆ†ç‰‡ï¼Œä¼˜åŒ–è·¨åº“æŸ¥è¯¢ Vitessï¼šGoogleå¼€æºçš„åˆ†ç‰‡ç³»ç»Ÿï¼Œå†…ç½®é«˜æ•ˆåˆ†é¡µç®—æ³• 5.4 ä¸šåŠ¡å±‚ä¼˜åŒ– åˆ†é¡µæ·±åº¦é™åˆ¶ï¼šé™åˆ¶æœ€å¤§é¡µç ï¼Œé¿å…æ·±åº¦åˆ†é¡µ å¼‚æ­¥åŠ è½½ï¼šå‰ç«¯å®ç°æ‡’åŠ è½½ï¼Œå‡å°‘å•æ¬¡è¯·æ±‚æ•°æ®é‡ é¢„è®¡ç®—ï¼šå¯¹é«˜é¢‘æŸ¥è¯¢çš„åˆ†é¡µæ•°æ®è¿›è¡Œé¢„è®¡ç®—å’Œå­˜å‚¨ å…­ã€å®æˆ˜æ¡ˆä¾‹6.1 ç”µå•†å¹³å°å•†å“åˆ†é¡µåœºæ™¯ï¼šå•†å“æ•°æ®åˆ†ç‰‡åˆ°16ä¸ªåº“ï¼Œéœ€è¦æ”¯æŒè·³é¡µæŸ¥è¯¢æ–¹æ¡ˆï¼šäºŒæ¬¡æŸ¥è¯¢æ³• + Redisç¼“å­˜æ•ˆæœï¼š5000ä¸‡å•†å“æ•°æ®ï¼Œç¬¬1000é¡µæŸ¥è¯¢æ—¶é—´ä»15sä¼˜åŒ–åˆ°200ms 6.2 ç¤¾äº¤åª’ä½“æ¶ˆæ¯æµåœºæ™¯ï¼šç”¨æˆ·åŠ¨æ€åˆ†ç‰‡åˆ°8ä¸ªåº“ï¼Œåªæ”¯æŒä¸‹æ‹‰åŠ è½½æ–¹æ¡ˆï¼šç¦æ­¢è·³é¡µæŸ¥è¯¢æ³• + è¾¹ç•Œå€¼ç¼“å­˜æ•ˆæœï¼šäº¿çº§æ•°æ®ï¼Œæ¯æ¬¡æŸ¥è¯¢ç¨³å®šåœ¨50mså†… 6.3 é‡‘èäº¤æ˜“è®°å½•åœºæ™¯ï¼šäº¤æ˜“è®°å½•åˆ†ç‰‡åˆ°4ä¸ªåº“ï¼Œè¦æ±‚100%ç²¾åº¦æ–¹æ¡ˆï¼šäºŒæ¬¡æŸ¥è¯¢æ³• + ç®¡é“åŒ–æ‰§è¡Œæ•ˆæœï¼šåƒä¸‡çº§æ•°æ®ï¼Œæ·±åº¦åˆ†é¡µæ€§èƒ½ç¨³å®š ä¸ƒã€æœªæ¥è¶‹åŠ¿7.1 æ™ºèƒ½åˆ†é¡µ åŸºäºæœºå™¨å­¦ä¹ é¢„æµ‹ç”¨æˆ·ç¿»é¡µè¡Œä¸º åŠ¨æ€è°ƒæ•´åˆ†é¡µç­–ç•¥å’Œç¼“å­˜ç­–ç•¥ æ™ºèƒ½ç´¢å¼•æ¨èå’Œè‡ªåŠ¨ä¼˜åŒ– 7.2 æ–°å‹æ•°æ®åº“æ”¯æŒ åˆ†å¸ƒå¼æ•°æ®åº“åŸç”Ÿæ”¯æŒè·¨åº“åˆ†é¡µ å‘é‡åŒ–æ‰§è¡Œå¼•æ“ä¼˜åŒ–åˆ†é¡µæ€§èƒ½ æ··åˆå­˜å‚¨å¼•æ“æ”¯æŒä¸åŒåˆ†é¡µæ¨¡å¼ 7.3 äº‘åŸç”Ÿæ–¹æ¡ˆ Serverlessæ¶æ„æŒ‰éœ€åˆ†é…åˆ†é¡µèµ„æº å…¨å±€äº‹åŠ¡ç®¡ç†å™¨åè°ƒè·¨åº“åˆ†é¡µ å¤šç§Ÿæˆ·åˆ†é¡µéš”ç¦»å’Œæ€§èƒ½ä¿éšœ å…«ã€æ€»ç»“è·¨åº“åˆ†é¡µæ˜¯åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„ä¸­çš„ç»å…¸éš¾é¢˜ï¼Œæ²¡æœ‰é“¶å¼¹å¼çš„è§£å†³æ–¹æ¡ˆã€‚ æ ¸å¿ƒåœ¨äºæ ¹æ®ä¸šåŠ¡åœºæ™¯ã€æ•°æ®è§„æ¨¡å’ŒæŠ€æœ¯çº¦æŸï¼Œé€‰æ‹©æœ€é€‚åˆçš„åˆ†é¡µç­–ç•¥ã€‚ ç®€å•ä¸šåŠ¡ï¼šä¼˜å…ˆè€ƒè™‘ç¦æ­¢è·³é¡µæŸ¥è¯¢ï¼Œç‰ºç‰²éƒ¨åˆ†åŠŸèƒ½æ¢å–æè‡´æ€§èƒ½ å¤æ‚ä¸šåŠ¡ï¼šé‡‡ç”¨äºŒæ¬¡æŸ¥è¯¢æ³•ï¼Œåœ¨ç²¾åº¦å’Œæ€§èƒ½é—´å–å¾—å¹³è¡¡ å¤§æ•°æ®åœºæ™¯ï¼šè€ƒè™‘å…è®¸ç²¾åº¦æŸå¤±ï¼Œæˆ–å¼•å…¥ä¸“é—¨çš„å¤§æ•°æ®åˆ†æå¼•æ“ æŠ€æœ¯é€‰å‹æ—¶ï¼Œéœ€è¦å»ºç«‹å®Œæ•´çš„æ€§èƒ½ç›‘æ§ä½“ç³»ï¼ŒæŒç»­ä¼˜åŒ–åˆ†é¡µç­–ç•¥ã€‚åŒæ—¶ï¼Œä¸ä¸šåŠ¡æ–¹å……åˆ†æ²Ÿé€šï¼Œç†è§£çœŸå®éœ€æ±‚ï¼Œæœ‰æ—¶å€™é€šè¿‡è°ƒæ•´äº§å“è®¾è®¡ï¼Œå¯ä»¥é¿å…å¤æ‚çš„è·¨åº“åˆ†é¡µé—®é¢˜ã€‚ åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œè·¨åº“åˆ†é¡µåªæ˜¯ä¼—å¤šæŒ‘æˆ˜ä¹‹ä¸€ã€‚æ·±å…¥ç†è§£å…¶åŸç†å’Œä¼˜åŒ–ç­–ç•¥ï¼Œä¸ä»…èƒ½è§£å†³å½“å‰é—®é¢˜ï¼Œæ›´èƒ½ä¸ºæ„å»ºé«˜æ€§èƒ½ã€é«˜å¯ç”¨çš„åˆ†å¸ƒå¼ç³»ç»Ÿå¥ å®šåšå®åŸºç¡€ã€‚","link":"/dff372a4.html"},{"title":"Python Webä¸»æµæ¡†æ¶é€‰å‹çš„æ€è€ƒä»¥åŠä»å…¥é—¨åˆ°æ¶æ„è®¾è®¡çš„ç³»ç»Ÿæ€§é€‰å‹æŒ‡å—","text":"é¦–å…ˆï¼Œè‡´æ•¬â€œäº’è”ç½‘ä¹‹å­â€â€”â€”â€”â€”äºšä¼¦Â·æ–¯æ²ƒèŒ¨äºšä¼¦Â·æ–¯æ²ƒèŒ¨ï¼ˆAaron Swartzï¼Œ1986å¹´11æœˆ8æ—¥-2013å¹´1æœˆ11æ—¥ï¼‰ï¼Œç¾å›½ç¨‹åºå‘˜ã€ä½œå®¶å’Œç¤¾ä¼šæ´»åŠ¨å®¶ï¼ŒRedditè”åˆåˆ›å§‹äººï¼Œå‚ä¸è®¾è®¡RSSè§„æ ¼ã€web.pyæ¡†æ¶åŠCreative CommonsæŠ€æœ¯å¹³å°ã€‚ webæ¡†æ¶å‘å±•å²ä¸Šæœ‰é‡è¦åœ°ä½ï¼Œå®ƒå½±å“äº†åæ¥å¾ˆå¤šæ¡†æ¶çš„è®¾è®¡ç†å¿µï¼Œæ¡†æ¶å‘å±•å²ä¸Šçš„ä¸€ä¸ªä¼˜é›…æ³¨è„šã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155#### Python webæ¡†æ¶æ¼”è¿›ä¸æŠ€æœ¯æ ¼å±€ï¼ˆ2024-2025å¹´ï¼‰åœ¨2024-2025å¹´çš„Pythonå¼€å‘ç”Ÿæ€ä¸­ï¼ŒWebæ¡†æ¶çš„é€‰æ‹©å·²ä»ç®€å•çš„æŠ€æœ¯å†³ç­–ä¸Šå‡ä¸ºå½±å“äº§å“ç”Ÿå‘½å‘¨æœŸã€å›¢é˜Ÿæ•ˆèƒ½å’Œç³»ç»Ÿå¯æ‰©å±•æ€§çš„æˆ˜ç•¥è€ƒé‡ã€‚éšç€AIåŸç”Ÿåº”ç”¨ã€å®æ—¶æ•°æ®å¤„ç†å’Œå¾®æœåŠ¡æ¶æ„çš„æ™®åŠï¼Œå¼€å‘è€…é¢ä¸´ç€å‰æ‰€æœªæœ‰çš„æŠ€æœ¯é€‰å‹å¤æ‚åº¦ã€‚æœ¬æ–‡å°†ä»æ¡†æ¶è®¾è®¡ç†å¿µã€å­¦ä¹ æ›²çº¿ã€æ€§èƒ½ç‰¹æ€§åˆ°å®é™…åº”ç”¨åœºæ™¯ï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€å¥—ç³»ç»Ÿæ€§çš„é€‰å‹æ–¹æ³•è®ºï¼Œç‰¹åˆ«èšç„¦å½“ä¸‹æœ€çƒ­é—¨çš„Flaskä¸FastAPIä¹‹äº‰ï¼ŒåŠ©ä½ åœ¨æŠ€æœ¯æµªæ½®ä¸­åšå‡ºæ˜æ™ºå†³ç­–ã€‚#### ä¸€ã€ä¸»æµæ¡†æ¶å…¨æ™¯ï¼šå®šä½ä¸æ ¸å¿ƒä»·å€¼###### 1.1 æ¡†æ¶ç”Ÿæ€åˆ†å±‚ç°ä»£Python Webæ¡†æ¶å·²å½¢æˆæ¸…æ™°çš„ä¸‰å±‚æ¶æ„ç”Ÿæ€ï¼š**åŸºç¡€è®¾æ–½å±‚**ï¼šDjangoä½œä¸º&quot;å…¨åŠŸèƒ½æ¡†æ¶&quot;çš„ä»£è¡¨ï¼Œæä¾›äº†ä»ORMã€Adminåå°åˆ°è®¤è¯ç³»ç»Ÿçš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œå…¶&quot;å¼€ç®±å³ç”¨&quot;çš„è®¾è®¡å“²å­¦ä½¿å…¶æˆä¸ºä¼ä¸šçº§åº”ç”¨çš„é¦–é€‰ã€‚**è½»é‡å±‚**ï¼šFlaskä»¥å…¶å¾®æ¡†æ¶ç‰¹æ€§è‘—ç§°ï¼Œæ ¸å¿ƒä»£ç ç²¾ç®€è€Œæ‰©å±•æœºåˆ¶çµæ´»ï¼Œä¸ºå¼€å‘è€…æä¾›äº†&quot;ä»é›¶å¼€å§‹&quot;æ„å»ºåº”ç”¨çš„è‡ªç”±åº¦ï¼Œç‰¹åˆ«é€‚åˆåŸå‹éªŒè¯å’Œå°å‹é¡¹ç›®ã€‚**ç°ä»£å±‚**ï¼šFastAPIä½œä¸ºå¼‚æ­¥æ—¶ä»£çš„äº§ç‰©ï¼Œæ·±åº¦èåˆäº†Python 3.7+çš„ç±»å‹æ³¨è§£ç‰¹æ€§ï¼Œé€šè¿‡è‡ªåŠ¨ç”ŸæˆOpenAPIæ–‡æ¡£å’Œå†…ç½®ä¾èµ–æ³¨å…¥ç³»ç»Ÿï¼Œé‡æ–°å®šä¹‰äº†APIå¼€å‘ä½“éªŒã€‚###### 1.2 2024-2025å¹´å¸‚åœºæ ¼å±€æ ¹æ®æœ€æ–°è°ƒç ”æ•°æ®ï¼ŒFastAPIå±•ç°å‡ºæƒŠäººçš„2.4å€å¢é€Ÿï¼Œæˆä¸ºå¢é•¿æœ€å¿«çš„Pythonæ¡†æ¶ï¼Œè€ŒFlaskä¿æŒ34%çš„ç¨³å®šä½¿ç”¨ç‡ï¼ŒDjangoåˆ™åœ¨ä¼ä¸šçº§å¸‚åœºæŒç»­å æ®ä¸»å¯¼åœ°ä½ã€‚ è¿™ä¸€è¶‹åŠ¿åæ˜ äº†å¼€å‘è€…å¯¹é«˜æ€§èƒ½ã€å¼ºç±»å‹å’Œç°ä»£åŒ–å¼€å‘ä½“éªŒçš„è¿«åˆ‡éœ€æ±‚ã€‚#### äºŒã€å­¦ä¹ æ›²çº¿ä¸èƒ½åŠ›æˆé•¿è·¯å¾„###### 2.1 éš¾åº¦çŸ©é˜µåˆ†ææ¡†æ¶çš„å­¦ä¹ æ›²çº¿ä¸åº”ç®€å•åœ°ä»¥&quot;å®¹æ˜“&quot;æˆ–&quot;å›°éš¾&quot;æ¥è¯„åˆ¤ï¼Œè€Œåº”ä»**è®¤çŸ¥è´Ÿè·**ã€**æŠ½è±¡å±‚æ¬¡**å’Œ**è°ƒè¯•å¤æ‚åº¦**ä¸‰ä¸ªç»´åº¦è¿›è¡Œç³»ç»Ÿæ€§è¯„ä¼°ï¼š**Flask**ï¼šå­¦ä¹ æ›²çº¿æœ€ä¸ºå¹³ç¼“ï¼Œæ ¸å¿ƒæ¦‚å¿µä»…åŒ…å«è·¯ç”±ã€è¯·æ±‚/å“åº”å¯¹è±¡å’Œä¸Šä¸‹æ–‡ç®¡ç†ã€‚æ–°æ‰‹å¯ä»¥åœ¨1å°æ—¶å†…æ­å»ºç¬¬ä¸€ä¸ªWebåº”ç”¨ï¼Œè¿™ä½¿å…¶æˆä¸ºç†è§£WebåŸºç¡€çš„ç†æƒ³èµ·ç‚¹ã€‚ ç„¶è€Œï¼Œè¿™ç§&quot;ç®€å•&quot;ä¹Ÿæ„å‘³ç€å¼€å‘è€…éœ€è¦è‡ªè¡Œå†³ç­–æ¶æ„è®¾è®¡ï¼Œå®¹æ˜“åœ¨é¡¹ç›®è§„æ¨¡æ‰©å¤§åé™·å…¥æŠ€æœ¯å€ºåŠ¡ã€‚**Django**ï¼šå­¦ä¹ æ›²çº¿æœ€ä¸ºé™¡å³­ï¼Œå…¶&quot;çº¦å®šä¼˜äºé…ç½®&quot;çš„ç†å¿µè¦æ±‚å¼€å‘è€…ç†è§£MTVæ¨¡å¼ã€ORMæŸ¥è¯¢ä¼˜åŒ–ã€ä¸­é—´ä»¶æœºåˆ¶ç­‰å¤æ‚æ¦‚å¿µã€‚ ä½†è¿™ç§å‰æœŸæŠ•å…¥æ¢æ¥çš„æ˜¯åæœŸå¼€å‘æ•ˆç‡çš„æ˜¾è‘—æå‡ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦å¿«é€Ÿè¿­ä»£çš„ä¼ä¸šçº§é¡¹ç›®ã€‚**FastAPI**ï¼šå­¦ä¹ æ›²çº¿å¤„äºä¸­ç­‰æ°´å¹³ï¼Œå…¶éš¾ç‚¹ä¸»è¦åœ¨äºå¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ã€ç±»å‹æ³¨è§£çš„æ·±å…¥ç†è§£å’Œä¾èµ–æ³¨å…¥æœºåˆ¶çš„è®¾è®¡å“²å­¦ã€‚ å¯¹äºæœ‰TypeScriptæˆ–JavaèƒŒæ™¯çš„å¼€å‘è€…ï¼ŒFastAPIçš„å­¦ä¹ è¿‡ç¨‹ä¼šç›¸å¯¹é¡ºç•…ï¼›è€Œå¯¹äºä¼ ç»ŸPythonå¼€å‘è€…ï¼Œåˆ™éœ€è¦é€‚åº”å¼ºç±»å‹æ€ç»´çš„è½¬å˜ã€‚###### 2.2 èƒ½åŠ›æˆé•¿è·¯çº¿å›¾ä¸€ä¸ªæˆç†Ÿçš„Pythonå¼€å‘è€…é€šå¸¸ä¼šç»å†&quot;æ¡†æ¶ä¸‰é˜¶æ®µ&quot;æˆé•¿ï¼š&gt; **ç¬¬ä¸€é˜¶æ®µ**ï¼šä½¿ç”¨Flaskæ„å»ºç¬¬ä¸€ä¸ªWebé¡¹ç›®ï¼Œæ·±å…¥ç†è§£HTTPåè®®ã€è·¯ç”±åˆ†å‘å’Œè¯·æ±‚ç”Ÿå‘½å‘¨æœŸ&gt; &gt; **ç¬¬äºŒé˜¶æ®µ**ï¼šé€šè¿‡Djangoé¡¹ç›®å­¦ä¹ ä¼ä¸šçº§æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬æ¨¡å—åŒ–è®¾è®¡ã€å®‰å…¨æœ€ä½³å®è·µå’Œæ€§èƒ½ä¼˜åŒ–&gt; &gt; **ç¬¬ä¸‰é˜¶æ®µ**ï¼šé‡‡ç”¨FastAPIå¼€å‘é«˜æ€§èƒ½APIæœåŠ¡ï¼ŒæŒæ¡å¼‚æ­¥ç¼–ç¨‹ã€ç±»å‹å®‰å…¨å’Œç°ä»£APIè®¾è®¡æ¨¡å¼ è¿™ç§æ¸è¿›å¼å­¦ä¹ è·¯å¾„ä¸ä»…ç¬¦åˆè®¤çŸ¥è§„å¾‹ï¼Œæ›´èƒ½å¸®åŠ©å¼€å‘è€…å»ºç«‹å®Œæ•´çš„Webå¼€å‘çŸ¥è¯†ä½“ç³»ã€‚#### ä¸‰ã€Flask vs FastAPIï¼šæ·±åº¦æŠ€æœ¯å‰–æ###### 3.1 æ¶æ„è®¾è®¡ç†å¿µå¯¹æ¯”**Flask**çš„è®¾è®¡å“²å­¦æ˜¯&quot;å¾®æ ¸å¿ƒ+æ‰©å±•&quot;ï¼Œå…¶æ ¸å¿ƒä»£ç ä¸è¶³1000è¡Œï¼Œé€šè¿‡ä¸°å¯Œçš„æ‰©å±•ç”Ÿæ€ï¼ˆå¦‚Flask-RESTfulã€Flask-SQLAlchemyï¼‰å®ç°åŠŸèƒ½å¢å¼ºã€‚è¿™ç§è®¾è®¡èµ‹äºˆäº†æå¤§çš„çµæ´»æ€§ï¼Œä½†ä¹Ÿå¸¦æ¥äº†ä¾èµ–ç®¡ç†å¤æ‚æ€§å’Œç‰ˆæœ¬å…¼å®¹æ€§æŒ‘æˆ˜ã€‚**FastAPI**åˆ™é‡‡ç”¨&quot;ä¸€ä½“åŒ–è®¾è®¡&quot;ç†å¿µï¼Œå°†ä¾èµ–æ³¨å…¥ã€æ•°æ®éªŒè¯ã€APIæ–‡æ¡£ç”Ÿæˆç­‰æ ¸å¿ƒåŠŸèƒ½å†…ç½®åˆ°æ¡†æ¶ä¸­ã€‚å…¶ç‹¬ç‰¹çš„&quot;å£°æ˜å¼å‚æ•°éªŒè¯&quot;æœºåˆ¶ï¼Œè®©å¼€å‘è€…é€šè¿‡Pythonç±»å‹æ³¨è§£å³å¯å®ç°è¯·æ±‚æ•°æ®çš„è‡ªåŠ¨éªŒè¯å’Œåºåˆ—åŒ–ï¼Œå¤§å¹…å‡å°‘äº†æ ·æ¿ä»£ç ã€‚###### 3.2 æ€§èƒ½ä¸å¹¶å‘æ¨¡å‹åœ¨æ€§èƒ½å¯¹æ¯”ä¸­ï¼ŒFastAPIå‡­å€Ÿå¼‚æ­¥I/Oå’ŒASGIæœåŠ¡å™¨æ”¯æŒï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å±•ç°å‡ºæ˜¾è‘—ä¼˜åŠ¿ã€‚åŸºå‡†æµ‹è¯•æ˜¾ç¤ºï¼ŒFastAPIåœ¨å¤„ç†1000+å¹¶å‘è¿æ¥æ—¶ï¼Œååé‡å¯è¾¾Flaskçš„3-5å€ã€‚ è¿™ç§æ€§èƒ½å·®å¼‚åœ¨IOå¯†é›†å‹åº”ç”¨ï¼ˆå¦‚APIç½‘å…³ã€å®æ—¶æ•°æ®å¤„ç†ï¼‰ä¸­å°¤ä¸ºæ˜æ˜¾ã€‚ç„¶è€Œï¼Œæ€§èƒ½å¹¶éå”¯ä¸€è€ƒé‡ã€‚Flaskçš„åŒæ­¥æ¨¡å‹åœ¨CPUå¯†é›†å‹ä»»åŠ¡ä¸­åè€Œå¯èƒ½æ›´é«˜æ•ˆï¼Œä¸”å…¶è°ƒè¯•ä½“éªŒæ›´åŠ ç›´è§‚ã€‚é€‰æ‹©æ—¶éœ€è¦æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯è¿›è¡Œæƒè¡¡ã€‚###### 3.3 å¼€å‘ä½“éªŒä¸å·¥å…·é“¾**FastAPI**çš„æ€æ‰‹çº§ç‰¹æ€§æ˜¯è‡ªåŠ¨APIæ–‡æ¡£ç”Ÿæˆã€‚é€šè¿‡é›†æˆSwagger UIå’ŒReDocï¼Œå¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç¼–å†™APIæ–‡æ¡£ï¼Œå³å¯è·å¾—äº¤äº’å¼APIæµ‹è¯•ç•Œé¢ã€‚ è¿™ç§&quot;æ–‡æ¡£å³ä»£ç &quot;çš„è®¾è®¡ä¸ä»…æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œæ›´ç¡®ä¿äº†æ–‡æ¡£ä¸å®ç°çš„ä¸€è‡´æ€§ã€‚**Flask**åˆ™åœ¨è°ƒè¯•å·¥å…·å’Œç¤¾åŒºèµ„æºæ–¹é¢å æ®ä¼˜åŠ¿ã€‚å…¶ä¸°å¯Œçš„æ‰©å±•ç”Ÿæ€å’Œæˆç†Ÿçš„è°ƒè¯•å™¨ï¼ˆå¦‚Flask-DebugToolbarï¼‰ä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§çš„é—®é¢˜è¯Šæ–­èƒ½åŠ›ã€‚å¯¹äºéœ€è¦å¿«é€ŸåŸå‹éªŒè¯çš„åœºæ™¯ï¼ŒFlaskçš„å³æ—¶åé¦ˆå¾ªç¯æ›´å…·ä¼˜åŠ¿ã€‚#### å››ã€ç³»ç»Ÿæ€§é€‰å‹æ–¹æ³•è®º###### 4.1 é¡¹ç›®ç»´åº¦è¯„ä¼°çŸ©é˜µåœ¨æ¡†æ¶é€‰å‹æ—¶ï¼Œå»ºè®®ä»ä»¥ä¸‹äº”ä¸ªç»´åº¦æ„å»ºè¯„ä¼°çŸ©é˜µï¼š| è¯„ä¼°ç»´åº¦ | Flaské€‚ç”¨åœºæ™¯ | FastAPIé€‚ç”¨åœºæ™¯ ||---------|--------------|----------------|| **é¡¹ç›®è§„æ¨¡** | å°å‹åº”ç”¨ã€åŸå‹éªŒè¯ | ä¸­å¤§å‹APIæœåŠ¡ã€å¾®æœåŠ¡ || **å›¢é˜ŸæŠ€èƒ½** | Pythonæ–°æ‰‹ã€WebåŸºç¡€è–„å¼±å›¢é˜Ÿ | æœ‰å¼‚æ­¥ç¼–ç¨‹ç»éªŒã€å¼ºç±»å‹åå¥½å›¢é˜Ÿ || **æ€§èƒ½è¦æ±‚** | ä½å¹¶å‘ã€ç®€å•ä¸šåŠ¡é€»è¾‘ | é«˜å¹¶å‘ã€å®æ—¶æ•°æ®å¤„ç† || **ç»´æŠ¤å‘¨æœŸ** | çŸ­æœŸé¡¹ç›®ã€æ¦‚å¿µéªŒè¯ | é•¿æœŸç»´æŠ¤ã€æŒç»­è¿­ä»£ || **ç”Ÿæ€ä¾èµ–** | éœ€è¦ç‰¹å®šFlaskæ‰©å±•çš„é¡¹ç›® | éœ€è¦ç°ä»£APIç‰¹æ€§çš„é¡¹ç›® |###### 4.2 å…¥é—¨å»ºè®®ï¼šä»åœºæ™¯å‡ºå‘**å¦‚æœä½ æ˜¯å®Œå…¨çš„Pythonæ–°æ‰‹**ï¼šä»Flaskå¼€å§‹ã€‚å…¶ç®€å•çš„APIè®¾è®¡å’Œç›´è§‚çš„è¯·æ±‚å¤„ç†æµç¨‹ï¼Œèƒ½å¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹Webå¼€å‘çš„åŸºæœ¬è®¤çŸ¥ã€‚ é€šè¿‡æ„å»ºä¸€ä¸ªåšå®¢ç³»ç»Ÿæˆ–ç®€å•çš„REST APIï¼Œä½ å¯ä»¥æ·±å…¥ç†è§£è·¯ç”±ã€æ¨¡æ¿æ¸²æŸ“ã€è¡¨å•å¤„ç†ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚**å¦‚æœä½ æœ‰Webå¼€å‘ç»éªŒæˆ–ä¸“æ³¨äºAPIå¼€å‘**ï¼šç›´æ¥é€‰æ‹©FastAPIã€‚å…¶ç±»å‹å®‰å…¨ç‰¹æ€§å’Œè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£çš„èƒ½åŠ›ï¼Œèƒ½æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚ ç‰¹åˆ«æ˜¯åœ¨AIå·¥ç¨‹ã€æ•°æ®åˆ†æAPIç­‰ç°ä»£åº”ç”¨åœºæ™¯ä¸­ï¼ŒFastAPIçš„å¼‚æ­¥æ”¯æŒå’ŒPydanticé›†æˆæä¾›äº†æ— ä¸ä¼¦æ¯”çš„å¼€å‘ä½“éªŒã€‚**å¦‚æœä½ è®¡åˆ’è¿›å…¥ä¼ä¸šçº§å¼€å‘**ï¼šå»ºè®®å…ˆå­¦ä¹ Flaskå»ºç«‹åŸºç¡€ï¼Œå†è½¬å‘DjangoæŒæ¡ä¼ä¸šçº§æ¶æ„æ¨¡å¼ï¼Œæœ€åç”¨FastAPIæå‡APIå¼€å‘èƒ½åŠ›ã€‚ è¿™ç§&quot;ç”±ç®€å…¥ç¹ï¼Œå†è¿”ç’å½’çœŸ&quot;çš„å­¦ä¹ è·¯å¾„ï¼Œèƒ½å¸®åŠ©ä½ å»ºç«‹å®Œæ•´çš„Webå¼€å‘çŸ¥è¯†ä½“ç³»ã€‚#### äº”ã€æ¶æ„è®¾è®¡æ€è€ƒï¼šè¶…è¶Šæ¡†æ¶é€‰æ‹©###### 5.1 æ¡†æ¶æ— å…³çš„æ ¸å¿ƒåŸåˆ™æ— è®ºé€‰æ‹©å“ªä¸ªæ¡†æ¶ï¼Œä¼˜ç§€çš„æ¶æ„è®¾è®¡åº”éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š**åˆ†å±‚æ¶æ„**ï¼šå°†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®è®¿é—®å’Œè¡¨ç°å±‚æ¸…æ™°åˆ†ç¦»ï¼Œé¿å…æ¡†æ¶ç»‘å®šã€‚å³ä½¿ä½¿ç”¨Djangoçš„ORMï¼Œä¹Ÿåº”é€šè¿‡Repositoryæ¨¡å¼æŠ½è±¡æ•°æ®è®¿é—®ï¼Œä¸ºæœªæ¥å¯èƒ½çš„æ¡†æ¶è¿ç§»é¢„ç•™ç©ºé—´ã€‚**å¥‘çº¦ä¼˜å…ˆ**ï¼šåœ¨APIå¼€å‘ä¸­ï¼Œå…ˆå®šä¹‰æ¥å£å¥‘çº¦ï¼ˆå¦‚OpenAPIè§„èŒƒï¼‰ï¼Œå†å®ç°å…·ä½“é€»è¾‘ã€‚FastAPIçš„å£°æ˜å¼éªŒè¯å¤©ç„¶æ”¯æŒè¿™ä¸€æ¨¡å¼ï¼Œè€ŒFlaskåˆ™éœ€è¦å€ŸåŠ©é¢å¤–å·¥å…·ï¼ˆå¦‚apispecï¼‰å®ç°ã€‚**å¯è§‚æµ‹æ€§å†…å»º**ï¼šåœ¨æ¶æ„è®¾è®¡åˆæœŸå°±è€ƒè™‘æ—¥å¿—ã€ç›‘æ§å’Œè¿½è¸ªæœºåˆ¶ã€‚FastAPIçš„ä¸­é—´ä»¶ç³»ç»Ÿå’ŒFlaskçš„blueprintæœºåˆ¶ï¼Œéƒ½å¯ä»¥ä½œä¸ºå®ç°ç»Ÿä¸€ç›‘æ§ç­–ç•¥çš„åŸºç¡€è®¾æ–½ã€‚###### 5.2 æ··åˆæ¶æ„å®è·µåœ¨å¤æ‚ç³»ç»Ÿä¸­ï¼Œå•ä¸€æ¡†æ¶å¾€å¾€æ— æ³•æ»¡è¶³æ‰€æœ‰éœ€æ±‚ã€‚ç°ä»£æ¶æ„è®¾è®¡è¶‹å‘äº&quot;æ··åˆæ¡†æ¶&quot;ç­–ç•¥ï¼š- **æ ¸å¿ƒä¸šåŠ¡**ï¼šä½¿ç”¨Djangoæ„å»ºç®¡ç†åå°å’Œæ ¸å¿ƒä¸šåŠ¡é€»è¾‘- **APIå±‚**ï¼šé‡‡ç”¨FastAPIæä¾›é«˜æ€§èƒ½REST/gRPCæ¥å£- **è¾¹ç¼˜æœåŠ¡**ï¼šä½¿ç”¨Flaskå®ç°è½»é‡çº§ç½‘å…³æˆ–ä»£ç†æœåŠ¡é€šè¿‡APIç½‘å…³æˆ–æœåŠ¡ç½‘æ ¼æŠ€æœ¯ï¼Œè¿™äº›ä¸åŒæ¡†æ¶æ„å»ºçš„æœåŠ¡å¯ä»¥æ— ç¼åä½œï¼Œå‘æŒ¥å„è‡ªä¼˜åŠ¿ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªç”µå•†å¹³å°å¯èƒ½ä½¿ç”¨Djangoç®¡ç†å•†å“å’Œè®¢å•ï¼ŒFastAPIå¤„ç†å®æ—¶æ¨èå’Œæœç´¢APIï¼ŒFlaskå®ç°æ”¯ä»˜å›è°ƒå’ŒWebhookå¤„ç†ã€‚#### å…­ã€æœªæ¥è¶‹åŠ¿ä¸æ¼”è¿›å»ºè®®###### 6.1 æŠ€æœ¯æ¼”è¿›æ–¹å‘ä»2024-2025å¹´çš„æŠ€æœ¯è¶‹åŠ¿æ¥çœ‹ï¼ŒPython Webæ¡†æ¶æ­£åœ¨å‘ä¸‰ä¸ªæ–¹å‘æ¼”è¿›ï¼š**å¼‚æ­¥åŸç”ŸåŒ–**ï¼šFastAPIçš„æˆåŠŸè¯æ˜äº†å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹åœ¨ç°ä»£Webå¼€å‘ä¸­çš„é‡è¦æ€§ã€‚æœªæ¥æ¡†æ¶å°†æ›´æ·±åº¦é›†æˆasync/awaitï¼Œæä¾›æ— ç¼çš„åŒæ­¥/å¼‚æ­¥æ··åˆç¼–ç¨‹ä½“éªŒã€‚**AIåŸç”Ÿé›†æˆ**ï¼šéšç€AIåº”ç”¨çš„æ™®åŠï¼Œæ¡†æ¶å°†å†…ç½®å¯¹æœºå™¨å­¦ä¹ æ¨¡å‹éƒ¨ç½²ã€å‘é‡æ•°æ®åº“é›†æˆå’Œå®æ—¶æ¨ç†çš„æ”¯æŒã€‚FastAPIåœ¨è¿™ä¸€é¢†åŸŸå·²å±•ç°å‡ºæ˜æ˜¾ä¼˜åŠ¿ã€‚**è¾¹ç¼˜è®¡ç®—ä¼˜åŒ–**ï¼šæ¡†æ¶å°†æ›´åŠ å…³æ³¨èµ„æºå—é™ç¯å¢ƒä¸‹çš„æ€§èƒ½ä¼˜åŒ–ï¼ŒåŒ…æ‹¬æ›´å°çš„å†…å­˜å ç”¨ã€æ›´å¿«çš„å†·å¯åŠ¨æ—¶é—´å’Œå¯¹Serverlessæ¶æ„çš„æ·±åº¦æ”¯æŒã€‚###### 6.2 ä¸ªäººæˆé•¿å»ºè®®å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œæ¡†æ¶æŠ€èƒ½çš„æ¼”è¿›åº”éµå¾ª&quot;æ·±åº¦&gt;å¹¿åº¦&gt;èåˆ&quot;çš„åŸåˆ™ï¼š1. **æ·±åº¦æŒæ¡ä¸€ä¸ªæ¡†æ¶**ï¼šé€‰æ‹©ä¸èŒä¸šè§„åˆ’åŒ¹é…çš„æ¡†æ¶ï¼ˆå¦‚ä¼ä¸šå¼€å‘é€‰Djangoï¼ŒAPIå¼€å‘é€‰FastAPIï¼‰ï¼Œæ·±å…¥ç†è§£å…¶è®¾è®¡å“²å­¦å’Œæœ€ä½³å®è·µ2. **æ¨ªå‘æ‹“å±•çŸ¥è¯†å¹¿åº¦**ï¼šäº†è§£å…¶ä»–æ¡†æ¶çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç†è§£ä¸åŒè®¾è®¡é€‰æ‹©èƒŒåçš„æƒè¡¡3. **èåˆæ¶æ„æ€ç»´**ï¼šè¶…è¶Šå…·ä½“æ¡†æ¶ï¼ŒæŒæ¡åˆ†å¸ƒå¼ç³»ç»Ÿã€æ€§èƒ½ä¼˜åŒ–å’Œå®‰å…¨è®¾è®¡ç­‰é€šç”¨æŠ€èƒ½#### ä¸ƒã€Flaskå’ŒFastAPIåœ¨æ¡†æ¶è®¾è®¡ç†å¿µã€è·¯ç”±ã€DAOæ–¹é¢çš„åŒºåˆ«#### ä¸€ã€æ¡†æ¶è®¾è®¡ç†å¿µï¼šå“²å­¦å·®å¼‚ä¸æ¶æ„æ¼”è¿›##### 1.1 Flaskï¼šå¾®å†…æ ¸ä¸æ‰©å±•é©±åŠ¨çš„è®¾è®¡å“²å­¦Flaskè¯ç”Ÿäº2010å¹´ï¼Œç”±Armin Ronacheråˆ›å»ºï¼Œå…¶æ ¸å¿ƒè®¾è®¡ç†å¿µæ˜¯&quot;**å¾®å†…æ ¸+æ‰©å±•ç”Ÿæ€**&quot;ã€‚è¿™ç§è®¾è®¡ç†å¿µä½“ç°åœ¨ï¼š**æ ¸å¿ƒæç®€ä¸»ä¹‰**ï¼š- Flaskæ ¸å¿ƒä»£ç ä»…çº¦1000è¡Œï¼Œä¸“æ³¨äºHTTPè¯·æ±‚/å“åº”å¤„ç†- ä¸å¼ºåˆ¶ä»»ä½•ç‰¹å®šçš„é¡¹ç›®ç»“æ„ï¼Œç»™äºˆå¼€å‘è€…æœ€å¤§è‡ªç”±åº¦- é‡‡ç”¨&quot;æ˜¾å¼ä¼˜äºéšå¼&quot;åŸåˆ™ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½éœ€è¦æ˜¾å¼å¯¼å…¥å’Œé…ç½®**æ‰©å±•é©±åŠ¨æ¶æ„**ï¼š```python# Flaskå…¸å‹æ‰©å±•ç»„åˆfrom flask import Flaskfrom flask_sqlalchemy import SQLAlchemyfrom flask_migrate import Migratefrom flask_login import LoginManagerapp = Flask(__name__)db = SQLAlchemy(app) # é€šè¿‡æ‰©å±•æ³¨å…¥åŠŸèƒ½migrate = Migrate(app, db)login_manager = LoginManager(app) è®¾è®¡å“²å­¦æ€»ç»“ï¼šFlaskæ›´åƒæ˜¯ä¸€ä¸ªâ€ä¹é«˜åº•æ¿â€ï¼Œå¼€å‘è€…éœ€è¦è‡ªè¡Œé€‰æ‹©å’Œç»„è£…å„ç§æ‰©å±•æ¨¡å—ã€‚è¿™ç§è®¾è®¡èµ‹äºˆäº†æå¤§çš„çµæ´»æ€§ï¼Œä½†ä¹Ÿè¦æ±‚å¼€å‘è€…å…·å¤‡è¾ƒå¼ºçš„æ¶æ„è®¾è®¡èƒ½åŠ›ï¼Œå®¹æ˜“åœ¨é¡¹ç›®è§„æ¨¡æ‰©å¤§åå‡ºç°ä¾èµ–ç®¡ç†æ··ä¹±å’Œæ¶æ„ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ 1.2 FastAPIï¼šç°ä»£APIä¼˜å…ˆçš„å£°æ˜å¼è®¾è®¡FastAPIè¯ç”Ÿäº2018å¹´ï¼Œç”±SebastiÃ¡n RamÃ­rezåˆ›å»ºï¼Œå…¶è®¾è®¡ç†å¿µæ˜¯â€APIä¼˜å…ˆ+ç±»å‹é©±åŠ¨+å¼‚æ­¥åŸç”Ÿâ€œã€‚è¿™ç§è®¾è®¡ç†å¿µä½“ç°åœ¨ï¼š å£°æ˜å¼ç¼–ç¨‹èŒƒå¼ï¼š é€šè¿‡Pythonç±»å‹æ³¨è§£å£°æ˜APIå¥‘çº¦ï¼Œæ¡†æ¶è‡ªåŠ¨å¤„ç†éªŒè¯ã€åºåˆ—åŒ– ä¾èµ–æ³¨å…¥ç³»ç»Ÿå†…ç½®äºæ¡†æ¶æ ¸å¿ƒï¼Œæä¾›ç»Ÿä¸€çš„ç»„ä»¶ç®¡ç†æœºåˆ¶ OpenAPIå’ŒJSON Schemaè§„èŒƒæ·±åº¦é›†æˆï¼Œæ–‡æ¡£å³ä»£ç  å¼‚æ­¥åŸç”Ÿæ”¯æŒï¼š 1234567891011121314from fastapi import FastAPI, Dependsfrom pydantic import BaseModelfrom typing import Optionalapp = FastAPI()class Item(BaseModel): name: str description: Optional[str] = None price: float@app.post(&quot;/items/&quot;)async def create_item(item: Item): # å¼‚æ­¥åŸç”Ÿæ”¯æŒ return {&quot;item&quot;: item} è®¾è®¡å“²å­¦æ€»ç»“ï¼šFastAPIé‡‡ç”¨â€çº¦å®šä¼˜äºé…ç½®â€çš„åŸåˆ™ï¼Œé€šè¿‡ç±»å‹æ³¨è§£å’Œå£°æ˜å¼è¯­æ³•ï¼Œå°†APIå¼€å‘æå‡åˆ°å¥‘çº¦ä¼˜å…ˆçš„å±‚æ¬¡ã€‚å…¶å†…ç½®çš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿå’Œå¼‚æ­¥æ”¯æŒï¼Œä½¿å¾—æ„å»ºé«˜æ€§èƒ½ã€å¯ç»´æŠ¤çš„APIæœåŠ¡å˜å¾—æ›´åŠ ç®€å•å’Œä¸€è‡´ã€‚ 1.3 è®¾è®¡ç†å¿µå¯¹æ¯”ï¼šæ¼”è¿›ä¸å–èˆ ç»´åº¦ Flask FastAPI æ ¸å¿ƒå“²å­¦ å¾®å†…æ ¸ï¼Œæ‰©å±•é©±åŠ¨ å…¨åŠŸèƒ½ï¼Œçº¦å®šä¼˜äºé…ç½® æ¶æ„é£æ ¼ æ¸è¿›å¼æ¶æ„æ¼”è¿› å¥‘çº¦ä¼˜å…ˆï¼Œå£°æ˜å¼è®¾è®¡ ç±»å‹ç³»ç»Ÿ åŠ¨æ€ç±»å‹ï¼Œè¿è¡Œæ—¶éªŒè¯ é™æ€ç±»å‹ï¼Œç¼–è¯‘æ—¶éªŒè¯ å¹¶å‘æ¨¡å‹ åŒæ­¥ä¼˜å…ˆï¼Œå¼‚æ­¥æ‰©å±• å¼‚æ­¥åŸç”Ÿï¼ŒåŒæ­¥å…¼å®¹ æ–‡æ¡£ç”Ÿæˆ éœ€è¦ç¬¬ä¸‰æ–¹æ‰©å±• å†…ç½®OpenAPIè‡ªåŠ¨ç”Ÿæˆ å­¦ä¹ æ›²çº¿ å¹³ç¼“ï¼Œæ¦‚å¿µç®€å• é™¡å³­ï¼Œéœ€è¦ç†è§£ç±»å‹ç³»ç»Ÿ äºŒã€è·¯ç”±æœºåˆ¶ï¼šä»è£…é¥°å™¨åˆ°ä¾èµ–æ³¨å…¥çš„æ¼”è¿›2.1 Flaskè·¯ç”±ï¼šç®€å•ç›´è§‚ï¼ŒåŠŸèƒ½å¼ºå¤§çš„è£…é¥°å™¨ç³»ç»ŸFlaskçš„è·¯ç”±ç³»ç»ŸåŸºäºWerkzeugè·¯ç”±å¼•æ“ï¼Œé‡‡ç”¨è£…é¥°å™¨æ¨¡å¼ï¼Œè®¾è®¡ç®€æ´è€Œå¼ºå¤§ï¼š åŸºç¡€è·¯ç”±å®šä¹‰ï¼š 12345678910111213from flask import Flask, request, jsonifyapp = Flask(__name__)@app.route('/users/&lt;int:user_id&gt;', methods=['GET'])def get_user(user_id): return jsonify({&quot;user_id&quot;: user_id})@app.route('/search', methods=['GET'])def search_users(): query = request.args.get('q') # ä»æŸ¥è¯¢å‚æ•°è·å– page = request.args.get('page', 1, type=int) # ç±»å‹è½¬æ¢ return jsonify({&quot;query&quot;: query, &quot;page&quot;: page}) è·¯ç”±ç‰¹æ€§åˆ†æï¼š URLå˜é‡è½¬æ¢å™¨ï¼šå†…ç½®&lt;int:&gt;, &lt;float:&gt;, &lt;path:&gt;ç­‰ç±»å‹è½¬æ¢å™¨ å¤šæ–¹æ³•æ”¯æŒï¼šå•ä¸ªè·¯ç”±å¯å¤„ç†å¤šç§HTTPæ–¹æ³• è“å›¾ç³»ç»Ÿï¼šé€šè¿‡Blueprintå®ç°æ¨¡å—åŒ–è·¯ç”±ç»„ç»‡ è¯·æ±‚ä¸Šä¸‹æ–‡ï¼šé€šè¿‡requestå…¨å±€å¯¹è±¡è®¿é—®è¯·æ±‚æ•°æ® ä¼˜åŠ¿ä¸å±€é™ï¼šâœ… ä¼˜åŠ¿ï¼šè¯­æ³•ç›´è§‚ï¼Œå­¦ä¹ æˆæœ¬ä½ï¼Œè°ƒè¯•ç®€å•âŒ å±€é™ï¼šç±»å‹éªŒè¯éœ€è¦æ‰‹åŠ¨å®ç°ï¼Œè·¯ç”±é€»è¾‘ä¸ä¸šåŠ¡é€»è¾‘è€¦åˆåº¦é«˜ 2.2 FastAPIè·¯ç”±ï¼šç±»å‹é©±åŠ¨ï¼Œä¾èµ–æ³¨å…¥çš„ç°ä»£åŒ–è®¾è®¡FastAPIçš„è·¯ç”±ç³»ç»Ÿæ·±åº¦èåˆäº†ç±»å‹æ³¨è§£å’Œä¾èµ–æ³¨å…¥ï¼Œä»£è¡¨äº†ç°ä»£APIå¼€å‘çš„æœ€ä½³å®è·µï¼š ç±»å‹é©±åŠ¨çš„è·¯ç”±å®šä¹‰ï¼š 12345678910111213141516171819202122from fastapi import FastAPI, Path, Query, Dependsfrom typing import Optionalfrom pydantic import BaseModelapp = FastAPI()class UserCreate(BaseModel): name: str email: str age: Optional[int] = None@app.get(&quot;/users/{user_id}&quot;)async def get_user( user_id: int = Path(..., description=&quot;ç”¨æˆ·ID&quot;, ge=1), # è·¯å¾„å‚æ•°éªŒè¯ skip: int = Query(0, ge=0), # æŸ¥è¯¢å‚æ•°éªŒè¯ limit: int = Query(10, gt=0, le=100)): return {&quot;user_id&quot;: user_id, &quot;skip&quot;: skip, &quot;limit&quot;: limit}@app.post(&quot;/users/&quot;)async def create_user(user: UserCreate): # è‡ªåŠ¨JSONéªŒè¯å’Œåºåˆ—åŒ– return {&quot;user&quot;: user.dict()} è·¯ç”±ç‰¹æ€§åˆ†æï¼š ç±»å‹éªŒè¯ï¼šé€šè¿‡Pydanticæ¨¡å‹å’Œç±»å‹æ³¨è§£è‡ªåŠ¨éªŒè¯è¯·æ±‚æ•°æ® å‚æ•°ä¾èµ–ï¼šPath, Query, Body, Headerç­‰å‚æ•°ç±»å‹æä¾›ç»†ç²’åº¦æ§åˆ¶ ä¾èµ–æ³¨å…¥ï¼šé€šè¿‡Dependså®ç°è·¯ç”±çº§åˆ«çš„ä¾èµ–æ³¨å…¥ å¼‚æ­¥æ”¯æŒï¼šåŸç”Ÿæ”¯æŒasync/awaitï¼Œæå‡I/Oå¯†é›†å‹åº”ç”¨æ€§èƒ½ ä¾èµ–æ³¨å…¥åœ¨è·¯ç”±ä¸­çš„åº”ç”¨ï¼š 12345678910from fastapi import Depends, HTTPExceptiondef get_current_user(token: str = Header(...)): if not verify_token(token): raise HTTPException(status_code=401, detail=&quot;Invalid token&quot;) return {&quot;user_id&quot;: 123, &quot;username&quot;: &quot;test&quot;}@app.get(&quot;/profile&quot;)async def get_profile(current_user: dict = Depends(get_current_user)): return current_user 2.3 è·¯ç”±æœºåˆ¶æ·±åº¦å¯¹æ¯” ç‰¹æ€§ Flask FastAPI å‚æ•°éªŒè¯ æ‰‹åŠ¨å®ç°æˆ–æ‰©å±• å†…ç½®Pydanticè‡ªåŠ¨éªŒè¯ ç±»å‹æç¤º å¯é€‰ï¼Œæ— è¿è¡Œæ—¶æ•ˆæœ å¼ºåˆ¶ï¼Œå½±å“è¿è¡Œæ—¶è¡Œä¸º å¼‚æ­¥æ”¯æŒ é€šè¿‡æ‰©å±•ï¼ˆå¦‚Flask-Asyncï¼‰ åŸç”Ÿæ”¯æŒasync/await ä¾èµ–ç®¡ç† å…¨å±€ä¸Šä¸‹æ–‡æˆ–å·¥å‚æ¨¡å¼ å†…ç½®ä¾èµ–æ³¨å…¥ç³»ç»Ÿ æ–‡æ¡£ç”Ÿæˆ éœ€è¦æ‰©å±•ï¼ˆå¦‚flasggerï¼‰ è‡ªåŠ¨ç”ŸæˆOpenAPIæ–‡æ¡£ é”™è¯¯å¤„ç† ç»Ÿä¸€å¼‚å¸¸å¤„ç†è£…é¥°å™¨ PydanticéªŒè¯é”™è¯¯è‡ªåŠ¨å¤„ç† æ€§èƒ½ åŒæ­¥é˜»å¡ï¼Œé€‚åˆCPUå¯†é›†å‹ å¼‚æ­¥éé˜»å¡ï¼Œé€‚åˆI/Oå¯†é›†å‹ ä¸‰ã€DAOå±‚è®¾è®¡ï¼šä»ORMé›†æˆåˆ°ç±»å‹å®‰å…¨çš„æ•°æ®è®¿é—®3.1 Flask DAOï¼šçµæ´»ä½†éœ€æ‰‹åŠ¨ç®¡ç†çš„ORMé›†æˆFlaskæœ¬èº«ä¸å¼ºåˆ¶ä»»ä½•ç‰¹å®šçš„ORMï¼Œé€šå¸¸ä¸SQLAlchemyç»“åˆä½¿ç”¨ï¼Œå½¢æˆæ¾æ•£è€¦åˆçš„DAOå±‚è®¾è®¡ï¼š å…¸å‹Flask DAOæ¶æ„ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041from flask_sqlalchemy import SQLAlchemyfrom sqlalchemy.orm import scoped_session, sessionmakerdb = SQLAlchemy()class User(db.Model): id = db.Column(db.Integer, primary_key=True) name = db.Column(db.String(80), nullable=False) email = db.Column(db.String(120), unique=True, nullable=False)class UserRepository: def __init__(self, session=None): self.session = session or db.session def get_by_id(self, user_id): return self.session.query(User).filter_by(id=user_id).first() def create(self, name, email): user = User(name=name, email=email) self.session.add(user) self.session.commit() return user def update(self, user_id, name=None, email=None): user = self.get_by_id(user_id) if user: if name: user.name = name if email: user.email = email self.session.commit() return user# åœ¨è·¯ç”±ä¸­ä½¿ç”¨@app.route('/users/&lt;int:user_id&gt;')def get_user(user_id): repo = UserRepository() user = repo.get_by_id(user_id) if not user: return jsonify({&quot;error&quot;: &quot;User not found&quot;}), 404 return jsonify({&quot;id&quot;: user.id, &quot;name&quot;: user.name, &quot;email&quot;: user.email}) Flask DAOè®¾è®¡ç‰¹ç‚¹ï¼š æ¾æ•£è€¦åˆï¼šDAOå±‚ä¸æ¡†æ¶è§£è€¦ï¼Œå¯ä»¥ç‹¬ç«‹æµ‹è¯• æ‰‹åŠ¨äº‹åŠ¡ç®¡ç†ï¼šéœ€è¦å¼€å‘è€…æ˜¾å¼ç®¡ç†äº‹åŠ¡è¾¹ç•Œ ç±»å‹ä¸å®‰å…¨ï¼šè¿”å›çš„å¯¹è±¡ç±»å‹ä¸æ˜ç¡®ï¼Œå®¹æ˜“å‡ºç°è¿è¡Œæ—¶é”™è¯¯ é…ç½®çµæ´»æ€§ï¼šå¯ä»¥è‡ªç”±é€‰æ‹©ORMï¼ˆSQLAlchemyã€MongoEngineç­‰ï¼‰ æŒ‘æˆ˜ä¸é—®é¢˜ï¼š äº‹åŠ¡ç®¡ç†å®¹æ˜“å‡ºé”™ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤æ‚ä¸šåŠ¡é€»è¾‘ä¸­ ç¼ºä¹ç±»å‹æç¤ºï¼ŒIDEæ— æ³•æä¾›æ™ºèƒ½è¡¥å…¨ é”™è¯¯å¤„ç†åˆ†æ•£ï¼Œå®¹æ˜“é—æ¼è¾¹ç•Œæƒ…å†µ æ€§èƒ½ä¼˜åŒ–éœ€è¦æ‰‹åŠ¨å®ç°ï¼ˆå¦‚æ‡’åŠ è½½ã€é¢„åŠ è½½ï¼‰ 3.2 FastAPI DAOï¼šç±»å‹å®‰å…¨ä¸ä¾èµ–æ³¨å…¥çš„æ•°æ®è®¿é—®å±‚FastAPIé€šè¿‡ä¾èµ–æ³¨å…¥ç³»ç»Ÿå’Œç±»å‹æ³¨è§£ï¼Œå®ç°äº†æ›´åŠ ç±»å‹å®‰å…¨å’Œå¯ç»´æŠ¤çš„DAOå±‚è®¾è®¡ï¼š ç±»å‹å®‰å…¨çš„DAOæ¶æ„ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778from fastapi import Depends, HTTPExceptionfrom sqlalchemy import create_enginefrom sqlalchemy.orm import sessionmaker, Sessionfrom pydantic import BaseModelfrom typing import Optional, List# æ•°æ®åº“é…ç½®engine = create_engine(&quot;sqlite:///./test.db&quot;)SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)# Pydanticæ¨¡å‹ï¼ˆAPIå±‚ï¼‰class UserCreate(BaseModel): name: str email: str age: Optional[int] = Noneclass UserResponse(BaseModel): id: int name: str email: str age: Optional[int] = None class Config: orm_mode = True # å…è®¸ä»ORMå¯¹è±¡åºåˆ—åŒ–# SQLAlchemyæ¨¡å‹ï¼ˆæ•°æ®å±‚ï¼‰class UserDB(Base): __tablename__ = &quot;users&quot; id = Column(Integer, primary_key=True) name = Column(String(80), nullable=False) email = Column(String(120), unique=True, nullable=False) age = Column(Integer, nullable=True)# ä¾èµ–æ³¨å…¥çš„æ•°æ®åº“ä¼šè¯def get_db(): db = SessionLocal() try: yield db finally: db.close()# ç±»å‹å®‰å…¨çš„Repositoryclass UserRepository: def __init__(self, db: Session): self.db = db def get_by_id(self, user_id: int) -&gt; Optional[UserDB]: return self.db.query(UserDB).filter(UserDB.id == user_id).first() def create(self, user_data: UserCreate) -&gt; UserDB: user = UserDB(**user_data.dict()) self.db.add(user) self.db.commit() self.db.refresh(user) return user def get_all(self, skip: int = 0, limit: int = 100) -&gt; List[UserDB]: return self.db.query(UserDB).offset(skip).limit(limit).all()# åœ¨è·¯ç”±ä¸­ä½¿ç”¨@app.get(&quot;/users/{user_id}&quot;, response_model=UserResponse)async def get_user( user_id: int, db: Session = Depends(get_db), repo: UserRepository = Depends() # ä¾èµ–æ³¨å…¥Repository): user = repo.get_by_id(user_id) if not user: raise HTTPException(status_code=404, detail=&quot;User not found&quot;) return user@app.post(&quot;/users/&quot;, response_model=UserResponse)async def create_user( user_data: UserCreate, db: Session = Depends(get_db), repo: UserRepository = Depends()): return repo.create(user_data) FastAPI DAOè®¾è®¡ç‰¹ç‚¹ï¼š ç±»å‹å®‰å…¨ï¼šPydanticæ¨¡å‹å’Œç±»å‹æ³¨è§£ç¡®ä¿æ•°æ®æ ¼å¼æ­£ç¡® ä¾èµ–æ³¨å…¥ï¼šé€šè¿‡Dependsç®¡ç†æ•°æ®åº“ä¼šè¯å’ŒRepositoryä¾èµ– è‡ªåŠ¨åºåˆ—åŒ–ï¼šorm_mode=Trueå®ç°ORMå¯¹è±¡åˆ°Pydanticæ¨¡å‹çš„è‡ªåŠ¨è½¬æ¢ äº‹åŠ¡ç®¡ç†ï¼šä¾èµ–æ³¨å…¥çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ç®€åŒ–äº‹åŠ¡è¾¹ç•Œæ§åˆ¶ è®¾è®¡ä¼˜åŒ–ï¼š åˆ†å±‚æ˜ç¡®ï¼šPydanticæ¨¡å‹ï¼ˆAPIå±‚ï¼‰ä¸SQLAlchemyæ¨¡å‹ï¼ˆæ•°æ®å±‚ï¼‰åˆ†ç¦» é”™è¯¯å¤„ç†ç»Ÿä¸€ï¼šHTTPExceptionæä¾›æ ‡å‡†åŒ–çš„é”™è¯¯å“åº” æ€§èƒ½ä¼˜åŒ–ï¼šé€šè¿‡ä¾èµ–æ³¨å…¥å®ç°è¿æ¥æ± ç®¡ç†å’Œä¼šè¯å¤ç”¨ å¯æµ‹è¯•æ€§ï¼šä¾èµ–æ³¨å…¥ä½¿å¾—å•å…ƒæµ‹è¯•æ›´åŠ å®¹æ˜“ 3.3 DAOå±‚è®¾è®¡å¯¹æ¯”ï¼šæ¶æ„æ¼”è¿›ä¸æœ€ä½³å®è·µ ç»´åº¦ Flask DAOè®¾è®¡ FastAPI DAOè®¾è®¡ ç±»å‹å®‰å…¨ å¼±ï¼Œè¿è¡Œæ—¶éªŒè¯ å¼ºï¼Œç¼–è¯‘æ—¶éªŒè¯ + è¿è¡Œæ—¶éªŒè¯ ä¾èµ–ç®¡ç† æ‰‹åŠ¨åˆ›å»ºå’Œç®¡ç† ä¾èµ–æ³¨å…¥è‡ªåŠ¨ç®¡ç† äº‹åŠ¡æ§åˆ¶ æ˜¾å¼æ‰‹åŠ¨æ§åˆ¶ ä¾èµ–ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨ç®¡ç† æ•°æ®éªŒè¯ éœ€è¦æ‰‹åŠ¨æˆ–æ‰©å±• Pydanticè‡ªåŠ¨éªŒè¯ åºåˆ—åŒ– æ‰‹åŠ¨å­—å…¸è½¬æ¢ è‡ªåŠ¨ORMåˆ°Pydanticè½¬æ¢ é”™è¯¯å¤„ç† åˆ†æ•£ï¼Œéœ€è¦ç»Ÿä¸€å¤„ç† é›†ä¸­å¼HTTPExceptionå¤„ç† æµ‹è¯•å‹å¥½æ€§ éœ€è¦æ¨¡æ‹Ÿå…¨å±€ä¸Šä¸‹æ–‡ ä¾èµ–æ³¨å…¥æ˜“äºæ¨¡æ‹Ÿå’Œæ›¿æ¢ æ€§èƒ½ä¼˜åŒ– éœ€è¦æ‰‹åŠ¨å®ç°ç¼“å­˜ã€è¿æ¥æ±  å†…ç½®å¼‚æ­¥æ”¯æŒï¼Œæ˜“äºé›†æˆç¼“å­˜ ä»£ç é‡ ç›¸å¯¹è¾ƒå¤šï¼Œæ ·æ¿ä»£ç å¤š ç®€æ´ï¼Œå£°æ˜å¼è¯­æ³•å‡å°‘æ ·æ¿ä»£ç  å››ã€ç»¼åˆå¯¹æ¯”ä¸é€‰å‹å»ºè®®4.1 æ¡†æ¶å®šä½ä¸é€‚ç”¨åœºæ™¯Flaské€‚ç”¨åœºæ™¯ï¼š å°å‹Webåº”ç”¨å’ŒåŸå‹éªŒè¯ éœ€è¦é«˜åº¦å®šåˆ¶åŒ–çš„é¡¹ç›®æ¶æ„ å›¢é˜Ÿç†Ÿæ‚‰ä¼ ç»ŸWebå¼€å‘æ¨¡å¼ CPUå¯†é›†å‹ä»»åŠ¡ï¼ˆå¦‚æ•°æ®å¤„ç†ã€æœºå™¨å­¦ä¹ æ¨¡å‹æœåŠ¡ï¼‰ é—ç•™ç³»ç»Ÿé›†æˆå’Œæ¸è¿›å¼é‡æ„ FastAPIé€‚ç”¨åœºæ™¯ï¼š ç°ä»£APIæœåŠ¡å’Œå¾®æœåŠ¡æ¶æ„ éœ€è¦é«˜æ€§èƒ½å’Œé«˜å¹¶å‘çš„I/Oå¯†é›†å‹åº”ç”¨ å›¢é˜Ÿç†Ÿæ‚‰ç±»å‹ç³»ç»Ÿå’Œç°ä»£ç¼–ç¨‹èŒƒå¼ éœ€è¦è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£çš„é¡¹ç›® å®æ—¶åº”ç”¨ï¼ˆWebSocketã€äº‹ä»¶é©±åŠ¨æ¶æ„ï¼‰ 4.2 æ¶æ„æ¼”è¿›å»ºè®®ä»Flaskåˆ°FastAPIçš„æ¼”è¿›è·¯å¾„ï¼š åˆæœŸé˜¶æ®µï¼šä½¿ç”¨Flaskå¿«é€ŸéªŒè¯ä¸šåŠ¡é€»è¾‘ï¼Œå»ºç«‹æ ¸å¿ƒåŠŸèƒ½ ä¸­æœŸé˜¶æ®µï¼šå¼•å…¥ç±»å‹æ³¨è§£å’ŒPydanticéªŒè¯ï¼Œé€æ­¥é‡æ„æ•°æ®å±‚ æˆç†Ÿé˜¶æ®µï¼šè¿ç§»åˆ°FastAPIï¼Œåˆ©ç”¨ä¾èµ–æ³¨å…¥å’Œå¼‚æ­¥ç‰¹æ€§ä¼˜åŒ–æ€§èƒ½ é«˜çº§é˜¶æ®µï¼šæ„å»ºæ··åˆæ¶æ„ï¼Œæ ¸å¿ƒä¸šåŠ¡ç”¨Djangoï¼ŒAPIå±‚ç”¨FastAPI DAOå±‚è®¾è®¡æœ€ä½³å®è·µï¼š åˆ†å±‚æ¶æ„ï¼šåˆ†ç¦»APIæ¨¡å‹ã€ä¸šåŠ¡æ¨¡å‹å’Œæ•°æ®æ¨¡å‹ ä¾èµ–å€’ç½®ï¼šRepositoryæ¥å£å®šä¹‰åœ¨ä¸šåŠ¡å±‚ï¼Œå®ç°ç»†èŠ‚åœ¨åŸºç¡€è®¾æ–½å±‚ äº‹åŠ¡è¾¹ç•Œï¼šåœ¨Serviceå±‚è€ŒéRepositoryå±‚ç®¡ç†äº‹åŠ¡ æ€§èƒ½ç›‘æ§ï¼šé›†æˆæ…¢æŸ¥è¯¢æ—¥å¿—å’Œæ€§èƒ½åˆ†æå·¥å…· æµ‹è¯•ç­–ç•¥ï¼šå•å…ƒæµ‹è¯•Repositoryæ¥å£ï¼Œé›†æˆæµ‹è¯•æ•°æ®åº“æ“ä½œ 4.3 æœªæ¥å‘å±•è¶‹åŠ¿Flaskçš„å‘å±•æ–¹å‘ï¼š å¢å¼ºå¼‚æ­¥æ”¯æŒï¼ˆASGIå…¼å®¹ï¼‰ æ”¹è¿›ç±»å‹æç¤ºå’Œé™æ€åˆ†ææ”¯æŒ ä¼˜åŒ–æ‰©å±•ç”Ÿæ€çš„å…¼å®¹æ€§ åŠ å¼ºå®‰å…¨ç‰¹æ€§å’Œæœ€ä½³å®è·µæŒ‡å¯¼ FastAPIçš„å‘å±•æ–¹å‘ï¼š æ·±åº¦é›†æˆè¾¹ç¼˜è®¡ç®—å’ŒServerlessæ¶æ„ å¢å¼ºGraphQLæ”¯æŒå’Œå®æ—¶æ•°æ®å¤„ç† ä¼˜åŒ–ç±»å‹ç³»ç»Ÿä¸æ•°æ®åº“Schemaçš„åŒæ­¥ æ”¹è¿›å¾®æœåŠ¡æ²»ç†å’Œåˆ†å¸ƒå¼äº‹åŠ¡æ”¯æŒ äº”ã€ç»“è®ºï¼šè®¾è®¡ç†å¿µé©±åŠ¨æŠ€æœ¯é€‰å‹Flaskå’ŒFastAPIä»£è¡¨äº†Python Webæ¡†æ¶å‘å±•çš„ä¸¤ä¸ªé‡è¦é˜¶æ®µï¼šçµæ´»æ€§ä¼˜å…ˆ vs å¼€å‘æ•ˆç‡ä¸ç±»å‹å®‰å…¨ä¼˜å…ˆã€‚ Flaskçš„è®¾è®¡å“²å­¦æ˜¯â€æä¾›æœ€å°æ ¸å¿ƒï¼Œè®©å¼€å‘è€…è‡ªç”±é€‰æ‹©â€œï¼Œè¿™ç§è®¾è®¡ç†å¿µåœ¨é¡¹ç›®åˆæœŸå’Œéœ€è¦é«˜åº¦å®šåˆ¶åŒ–çš„åœºæ™¯ä¸­å…·æœ‰æ˜æ˜¾ä¼˜åŠ¿ã€‚ä½†éšç€é¡¹ç›®è§„æ¨¡æ‰©å¤§ï¼Œç¼ºä¹ç»Ÿä¸€æ¶æ„çº¦æŸå®¹æ˜“å¯¼è‡´æŠ€æœ¯å€ºåŠ¡ç§¯ç´¯ã€‚ FastAPIçš„è®¾è®¡å“²å­¦æ˜¯â€é€šè¿‡çº¦å®šå’Œç±»å‹ç³»ç»Ÿï¼Œæå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡â€œï¼Œè¿™ç§è®¾è®¡ç†å¿µåœ¨ç°ä»£APIå¼€å‘å’Œå¤§å‹é¡¹ç›®ä¸­å±•ç°å‡ºå¼ºå¤§ä¼˜åŠ¿ã€‚å…¶å†…ç½®çš„ä¾èµ–æ³¨å…¥ã€ç±»å‹éªŒè¯å’Œæ–‡æ¡£ç”Ÿæˆï¼Œå¤§å¹…é™ä½äº†ç»´æŠ¤æˆæœ¬å’Œåä½œéš¾åº¦ã€‚ æŠ€æœ¯é€‰å‹å»ºè®®ï¼š æ–°æ‰‹å…¥é—¨ï¼šä»Flaskå¼€å§‹ï¼Œç†è§£Webå¼€å‘åŸºç¡€æ¦‚å¿µ APIå¼€å‘ï¼šä¼˜å…ˆé€‰æ‹©FastAPIï¼Œäº«å—ç±»å‹å®‰å…¨å’Œå¼€å‘æ•ˆç‡ ä¼ä¸šçº§åº”ç”¨ï¼šè€ƒè™‘Django+FastAPIæ··åˆæ¶æ„ï¼Œå…¼é¡¾ç®¡ç†åå°å’ŒAPIæœåŠ¡ æ€§èƒ½å…³é”®ï¼šFastAPIåœ¨I/Oå¯†é›†å‹åœºæ™¯å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ å›¢é˜ŸæŠ€èƒ½ï¼šè¯„ä¼°å›¢é˜Ÿå¯¹ç±»å‹ç³»ç»Ÿå’Œå¼‚æ­¥ç¼–ç¨‹çš„ç†Ÿæ‚‰ç¨‹åº¦ æœ€ç»ˆï¼Œæ¡†æ¶é€‰æ‹©åº”è¯¥æœåŠ¡äºä¸šåŠ¡éœ€æ±‚å’Œå›¢é˜Ÿèƒ½åŠ›ã€‚ç†è§£ä¸¤ç§æ¡†æ¶çš„è®¾è®¡ç†å¿µå’Œæ¶æ„å·®å¼‚ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…åœ¨ä¸åŒåœºæ™¯ä¸‹åšå‡ºæ›´æ˜æ™ºçš„æŠ€æœ¯å†³ç­–ï¼Œæ„å»ºæ—¢çµæ´»åˆå¯ç»´æŠ¤çš„ç³»ç»Ÿæ¶æ„ã€‚ ç»“è¯­ï¼šåœ¨é€‰æ‹©ä¸­æˆé•¿æ¡†æ¶é€‰æ‹©ä»æ¥ä¸æ˜¯éæ­¤å³å½¼çš„äºŒå…ƒå†³ç­–ï¼Œè€Œæ˜¯åŸºäºé¡¹ç›®éœ€æ±‚ã€å›¢é˜Ÿèƒ½åŠ›å’ŒæŠ€æœ¯æ„¿æ™¯çš„ç³»ç»Ÿæ€§æƒè¡¡ã€‚Flaskçš„ç®€æ´ä¹‹ç¾ä¸FastAPIçš„ç°ä»£ä¹‹å¼ºï¼Œéƒ½æ˜¯Pythonå¼€å‘ç”Ÿæ€å®è´µè´¢å¯Œã€‚ ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬åº”å½“ä»¥å¼€æ”¾å¿ƒæ€æ‹¥æŠ±æŠ€æœ¯æ¼”è¿›ï¼ŒåŒæ—¶ä¿æŒå¯¹åŸºç¡€åŸç†çš„æ•¬ç•ã€‚ åœ¨2025å¹´çš„æŠ€æœ¯æµªæ½®ä¸­ï¼Œæœ€é‡è¦çš„ä¸æ˜¯é€‰æ‹©å“ªä¸ªæ¡†æ¶ï¼Œè€Œæ˜¯é€šè¿‡æ¡†æ¶è¿™ä¸€å·¥å…·ï¼ŒåŸ¹å…»è§£å†³å¤æ‚é—®é¢˜çš„èƒ½åŠ›ã€‚å½“ä½ èƒ½å¤Ÿæ ¹æ®åœºæ™¯çµæ´»é€‰æ‹©ã€ç”šè‡³æ··åˆä½¿ç”¨ä¸åŒæ¡†æ¶æ—¶ï¼Œä½ å·²ç»ä»æ¡†æ¶ä½¿ç”¨è€…æˆé•¿ä¸ºçœŸæ­£çš„æ¶æ„è®¾è®¡å¸ˆã€‚ è®°ä½ï¼šæ¡†æ¶æ˜¯æ‰‹æ®µï¼Œä¸æ˜¯ç›®çš„ï¼›ä»£ç æ˜¯è¡¨è¾¾ï¼Œä¸æ˜¯æŸç¼šã€‚åœ¨æŠ€æœ¯é€‰å‹çš„è¿·å®«ä¸­ï¼Œä¿æŒå¯¹æœ¬è´¨é—®é¢˜çš„å…³æ³¨ï¼Œæ‰èƒ½æ‰¾åˆ°çœŸæ­£é€‚åˆä½ çš„é‚£æ¡è·¯å¾„ã€‚ æœ€åï¼Œå†æ¬¡è‡´æ•¬ä¼Ÿå¤§çš„å¼€æºç¨‹åºå‘˜å’Œäº’è”ç½‘ç²¾ç¥çš„æ°å‡ºäººç‰©ï¼šäºšä¼¦Â·æ–¯æ²ƒèŒ¨ã€‚","link":"/ff0d5e03.html"},{"title":"Go:rune æ·±åº¦è§£æï¼šä» Unicode ç ç‚¹åˆ°å­—ç¬¦ä¸²éå†çš„è‰ºæœ¯","text":"rune çš„è®¾è®¡å“²å­¦ å±‚é¢ Go çš„é€‰æ‹© å¼€å‘è€…æ”¶ç›Š å­˜å‚¨ å­—ç¬¦ä¸² = UTF-8 å­—èŠ‚åºåˆ— å…¼å®¹æ€§é«˜ï¼ŒèŠ‚çœç©ºé—´ï¼ˆASCII é«˜æ•ˆï¼‰ æ“ä½œ rune = Unicode ç ç‚¹ é€»è¾‘æ¸…æ™°ï¼Œé¿å…å­—èŠ‚é”™è¯¯ éå† range è‡ªåŠ¨è§£ç  UTF-8 å¼€ç®±å³ç”¨ï¼Œå®‰å…¨å¯é  æ‰©å±• æ ‡å‡†åº“ + x/text ç”Ÿæ€ æ”¯æŒå½’ä¸€åŒ–ã€æ–­è¡Œã€æ’åºç­‰é«˜çº§éœ€æ±‚ ğŸ’¬ Go ä¹‹çˆ¶ Rob Pike çš„åè¨€ï¼šâ€œUTF-8 is the native text format of Go. Strings are UTF-8. Period.â€è€Œ runeï¼Œæ­£æ˜¯æˆ‘ä»¬ä¸è¿™ä¸ªâ€œåŸç”Ÿæ ¼å¼â€å¯¹è¯çš„æ¡¥æ¢ã€‚ runeç±»å‹æ ¸å¿ƒæ¦‚å¿µåœ¨ Golangä¸­ï¼Œrune æ˜¯ä¸€ä¸ªå†…ç½®çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç”¨äºè¡¨ç¤º Unicode å­—ç¬¦ã€‚å®ƒæ˜¯ int32 ç±»å‹çš„åˆ«åï¼Œæœ¬è´¨ä¸Šå­˜å‚¨çš„æ˜¯ä¸€ä¸ª Unicode ç ç‚¹ï¼ˆCode Pointï¼‰ï¼ŒèŒƒå›´ä» 0 åˆ° 0x10FFFFï¼Œèƒ½å¤Ÿæ¶µç›–ä¸–ç•Œä¸Šå‡ ä¹æ‰€æœ‰è¯­è¨€çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ä»¥åŠè¡¨æƒ…ç¬¦å·ï¼ˆemojiï¼‰ç­‰å¤šå­—èŠ‚å­—ç¬¦ã€‚â€Œ æ ¸å¿ƒå«ä¹‰ä¸è®¾è®¡ç›®çš„Unicode æ”¯æŒâ€Œï¼šGolangçš„å­—ç¬¦ä¸²é»˜è®¤é‡‡ç”¨ UTF-8 ç¼–ç ï¼Œè€Œ UTF-8 ä¸­æŸäº›å­—ç¬¦ï¼ˆå¦‚ä¸­æ–‡æˆ– emojiï¼‰éœ€è¦å¤šä¸ªå­—èŠ‚è¡¨ç¤ºã€‚rune ç±»å‹ç¡®ä¿æ¯ä¸ªå­—ç¬¦è¢«å®Œæ•´å¤„ç†ï¼Œé¿å…å› å­—èŠ‚æ‹†åˆ†å¯¼è‡´çš„ä¹±ç æˆ–é”™è¯¯ã€‚â€Œä¸ byte çš„åŒºåˆ«â€Œï¼šbyte ç±»å‹æ˜¯ uint8 çš„åˆ«åï¼Œä»…èƒ½è¡¨ç¤ºå•å­—èŠ‚çš„ ASCII å­—ç¬¦ï¼ˆèŒƒå›´ 0-255ï¼‰ï¼Œè€Œ rune å¯è¡¨ç¤ºæ‰€æœ‰ Unicode å­—ç¬¦ï¼ˆèŒƒå›´æ›´å¤§ï¼‰ã€‚ä¾‹å¦‚ï¼Œä¸­æ–‡å­—ç¬¦â€œä½ â€åœ¨ UTF-8 ç¼–ç ä¸‹å  3 ä¸ªå­—èŠ‚ï¼Œä½†ç”¨ rune å¯ä»¥ä½œä¸ºä¸€ä¸ªæ•´ä½“å¤„ç†ã€‚â€Œ å¸¸è§åº”ç”¨åœºæ™¯å­—ç¬¦ä¸²éå†â€Œï¼šä½¿ç”¨ for _, r := range s éå†å­—ç¬¦ä¸²æ—¶ï¼ŒGo ä¼šè‡ªåŠ¨å°†æ¯ä¸ªå­—ç¬¦è½¬æ¢ä¸º runeï¼Œç¡®ä¿å¤šå­—èŠ‚å­—ç¬¦ä¸è¢«ç ´åã€‚â€Œæ–‡æœ¬å¤„ç†â€Œï¼šåœ¨å­—ç¬¦ä¸²è½¬æ¢ã€å­—ç¬¦ç»Ÿè®¡æˆ–æ“ä½œï¼ˆå¦‚åè½¬ã€è¿‡æ»¤ï¼‰æ—¶ï¼Œrune åˆ‡ç‰‡ï¼ˆ[]runeï¼‰èƒ½å‡†ç¡®åæ˜ å®é™…å­—ç¬¦æ•°é‡ï¼Œè€Œéå­—èŠ‚æ•°ã€‚â€Œå›½é™…åŒ–æ”¯æŒâ€Œï¼šå¤„ç†å¤šè¯­è¨€æ–‡æœ¬æ—¶ï¼Œrune ä¿è¯å­—ç¬¦çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ï¼Œæ˜¯å¼€å‘å›½é™…åŒ–åº”ç”¨çš„å…³é”®ã€‚â€Œ ğŸŒ ä¸€ã€rune æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€” ç±»å‹æœ¬è´¨ä¸è®¾è®¡å“²å­¦åœ¨ Golangä¸­ï¼š 1type rune = int32 // æºç å®šä¹‰ï¼ˆGo 1.9+ ä½¿ç”¨ type alias è¯­æ³•ï¼‰ âœ… rune ä¸æ˜¯æ–°ç±»å‹ï¼Œè€Œæ˜¯ int32 çš„è¯­ä¹‰åˆ«åç¼–è¯‘å™¨å°†å…¶è§†ä¸ºåŒä¸€ç§ç±»å‹ï¼Œä½†èµ‹äºˆå…¶ç‰¹æ®Šå«ä¹‰ï¼šUnicode ç ç‚¹ï¼ˆCode Pointï¼‰ã€‚ ğŸ¯ è®¾è®¡ç›®çš„ï¼š è®©å¼€å‘è€…èƒ½ä»¥å­—ç¬¦ï¼ˆCharacterï¼‰ä¸ºå•ä½æ“ä½œæ–‡æœ¬ï¼Œè€Œéå­—èŠ‚ï¼ˆByteï¼‰â€”â€” è¿™æ˜¯ Go å¯¹ Unicode å‹å¥½æ€§çš„æ ¸å¿ƒæ‰¿è¯ºã€‚ âœ… ç ç‚¹èŒƒå›´ï¼šrune çš„å–å€¼éœ€æ»¡è¶³ Unicode æ ‡å‡†ï¼š 0x0000 â‰¤ r â‰¤ 0x10FFFF æ’é™¤ 0xD800 ~ 0xDFFFï¼ˆUTF-16 ä»£ç†å¯¹èŒƒå›´ï¼Œåœ¨ UTF-8 ä¸­éæ³•ï¼‰ ğŸ“Œ å°çŸ¥è¯†ï¼šutf8.ValidRune(r) å¯æ ¡éªŒä¸€ä¸ª rune æ˜¯å¦åˆæ³•ã€‚ ğŸ”¤ äºŒã€ä¸ºä»€ä¹ˆéœ€è¦ runeï¼Ÿâ€”â€” ä» ASCII åˆ° Emoji çš„æ¼”è¿›å›°å¢ƒğŸ“‰ é—®é¢˜èµ·æºï¼šå­—ç¬¦ä¸² â‰  å­—ç¬¦æ•°ç»„Go çš„å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ UTF-8 å­—èŠ‚åºåˆ—ï¼š 123s := &quot;Go ä¸–ç•Œ ğŸ˜‚&quot;fmt.Println(len(s)) // â†’ 12ï¼ˆå­—èŠ‚æ•°ï¼‰fmt.Println(len([]rune(s))) // â†’ 6ï¼ˆå­—ç¬¦æ•°ï¼š'G','o',' ','ä¸–','ç•Œ','ğŸ˜‚'ï¼‰ å­—ç¬¦ UTF-8 ç¼–ç ï¼ˆåå…­è¿›åˆ¶ï¼‰ å­—èŠ‚æ•° G 47 1 ä¸– E4 B8 96 3 ğŸ˜‚ F0 9F 98 82 4 ğŸ‘‰ è‹¥ç”¨ s[i] æŒ‰å­—èŠ‚è®¿é—® &quot;ä¸–&quot;ï¼š 12s := &quot;ä¸–&quot;fmt.Printf(&quot;%x &quot;, s[0]) // â†’ e4 âŒ ä¸æ˜¯å­—ç¬¦ï¼Œåªæ˜¯é¦–å­—èŠ‚ï¼ â†’ ä¹±ç ã€æˆªæ–­ã€å®‰å…¨é£é™©ï¼ˆå¦‚è·¯å¾„éå†ï¼‰ã€‚ ğŸ†š rune vs byteï¼šç»´åº¦ä¸åŒ ç±»å‹ åº•å±‚ è¯­ä¹‰ èŒƒå›´ é€‚ç”¨åœºæ™¯ byte uint8 å­—èŠ‚ 0 ~ 255 äºŒè¿›åˆ¶å¤„ç†ã€I/O rune int32 Unicode å­—ç¬¦ U+0000 ~ U+10FFFF æ–‡æœ¬å¤„ç†ã€NLPã€å›½é™…åŒ– ğŸ’¡ è®°ä½ï¼š**byte æ˜¯â€œå­˜å‚¨å•ä½â€ï¼Œrune æ˜¯â€œé€»è¾‘å•ä½â€**ã€‚ ğŸ”„ ä¸‰ã€æ ¸å¿ƒæœºåˆ¶ï¼šrange å­—ç¬¦ä¸²éå†æ—¶ï¼ŒGo åœ¨åšä»€ä¹ˆï¼Ÿè¿™æ˜¯ Go æœ€ä¼˜é›…çš„è®¾è®¡ä¹‹ä¸€ï¼š 1234s := &quot;Hello, ä¸–ç•Œ! ğŸ˜Š&quot;for i, r := range s { fmt.Printf(&quot;i=%d, r=%U (%c)\\n&quot;, i, r, r)} è¾“å‡ºï¼š 123456789101112i=0, r=U+0048 (H)i=1, r=U+0065 (e)i=2, r=U+006C (l)i=3, r=U+006C (l)i=4, r=U+006F (o)i=5, r=U+002C (,)i=6, r=U+0020 ( )i=7, r=U+4E16 (ä¸–) â† æ³¨æ„ï¼šç´¢å¼• i=7ï¼Œä½† &quot;ä¸–&quot; å  3 å­—èŠ‚i=10, r=U+754C (ç•Œ) â† i è·³åˆ° 10ï¼ˆ7+3ï¼‰i=13, r=U+0021 (!)i=14, r=U+0020 ( )i=15, r=U+1F60A (ğŸ˜Š) ğŸ” åº•å±‚å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ Go è§£æ UTF-8 å­—èŠ‚æµï¼ŒæŒ‰ç¼–ç è§„åˆ™è¯†åˆ«æ¯ä¸ªå­—ç¬¦è¾¹ç•Œï¼› å°†å­—èŠ‚åç§»ï¼ˆiï¼‰ å’Œ è§£ç åçš„ç ç‚¹ï¼ˆrï¼‰ åŒæ—¶è¿”å›ï¼› è‡ªåŠ¨è·³è¿‡å¤šå­—èŠ‚å­—ç¬¦çš„åç»­å­—èŠ‚ã€‚ âœ… è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ range éå†ä¸ä¼šç ´åå¤šå­—èŠ‚å­—ç¬¦â€”â€”å®ƒæœ¬è´¨æ˜¯UTF-8 è§£ç å™¨ã€‚ âš ï¸ å¯¹æ¯”é”™è¯¯æ–¹å¼ï¼š 1234// å±é™©ï¼æŒ‰å­—èŠ‚éå†for i := 0; i &lt; len(s); i++ { fmt.Printf(&quot;%c&quot;, s[i]) // &quot;ä¸–&quot; è¾“å‡ºï¼šÃ£ÂŠÂ–ï¼ˆä¸‰ä¸ªä¹±ç å­—ç¬¦ï¼‰} ğŸ›  å››ã€é«˜é¢‘åº”ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µâœ… åœºæ™¯1ï¼šå‡†ç¡®ç»Ÿè®¡å­—ç¬¦æ•°1234str := &quot;rÃ©sumÃ© CafÃ© ğŸ‡«ğŸ‡·&quot;byteLen := len(str) // 21 å­—èŠ‚runeLen := utf8.RuneCountInString(str) // 12 å­—ç¬¦ï¼ˆæ¨èï¼Œé›¶åˆ†é…ï¼‰// æˆ– len([]rune(str)) // 12 å­—ç¬¦ï¼ˆåˆ†é…å†…å­˜ï¼Œæ…ç”¨å¤§å­—ç¬¦ä¸²ï¼‰ ğŸ”¥ æ€§èƒ½æç¤ºï¼šutf8.RuneCountInString æ¯” len([]rune(s)) å¿« 3~5 å€ï¼ˆæ— å†…å­˜åˆ†é…ï¼‰ã€‚ âœ… åœºæ™¯2ï¼šå®‰å…¨ä¿®æ”¹å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦å­—ç¬¦ä¸²ä¸å¯å˜ â†’ éœ€è½¬ []rune ä¿®æ”¹ï¼š 1234s := &quot;Hello&quot;r := []rune(s)r[0] = 'J' // ä¿®æ”¹é¦–å­—ç¬¦s2 := string(r) // &quot;Jello&quot; âš ï¸ æ³¨æ„ï¼šstring(r) ä¼šé‡æ–°è¿›è¡Œ UTF-8 ç¼–ç ï¼Œä¸”è·³è¿‡éæ³• runeï¼ˆå¦‚ä»£ç†å¯¹ï¼‰ï¼š 12r := []rune{0xD800} // éæ³•ä»£ç†å¯¹s := string(r) // s == &quot;&quot; ï¼ˆé™é»˜ä¸¢å¼ƒï¼ï¼‰ âœ… åœºæ™¯3ï¼šåè½¬å­—ç¬¦ä¸²ï¼ˆæ­£ç¡®ç‰ˆï¼‰123456789func Reverse(s string) string { r := []rune(s) for i, j := 0, len(r)-1; i &lt; j; i, j = i+1, j-1 { r[i], r[j] = r[j], r[i] } return string(r)}fmt.Println(Reverse(&quot;Go ä¸–ç•Œ ğŸ˜‚&quot;)) // â†’ &quot;ğŸ˜‚ ç•Œä¸– oG&quot; âŒ é”™è¯¯ç‰ˆï¼ˆå­—èŠ‚åè½¬ï¼‰ï¼š 1234567func BadReverse(s string) string { b := []byte(s) for i, j := 0, len(b)-1; i &lt; j; i, j = i+1, j-1 { b[i], b[j] = b[j], b[i] } return string(b) // ä¹±ç ï¼š&quot;ç•Œä¸– oG&quot;} âš ï¸ äº”ã€å¸¸è§è¯¯åŒºä¸é™·é˜±âŒ è¯¯åŒº1ï¼šrune = â€œå­—ç¬¦â€ï¼Ÿä¸å®Œå…¨æ˜¯ï¼Unicode ä¸­ï¼š ç ç‚¹ï¼ˆCode Pointï¼‰ï¼šä¸€ä¸ªæ•°å€¼ï¼ˆå¦‚ U+1F600ï¼‰ï¼Œå³ rune å­—å½¢ï¼ˆGrapheme Clusterï¼‰ï¼šç”¨æˆ·çœ¼ä¸­â€œä¸€ä¸ªå­—ç¬¦â€ï¼Œå¯èƒ½å«å¤šä¸ªç ç‚¹ ä¾‹ï¼šå°åº¦è¯­ â€œà¤¨à¤¿â€ï¼ˆniï¼‰ = U+0928ï¼ˆnaï¼‰ + U+093Fï¼ˆi-vowel signï¼‰â†’ 2 ä¸ª runeï¼Œä½†æ˜¾ç¤ºä¸º 1 ä¸ªå­—å½¢ã€‚ âœ… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ golang.org/x/text/unicode/norm æˆ– grapheme åº“æŒ‰å­—å½¢åˆ†å‰²ã€‚ âŒ è¯¯åŒº2ï¼š[]rune æ€»æ˜¯å®‰å…¨çš„ï¼Ÿ å†…å­˜å¼€é”€ï¼š[]rune(s) ä¸ºæ¯ä¸ªå­—ç¬¦åˆ†é… 4 å­—èŠ‚ï¼ŒASCII æ–‡æœ¬è†¨èƒ€ 4 å€ï¼› éæ³• rune å¤„ç†ï¼šè½¬æ¢æ—¶é™é»˜ä¸¢å¼ƒéæ³•ç ç‚¹ï¼ˆè§ä¸Šæ–‡ï¼‰ï¼› ç»„åˆå­—ç¬¦ä¸¢å¤±ï¼šå¦‚ &quot;Ã©&quot; å¯è¡¨ç¤ºä¸ºï¼š U+00E9ï¼ˆé¢„ç»„åˆå­—ç¬¦ï¼‰ U+0065 + U+0301ï¼ˆe + acute accentï¼‰â†’ []rune æ— æ³•æ„ŸçŸ¥äºŒè€…ç­‰ä»·ï¼Œéœ€å…ˆ NFC/NFD å½’ä¸€åŒ–ã€‚ âŒ è¯¯åŒº3ï¼šæ‰€æœ‰â€œå­—ç¬¦â€éƒ½èƒ½æ‰“å°ï¼Ÿ12345r := rune(0x1F92F) // ğŸ¤¯ (mind blown)fmt.Printf(&quot;%c\\n&quot;, r) // æ­£å¸¸è¾“å‡ºr = 0xD800 // éæ³•ä»£ç†å¯¹fmt.Printf(&quot;%c\\n&quot;, r) // è¾“å‡º ï¼ˆUnicode æ›¿ä»£å­—ç¬¦ï¼‰ âœ… å§‹ç»ˆç”¨ utf8.ValidRune(r) æ ¡éªŒï¼ ğŸ“Š å…­ã€æ€§èƒ½æƒè¡¡ï¼šä½•æ—¶ç”¨ []runeï¼Ÿ æ“ä½œ æ¨èæ–¹å¼ ç†ç”± éå†å­—ç¬¦ for _, r := range s é›¶åˆ†é…ï¼Œé«˜æ•ˆ ç»Ÿè®¡å­—ç¬¦æ•° utf8.RuneCountInString(s) é›¶åˆ†é…ï¼Œæ¯” len([]rune) å¿« ä¿®æ”¹/åˆ‡ç‰‡/åè½¬å­—ç¬¦ []rune(s) å¿…é¡»ï¼Œä½†æ³¨æ„å†…å­˜å¼€é”€ ä»…æ£€æŸ¥ ASCII for i := 0; i &lt; len(s); i++ æè‡´æ€§èƒ½ï¼ˆå¦‚ HTTP headerï¼‰ ğŸŒˆ ä¸ƒã€è¿›é˜¶ï¼šEmoji ä¸æ‰©å±•å­—ç¬¦æ”¯æŒGo å®Œæ•´æ”¯æŒ Unicode 15.1ï¼ˆGo 1.23+ï¼‰ï¼ŒåŒ…æ‹¬ï¼š âœ… æ‰€æœ‰ emojiï¼ˆå¦‚ ğŸ« , ğŸ«¶, ğŸ‘©â€â¤ï¸â€ğŸ‘¨ï¼‰ âœ… å˜ä½“é€‰æ‹©ç¬¦ï¼ˆå¦‚ ğŸ‘¨ vs ğŸ‘¨â€ğŸ¦°ï¼‰ âœ… é›¶å®½è¿æ¥ç¬¦ï¼ˆZWJï¼‰åºåˆ—ï¼šU+1F468 U+200D U+2764 U+FE0F U+200D U+1F468 â†’ ğŸ‘¨â€â¤ï¸â€ğŸ‘¨ ä½†å¦‚å‰æ‰€è¿°ï¼Œå•ä¸ª rune æ— æ³•è¡¨ç¤ºè¿™äº›åºåˆ—â€”â€”å®ƒä»¬æ˜¯å¤šä¸ªç ç‚¹ç»„åˆçš„å­—å½¢ç°‡ã€‚âœ… length of stringï¼š â€œlen(&quot;ä¸–ç•Œ&quot;) æ˜¯ 6ï¼Œå› ä¸ºå®ƒæ˜¯å­—èŠ‚æ•°ï¼›è€Œä¸–ç•Œæœ‰ 2 ä¸ªå­—ç¬¦â€”â€”è¿™æ­£æ˜¯ rune å­˜åœ¨çš„æ„ä¹‰ã€‚â€ å¦‚æœ‰ç‰¹å®šåœºæ™¯ï¼ˆå¦‚é«˜æ€§èƒ½æ–‡æœ¬è§£æã€æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ Unicode æ”¯æŒï¼‰ã€‚ æœ€åæœ€é‡è¦çš„æé†’ï¼šåœ¨å¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæœ€å¥½ä¼˜å…ˆé‡‡ç”¨UTF-8ç¼–ç ï¼Œé¿å…å¯èƒ½å¸¦æ¥çš„å› å­—èŠ‚æ‹†åˆ†å¯¼è‡´çš„ä¹±ç æˆ–é”™è¯¯ âš ï¸rune ğŸ†š byte ï¼šä¸¤ä¸ªå¸¸ç”¨äºæ–‡æœ¬å¤„ç†çš„å†…ç½®ç±»å‹ï¼Œå®ƒä»¬æœ¬è´¨ä¸åŒã€ç”¨é€”è¿¥å¼‚ã€‚ä»¥ä¸‹æ˜¯æ ¸å¿ƒåŒºåˆ«çš„æ¸…æ™°å¯¹æ¯”ï¼š ğŸ”¹ 1. åº•å±‚ç±»å‹ä¸å«ä¹‰ ç±»å‹ åº•å±‚å®šä¹‰ è¯­ä¹‰å«ä¹‰ å ç”¨å†…å­˜ byte type byte = uint8 1 ä¸ªå­—èŠ‚ï¼ˆ8 ä½æ— ç¬¦å·æ•´æ•°ï¼‰ 1 å­—èŠ‚ rune type rune = int32 1 ä¸ª Unicode ç ç‚¹ï¼ˆCode Pointï¼‰ 4 å­—èŠ‚ âœ… ç®€å•è¯´ï¼š byte æ˜¯å­˜å‚¨å•ä½â€”â€”å…³æ³¨â€œå å‡ ä¸ªå­—èŠ‚â€ï¼› rune æ˜¯é€»è¾‘å•ä½â€”â€”å…³æ³¨â€œæ˜¯å“ªä¸ªå­—ç¬¦â€ã€‚ ğŸ”¹ 2. è¡¨ç¤ºèŒƒå›´ ç±»å‹ æ•°å€¼èŒƒå›´ èƒ½è¡¨ç¤ºçš„å­—ç¬¦ byte 0 ~ 255 ä»… ASCII å­—ç¬¦ï¼ˆå¦‚ A, z, 0, @ï¼‰ rune 0 ~ 0x10FFFFï¼ˆéœ€ç¬¦åˆ Unicode è§„èŒƒï¼‰ å…¨çƒæ‰€æœ‰è¯­è¨€å­—ç¬¦ + Emojiï¼ˆå¦‚ ä½ , ä¸–, ğŸ˜‚, ğŸš€ï¼‰ âš ï¸ æ³¨æ„ï¼šä¸­æ–‡ã€æ—¥æ–‡ã€Emoji ç­‰åœ¨ UTF-8 ä¸­éœ€ 2~4 å­—èŠ‚ï¼Œæ— æ³•ç”¨å•ä¸ª byte å®Œæ•´è¡¨ç¤ºã€‚ ğŸ”¹ 3. å…¸å‹ä½¿ç”¨åœºæ™¯ åœºæ™¯ æ¨èç±»å‹ åŸå› è¯´æ˜ è¯»å†™æ–‡ä»¶ã€ç½‘ç»œä¼ è¾“ã€äºŒè¿›åˆ¶åè®® []byte æ“ä½œåŸå§‹å­—èŠ‚æµ å­—ç¬¦ä¸²å­—é¢é‡åº•å±‚å­˜å‚¨ stringï¼ˆæœ¬è´¨æ˜¯ []byteï¼‰ Go å­—ç¬¦ä¸² = UTF-8 å­—èŠ‚åºåˆ— éå†/ç»Ÿè®¡/ä¿®æ”¹å­—ç¬¦ rune æˆ– []rune é¿å…å¤šå­—èŠ‚å­—ç¬¦è¢«æ‹†ç¢å¯¼è‡´ä¹±ç  ä»…å¤„ç† ASCII æ–‡æœ¬ï¼ˆå¦‚ HTTP headerï¼‰ byte é«˜æ•ˆæ— å¼€é”€ ğŸ”¹ 4. ä»£ç å¯¹æ¯”ï¼šç›´è§‚æ„Ÿå—å·®å¼‚1234567891011121314151617s := &quot;Golang ä¸–ç•Œ ğŸ˜&quot;// âŒ æŒ‰ byte éå† â†’ ä¹±ç ï¼for i := 0; i &lt; len(s); i++ { fmt.Printf(&quot;%c &quot;, s[i])}// è¾“å‡ºï¼šG o l a n g Ã¤ Â¸ Â´ Ã§ Â¸ Â Ã° ÃŸ Â˜ Â ï¼ˆå…± 16 ä¸ªâ€œå‡å­—ç¬¦â€ï¼‰// âœ… æŒ‰ rune éå† â†’ æ­£ç¡®ï¼for _, r := range s { fmt.Printf(&quot;%c &quot;, r)}// è¾“å‡ºï¼šG o l a n g ä¸– ç•Œ ğŸ˜ ï¼ˆå…± 10 ä¸ªçœŸå®å­—ç¬¦ï¼‰// âœ… ç»Ÿè®¡å­—ç¬¦æ•°fmt.Println(&quot;å­—èŠ‚æ•°ï¼š&quot;, len(s)) // â†’ 16fmt.Println(&quot;å­—ç¬¦æ•°ï¼š&quot;, len([]rune(s))) // â†’ 10 ğŸ”¹ 5. å…³é”®æ³¨æ„äº‹é¡¹ string è½¬ []byteï¼šé›¶æ‹·è´ï¼ˆåº•å±‚å…±äº«å†…å­˜ï¼‰ï¼Œä»…ç±»å‹è½¬æ¢ï¼š 1b := []byte(s) // O(1) string è½¬ []runeï¼šéœ€è§£ç  UTF-8 + åˆ†é…å†…å­˜ï¼Œæ—¶é—´/ç©ºé—´å¼€é”€å¤§ï¼š 1r := []rune(s) // O(n)ï¼Œæ¯å­—ç¬¦ 4 å­—èŠ‚ â†’ å¤§æ–‡æœ¬æ…ç”¨ï¼ç»Ÿè®¡å­—ç¬¦æ•°ä¼˜å…ˆç”¨ utf8.RuneCountInString(s)ã€‚ éæ³• runeï¼ˆå¦‚ 0xD800ï¼‰åœ¨è½¬ä¸º string æ—¶ä¼šè¢«é™é»˜ä¸¢å¼ƒï¼Œéœ€ç”¨ utf8.ValidRune(r) æ ¡éªŒã€‚ ğŸ’ æ€»ç»“ä¸€å¥è¯ï¼š ç”¨ byte å¤„ç†â€œå­—èŠ‚â€ï¼Œç”¨ rune å¤„ç†â€œå­—ç¬¦â€ â€”â€” è¿™æ˜¯é¿å… Go ä¸­æ–‡æœ¬ä¹±ç çš„æ ¹æœ¬åŸåˆ™ã€‚ string ğŸ†š runeè¿˜æ˜¯byteåœ¨ Go ä¸­ï¼Œå£°æ˜ä¸€ä¸ª stringï¼Œå…¶ç±»å‹å°±æ˜¯ string â€”â€” å®ƒæ—¢ä¸æ˜¯ runeï¼Œä¹Ÿä¸æ˜¯ rune çš„åˆ«åï¼Œè€Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ã€å†…ç½®çš„ã€ä¸å¯å˜çš„å­—èŠ‚åºåˆ—ç±»å‹ã€‚ ä½†å®ƒçš„åº•å±‚å­˜å‚¨å†…å®¹æ˜¯ UTF-8 ç¼–ç çš„å­—èŠ‚ï¼ˆ[]byteï¼‰ï¼Œè€Œé runeï¼ˆç ç‚¹ï¼‰æ•°ç»„ã€‚ âœ… å‡†ç¡®ç†è§£å¦‚ä¸‹ï¼š é¡¹ç›® è¯´æ˜ ç±»å‹ string æ˜¯ Go çš„åŸºæœ¬å†…ç½®ç±»å‹ï¼ˆbasic typeï¼‰ï¼Œä¸ intã€boolã€runeã€byte å¹¶åˆ— åº•å±‚è¡¨ç¤º ä¸€ä¸ª string åœ¨å†…å­˜ä¸­ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š1ï¸âƒ£ æŒ‡å‘åº•å±‚å­—èŠ‚æ•°ç»„çš„æŒ‡é’ˆ2ï¸âƒ£ é•¿åº¦ï¼ˆlenï¼‰å…¶å†…å®¹æ˜¯ UTF-8 ç¼–ç çš„å­—èŠ‚åºåˆ—ï¼ˆå³ []byteï¼‰ ä¸ rune å…³ç³» âŒ string â‰  []runeâœ… string å¯é€šè¿‡ []rune(s) è½¬æ¢ä¸ºç ç‚¹åˆ‡ç‰‡ï¼ˆéœ€è§£ç  UTF-8ï¼‰ ä¸ byte å…³ç³» string å’Œ []byte å¯é›¶æˆæœ¬ç›¸äº’è½¬æ¢ï¼ˆä¸å¤åˆ¶æ•°æ®ï¼Œä»…ç±»å‹è½¬æ¢ï¼‰ï¼š[]byte(s) â†’ string(b) ğŸ” ç¤ºä¾‹éªŒè¯ç±»å‹ï¼š123456789101112131415161718192021package mainimport &quot;fmt&quot;import &quot;reflect&quot;func main() { s := &quot;Hello, ä¸–ç•Œ ğŸ˜Š&quot; fmt.Printf(&quot;s çš„ç±»å‹æ˜¯: %T\\n&quot;, s) // â†’ string fmt.Printf(&quot;reflect.TypeOf(s): %v\\n&quot;, reflect.TypeOf(s)) // â†’ string // åº•å±‚æ˜¯å­—èŠ‚ï¼ˆUTF-8ï¼‰ fmt.Printf(&quot;s çš„å­—èŠ‚è¡¨ç¤º: %v\\n&quot;, []byte(s)) // â†’ [72 101 108 108 111 44 32 228 184 150 231 149 140 32 240 159 152 138] // è½¬æˆ rune æ‰æ˜¯ç ç‚¹ runes := []rune(s) fmt.Printf(&quot;s çš„ rune è¡¨ç¤º: %v\\n&quot;, runes) // â†’ [72 101 108 108 111 44 32 19990 30028 32 128522] fmt.Printf(&quot;rune ç±»å‹: %T\\n&quot;, runes[0]) // â†’ int32ï¼ˆå³ runeï¼‰} è¾“å‡ºï¼š 12345s çš„ç±»å‹æ˜¯: stringreflect.TypeOf(s): strings çš„å­—èŠ‚è¡¨ç¤º: [72 101 108 108 111 44 32 228 184 150 231 149 140 32 240 159 152 138]s çš„ rune è¡¨ç¤º: [72 101 108 108 111 44 32 19990 30028 32 128522]rune ç±»å‹: int32 ğŸ“Œ å…³é”®ç»“è®ºï¼š é—®é¢˜ ç­”æ¡ˆ string çš„ç±»å‹æ˜¯ rune å—ï¼Ÿ âŒ ä¸æ˜¯ string çš„ç±»å‹æ˜¯ []rune å—ï¼Ÿ âŒ ä¸æ˜¯ string çš„åº•å±‚æ˜¯ []byte å—ï¼Ÿ âœ… æ˜¯çš„ï¼ˆUTF-8 ç¼–ç å­—èŠ‚ï¼‰ èƒ½ç›´æ¥å¯¹ string åšå­—ç¬¦çº§æ“ä½œå—ï¼Ÿ âš ï¸ åªèƒ½æŒ‰å­—èŠ‚ç´¢å¼•ï¼ˆs[i] è¿”å› byteï¼‰ï¼›æŒ‰å­—ç¬¦æ“ä½œéœ€è½¬ []rune æˆ–ç”¨ range ğŸ’¡ ç±»æ¯”ç†è§£ï¼š æƒ³è±¡ä¸€æœ¬ä¹¦ï¼š string æ˜¯æ•´æœ¬ä¹¦ï¼ˆä¸å¯æ’•é¡µï¼‰ åº•å±‚ []byte æ˜¯æŒ‰ UTF-8 ç¼–ç å°å‡ºçš„æ‰€æœ‰å¢¨ç‚¹ï¼ˆå­—èŠ‚ï¼‰ []rune æ˜¯è¿™æœ¬ä¹¦çš„å­—ç¬¦æ¸…å•ï¼ˆæ¯ä¸ªæ±‰å­—ã€å­—æ¯ã€Emoji ç®— 1 é¡¹ï¼‰ rune æ˜¯æ¸…å•ä¸­çš„æŸä¸€ä¸ªå­—ç¬¦çš„ç¼–å·ï¼ˆUnicode ç ç‚¹ï¼‰ Go è®©ä½ æ—¢èƒ½é«˜æ•ˆæ“ä½œâ€œå¢¨ç‚¹â€ï¼ˆbyteï¼‰ï¼Œä¹Ÿèƒ½å®‰å…¨æ“ä½œâ€œå­—ç¬¦â€ï¼ˆruneï¼‰ï¼Œè€Œ string æ˜¯äºŒè€…çš„æ¡¥æ¢ã€‚ âš ï¸ æ³¨æ„ï¼šstring åº•å±‚å­˜å‚¨æ˜¯ UTF-8 ç¼–ç çš„å­—èŠ‚åºåˆ—ï¼Œä½† rune åº•å±‚å­˜å‚¨æ˜¯ç ç‚¹ï¼ˆUnicode ç ç‚¹ï¼‰ã€‚éå¸¸å¥½çš„é—®é¢˜ï¼è¿™è§¦åŠäº† Golangæ–‡æœ¬å¤„ç†çš„æ ¸å¿ƒè®¾è®¡æ€æƒ³ã€‚æˆ‘ä»¬æ¥é€å±‚æ‹†è§£ï¼Œæ¸…æ™°ç†è§£ string å’Œ rune çš„åº•å±‚å­˜å‚¨æœ¬è´¨åŠäºŒè€…å…³ç³»ï¼š âœ… ä¸€å¥è¯æ€»ç»“ string å­˜çš„æ˜¯â€œç¼–ç åçš„å­—èŠ‚â€ï¼ˆUTF-8 bytesï¼‰ï¼›rune å­˜çš„æ˜¯â€œç¼–ç å‰çš„ç¼–å·â€ï¼ˆUnicode Code Pointï¼‰ã€‚å®ƒä»¬æ˜¯åŒä¸€å­—ç¬¦åœ¨ä¸åŒé˜¶æ®µçš„ä¸¤ç§è¡¨ç¤ºå½¢å¼ï¼šç ç‚¹ï¼ˆruneï¼‰ â†’ UTF-8 ç¼–ç  â†’ å­—èŠ‚åºåˆ—ï¼ˆstring çš„å†…å®¹ï¼‰ ğŸ” ä¸€ã€runeï¼šUnicode çš„â€œèº«ä»½è¯å·â€ï¼ˆæŠ½è±¡æ¦‚å¿µ + å…·ä½“å­˜å‚¨ï¼‰1. è¯­ä¹‰ä¸Šï¼šrune = Unicode ç ç‚¹ï¼ˆCode Pointï¼‰ æ¯ä¸ªå­—ç¬¦åœ¨ Unicode æ ‡å‡†ä¸­æœ‰ä¸€ä¸ªå”¯ä¸€ç¼–å·ï¼Œç§°ä¸º Code Pointï¼Œè®°ä½œ U+XXXXã€‚ U+0041 â†’ 'A' U+4E16 â†’ 'ä¸–' U+1F600 â†’ 'ğŸ˜€' 2. å­˜å‚¨ä¸Šï¼šrune = int32ï¼ˆ4 å­—èŠ‚æ•´æ•°ï¼‰ Go ç”¨ int32 ç±»å‹ç›´æ¥å­˜å‚¨è¿™ä¸ªç¼–å·çš„æ•°å€¼ï¼š1234var r rune = 'ä¸–'fmt.Printf(&quot;%d\\n&quot;, r) // â†’ 19990 ï¼ˆåè¿›åˆ¶ï¼‰fmt.Printf(&quot;%x\\n&quot;, r) // â†’ 4e16 ï¼ˆåå…­è¿›åˆ¶ = 0x4E16ï¼‰fmt.Printf(&quot;%T\\n&quot;, r) // â†’ int32 âœ… æ‰€ä»¥ï¼š**rune çš„åº•å±‚å°±æ˜¯ä¸€ä¸ª 4 å­—èŠ‚çš„æ•´æ•°ï¼Œå€¼ = Unicode ç ç‚¹ç¼–å·ã€‚å®ƒä¸åŒ…å«ä»»ä½•ç¼–ç ä¿¡æ¯**ï¼Œæ˜¯â€œçº¯å‡€â€çš„å­—ç¬¦æ ‡è¯†ã€‚ ğŸ“Œ æ³¨æ„ï¼šrune å­˜çš„æ˜¯ç ç‚¹å€¼ï¼Œä¸æ˜¯ UTF-8/UTF-16 å­—èŠ‚ï¼ç¼–ç æ˜¯è¾“å‡ºæ—¶æ‰å‘ç”Ÿçš„ã€‚ ğŸ” äºŒã€stringï¼šUTF-8 çš„â€œå¿«é€’åŒ…è£¹â€ï¼ˆå­—èŠ‚åºåˆ—ï¼‰1. è¯­ä¹‰ä¸Šï¼šstring = UTF-8 ç¼–ç åçš„å­—èŠ‚æµ Go è§„å®šï¼šå­—ç¬¦ä¸²å­—é¢é‡ï¼ˆå¦‚ &quot;ä¸–&quot;ï¼‰è‡ªåŠ¨æŒ‰ UTF-8 ç¼–ç ã€‚ string ç±»å‹ä¸è®°å½•ç¼–ç æ–¹å¼ï¼Œä½†å®ƒçº¦å®šä¿—æˆä¸”å¼ºåˆ¶ä½¿ç”¨ UTF-8ï¼ˆGo ä¹‹çˆ¶ Rob Pike å¤šæ¬¡å¼ºè°ƒï¼‰ã€‚ 2. å­˜å‚¨ä¸Šï¼šstring = åªè¯»çš„ []byteï¼ˆåº•å±‚æ˜¯å­—èŠ‚æ•°ç»„ï¼‰123s := &quot;ä¸–&quot;fmt.Printf(&quot;%T\\n&quot;, s) // â†’ stringfmt.Printf(&quot;%v\\n&quot;, []byte(s)) // â†’ [228 184 150] ï¼ˆ3 ä¸ªå­—èŠ‚ï¼‰ è€Œè¿™ 3 ä¸ªå­—èŠ‚ [228, 184, 150] æ­£æ˜¯ U+4E16ï¼ˆå³ 19990ï¼‰çš„ UTF-8 ç¼–ç ç»“æœï¼š åå…­è¿›åˆ¶å­—èŠ‚ äºŒè¿›åˆ¶ï¼ˆ8 ä½ï¼‰ UTF-8 ä¸‰å­—èŠ‚æ¨¡æ¿ 0xE4 11100100 1110xxxxï¼ˆé¦–å­—èŠ‚ï¼‰ 0xB8 10111000 10xxxxxxï¼ˆç»­å­—èŠ‚ï¼‰ 0x96 10010110 10xxxxxxï¼ˆç»­å­—èŠ‚ï¼‰ æ‹¼æ¥æœ‰æ•ˆä½ï¼š0100 111000 010110 â†’ 0100111000010110â‚‚ = 0x4E16 = 19990 âœ… éªŒè¯ï¼š 1234b := []byte{0xE4, 0xB8, 0x96}s2 := string(b)r2 := []rune(s2)[0]fmt.Println(r2 == 'ä¸–') // â†’ true ğŸ“Œ æ‰€ä»¥ï¼š**string ä¸å­˜â€œå­—ç¬¦â€ï¼Œåªå­˜â€œå­—ç¬¦ç» UTF-8 ç¼–ç åçš„å­—èŠ‚â€**ã€‚ ğŸ” ä¸‰ã€äºŒè€…è½¬æ¢ï¼šç¼–ç ï¼ˆEncodeï¼‰ä¸è§£ç ï¼ˆDecodeï¼‰ æ“ä½œ è¿‡ç¨‹ æ˜¯å¦åˆ†é…å†…å­˜ ç¤ºä¾‹ rune â†’ string UTF-8 ç¼–ç ï¼šå°†ç ç‚¹ U+XXXX æŒ‰ UTF-8 è§„åˆ™è½¬ä¸º 1~4 å­—èŠ‚ âœ… æ˜¯ï¼ˆæ–°å»ºå­—èŠ‚æ•°ç»„ï¼‰ string('ä¸–') â†’ &quot;ä¸–&quot;ï¼ˆ3 å­—èŠ‚ï¼‰ string â†’ rune UTF-8 è§£ç ï¼šå°†å­—èŠ‚æµæŒ‰ UTF-8 è§„åˆ™è§£æä¸ºç ç‚¹åºåˆ— âœ… æ˜¯ï¼ˆæ–°å»º int32 æ•°ç»„ï¼‰ []rune(&quot;ä¸–&quot;) â†’ [19990] ğŸ”„ è½¬æ¢ç¤ºæ„å›¾ï¼š123rune (ç ç‚¹) string (UTF-8 å­—èŠ‚) 19990 â”€â”€UTF-8ç¼–ç â”€â”€â–º [0xE4, 0xB8, 0x96]U+4E16 'ä¸–' â—„â”€UTF-8è§£ç â”€â”€â”€ &quot;ä¸–&quot; ğŸ”” è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ len(&quot;ä¸–&quot;) == 3ï¼ˆå­—èŠ‚æ•°ï¼‰ï¼Œè€Œ len([]rune(&quot;ä¸–&quot;)) == 1ï¼ˆå­—ç¬¦æ•°ï¼‰ã€‚ ğŸ§© å››ã€ç±»æ¯”ç†è§£ï¼ˆå¿«é€’ç³»ç»Ÿï¼‰ æ¦‚å¿µ ç°å®ç±»æ¯” è®¡ç®—æœºå¯¹åº” Unicode ç ç‚¹ å•†å“çš„å”¯ä¸€ SKU ç¼–å·ï¼ˆå¦‚ SKU-4E16ï¼‰ runeï¼ˆå€¼ = 0x4E16ï¼‰ UTF-8 ç¼–ç  æŒ‰è§„åˆ™æŠŠ SKU æ‰“åŒ…æˆå¿«é€’åŒ…è£¹ï¼ˆè´´é¢å•ã€è£…ç®±ï¼‰ ç¼–ç ç®—æ³• â†’ å­—èŠ‚åºåˆ— string å¿«é€’åŒ…è£¹æœ¬èº«ï¼ˆä¸å¯æ‹†ï¼Œå†…å®¹æ˜¯æ‰“åŒ…åçš„ç‰©å“ï¼‰ åªè¯»çš„ UTF-8 å­—èŠ‚åºåˆ— []rune è®¢å•æ¸…å•ï¼ˆåˆ—å‡ºæ‰€æœ‰ SKU ç¼–å·ï¼‰ ç ç‚¹æ•°ç»„ï¼ˆint32 åˆ‡ç‰‡ï¼‰ ä½ æƒ³çŸ¥é“åŒ…è£¹é‡Œæ˜¯ä»€ä¹ˆå•†å“ï¼Ÿâ†’ æ‹†åŒ…ï¼ˆè§£ç ï¼‰ â†’ å¾—åˆ° SKU æ¸…å•ï¼ˆ[]runeï¼‰ ä½ æƒ³å¯„ä¸€ä¸ªå•†å“ï¼Ÿâ†’ æ‰“åŒ…ï¼ˆç¼–ç ï¼‰ â†’ ç”ŸæˆåŒ…è£¹ï¼ˆstringï¼‰ âš ï¸ é‡è¦è¡¥å……ï¼šrune å¹¶éæ€»æ˜¯â€œä¸€ä¸ªç”¨æˆ·å¯è§å­—ç¬¦â€ rune = ä¸€ä¸ª Unicode ç ç‚¹ï¼Œä½†ä¸€ä¸ªè§†è§‰å­—ç¬¦ï¼ˆGraphemeï¼‰å¯èƒ½ç”±å¤šä¸ªç ç‚¹ç»„æˆï¼š1234s := &quot;Ã©&quot; // å¯ç”¨ä¸¤ç§æ–¹å¼è¡¨ç¤ºï¼š// 1. U+00E9ï¼ˆé¢„ç»„åˆå­—ç¬¦ï¼‰ â†’ 1 ä¸ª rune// 2. U+0065 + U+0301ï¼ˆe + é‡éŸ³ç¬¦ï¼‰ â†’ 2 ä¸ª runefmt.Println(len([]rune(&quot;Ã©&quot;))) // å¯èƒ½æ˜¯ 1 æˆ– 2ï¼ â†’ è¿™å±äº Unicode å½’ä¸€åŒ–ï¼ˆNormalizationï¼‰ é—®é¢˜ï¼Œéœ€ç”¨ golang.org/x/text/unicode/norm å¤„ç†ã€‚ âœ… ç»ˆææ€»ç»“è¡¨ ç‰¹æ€§ rune string æœ¬è´¨ int32 ç±»å‹åˆ«å å†…ç½®ä¸å¯å˜ç±»å‹ å­˜å‚¨å†…å®¹ Unicode ç ç‚¹ç¼–å·ï¼ˆæ•´æ•°å€¼ï¼‰ UTF-8 ç¼–ç åçš„å­—èŠ‚åºåˆ— å†…å­˜å ç”¨ å›ºå®š 4 å­—èŠ‚/ä¸ª æŒ‰ UTF-8 åŠ¨æ€ï¼š1~4 å­—èŠ‚/å­—ç¬¦ æ“ä½œå•ä½ å­—ç¬¦ï¼ˆç ç‚¹çº§ï¼‰ å­—èŠ‚ï¼ˆä½† range å¯è§£ç ä¸º runeï¼‰ èƒ½å¦ç´¢å¼• r[0] â†’ int32 s[0] â†’ byteï¼ˆé¦–å­—èŠ‚ï¼Œéå­—ç¬¦ï¼ï¼‰ å…¸å‹ç”¨é€” å­—ç¬¦å¤„ç†ã€NLPã€å›½é™…åŒ– æ–‡æœ¬å­˜å‚¨ã€I/Oã€API äº¤äº’ ğŸ’¡ è®°ä½è¿™ä¸ªé»„é‡‘æ³•åˆ™ï¼š rune æ˜¯å­—ç¬¦çš„â€œåå­—â€ï¼ˆç ç‚¹ï¼‰ï¼Œstring æ˜¯å­—ç¬¦çš„â€œå£°éŸ³â€ï¼ˆUTF-8 å­—èŠ‚æµï¼‰ã€‚Go è®©ä½ åœ¨éœ€è¦â€œå«åå­—â€æ—¶ç”¨ runeï¼Œéœ€è¦â€œå‘å£°éŸ³â€æ—¶ç”¨ stringï¼Œå„å¸å…¶èŒï¼Œå®‰å…¨é«˜æ•ˆã€‚ ç†è§£ä»¥ä¸Šæœºåˆ¶ï¼Œå°±å¯ä»¥é¿å¼€å¾ˆå¤šstringã€byteã€runeçš„é”™è¯¯ç”¨æ³•å’Œå®ç°é—®é¢˜ï¼Œä»è€Œæå‡ä»£ç çš„æ•ˆç‡å’Œå¯è¯»æ€§ã€‚","link":"/ecf03ec5.html"}],"tags":[{"name":"AI","slug":"AI","link":"/tags/AI/"},{"name":"Agent","slug":"Agent","link":"/tags/Agent/"},{"name":"stable-diffusion-webui","slug":"stable-diffusion-webui","link":"/tags/stable-diffusion-webui/"},{"name":"clang","slug":"clang","link":"/tags/clang/"},{"name":"type","slug":"type","link":"/tags/type/"},{"name":"Cloud-Native","slug":"Cloud-Native","link":"/tags/Cloud-Native/"},{"name":"K8S","slug":"K8S","link":"/tags/K8S/"},{"name":"kebernetes","slug":"kebernetes","link":"/tags/kebernetes/"},{"name":"Cloud-Native-Framework","slug":"Cloud-Native-Framework","link":"/tags/Cloud-Native-Framework/"},{"name":"Cloud-Distributed","slug":"Cloud-Distributed","link":"/tags/Cloud-Distributed/"},{"name":"Distributed-Systems","slug":"Distributed-Systems","link":"/tags/Distributed-Systems/"},{"name":"K8S-Build","slug":"K8S-Build","link":"/tags/K8S-Build/"},{"name":"mysql8.x","slug":"mysql8-x","link":"/tags/mysql8-x/"},{"name":"mysql8.0","slug":"mysql8-0","link":"/tags/mysql8-0/"},{"name":"mysql","slug":"mysql","link":"/tags/mysql/"},{"name":"utf8mb4","slug":"utf8mb4","link":"/tags/utf8mb4/"},{"name":"utf8mb4_0900_ai_ci","slug":"utf8mb4-0900-ai-ci","link":"/tags/utf8mb4-0900-ai-ci/"},{"name":"utf8mb4_general_ci","slug":"utf8mb4-general-ci","link":"/tags/utf8mb4-general-ci/"},{"name":"GIT","slug":"GIT","link":"/tags/GIT/"},{"name":"GPG","slug":"GPG","link":"/tags/GPG/"},{"name":"GPG2","slug":"GPG2","link":"/tags/GPG2/"},{"name":"GUI","slug":"GUI","link":"/tags/GUI/"},{"name":"macro","slug":"macro","link":"/tags/macro/"},{"name":"io","slug":"io","link":"/tags/io/"},{"name":"format","slug":"format","link":"/tags/format/"},{"name":"nanochat","slug":"nanochat","link":"/tags/nanochat/"},{"name":"nanochat-zh_CN","slug":"nanochat-zh-CN","link":"/tags/nanochat-zh-CN/"},{"name":"ansi-lib","slug":"ansi-lib","link":"/tags/ansi-lib/"},{"name":"JavaScript","slug":"JavaScript","link":"/tags/JavaScript/"},{"name":"JS","slug":"JS","link":"/tags/JS/"},{"name":"Go","slug":"Go","link":"/tags/Go/"},{"name":"go-pprof","slug":"go-pprof","link":"/tags/go-pprof/"},{"name":"changelog","slug":"changelog","link":"/tags/changelog/"},{"name":"History","slug":"History","link":"/tags/History/"},{"name":"Go-chain-operation","slug":"Go-chain-operation","link":"/tags/Go-chain-operation/"},{"name":"GOæ–¹æ³•å€¼","slug":"GOæ–¹æ³•å€¼","link":"/tags/GO%E6%96%B9%E6%B3%95%E5%80%BC/"},{"name":"func","slug":"func","link":"/tags/func/"},{"name":"Go Summary notes","slug":"Go-Summary-notes","link":"/tags/Go-Summary-notes/"},{"name":"goroutine","slug":"goroutine","link":"/tags/goroutine/"},{"name":"Go-init()","slug":"Go-init","link":"/tags/Go-init/"},{"name":"interface","slug":"interface","link":"/tags/interface/"},{"name":"JSON","slug":"JSON","link":"/tags/JSON/"},{"name":"Go(new,make,struct{})","slug":"Go-new-make-struct","link":"/tags/Go-new-make-struct/"},{"name":"pointer","slug":"pointer","link":"/tags/pointer/"},{"name":"Go-Polymorphism","slug":"Go-Polymorphism","link":"/tags/Go-Polymorphism/"},{"name":"Go(map)","slug":"Go-map","link":"/tags/Go-map/"},{"name":"Go null judge","slug":"Go-null-judge","link":"/tags/Go-null-judge/"},{"name":"Go-Printf","slug":"Go-Printf","link":"/tags/Go-Printf/"},{"name":"reflectåå°„","slug":"reflectåå°„","link":"/tags/reflect%E5%8F%8D%E5%B0%84/"},{"name":"sliceåˆ‡ç‰‡æœ¬è´¨","slug":"sliceåˆ‡ç‰‡æœ¬è´¨","link":"/tags/slice%E5%88%87%E7%89%87%E6%9C%AC%E8%B4%A8/"},{"name":"Go(string)","slug":"Go-string","link":"/tags/Go-string/"},{"name":"struct","slug":"struct","link":"/tags/struct/"},{"name":"switch","slug":"switch","link":"/tags/switch/"},{"name":"Go(Struct|Method|Receiver)","slug":"Go-Struct-Method-Receiver","link":"/tags/Go-Struct-Method-Receiver/"},{"name":"package time","slug":"package-time","link":"/tags/package-time/"},{"name":"typeå…³é”®è¯æ€»ç»“","slug":"typeå…³é”®è¯æ€»ç»“","link":"/tags/type%E5%85%B3%E9%94%AE%E8%AF%8D%E6%80%BB%E7%BB%93/"},{"name":"lua","slug":"lua","link":"/tags/lua/"},{"name":"php","slug":"php","link":"/tags/php/"},{"name":"laravel","slug":"laravel","link":"/tags/laravel/"},{"name":"laravel-artisan","slug":"laravel-artisan","link":"/tags/laravel-artisan/"},{"name":"cli","slug":"cli","link":"/tags/cli/"},{"name":"linux","slug":"linux","link":"/tags/linux/"},{"name":"centos7","slug":"centos7","link":"/tags/centos7/"},{"name":"systemd-service","slug":"systemd-service","link":"/tags/systemd-service/"},{"name":"chattr","slug":"chattr","link":"/tags/chattr/"},{"name":"OpenSSH","slug":"OpenSSH","link":"/tags/OpenSSH/"},{"name":"é…ç½®æ–‡ä»¶ä½“ç³»","slug":"é…ç½®æ–‡ä»¶ä½“ç³»","link":"/tags/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BD%93%E7%B3%BB/"},{"name":"firewalld","slug":"firewalld","link":"/tags/firewalld/"},{"name":"services","slug":"services","link":"/tags/services/"},{"name":"é˜²ç«å¢™","slug":"é˜²ç«å¢™","link":"/tags/%E9%98%B2%E7%81%AB%E5%A2%99/"},{"name":"debian","slug":"debian","link":"/tags/debian/"},{"name":"neofetch","slug":"neofetch","link":"/tags/neofetch/"},{"name":"rsync","slug":"rsync","link":"/tags/rsync/"},{"name":"banner","slug":"banner","link":"/tags/banner/"},{"name":"motd","slug":"motd","link":"/tags/motd/"},{"name":"rocky-linux","slug":"rocky-linux","link":"/tags/rocky-linux/"},{"name":"rocky-linux-tools","slug":"rocky-linux-tools","link":"/tags/rocky-linux-tools/"},{"name":"rocky","slug":"rocky","link":"/tags/rocky/"},{"name":"Ghostty","slug":"Ghostty","link":"/tags/Ghostty/"},{"name":"terminal","slug":"terminal","link":"/tags/terminal/"},{"name":"homebrew","slug":"homebrew","link":"/tags/homebrew/"},{"name":"macOS","slug":"macOS","link":"/tags/macOS/"},{"name":"oh-my-zsh","slug":"oh-my-zsh","link":"/tags/oh-my-zsh/"},{"name":"omz","slug":"omz","link":"/tags/omz/"},{"name":"zsh","slug":"zsh","link":"/tags/zsh/"},{"name":"hexo","slug":"hexo","link":"/tags/hexo/"},{"name":"CDN","slug":"CDN","link":"/tags/CDN/"},{"name":"nginx","slug":"nginx","link":"/tags/nginx/"},{"name":"Google","slug":"Google","link":"/tags/Google/"},{"name":"VIM","slug":"VIM","link":"/tags/VIM/"},{"name":"VIM Author","slug":"VIM-Author","link":"/tags/VIM-Author/"},{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","link":"/tags/%E7%94%9F%E6%B4%BB/"},{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","link":"/tags/%E6%97%A5%E5%B8%B8/"},{"name":"äººç”Ÿ","slug":"äººç”Ÿ","link":"/tags/%E4%BA%BA%E7%94%9F/"},{"name":"è½¬è½½","slug":"è½¬è½½","link":"/tags/%E8%BD%AC%E8%BD%BD/"},{"name":"travel","slug":"travel","link":"/tags/travel/"},{"name":"daily","slug":"daily","link":"/tags/daily/"},{"name":"Movie","slug":"Movie","link":"/tags/Movie/"},{"name":"Note The Legend of 1900","slug":"Note-The-Legend-of-1900","link":"/tags/Note-The-Legend-of-1900/"},{"name":"postgresql","slug":"postgresql","link":"/tags/postgresql/"},{"name":"postgressql-engine","slug":"postgressql-engine","link":"/tags/postgressql-engine/"},{"name":"GGUF","slug":"GGUF","link":"/tags/GGUF/"},{"name":"Text2SQL","slug":"Text2SQL","link":"/tags/Text2SQL/"},{"name":"Python","slug":"Python","link":"/tags/Python/"},{"name":"deepseek","slug":"deepseek","link":"/tags/deepseek/"},{"name":"GRPO","slug":"GRPO","link":"/tags/GRPO/"},{"name":"K3S-Build","slug":"K3S-Build","link":"/tags/K3S-Build/"},{"name":"Algorithm","slug":"Algorithm","link":"/tags/Algorithm/"},{"name":"history-of-programing","slug":"history-of-programing","link":"/tags/history-of-programing/"},{"name":"Drawing","slug":"Drawing","link":"/tags/Drawing/"},{"name":"painting","slug":"painting","link":"/tags/painting/"},{"name":"Controlnet","slug":"Controlnet","link":"/tags/Controlnet/"},{"name":"SD","slug":"SD","link":"/tags/SD/"},{"name":"Agent-framework","slug":"Agent-framework","link":"/tags/Agent-framework/"},{"name":"AIGC","slug":"AIGC","link":"/tags/AIGC/"},{"name":"openssl","slug":"openssl","link":"/tags/openssl/"},{"name":"DDD","slug":"DDD","link":"/tags/DDD/"},{"name":"Golang","slug":"Golang","link":"/tags/Golang/"},{"name":"Microservices","slug":"Microservices","link":"/tags/Microservices/"},{"name":"Infra","slug":"Infra","link":"/tags/Infra/"},{"name":"database","slug":"database","link":"/tags/database/"},{"name":"Framework","slug":"Framework","link":"/tags/Framework/"},{"name":"rune","slug":"rune","link":"/tags/rune/"}],"categories":[{"name":"AI","slug":"AI","link":"/categories/AI/"},{"name":"clang","slug":"clang","link":"/categories/clang/"},{"name":"Agent","slug":"AI/Agent","link":"/categories/AI/Agent/"},{"name":"Database","slug":"Database","link":"/categories/Database/"},{"name":"GIT","slug":"GIT","link":"/categories/GIT/"},{"name":"Go","slug":"Go","link":"/categories/Go/"},{"name":"lua","slug":"lua","link":"/categories/lua/"},{"name":"php","slug":"php","link":"/categories/php/"},{"name":"linux","slug":"linux","link":"/categories/linux/"},{"name":"macOS","slug":"macOS","link":"/categories/macOS/"},{"name":"reprinted-articles","slug":"reprinted-articles","link":"/categories/reprinted-articles/"},{"name":"daily","slug":"daily","link":"/categories/daily/"},{"name":"centos","slug":"linux/centos","link":"/categories/linux/centos/"},{"name":"debian","slug":"linux/debian","link":"/categories/linux/debian/"},{"name":"note","slug":"daily/note","link":"/categories/daily/note/"},{"name":"cloud","slug":"cloud","link":"/categories/cloud/"},{"name":"javascript","slug":"javascript","link":"/categories/javascript/"},{"name":"python","slug":"python","link":"/categories/python/"},{"name":"AIGC","slug":"AI/AIGC","link":"/categories/AI/AIGC/"},{"name":"Algo","slug":"AI/Algo","link":"/categories/AI/Algo/"},{"name":"tools","slug":"linux/tools","link":"/categories/linux/tools/"},{"name":"architecture","slug":"architecture","link":"/categories/architecture/"}]}